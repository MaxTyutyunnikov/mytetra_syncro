<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В PlatformIO очень неоднозначно сделаны горячие клавиши сборки и заливки проекта. Вначае кажется, что имеется отдельное клавиатурное сочетание для сборки прошивки, и отдельное клавиатурное сочетание для заливки прошивки. И поэтому кажется, что просто так невозможно сделать горячую клавишу, которая бы вначале собирала проект, если он был изменен, а потом заливала его.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На первый взгляд, назначение клавиш предельно простое и понятное:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ctrl + Alt + B - сборка прошивки микроконтроллера (Build)</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ctrl + Alt + U - заливка прошивки в микроконтроллер (Upload)</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В копилку этого, по данно ссылке:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">https://marketplace.visualstudio.com/items?itemName=formulahendry.platformio</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">говорится, что есть комбинированное действие Сборка + Заливка + Мониторинг.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Combined </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600;">Build</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">, </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600;">Upload</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> and </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600;">Open Serial Monitor</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> with one command</span><span style=" font-family:'Sans'; font-size:12pt;">: Click the </span><span style=" font-family:'monospace'; font-size:12pt;">Right Arrow</span><span style=" font-family:'Sans'; font-size:12pt;"> icon in the Status Bar at the bottom, or use shortcut </span><span style=" font-family:'monospace'; font-size:12pt;">Ctrl+Alt+A</span><span style=" font-family:'Sans'; font-size:12pt;">, or press </span><span style=" font-family:'monospace'; font-size:12pt;">F1</span><span style=" font-family:'Sans'; font-size:12pt;"> and then select/type </span><span style=" font-family:'monospace'; font-size:12pt; background-color:#deddda;">PlatformIO: Build, Upload and Open Serial Monitor</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">Build</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">Upload</span><span style=" font-family:'Sans'; font-size:12pt;"> and </span><span style=" font-family:'monospace'; font-size:12pt;">Open Serial Monitor</span><span style=" font-family:'Sans'; font-size:12pt;"> will be run one by one.</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1664963254srgrbegcka.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Однако такого действия в PlatformIO Core 6.1.4 + Home 3.4.3 небыло обнаружено. И клавиши с такой стрелкой тоже нет. Можно ли подобное действие создать - непонятно. В любом случае необходимо действие Сборка + Заливка, а не Сборка + Заливка + Мониторинг. И как его сконфигурировать не совсем понятно.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">* * *</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Однако, при любых особенностях среды разработки хотелось бы иметь горячую клавишу, которая бы собирала проект, если он был изменен, а потом заливала бы его в микроконтроллер. Есть ли такая горячая клавиша в PlatformIO? Да!</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Фишка в том, что сочетание <span style=" font-family:'FreeMono'; color:#6a1009;">Ctrl+Alt+U</span> - это не просто заливка прошивки в микроконтроллер. Это действие делает именно то что нужно: вначале компилирует проект, если он был изменен, и потом заливает полученную прошивку в контроллер. Проблема в том, что в документации нигде на эту особенность не указывается.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Увидеть, что компиляция перед заливкой произошла, можно в выхлопе задачи Upload. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Building in release mode</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Compiling .pio/build/bluepill_f103c8/src/main.o</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Linking .pio/build/bluepill_f103c8/firmware.elf</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Building in release mode</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Checking size .pio/build/bluepill_f103c8/firmware.elf</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>