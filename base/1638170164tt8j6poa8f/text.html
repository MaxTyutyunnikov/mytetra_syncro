<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Массовая настройка и установка значений пинов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вместо медленного вызова функций digitalWrite() для установки значения каждого пина по отдельности, можно устанавливать значения цифровых пинов сразу для группы из 8 пинов. Делается это следующим кодом:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">void setup()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">  DDRD = B11111111; // Установка всех ножек порта D (digital 7~0) в режим OUTPUT</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">void loop()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">  PORTD = B11111111; // Установка значений всех пинов порта D (digital 7~0) в HIGH</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">  PORTD = B00000000; // Установка значений всех пинов порта D (digital 7~0) в LOW</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Настройка и установка единичных пинов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пример, как установить отдельный вывод PB5 как выход:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">DDRB |= (1 &lt;&lt; 5); // вывод PB5 как выход (OUTPUT)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пример периодической установки нуля и единицы на выводе PB5:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">while (1) {</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">    PORTB &amp;= ~(1 &lt;&lt; 5); // низкий уровень (0) на выводе PB5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">    _delay_ms(1000);    // задержка 1000 миллисекунд </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">    PORTB |= (1 &lt;&lt; 5);  // высокий уровень (1) на выводе PB5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">    _delay_ms(1000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:15pt; font-weight:600;">Обозначения портов и управляющих регистров</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">Каждый порт микроконтроллера AVR (обычно имеют имена A, B и иногда C или даже D) имеет 8 разрядов, каждый из которых привязан к определенной ножке корпуса. Каждый порт имеет три специальных регистра </span><span style=" font-weight:600;">DDRx</span>, <span style=" font-weight:600;">PORTx</span> и <span style=" font-weight:600;">PINx</span>, где <span style=" font-weight:600;">x</span> соответствует букве порта A, B, C или D. Кроме того, каждый бит порта далее обозначается буквой <span style=" font-weight:600;">n</span>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Назначение регистров:<span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">DDRx</span><span style=" color:#111111; background-color:#ffffff;"> – Настройка разрядов порта </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">x</span><span style=" color:#111111; background-color:#ffffff;"> на вход или выход.</span><span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTx</span><span style=" color:#111111; background-color:#ffffff;"> – Управление состоянием выходов порта </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">x</span><span style=" color:#111111; background-color:#ffffff;"> (если соответствующий разряд настроен как выход), или подключением внутреннего pull-up резистора (если соответствующий разряд настроен как вход).</span><span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINx</span><span style=" color:#111111; background-color:#ffffff;"> – Чтение логических уровней разрядов порта </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">x</span><span style=" color:#111111; background-color:#ffffff;">.</span><span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINхn</span><span style=" color:#111111; background-color:#ffffff;"> – это регистр чтения. Из него можно только читать. В регистре </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINxn</span><span style=" color:#111111; background-color:#ffffff;"> содержится информация о реальном текущем логическом уровне на выводах порта. Вне зависимости от настроек порта. Так что если хотим узнать что у нас на входе — читаем соответствующий бит регистра </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINxn</span><span style=" color:#111111; background-color:#ffffff;">. Причем существует две границы: граница гарантированного нуля и граница гарантированной единицы — пороги за которыми мы можем однозначно четко определить текущий логический уровень. Для пятивольтового питания это 1.4 и 1.8 вольт соответственно. То есть при снижении напряжения от максимума до минимума бит в регистре </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINx</span><span style=" color:#111111; background-color:#ffffff;"> переключится с 1 на 0 только при снижении напряжение ниже 1.4 вольт, а вот когда напряжение нарастает от минимума до максимума переключение бита с 0 на 1 будет только по достижении напряжения в 1.8 вольта. То есть возникает гистерезис переключения с 0 на 1, что исключает хаотичные переключения под действием помех и наводок, а также исключает ошибочное считывание логического уровня между порогами переключения.</span><span style=" color:#111111;"><br /><br /></span><span style=" color:#111111; background-color:#ffffff;">При снижении напряжения питания, разумеется, эти пороги также снижаются.</span><span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">DDRxn</span><span style=" color:#111111; background-color:#ffffff;"> – это регистр направления порта. Порт в конкретный момент времени может быть либо входом либо выходом (но для состояния битов PINxn это значения не имеет. Читать из </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PINxn</span><span style=" color:#111111; background-color:#ffffff;"> реальное значение можно всегда).</span><span style=" color:#111111;"><br /><br /></span><span style=" font-style:italic; color:#111111; background-color:#ffffff;">DDRxy</span><span style=" color:#111111; background-color:#ffffff;"> = 0 – вывод работает как ВХОД.</span><span style=" color:#111111;"><br /><br /></span><span style=" font-style:italic; color:#111111; background-color:#ffffff;">DDRxy</span><span style=" color:#111111; background-color:#ffffff;"> = 1 – вывод работает на ВЫХОД.</span><span style=" color:#111111;"><br /><br /></span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" color:#111111; background-color:#ffffff;"> – режим управления состоянием вывода. Когда мы настраиваем вывод на вход, то от </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTх</span><span style=" color:#111111; background-color:#ffffff;"> зависит тип входа (Hi-Z или PullUp, об этом чуть ниже).</span><span style=" color:#111111;"><br /><br /></span><span style=" color:#111111; background-color:#ffffff;">Когда ножка настроена на выход, то значение соответствующего бита в регистре </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTx</span><span style=" color:#111111; background-color:#ffffff;"> определяет состояние вывода. Если </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" color:#111111; background-color:#ffffff;">=1 то на выводе лог.1, если </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" color:#111111; background-color:#ffffff;">=0 то на выводе лог.0.</span><span style=" color:#111111;"><br /><br /></span><span style=" color:#111111; background-color:#ffffff;">Когда ножка настроена на вход, то если </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" color:#111111; background-color:#ffffff;">=0, то вывод в режиме Hi-Z. Если </span><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" color:#111111; background-color:#ffffff;">=1 то вывод в режиме PullUpс подтяжкой резистором в 100к до питания.</span><span style=" color:#111111;"><br /><br /></span><span style=" color:#111111; background-color:#ffffff;">Таблица. Конфигурация выводов портов.</span><span style=" color:#111111;"><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="1" style=" border-style:solid; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" align="center" width="80%" cellspacing="-1" cellpadding="0">
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#111111; background-color:#ffffff;">DDRxn</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#111111; background-color:#ffffff;">I/O</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#111111; background-color:#ffffff;">Comment</span></p></td></tr>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">0</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">0</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">(Input) Вход</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">Высокоимпендансный вход. (Не рекомендуется использовать, так как могут наводится наводки от питания)</span></p></td></tr>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">0</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">(Input) Вход</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">Подтянуто внутренне сопротивление.</span></p></td></tr>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">0</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;"> (Output) Выход </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">На выходе низкий уровень.</span></p></td></tr>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1</p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;"> (Output) Выход </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#111111; background-color:#ffffff;">На выходе высокий уровень.</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Режимы входов и выходов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-style:italic; color:#111111; background-color:#ffffff;">Вход </span><span style=" font-size:16px; font-weight:600; font-style:italic; color:#111111; background-color:#ffffff;">Hi-Z</span><span style=" font-size:16px; font-style:italic; color:#111111; background-color:#ffffff;"> — режим высокоимпендансного входа.</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> Этот режим включен по умолчанию. Все ключи разомкнуты, а сопротивление порта очень велико. В принципе, по сравнению с другими режимами, можно его считать бесконечностью. То есть электрически вывод как бы вообще никуда не подключен и ни на что не влияет. Но! При этом он постоянно считывает свое состояние в регистр </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PINn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> и мы всегда можем узнать что у нас на входе — единица или ноль. Этот режим хорош для прослушивания какой либо шины данных, т.к. он не оказывает на шину никакого влияния. А что будет если вход висит в воздухе? А в этом случае напряжение будет на нем скакать в зависимости от внешних наводок, электромагнитных помех и вообще от фазы луны и погоды на Марсе (идеальный способ нарубить случайных чисел!). Очень часто на порту в этом случае нестабильный синус 50Гц — наводка от сети 220В, а в регистре </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PINn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> будет меняться 0 и 1 с частотой около 50Гц </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-style:italic; color:#111111; background-color:#ffffff;">Вход </span><span style=" font-size:16px; font-weight:600; font-style:italic; color:#111111; background-color:#ffffff;">PullUp</span><span style=" font-size:16px; font-style:italic; color:#111111; background-color:#ffffff;"> — вход с подтяжкой.</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> При </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">DDRxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=0 и </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=1 замыкается ключ подтяжки и к линии подключается резистор в 100кОм, что моментально приводит не подключенную никуда линию в состояние лог.1. Цель подтяжки очевидна — не допустить хаотичного изменения состояния на входе под действием наводок. Но если на входе появится логический ноль (замыкание линии на землю кнопкой или другим микроконтроллером/микросхемой), то слабый 100кОмный резистор не сможет удерживать напряжение на линии на уровне лог.1 и на входе будет лог.0. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-style:italic; color:#111111; background-color:#ffffff;">Режим выхода.</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> Тут, думаю, все понятно — если нам надо выдать в порт лог.1, мы включаем порт на выход (</span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">DDRxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=1) и выдаем лог.1 (</span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=1) — при этом замыкается верхний ключ и на выводе появляется напряжение, близкое к питанию. А если надо лог.0, то включаем порт на выход (</span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">DDRxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=1) и выдаем лог.0 (</span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;">=1) — при этом открывается уже нижний вентиль, что дает на выводе около нуля вольт.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">Примечание</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px; color:#111111; background-color:#ffffff;">Еще одна фишка есть в новых атмеловских контроллерах: если порт настроен как выход </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">(DDRxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> = 1), то запись единицы в разряд </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PINxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> инвертирует соответствующий бит </span><span style=" font-size:16px; font-weight:600; color:#111111; background-color:#ffffff;">PORTxn</span><span style=" font-size:16px; color:#111111; background-color:#ffffff;"> и переключает ногу (0→1, 1→0). Это происходит, например, на ATMega48/88/168. Очень удобная штука.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:16px; color:#111111;"><br /></p></body></html>