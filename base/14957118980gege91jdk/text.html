<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Данную тему решил написать для новичков, кто не знает как пользоваться теми или иными командами и нужно например, добавить и удалить пользователя. Примеры в данной статье работают в Redhat/Fedora/Centos, но должны срабатывать и в других Linux. Данная тема очень простая, я долго думал стоит ли ее вообще писать и озвучивать. Но решил помочь юным админам.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans'; font-weight:600;">Внимание!</span><span style=" font-family:'Arial','DejaVu Sans';"> В некоторых дистрибутивах есть команда </span><span style=" font-family:'Arial','DejaVu Sans'; font-weight:600;">useradd</span><span style=" font-family:'Arial','DejaVu Sans';">, и есть команда </span><span style=" font-family:'Arial','DejaVu Sans'; font-weight:600;">adduser</span><span style=" font-family:'Arial','DejaVu Sans';">. Первая - это устаревшая команда (описанная в этой статье), и она создает пользователя с минимальным набором настроек. В качестве шелла она пропишет никакущий </span><span style=" font-family:'FreeMono','DejaVu Sans'; color:#6a1009;">/bin/sh</span><span style=" font-family:'Arial','DejaVu Sans';">, а без дополнительных опций не создаст даже директорию пользователя. На практике лучше всего пользоваться командой </span><span style=" font-family:'Arial','DejaVu Sans'; font-weight:600;">adduser</span><span style=" font-family:'Arial','DejaVu Sans';">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Сначала создадим пользователя и назначим мы ему пароль, делается это следующим образом: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;"># useradd имяПользователя</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;"># passwd имяПользователя</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователь будет создан, он будет прописан в файле <span style=" font-family:'FreeMono'; color:#6a1009;">/etc/passwd</span>, а его группа будет добавлена в файл <span style=" font-family:'FreeMono'; color:#6a1009;">/etc/group</span>. Хеш пароля будет записан в <span style=" font-family:'FreeMono'; color:#6a1009;">/etc/shadow</span>. Однако, как было сказано выше, команда useradd очень минималистична в своем поведении, и сделает только минимальные действия по созданию пользователя, не более того. Каталог пользователя без дополнительных опций данная команда не создаст.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Чтобы удалить пользователя </span><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;">имяПользователя</span><span style=" font-family:'Arial','DejaVu Sans';"> (без удаления домашнего каталога) выполните команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;"># userdel имяПользователя</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Чтобы удалить пользователя </span><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;">имяПользователя</span><span style=" font-family:'Arial','DejaVu Sans';"> c удалением домашнего каталога выполните команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;"># userdel -r имяПользователя</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">НО ПОМНИ! В директории могут храниться важные данные! Сделайте бэкапы.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Чтобы проверить реально ли мы удалили пользователя, можно выполнить команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New','DejaVu Sans'; color:#6a1009;"># find / -user имяПользователя -print</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial','DejaVu Sans';">Надеюсь, я помог юному поколению админов.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial';"><br /></p></body></html>