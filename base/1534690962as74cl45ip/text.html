<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Здесь рассказывается о демонстрационном приложении, в котором отображается стартовый экран (сплеш-скрин). Даны ссылки на исходный код.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сплеш-скрин представляет собой отдельный слой, на котором находятся три картинки: картинка заднего фона, которая выводится с повторением (замощением площади), картика приложения (в центре экрана) и картинка с логотипом производителя (внизу экрана).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сплеш-скрин выглядит так: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p align="center" style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1534690960vgf2b4i80r.png" width="180" height="320" /><a name="yui_3_17_2_1_1534688398798_534"></a><span style=" font-family:'Sans';"> </span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">Splash screen that loads instantaneous </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="block-ac089fc3cddaa225ec6a"></a><span style=" font-family:'Sans';">I</span><span style=" font-family:'Sans';">n order to make an app feel fast, it's important that the user sees something immediately when the app launches. I still see many apps that take several seconds to show anything, and it makes me wonder if the developer simply don't know how to achieve this instant gratification. Therefore I've decided to write a small post explaining how to get this done. If your app needs a lighting fast splash screen then this is for you.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:large; font-weight:600;">Executive summary</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">Launch an empty </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/src/com/cutehacks/examplesplashscreen/SplashActivity.java"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">activity</span></a><span style=" font-family:'Sans';">, with a custom theme where </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/res/values/styles.xml#L19"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">windowBackground</span></a><span style=" font-family:'Sans';"> is set. The activity launches the main activity after a short delay and then finishes.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-style:italic;">The git repo is </span><a href="https://github.com/Cutehacks/AndroidSplashScreen"><span style=" font-family:'Sans'; font-style:italic; text-decoration: underline; color:#0000ff;">available here</span></a><span style=" font-family:'Sans'; font-style:italic;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-style:italic;">You can install the </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/raw/master/apk/SplashScreen.apk"><span style=" font-family:'Sans'; font-style:italic; text-decoration: underline; color:#0000ff;">example here</span></a><span style=" font-family:'Sans'; font-style:italic;">.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:large; font-weight:600;">Do we need a splash screen?</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">Some of you might be thinking: </span><span style=" font-family:'Sans'; font-style:italic;">If you're so slow that you need a splash screen you're doing it wrong!</span><span style=" font-family:'Sans';"> I would normally agree, but there are two reasons why I think it's better to have a splash screen nonetheless. Firstly, inflating a layout on Android is slow, so no matter what you do there will be a delay before the user sees it. Secondly, the main activity often does a lot of stuff, so it is hard to keep it lean.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:large; font-weight:600;">It's all in the theme</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">The </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/src/com/cutehacks/examplesplashscreen/SplashActivity.java"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">splash activity</span></a><span style=" font-family:'Sans';"> is the first activity to be launched. It shows the splash screen and then, after a short delay, it starts the main activity and finishes. The splash activity </span><span style=" font-family:'Sans'; font-style:italic;">has </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/src/com/cutehacks/examplesplashscreen/SplashActivity.java#L13"><span style=" font-family:'Sans'; font-style:italic; text-decoration: underline; color:#0000ff;">no actual content view</span></a><span style=" font-family:'Sans';">, and the reason for this is that it takes too long to inflate even the simplest layout. Instead the splash activity uses a </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/res/values/styles.xml#L18"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">custom theme</span></a><span style=" font-family:'Sans';"> which defines a default windows background  drawable. We set the custom theme in the </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/AndroidManifest.xml#L19"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">manifest</span></a><span style=" font-family:'Sans';">.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:large; font-weight:600;">A responsive splash Drawable</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">A splash screen typically consists of a background and some logos. To make a single drawable that works well across different resolutions and PPIs you need to use the </span><a href="http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">LayerDrawable</span></a><span style=" font-family:'Sans';">. The LayerDrawable is a stack of several drawables on top of each other. The stacked drawables can be of different types and can be positioned individually, and you can choose if they are scaled or not.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="yui_3_17_2_1_1534688398798_516"></a><span style=" font-family:'Sans';">I</span><span style=" font-family:'Sans';">n my </span><a name="yui_3_17_2_1_1534688398798_515"></a><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/res/drawable/splashscreen.xml"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">e</span></a><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">xample drawable</span><span style=" font-family:'Sans';"> I use three bitmaps. The first one is a tiled background, the second is the product logo which is positioned a little bit above the middle, and the third one is the company logo positioned in the bottom.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:large; font-weight:600;">Transitions and progress bar</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">To make the transition from the splash activity to the main activity smooth I suggest that you </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/src/com/cutehacks/examplesplashscreen/SplashActivity.java#L20"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">override the animation</span></a><span style=" font-family:'Sans';"> between them. I also suggest that you re-use elements in the splash drawable in the main activity. For example, you can re-use a header or footer. This ties the two activities more together.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans';">If you want to display a progressbar inside the splash activity, then you can add it to the (currently) empty </span><a href="https://github.com/Cutehacks/AndroidSplashScreen/blob/master/res/layout/activity_splash.xml"><span style=" font-family:'Sans'; text-decoration: underline; color:#0000ff;">splash layout</span></a><span style=" font-family:'Sans';">. It won't inflate and be shown immediately like the background, but it will still be fairly snappy.</span></p></body></html>