<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В файле <span style=" font-family:'FreeMono'; color:#6a1009;">/etc/fstab</span> можно прописать следующие опции монтирования, чтобы уменьшить количество обращений к SSD диску:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">noatime</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> — запрещает обновление метаданных файла при чтении из него (рекомендуется и для обычных жёстких дисков).</span></li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">nodiratime</span> — аналогично для директорий.</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">commit=60</span> — устанавливает задержку записи изменений на диск в 60 секунд. Все изменения, накопленные в течение этого времени, будут записаны в один присест. Правда, если система по какой-либо причине зависнет, часть данных может быть потеряна</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Кроме того, следует помнить, что опцию <span style=" font-family:'FreeMono'; color:#6a1009;">discard</span> для SSD прописывать не стоит, и вот по какой причине:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Еще один, к сожалению, популярный метод автоматического освобождения неиспользуемого дискового пространства путем инициирования операции TRIM заключается в добавлении параметра монтирования ФС </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">discard</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> в файле </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">/etc/fstab</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Этот метод связан с большим падением производительности дисковой подсистемы и не является оптимальным. Главным его недостатком является то, что при его использовании система может периодически замедлять свою работу. Это объясняется тем, что операция TRIM инициируется после каждого удаления файла, что неоптимально, ресурсозатратно и просто не нужно. По этой причине не стоит использовать данный метод.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Во всех современных Linux вызов TRIM (командой <span style=" font-family:'FreeMono'; color:#6a1009;">fstrim -av</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> или </span><span style=" font-family:'FreeMono'; color:#6a1009;">fstrim -v /</span>) происходит автоматически раз в неделю, поэтому напрягать файловую систему при каждом действии с файлом нет никакого смысла.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>