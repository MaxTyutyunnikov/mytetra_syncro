<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Содержание</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Начало </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Где взять VirtualBox</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Установка Vagrant</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Ваше первое виртуальное окружение Vagrant</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преимущества от использования Vagrant </li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преимущества для одного разработчика</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преимущества для команды разработчиков</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преимущества для компании</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Настройка проекта </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Vagrantfile</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Настройка Vagrant проекта</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Настройка Web-проекта</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Образы виртуальных машин (Виртуальные боксы) </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Получение базового образа виртуальной машины</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удаление виртуальных боксов</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Настройка проета для использования нужного виртуального бокса</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверка настройки</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Настройка SSH</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Обеспечение для виртуальных боксов (Provisioning)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Проброс портов (Port Forwarding)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Пакетирование (Packaging)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Остановка виртуальных боксов (Teardown) </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Suspend - уход в спящий режим с сохранением текущего состояния системы</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Halting - обычное завершение работы</li>
<li style=" font-size:10pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Destroing - завершение работы с очисткой всех файлов бокса</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Быстрая пересборка </span></p>
<p style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Начало"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">ачало</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> это менеджер ваших виртуальных окружений для разработки. Фактически он является надстройкой над программой </span><a href="http://www.virtualbox.org/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">VirtualBox</span></a><span style=" font-size:10pt;"> от </span><span style=" font-size:10pt; font-weight:600;">Oracle</span><span style=" font-size:10pt;">, и обеспечивает быстрое создание и настройку виртуальных машин. Созданные таким образом виртуальные машины - боксы </span><span style=" font-size:10pt; font-weight:600;">(boxes)</span><span style=" font-size:10pt;"> используются разработчиками web-приложений для построения необходимой среды разработки. Затем они могут быть упакваны в специальные контейнеры (боксы), для установки и использования другими разработчиками в команде. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Где-взять-virtualbox"></a><span style=" font-size:10pt; font-weight:600;">Г</span><span style=" font-size:10pt; font-weight:600;">де взять VirtualBox</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> полностью зависит от программы </span><a href="http://www.virtualbox.org/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">VirtualBox</span></a><span style=" font-size:10pt;"> и использует ее для создания виртуальных образов. Основным назначением </span><span style=" font-size:10pt; font-weight:600;">VirtualBox</span><span style=" font-size:10pt;"> является полная виртуализация </span><span style=" font-size:10pt; font-weight:600;">x86</span><span style=" font-size:10pt;"> оборудования. Это проект с открытым исходным кодом, который обеспечивает виртуализацию на профессиональном уровне и может быть использована как на серверах так и на десктопных компьютерах для построения виртуальных сред. </span><span style=" font-size:10pt; font-weight:600;">VirtualBox</span><span style=" font-size:10pt;"> доступен для </span><span style=" font-size:10pt; font-weight:600;">Windows</span><span style=" font-size:10pt;">, </span><span style=" font-size:10pt; font-weight:600;">Mac OS X</span><span style=" font-size:10pt;">, </span><span style=" font-size:10pt; font-weight:600;">Linux</span><span style=" font-size:10pt;"> и </span><span style=" font-size:10pt; font-weight:600;">Solaris</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Вот ссылка на </span><a href="http://www.virtualbox.org/wiki/Downloads"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">страницу загрузки VirtaulBox</span></a><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">На текущий момент </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> поддерживает VirtualBox 4.0.x, 4.1.x и 4.2.x. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Установка-vagrant"></a><span style=" font-size:10pt; font-weight:600;">У</span><span style=" font-size:10pt; font-weight:600;">становка Vagrant</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Чтобы установить </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;">, необходимо скачать соответствующий пакет или установщик с </span><a href="http://downloads.vagrantup.com/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">этой страницы загрузки</span></a><span style=" font-size:10pt;"> и установить его, используя стандартную процедуру установки приложения на вашей системе. В операционных систмах </span><span style=" font-size:10pt; font-weight:600;">Windows</span><span style=" font-size:10pt;"> и </span><span style=" font-size:10pt; font-weight:600;">Mac OS X</span><span style=" font-size:10pt;"> после установки приложения будет доступна команда </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrant</span><span style=" font-size:10pt;"> из командной строки. На остальных систмах вам необходимо будет самим добавить этот путь </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">/opt/vagrant/bin</span><span style=" font-size:10pt;"> в переменную окружения </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">PATH</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Если вы не нашли для вашей системы установщик Vagrant, то вы можете установить его используя </span><a href="http://rubygems.org/gems/vagrant"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">RubyGems</span></a><span style=" font-size:10pt;"> с помощью команды </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">gem install vagrant</span><span style=" font-size:10pt;">. Но помните, что установка из пакетов или через установщик является наиболее предпочтительным способом установки приложения. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Ваше-первое-виртуальное-окружение-vagrant"></a><span style=" font-size:10pt; font-weight:600;">В</span><span style=" font-size:10pt; font-weight:600;">аше первое виртуальное окружение Vagrant</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В командной строке набирите: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant box add precise32-box http://files.vagrantup.com/precise32.box</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant init precise32-box</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant up </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Эти команды необходимы для запуска виртуальной машины с помощью </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;">. Учтите, что команды выше запускают полнофункциональную виртуальную машину на операционной системе </span><a href="http://help.ubuntu.ru/wiki/precise"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ubuntu 12.04LTS precise</span></a><span style=" font-size:10pt;"> с объемом памяти по-умолчанию в 512Мб. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Преимущества-от-использования-vagrant"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">реимущества от использования Vagrant</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Многие Web-разработчики используют виртуальное окружение для разработки своих Web-приложений. Все большую популярность сейчас набирают облачные сервисы для построения и развертывания виртуальных окружений для продакшена и разработки, начиная от </span><a href="http://ru.wikipedia.org/wiki/Amazon_EC2"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">EC2</span></a><span style=" font-size:10pt;">, </span><a href="http://www.rackspace.com/cloud/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Rackspace Cloud</span></a><span style=" font-size:10pt;"> и заканчивая более специализированными как </span><a href="https://www.engineyard.com/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">EngineYard</span></a><span style=" font-size:10pt;"> и </span><a href="http://www.heroku.com/"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Heroku</span></a><span style=" font-size:10pt;">. </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> реализует схожие принципы при создания виртуальных машин для локальной разработки и тестирования ваших приложений на рабочем компьютере. Такая организация работы повышает гибкость и продуктивность как вас так и вашей команды при разработке web-приложений. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Для развертывания и настройки виртуальных окружений </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> использует достаточно зарекомендовавшие себя технологии виртуализации в лице </span><span style=" font-size:10pt; font-weight:600;">VirtualBox</span><span style=" font-size:10pt;"> от </span><span style=" font-size:10pt; font-weight:600;">Oracle</span><span style=" font-size:10pt;"> и технологии автоматицированного развертывания приложений от </span><a href="http://www.opscode.com/chef"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Chef</span></a><span style=" font-size:10pt;"> и </span><a href="http://www.puppetlabs.com/puppet"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Puppet</span></a><span style=" font-size:10pt;">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Преимущества-для-одного-разработчика"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">реимущества для одного разработчика</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Использование однотипного окружения разработки для разных проектов расчитанных для разных версий языков программирования и фреймворков зачастую очень трудная задача. Как быть, если один проект работает на PHP4, второй на PHP 5.2.x, а третий на PHP 5.3.x или 5.4.x и его необходимо тестировать в той версии языка на которую он расчитан? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Ставить кучу разных версий языков и сервисов и загружать рабочую машину, не вариант, т.к. рано или позно ваша система начнет долго загружаться, тормозить и глючить. Еще один момент, заключается в том, что каджый из рабочих проектов работает в продакшене на сервере, где стоит определенное окружение, поэтому при разработке такого проекта надо, чтобы окружение на компьютере разработчика точно соответсвовало окружению на рабочем сервере, чтобы разработчик мог быть полностью уверен в том, что у него не будет неприятных сюрпризов при развертывании своего web-приложения на рабочем сервере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> решает эти проблемы. С помощью него вы можете создавать виртуальные машины с окружением необходимым для каждого конкретного проекта. При переключении с одного проекта на другой, вы просто парой команд останавливаете одну виртуальную машину и поднимаете другую нужную для другого проекта. Все гениально и прсто! </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Преимущества-для-команды-разработчиков"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">реимущества для команды разработчиков</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Все участники команды в идеале должны иметь одинаковое окружение разработки: одинаковые версии, зависимости, настройки и т.д. ведь по идее команда работает над общими проектами. Но что если часть команды работает над проектом с одной версий базы данных, к примеру, </span><a href="http://ru.wikipedia.org/wiki/MySQL"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">MySQL</span></a><span style=" font-size:10pt;">, а другая часть - над проектом где используется </span><a href="http://ru.wikipedia.org/wiki/PostgreSQL"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">PostgreSQL</span></a><span style=" font-size:10pt;"> или </span><a href="http://ru.wikipedia.org/wiki/Microsoft_SQL_Server"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">MSSQL</span></a><span style=" font-size:10pt;">. Что если одному участнику команды нужно приступить к разработке другого проекта, у которого другая версия языка или базы данных и т.д. Вобщем, сплошная головная боль, приводящая к замедлению разработки и уменьшению эффективности команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В этом случае </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> позволяет команде создавать и использовать готовые образы виртуальных окружений для соотвествующих проектов. Когда другой участник команды присоединяется к разработке другого проекта, он просто берет у своих коллег образ виртуальной машины для этого проекта и разворачивает этот образ у себя. Все, за считанные минуты разработчик получает готовое окружение и может спокойно приступать непосредственно к своей части работы. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Преимущества-для-компании"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">реимущества для компании</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Если у вас крупная компания и вы работаете на крупным развивающимся проектом, то вам пстоянно приходится добавлять какие-то новые компоненты в инфраструктуру приложения, например, различные системы кеширования, обработчики событий, сервера баз данных и т.д. В этом случае </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> предоставляет вам средство для создания и распространения готовых окружений разработки. Теперь если к вам в компанию приходит новый сотрудник то ему нет необходимости тратиь массу времени на начальную настройку всей своей системы, чтобы присоединиться к разработке приложения. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-проекта"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка проекта</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">После того как вы установили </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> на свою систему, все его управление осуществляется через команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant</span><span style=" font-size:10pt;">. У этой команды есть множество необходимых подкомманд, например, </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;"> - для запуска виртуальной машины, </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant ssh</span><span style=" font-size:10pt;"> - для подключения по </span><a href="http://ru.wikipedia.org/wiki/SSH"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">ssh</span></a><span style=" font-size:10pt;">, </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant package</span><span style=" font-size:10pt;">- для создания пакета текущего виртуального окружения готового к развертыанию на другом компьютере и т.д. Чтобы просмотреть все доступные команды, просто наберите в командной строке команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant</span><span style=" font-size:10pt;">. </span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/uran1980/web-dev-blog/edit/master/Vagrant/getting-started-with-vagrant.md"><img src="https://camo.githubusercontent.com/85874fa773a295612edb99fed1edca6bf4ac4a68/68747470733a2f2f7261772e6769746875622e636f6d2f7572616e313938302f7765622d6465762d626c6f672f6d61737465722f56616772616e742f696d616765732f7373686f742d3030312e706e67" /></a><a href="https://github.com/uran1980/web-dev-blog/edit/master/Vagrant/getting-started-with-vagrant.md"><span style=" font-size:10pt; text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-vagrantfile"></a><span style=" font-size:10pt; font-weight:600;">V</span><span style=" font-size:10pt; font-weight:600;">agrantfile</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html"><span style=" font-family:'Courier New,courier'; font-size:10pt; text-decoration: underline; color:#0000ff;">Vagrantfile</span></a><span style=" font-size:10pt;"> для </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> как </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Makefile</span><span style=" font-size:10pt;"> для </span><a href="http://ru.wikipedia.org/wiki/Make"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Make</span></a><span style=" font-size:10pt;">. </span><a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html"><span style=" font-family:'Courier New,courier'; font-size:10pt; text-decoration: underline; color:#0000ff;">Vagrantfile</span></a><span style=" font-size:10pt;"> располагается в корне каждого </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> проекта и используется для настройки поведения самого </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> и виртуальных машин созданных с помощью него. Пример содержимого этого файла приведен ниже: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Vagrant::Config.run do |config|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  # Setup the box</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.box = &quot;my_box&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">end </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Как вы видите, содержимое файла это код на языке </span><a href="http://ru.wikibooks.org/wiki/Ruby"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ruby</span></a><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-vagrant-проекта"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка Vagrant проекта</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Первым шагом для любого проекта </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> является создание корневой директории проекта и инициализация проекта: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ mkdir my_vagrant_project</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ cd my_vagrant_project</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant init </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">команда </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant init</span><span style=" font-size:10pt;"> создаст файл Vagrantfile. Пока мы оставим этот файл как есть, но далее мы будем его редактировать для настройки виртуальной машины нашего проекта. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-web-проекта"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка Web-проекта</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Теперь когда </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> настроен, давайте создадим небольшой web-проект, который будем потом использовать для демострации работы </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;">. Создайте в корне </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> проекта (где расположен файл </span><a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Vagrantfile</span></a><span style=" font-size:10pt;">) индексный html файл: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ echo &quot;&lt;h1&gt;Hello from a Vagrant VM&lt;/h1&gt;&quot; &gt; index.html </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В принципе на этом настройка web-проета закончена. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Образы-виртуальных-машин-Виртуальные-боксы"></a><span style=" font-size:10pt; font-weight:600;">О</span><span style=" font-size:10pt; font-weight:600;">бразы виртуальных машин (Виртуальные боксы)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Следующим шагом после инициализации проета, является создание базового бокса. </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> не создает виртуальную машину с нуля. Он импортирует базовый образ виртуальной машины и запускает его, применяя затем все необходимые настройки заданные в конфигурационном файле Vagrantfile. Это упрощает жизнь пользователям </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;">, т.к. им не надо тратиь время на настройку параметров виртуальной машины, таких как выделенная виртуальная память, объем диска, сетевые интерфейсы и пр. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Получение-базового-образа-виртуальной-машины"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">олучение базового образа виртуальной машины</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В самом начале статьи мы уже скачали базовый образ 32-битной системы </span><span style=" font-size:10pt; font-weight:600;">Ubuntu 12.04LTS precise</span><span style=" font-size:10pt;"> и добавили его в </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;">. Обратите внимание, что если вы уже скачали образ, то вам не нужно повторно каждый раз его скачивать при последующем запуске. </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> поддерживает загрузку образов как из Интернета, так и с вашего жесткого диска. В самом начале статьи мы запустили следующую команду: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant box add precise32-box http://files.vagrantup.com/precise32.box </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">После ее выполнения </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> скачал образ и сохранил его в системной папке пользователя на диске. При этом этот образ был автоматических добавлен в глобальное пространство текущей установки </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> на вашем компьютере, т.е. теперь для всех проетов, которые вы будете создавать этот образ будет доступен для выбора при развертывания виртуального окружения. Также, каждый добавленный таким способом образ имеет уникальное имя, в данном примере, это </span><span style=" font-size:10pt; font-weight:600;">precise32-box</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Адрес </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">http://files.vagrantup.com/precise32.box</span><span style=" font-size:10pt;"> мы использовали только один раз в самом начале, теперь подключать базовый образ мы будем из локального хранилища на жестком диске. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Удаление-виртуальных-боксов"></a><span style=" font-size:10pt; font-weight:600;">У</span><span style=" font-size:10pt; font-weight:600;">даление виртуальных боксов</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Таже просто как добавить, виртуальные боксы можно и удалить. Для этого используйте команду: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant box remove my_box </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">При этом бокс удаляется физически с диска. После этого ни одна виртуальная машина созданная ранее на основе этого бокса не сможет быть запущена. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-проета-для-использования-нужного-виртуального-бокса"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка проета для использования нужного виртуального бокса</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Теперь, когда виртуальный бокс с именем </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">precise32-box</span><span style=" font-size:10pt;"> был добавлен в </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> мы можем добавлять его в наши проеты. Это делается путем записи в конфигурационный файл </span><a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Vagrantfile</span></a><span style=" font-size:10pt;"> следующей строчки: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Vagrant::Config.run do |config|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.box = &quot;precise32-box&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">end </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Проверка-настройки"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">роверка настройки</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">На данный момент мы произвели самую базовую настройку нашего виртуального окружения. Мы не задали переброс портов </span><span style=" font-size:10pt; font-weight:600;">(port forwarding)</span><span style=" font-size:10pt;">, свое обспечение для окружения </span><span style=" font-size:10pt; font-weight:600;">(provisioning)</span><span style=" font-size:10pt;"> и т.д. Но даже с такой базовой настройкой у нас получилась полнофункциональная виртуальная машина. Вы можете в этом убедится набрав следующую команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;"> из корневой директории проекта Эта команда запустит виртуальную машину. Чтобы остановить запущенную виртуальную машину и очистить место на диске, которое она занимала, нужно выполнить команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant destroy</span><span style=" font-size:10pt;">: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant up</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant destroy</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">... </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-ssh"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка SSH</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> предоставляет полный доступ к виртуальной машине через SSH протокол при помощи команды </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant ssh</span><span style=" font-size:10pt;">. После запуска этой команды откроется терминал и вы увидите приблизительно следующее приглошение командной строки: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant ssh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">vagrant@vagrantup:~$ </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<hr />
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">ВНИМАНИЕ: для пользователей Windows</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Т.к. ssh-клиент по-умолчанию не распространяется на Windows платформе, то при запуске команды </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant shh</span><span style=" font-size:10pt;"> на Windows машине </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> выведет вместо окна терминала - окно с необходимой информацией для подключения к виртуальной машине по shh протоколу через ssh-клиент </span><a href="http://ru.wikipedia.org/wiki/PuTTY"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">PuTTY</span></a><span style=" font-size:10pt;">: </span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/uran1980/web-dev-blog/edit/master/Vagrant/getting-started-with-vagrant.md"><img src="https://camo.githubusercontent.com/4cb504970ee33f2dac8edddc2e4c8060a3e88ee4/68747470733a2f2f7261772e6769746875622e636f6d2f7572616e313938302f7765622d6465762d626c6f672f6d61737465722f56616772616e742f696d616765732f7373686f742d3030322e706e67" /></a><a href="https://github.com/uran1980/web-dev-blog/edit/master/Vagrant/getting-started-with-vagrant.md"><span style=" font-size:10pt; text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">PuTTY</span><span style=" font-size:10pt;"> не распознает стандартные openssh ключи, поэтому вам придется преобразовать данный приватный ключь в формат </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">.ppk</span><span style=" font-size:10pt;"> с помощью утилиты </span><a href="http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">puttygen</span></a><span style=" font-size:10pt;">, которая идет в комплекте с </span><span style=" font-size:10pt; font-weight:600;">PuTTY</span><span style=" font-size:10pt;">. </span></p>
<hr />
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Доступ-к-файлам-проекта-с-виртуальной-машины"></a><span style=" font-size:10pt; font-weight:600;">Д</span><span style=" font-size:10pt; font-weight:600;">оступ к файлам проекта с виртуальной машины</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В запущенной через </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> виртуальной машине вы найдете расшаренную директорию, в которой находятся файлы вашего проекта. Эта директория располагается на виртуальной машине по этому пути: </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">/vagrant</span><span style=" font-size:10pt;">. С виртуальной машины содержимое данной директории доступно как для чтения так и для записи. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Обеспечение-для-виртуальных-боксов-provisioning"></a><span style=" font-size:10pt; font-weight:600;">О</span><span style=" font-size:10pt; font-weight:600;">беспечение для виртуальных боксов (Provisioning)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Мы запустили с помощью </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> виртуальную машину, настроили подключение через </span><span style=" font-size:10pt; font-weight:600;">ssh</span><span style=" font-size:10pt;">, и что дальше? Для нас как для разработчиков эта машина не представляет никакого инетерса, т.к. на ней, пока, ничего не установлено кроме оперционной системы </span><span style=" font-size:10pt; font-weight:600;">Ubuntu</span><span style=" font-size:10pt;">. Для разработки нашего web-проекта нам необходимо из получившейся заготовки виртуальной машины сделать полноценное виртуальное окружение - максимально точную копию того, что у нас находится на рабочем сервере. Для этого нам надо установить нужное программное обеспечение, к примеру, </span><span style=" font-size:10pt; font-weight:600;">nginx</span><span style=" font-size:10pt;"> или </span><span style=" font-size:10pt; font-weight:600;">Apache</span><span style=" font-size:10pt;">, </span><span style=" font-size:10pt; font-weight:600;">php</span><span style=" font-size:10pt;">, </span><span style=" font-size:10pt; font-weight:600;">ruby</span><span style=" font-size:10pt;">, </span><span style=" font-size:10pt; font-weight:600;">MySQL</span><span style=" font-size:10pt;"> и т.д., т.е обеспечить наш виртуальный бокс необходимой </span><span style=" font-size:10pt; font-weight:600;">провизией (Provisioning)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Для этих целей </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> позволяет использовать на выбор одно из двух решений - это </span><a href="http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Chef (Chef-Solo)</span></a><span style=" font-size:10pt;"> или </span><a href="http://docs.vagrantup.com/v1/docs/provisioners/puppet.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">Puppet</span></a><span style=" font-size:10pt;">. Также, при необходимости, вы можете расширять </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> и использовать </span><a href="http://docs.vagrantup.com/v1/docs/provisioners/puppet.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">другие средства</span></a><span style=" font-size:10pt;"> автоматизированного развертывания приложений (но это уже не относится к теме данной статьи). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Настройка-chef-и-vagrant"></a><span style=" font-size:10pt; font-weight:600;">Н</span><span style=" font-size:10pt; font-weight:600;">астройка Chef и Vagrant</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В данной статье мы воспользуемся </span><a href="http://files.vagrantup.com/getting_started/cookbooks.tar.gz"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">заранее приготовленными рецептами для Chef</span></a><span style=" font-size:10pt;">, чтобы продемонстрировать развертывания виртуальной машины. Для этого отредактируем конфигурационный файл Vgarantfile: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Vagrant::Config.run do |config|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.box = &quot;precise32-box&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  # Enable and configure the chef solo provisioner</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.provision :chef_solo do |chef|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    # We're going to download our cookbooks from the web</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    chef.recipe_url = &quot;http://files.vagrantup.com/getting_started/cookbooks.tar.gz&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    # Tell chef what recipe to run. In this case, the `vagrant_main` recipe</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    # does all the magic.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    chef.add_recipe(&quot;vagrant_main&quot;)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  end</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">end </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Обратите внимание, что мы используем URL </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">http://files.vagrantup.com/getting_started/cookbooks.tar.gz</span><span style=" font-size:10pt;"> для загрузки набора </span><span style=" font-size:10pt; font-weight:600;">рецептов (cookbooks)</span><span style=" font-size:10pt;"> для Chef. Вместо этого вы также можете просто скопировать набор рецептов в корневую директорию нашего Vagrant-проекта и подключить их через конфиг в Vagrantfile'е. Более подробно про это можно найти в разделе </span><a href="http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">ChefSolo</span></a><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Запуск"></a><span style=" font-size:10pt; font-weight:600;">З</span><span style=" font-size:10pt; font-weight:600;">апуск!</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">После настройки провизий для виртуальной машины, просто запускаем команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;">. </span><span style=" font-size:10pt; font-weight:600;">Vagarnt</span><span style=" font-size:10pt;"> запустит виртуальную машину из образа и установить необходимы софт прописанный в рецептах. Если ваша виртуальная машина уже была запущена к этому моменту и вы ее не выключали, то просто перезагрузите ее командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant reload</span><span style=" font-size:10pt;">, чтобы изменения вступили в силу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">После того как </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> завершит все необходимые действия и настройки системы, у вас будет полноценный настроенный web-сервер на виртуальной машине. Однако, пока вы еще не сможете увидеть свой web-проект на ней через браузер на вашем рабочем компьютере, т.к. мы еще не настроили </span><span style=" font-size:10pt; font-weight:600;">проброс портов (port forwarding)</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Чтобы убедится всеже что наш простой сайт уже работает, вы можете подключится по ssh к виртуальной машине и в командной строке ssh-терминала набрать следующее: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant ssh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">vagrant@vagrantup:~$ wget -qO- 127.0.0.1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">&lt;h1&gt;Hello from a Vagrant VM&lt;/h1&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">vagrant@vagrantup:~$ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Далее мы настроим проброс портов, чтобы вы могли увидеть свой сайт через браузер на своем компьютере. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Проброс-портов-port-forwarding"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">роброс портов (Port Forwarding)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Проброс портов</span><span style=" font-size:10pt;"> позволяет задать номер порта на гостейвой машине (в данном случае на нашей виртуальной машине), который будет доступен извне на хост машине (т.е. на нашем рабочем компьютере). Это позволит нам обращаться к web-серверу установленному на виртуальной машине из браузера на нашем рабочем компьютере. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Задание-номера-порта-для-проброса"></a><span style=" font-size:10pt; font-weight:600;">З</span><span style=" font-size:10pt; font-weight:600;">адание номера порта для проброса</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">В данном случае мы хотим пробросить порт на котором работает сервер Apache. Проброс порта настраивается в файле Vagrantfile следующим образом: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Vagrant::Config.run do |config|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  # Forward guest port 80 to host port 4567</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.forward_port 80, 4567</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">end </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Как вы видите мы задали проброс портов с </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">80</span><span style=" font-size:10pt;"> порта </span><span style=" font-size:10pt; font-weight:600;">(guest posrt)</span><span style=" font-size:10pt;"> на виртуальной машине на </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">4567</span><span style=" font-size:10pt;"> порт </span><span style=" font-size:10pt; font-weight:600;">(host port)</span><span style=" font-size:10pt;"> на нашем рабочем компьютере. Теперь надо запустить виртуальную машину командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;"> или если она уже запущена, то перезагрузить командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant reload</span><span style=" font-size:10pt;">. После этого можно в адресной строке браузера набрать адрес </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">http://127.0.0.1:4567/</span><span style=" font-size:10pt;"> и он откроет нашу страничку с приветсвием: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Hello from a Vagrant VM</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:10pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Пакетирование-packaging"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">акетирование (Packaging)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Итак, мы получили готовое для использования виртуальное окружение для нашего web-проекта. Но представьте ситуацию, что вы не один, а состоите в команде и вам надо обеспечить своих коллег такимже виртуальным окружением как и у вас. Что делать? </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> предоставляет для этого случая возможность создавать </span><span style=" font-size:10pt; font-weight:600;">пакеты (packages)</span><span style=" font-size:10pt;"> виртуального окружения. Эти готовые пакеты вы отдаете своим коллегам и они устанавливают их у себя на компьютере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; font-weight:600;">Пакеты (Packages)</span><span style=" font-size:10pt;"> это готовые к установке образы вашего виртуального окружения, которое могут быть быстро развернуты на других компьютерах. Обычно они имеют расширение </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">.box</span><span style=" font-size:10pt;"> и называются боксами. Опционально в этот бокс вы можете включить сам конфигурационный файл </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrantfile</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Перед тем как создать бокс убедитесь что ваше виртуальное окружение проинициализировано и запущено командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Создание-vagrantfileа"></a><span style=" font-size:10pt; font-weight:600;">С</span><span style=" font-size:10pt; font-weight:600;">оздание VagrantFile'а</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Сначала мы должны создать конфигурационный файл </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrantfile</span><span style=" font-size:10pt;">, который затем будет помещен в созданный виртуальный бокс. На этот этапе важно убетиться, что ваше виртуальное окружение запущено командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;"> и работает HTTP доступ к нему. Теперь создаем файл </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrantfile.pkg</span><span style=" font-size:10pt;">, который будет использоваться как </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrantfile</span><span style=" font-size:10pt;"> только для созданного бокса. Файл должен содержать следующую конфигурацию: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Vagrant::Config.run do |config|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  # Forward apache</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  config.vm.forward_port 80, 8080</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">end </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Далее выполните команду: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant package --vagrantfile Vagrantfile.pkg </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant package</span><span style=" font-size:10pt;"> возьмет текущее запущенное виртуальное окружение и упакует его в бокс </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">package.box</span><span style=" font-size:10pt;"> в текущую директорию откуда была запущена команда (т.е. в корне нашего Vagrant проета). Опция </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">--vagrantfile</span><span style=" font-size:10pt;"> указывает, что бокс должен включать в себя файл </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">Vagrantfile.pkg</span><span style=" font-size:10pt;">, чтобы при развертывании на другом компьютере была автоматически выполнена проброска портов (более попдробно см. </span><a href="http://docs.vagrantup.com/v1/docs/vagrantfile.html"><span style=" font-size:10pt; font-weight:600; text-decoration: underline; color:#0000ff;">здесь</span></a><span style=" font-size:10pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Созданный бокс можно теперь отдать другому участнику команды, чтобы он скопировал его к себе на рабочий комьютер и установил или выложить его в интернет, тогда его можно будет потом просто скачать на нужный компьютер и запустить. Бокс запускается на другом компьютере следующим образом: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant box add my_box /путь/к/боксу/package.box</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant init my_box</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">$ vagrant up </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">После выполнения этих команд другой участник вашей команды получит готовое к работе виртуальное окружение (точную копию вашего виртуального окружения). </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Остановка-виртуальных-боксов-teardown"></a><span style=" font-size:10pt; font-weight:600;">О</span><span style=" font-size:10pt; font-weight:600;">становка виртуальных боксов (Teardown)</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Чтобы завершить запущенное виртуальное окружение в </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> существует три разных способа сделать это: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/uran1980/web-dev-blog/blob/master/Vagrant"><span style=" text-decoration: underline; color:#0000ff;">Suspend</span></a> - уход в спящий режим с сохранением текущего состояния системы,</li>
<li style=" font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/uran1980/web-dev-blog/blob/master/Vagrant"><span style=" text-decoration: underline; color:#0000ff;">Halting</span></a> - обычное завершение работы (как на любом компьютере),</li>
<li style=" font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/uran1980/web-dev-blog/blob/master/Vagrant"><span style=" text-decoration: underline; color:#0000ff;">Destroing</span></a> - завершение работы с очисткой места на диске, которое занимало запущенное виртуальное окружение. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Все эти типы остановки виртуальных боксов рассмотрены далее. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-suspend---уход-в-спящий-режим-с-сохранением-текущего-состояния-системы"></a><span style=" font-size:10pt; font-weight:600;">S</span><span style=" font-size:10pt; font-weight:600;">uspend - уход в спящий режим с сохранением текущего состояния системы</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Завершение работы с уходом в спящий режим выполняется командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant suspend</span><span style=" font-size:10pt;">. При этом происходит сохранение текущего состояни виртуального окружения и затем завершение его работы. Для возобновления работы достаточно выполнить команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant resume</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Основное преимущество данного режима завершения работы - это то, что возобнавление работы происходит очень быстро, быстрее чем при всех остальных режимах завершения работы, т.к. сосхраняется предыдущее состояние виртуальной машины. Однако этот режим требует дополнительного места на жестком диске - приблизительно в 1 Гб для сохранения состояния системы. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-halting---обычное-завершение-работы"></a><span style=" font-size:10pt; font-weight:600;">H</span><span style=" font-size:10pt; font-weight:600;">alting - обычное завершение работы</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Это завершение работы выполняется командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant halt</span><span style=" font-size:10pt;">. При этом выполняется обячное завершение работы (как в обычной Linux системе при выполнении команды </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">halt</span><span style=" font-size:10pt;">). Чтобы возобновить работу виртуального окружения после такого выключения надо выполнить команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">При таком завершении работы не требуется дополнительное место на диске, т.к. состяние системы не сохраняется. Возобновление работы при этом длится немного дольше чем в предыдущем случае, т.к. виртуальное окружение загружается как при загрузке обычного компьютера. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-destroing---завершение-работы-с-очисткой-всех-файлов-бокса"></a><span style=" font-size:10pt; font-weight:600;">D</span><span style=" font-size:10pt; font-weight:600;">estroing - завершение работы с очисткой всех файлов бокса</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Наконец, последний - третий способ выключения виртуального окружения. Выполняется командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant destroy</span><span style=" font-size:10pt;">. При этом происходи завершение работы с полной очисткой места на диске, которое занимало виртуальное окружение. Чтобы возобновить работу необходимо также как и в предыдущем случае выполнить команду </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagarnt up</span><span style=" font-size:10pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Основное преимущество этого способа в том, что вы экономите до 1 Гб места на жестком диске. Но при этом возобновление работы будет самым долгим процессом, т.к. </span><span style=" font-size:10pt; font-weight:600;">Vagrant'у</span><span style=" font-size:10pt;"> придестя заново ставить весь необходимы софт из рецептов. Обычно не рекомендуется пользоваться данным способом завершения работы, если только вы не стремитесь любой ценой сэконмить место на жестком диске, что при текущих размерах современных жестких дисков крайне редкая необходимость. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Быстрая-пересборка"></a><span style=" font-size:10pt; font-weight:600;">Б</span><span style=" font-size:10pt; font-weight:600;">ыстрая пересборка</span><span style=" font-size:10pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Давайте предположим такую ситуацию: вы закончили работу над проектом, сдали его заказчику, получили оплату. Прошло пол года, год и вот босс говорит вам, что надо возобновить работу на проетком для этого заказчика. У вас за это время могло много чего поменятся на рабочем компьютере, вы снесли и переустановили операционную систему, обнвовили софт, да мало-ли что еще могло произойти? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Не переживайте! Все что необходимо вам сделать чтобы возобновить работу над проектом это просто заново запустить виртуальный бокс командой </span><span style=" font-family:'Courier New,courier'; font-size:10pt;">vagrant up</span><span style=" font-size:10pt;">. Вот и все. Через пять минут может больше или меньше, когда </span><span style=" font-size:10pt; font-weight:600;">Vagrant</span><span style=" font-size:10pt;"> запустит виртуальную машину и установит весь нужный софт вы спокойно можете приступить к разработке вашего старого проекта. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-content-Полезные-ссылки"></a><span style=" font-size:10pt; font-weight:600;">П</span><span style=" font-size:10pt; font-weight:600;">олезные ссылки</span><span style=" font-size:10pt;"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/mitchellh/vagrant/wiki/Available-Vagrant-Boxes"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">Available Vagrant Boxes</span></a> - доступные образы <span style=" font-weight:600;">Vagrant</span></li>
<li style=" font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.vagrantbox.es/"><span style=" font-weight:600; text-decoration: underline; color:#0000ff;">www.vagrantbox.es</span></a> - еще образы <span style=" font-weight:600;">Vagrant</span></li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; font-weight:600;"><br /></p></body></html>