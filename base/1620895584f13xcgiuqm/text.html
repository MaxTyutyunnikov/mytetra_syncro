<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Руководство по сборке и установке LLVM на Windows и Linux. Знакомит с примерами и утилитами в составе LLVM.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Ключевые шаги установки:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">получить или собрать LLVM с библиотеками, заголовками и утилитами</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">запустить утилиту llvm-config</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">полученные флаги добавить в настройки проекта или скрипты сборки</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">изучить Kaleidoscope, llc и другие примеры кода в составе пакета исходных кодов LLVM</span></li></ul>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow0"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">У</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">становка бинарных пакетов в Linux</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">В большинстве дистрибутивов GNU/Linux все библиотеки и утилиты LLVM доступны в предсобранном виде. Более того, на странице</span><span style=" color:#000000;"> </span><a href="http://apt.llvm.org/"><span style=" text-decoration: underline; color:#2a7ae2;">apt.llvm.org</span></a><span style=" color:#000000;"> доступны постоянно обновляемые репозитории для Debian и Ubuntu.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Для версии LLVM 5.0 необходимые для разработчика пакеты будут следующими: </span><span style=" font-size:16px; background-color:#fefefe;">llvm-5.0 llvm-5.0-dev llvm-5.0-runtime clang-5.0</span><span style=" font-size:18px;">.</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Также можно установить пакеты без явного номера версии, получив привязанную к выпуску дистрибутива версию LLVM/Clang.</span></li></ul>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow1"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">У</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">становка бинарных пакетов в Windows</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Для Windows проект LLVM/Clang предоставляет инсталлятор Clang, найти который можно на странице</span><span style=" color:#000000;"> </span><a href="http://releases.llvm.org/"><span style=" text-decoration: underline; color:#2a7ae2;">releases.llvm.org</span></a><span style=" color:#000000;">. К сожалению, инсталлятор не предоставляет библиотек и заголовочных файлов LLVM. Для работы с API LLVM, а не с утилитами, потребуется собрать LLVM самостоятельно.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Установить библиотеки LLVM можно с помощью пакетного менеджера NuGet в составе Visual Studio, нужный пакет есть на странице</span><span style=" color:#000000;"> </span><a href="http://www.nuget.org/packages/LLVMLibs"><span style=" text-decoration: underline; color:#2a7ae2;">nuget.org/packages/LLVMLibs</span></a></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow2"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">С</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">борка через CMake</span></h2>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Загрузить архив исходников можно на странице </span><a href="http://releases.llvm.org/"><span style=" font-size:18px; text-decoration: underline; color:#2a7ae2;">releases.llvm.org</span></a></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">На сайте LLVM есть детальная инструкция по работе с CMake: </span><a href="http://llvm.org/docs/CMake.html"><span style=" font-size:18px; text-decoration: underline; color:#2a7ae2;">llvm.org/docs/CMake.html</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">CMake используется как основная система сборки для LLVM на всех системах.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" font-style:italic; color:#323232;">CMake представляет собой целый пакет программ и утилит. Система сборки реализуется утилитой командной строки — </span><span style=" font-style:italic; color:#323232; background-color:#fefefe;">cmake.exe</span><span style=" font-style:italic; color:#323232;"> на Windows и </span><span style=" font-style:italic; color:#323232; background-color:#fefefe;">cmake</span><span style=" font-style:italic; color:#323232;"> на UNIX. CMake не умеет собирать исходный код самостоятельно и генерирует входные файлы для другой системы сборки, такой как GNU Make (на Linux), xcodebuild (на MacOSX) или msbuild (на Windows)</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">для сборки под Windows или MacOSX разработчик генерирует проекты для Visual Studio или XCode соответственно, и затем собирает привычным способом</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">для сборки под Linux разработчик генерирует Makefile и запускает </span><span style=" font-size:16px; background-color:#fefefe;">make</span></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Примеры вызова утилиты cmake:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Вызов генератора проектов Visual Studio 2015 (кодовая версия 14),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;">#  платформа по умолчанию, т.е. Intel 32bit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Основной файл CMakeLists.txt проекта находится в текущем каталоге</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># На выходе: файлы *.vcxproj и *.sln в текущем каталоге</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">cmake </span><span style=" color:#000080; background-color:#ffffff;">-G</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;Visual Studio 14&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#0086b3; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Вызов генератора проектов Visual Studio 2017 (кодовая версия 15),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;">#  платформа AMD64 (64-битная для Intel и AMD)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Основной файл CMakeLists.txt проекта находится в каталоге &quot;../src&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># На выходе: файлы *.vcxproj и *.sln в текущем каталоге</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">cmake </span><span style=" color:#000080; background-color:#ffffff;">-G</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;Visual Studio 15 Win64&quot;</span><span style=" color:#000000; background-color:#ffffff;"> ../src</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Вызов генератора проектов по умолчанию (на Linux - Make с системным компилятором)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Основной файл CMakeLists.txt проекта находится в текущем каталоге</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Опция CMAKE_BUILD_TYPE выставляется равной Release, что приводит к сборке релизной конфигурации</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># На выходе: на Linux - Makefile в текущем каталоге</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">cmake </span><span style=" color:#000080; background-color:#ffffff;">-DCMAKE_BUILD_TYPE</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;">Release </span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;"># Запуск сборки Makefile (-s - тихий режим без подробных сообщений)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">make </span><span style=" color:#000080; background-color:#ffffff;">-s</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000080; background-color:#ffffff;"><br /></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow3"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">С</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">борка и установка на Windows</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Допустим, вы распаковали исходный код LLVM в каталог llvm-src на Windows с Visual Studio 2017. Тогда можно создать каталоги llvm-build и llvm-install, и из каталога llvm-build вызвать:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">cmake </span><span style=" color:#000080; background-color:#ffffff;">-G</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;Visual Studio 15 Win32&quot;</span><span style=" color:#000000; background-color:#ffffff;"> cmake </span><span style=" color:#000080; background-color:#ffffff;">-DCMAKE_INSTALL_PREFIX</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;">../llvm-install </span><span style=" color:#000080; background-color:#ffffff;">-DCMAKE_BUILD_TYPE</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;">Release ../llvm-src</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">После откройте </span><span style=" font-size:16px; background-color:#fefefe;">LLVM.sln</span><span style=" font-size:18px;"> в Visual Studio и соберите либо весь Solution, либо проекты llc и llvm-config.</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Для установки LLVM в каталог llvm-install соберите мета-проект </span><span style=" font-size:16px; background-color:#fefefe;">CMakePredefinedTargets\PACKAGE</span></li></ul>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow4"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">У</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">становка после сборки на Linux</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Для установки собранного LLVM лучше всего использовать checkinstall, который, в отличии от make install, создаст нормальный Debian-пакет, который затем можно удалить. При запуске checkinstall без параметров утилита сама предложит ввести название пакета, версию, описание и другие атрибуты, а в конце соберёт deb-пакет и установит его.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Чтобы избежать сюрпризов, можно явно указать параметры генерации пакета. Команда, приведённая ниже, создаст и установит пакет llvm-custom:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># -D - генерировать в формате deb.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># -y - выбирать опции пакета по умолчанию, а не спрашивать пользователя</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># --nodoc - исключить файлы документации</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># --strip --stripso - удалять отладочную информацию из бинарников и разделяемых библиотек</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># --pkgname=&lt;NAME&gt; - название пакета</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># --pkgversion=&lt;VERSION&gt; - версия пакета, обычно берётся из версии проекта в формате a.b.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;"># --pkgrelease=&lt;RELEASE&gt; - версия пакета данной версии проекта, фактически любая строка</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">checkinstall </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">-</span><span style=" color:#000000; background-color:#ffffff;">D </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">-</span><span style=" color:#000000; background-color:#ffffff;">y </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">nodoc </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">strip </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">stripso \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">    </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">pkgname</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;">llvm</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">-</span><span style=" color:#000000; background-color:#ffffff;">custom \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">    </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">pkgname</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#009999; background-color:#ffffff;">3.8.1</span><span style=" color:#000000; background-color:#ffffff;"> \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">    </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">--</span><span style=" color:#000000; background-color:#ffffff;">pkgrelease</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;">latest \</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow5"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">У</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">тилита llvm-config</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Утилита llvm-config хранит жёстко зашитые при сборке параметры собранного дистрибутива LLVM.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">При вызове с параметром</span><span style=" color:#000000;"> </span><span style=" color:#000000; background-color:#fefefe;">--includedir</span><span style=" color:#000000;"> утилита выводит путь к заголовочным файлам LLVM, который можно добавить в настройки проекта или скрипты сборки.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">При вызове с параметром</span><span style=" color:#000000;"> </span><span style=" color:#000000; background-color:#fefefe;">--libs</span><span style=" color:#000000;"> утилита выводит список доступных для компоновщика библиотек LLVM, оформленный в виде флагов GCC-совместимого компоновщика.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">-lLLVMLTO -lLLVMObjCARCOpts -lLLVMSymbolize -lLLVMDebugInfoPDB -lLLVMDebugInfoDWARF -lLLVMXCoreDisassembler -lLLVMXCoreCodeGen -lLLVMXCoreDesc -lLLVMXCoreInfo -lLLVMXCoreAsmPrinter -lLLVMSystemZDisassemble -lLLVMSystemZCodeGen -lLLVMSystemZAsmParser -lLLVMSystemZDesc -lLLVMSystemZInfo -lLLVMSystemZAsmPrinter -lLLVMSparcDisassembler -lLLVMSparcCodeGen -lLLVMSparcAsmParser -lLLVMSparcDesc -lLLVMSparcInfo -lLLMSparcAsmPrinter -lLLVMPowerPCDisassembler -lLLVMPowerPCCodeGen -lLLVMPowerPCAsmParser -lLLVMPowerPCDesc -lLLVMPowerPCInfo -lLLVMPowerPCAsmPrinter -lLLVMNVPTXCodeGen -lLLVMNVPTXDesc -lLLVMNVPTXInfo -lLLVMNPTXAsmPrinter -lLLVMMSP430CodeGen -lLLVMMSP430Desc -lLLVMMSP430Info -lLLVMMSP430AsmPrinter -lLLVMMipsDisassembler -lLLVMMipsCodeGen -lLLVMMipsAsmParser -lLLVMMipsDesc -lLLVMMipsInfo -lLLVMMipsAsmPrinter -lLVMHexagonDisassembler -lLLVMHexagonCodeGen -lLLVMHexagonAsmParser -lLLVMHexagonDesc -lLLVMHexagonInfo -lLLVMCppBackendCodeGen -lLLVMCppBackendInfo -lLLVMBPFCodeGen -lLLVMBPFDesc -lLLVMBPFInfo -lLLVMBPFAsmrinter -lLLVMARMDisassembler -lLLVMARMCodeGen -lLLVMARMAsmParser -lLLVMARMDesc -lLLVMARMInfo -lLLVMARMAsmPrinter -lLLVMAMDGPUCodeGen -lLLVMAMDGPUAsmParser -lLLVMAMDGPUDesc -lLLVMAMDGPUUtils -lLLVMAMDGPUInf -lLLVMAMDGPUAsmPrinter -lLLVMAArch64Disassembler -lLLVMAArch64CodeGen -lLLVMAArch64AsmParser -lLLVMAArch64Desc -lLLVMAArch64Info -lLLVMAArch64AsmPrinter -lLLVMAArch64Utils -lLLVMMIRParser -lLLVMLibDriverLLVMOption -lgtest_main -lgtest -lLLVMTableGen -lLLVMLineEditor -lLLVMX86Disassembler -lLLVMX86AsmParser -lLLVMX86CodeGen -lLLVMSelectionDAG -lLLVMAsmPrinter -lLLVMX86Desc -lLLVMMCDisassembler -lLLVMX86Ino -lLLVMX86AsmPrinter -lLLVMX86Utils -lLLVMMCJIT -lLLVMPasses -lLLVMipo -lLLVMVectorize -lLLVMLinker -lLLVMIRReader -lLLVMAsmParser -lLLVMDebugInfoCodeView -lLLVMInterpreter -lLLVMCodeGen -lLLVMScalarOptslLLVMInstCombine -lLLVMInstrumentation -lLLVMProfileData -lLLVMBitWriter -lLLVMOrcJIT -lLLVMTransformUtils -lLLVMExecutionEngine -lLLVMTarget -lLLVMAnalysis -lLLVMRuntimeDyld -lLLVMObject -lLLVMMCParser -lLVMBitReader -lLLVMMC -lLLVMCore -lLLVMSupport</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Для подключения библиотек к проекту Visual Studio вы можете</span></li>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">скопировать полученный от llvm-config список в текстовый редактор</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">с помощью Find/Replace заменить формат </span><span style=" font-size:16px; background-color:#fefefe;">-lAA -lBB</span><span style=" font-size:18px;"> на </span><span style=" font-size:16px; background-color:#fefefe;">AA.lib\nBB.lib\n</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">добавить изменённый список в настройки проекта в раздел “Linker-&gt;Input”</span></li></ol>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">Не пытайтесь скопировать список из примера выше: на вашей системе он может отличаться</span></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">При вызове без параметров утилита выдаёт справку:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">usage: llvm-config &lt;OPTION&gt;... </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">[</span><span style=" color:#000000; background-color:#ffffff;">&lt;COMPONENT&gt;...]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">Get various configuration information needed to compile programs which use</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">LLVM.  Typically called from </span><span style=" color:#dd1144; background-color:#ffffff;">'configure'</span><span style=" color:#000000; background-color:#ffffff;"> scripts.  Examples:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  llvm-config </span><span style=" color:#000080; background-color:#ffffff;">--cxxflags</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  llvm-config </span><span style=" color:#000080; background-color:#ffffff;">--ldflags</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  llvm-config </span><span style=" color:#000080; background-color:#ffffff;">--libs</span><span style=" color:#000000; background-color:#ffffff;"> engine bcreader scalaropts</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">Options:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--version</span><span style=" color:#000000; background-color:#ffffff;">         Print LLVM version.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--prefix</span><span style=" color:#000000; background-color:#ffffff;">          Print the installation prefix.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--src-root</span><span style=" color:#000000; background-color:#ffffff;">        Print the </span><span style=" color:#0086b3; background-color:#ffffff;">source </span><span style=" color:#000000; background-color:#ffffff;">root LLVM was built from.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--obj-root</span><span style=" color:#000000; background-color:#ffffff;">        Print the object root used to build LLVM.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--bindir</span><span style=" color:#000000; background-color:#ffffff;">          Directory containing LLVM executables.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--includedir</span><span style=" color:#000000; background-color:#ffffff;">      Directory containing LLVM headers.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--libdir</span><span style=" color:#000000; background-color:#ffffff;">          Directory containing LLVM libraries.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--cmakedir</span><span style=" color:#000000; background-color:#ffffff;">        Directory containing LLVM cmake modules.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--cppflags</span><span style=" color:#000000; background-color:#ffffff;">        C preprocessor flags </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">for </span><span style=" color:#000000; background-color:#ffffff;">files that include LLVM headers.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--cflags</span><span style=" color:#000000; background-color:#ffffff;">          C compiler flags </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">for </span><span style=" color:#000000; background-color:#ffffff;">files that include LLVM headers.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--cxxflags</span><span style=" color:#000000; background-color:#ffffff;">        C++ compiler flags </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">for </span><span style=" color:#000000; background-color:#ffffff;">files that include LLVM headers.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--ldflags</span><span style=" color:#000000; background-color:#ffffff;">         Print Linker flags.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--system-libs</span><span style=" color:#000000; background-color:#ffffff;">     System Libraries needed to link against LLVM components.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--libs</span><span style=" color:#000000; background-color:#ffffff;">            Libraries needed to link against LLVM components.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--libnames</span><span style=" color:#000000; background-color:#ffffff;">        Bare library names </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">for in</span><span style=" color:#000080; background-color:#ffffff;">-tree</span><span style=" color:#000000; background-color:#ffffff;"> builds.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--libfiles</span><span style=" color:#000000; background-color:#ffffff;">        Fully qualified library filenames </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">for </span><span style=" color:#000000; background-color:#ffffff;">makefile depends.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--components</span><span style=" color:#000000; background-color:#ffffff;">      List of all possible components.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--targets-built</span><span style=" color:#000000; background-color:#ffffff;">   List of all targets currently built.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--host-target</span><span style=" color:#000000; background-color:#ffffff;">     Target triple used to configure LLVM.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--build-mode</span><span style=" color:#000000; background-color:#ffffff;">      Print build mode of LLVM tree </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">e.g. Debug or Release</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--assertion-mode</span><span style=" color:#000000; background-color:#ffffff;">  Print assertion mode of LLVM tree </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">ON or OFF</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--build-system</span><span style=" color:#000000; background-color:#ffffff;">    Print the build system used to build LLVM </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">always cmake</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--has-rtti</span><span style=" color:#000000; background-color:#ffffff;">        Print whether or not LLVM was built with rtti </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">YES or NO</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--has-global-isel</span><span style=" color:#000000; background-color:#ffffff;"> Print whether or not LLVM was built with global-isel support </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">ON or OFF</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--shared-mode</span><span style=" color:#000000; background-color:#ffffff;">     Print how the provided components can be collectively linked </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#dd1144; background-color:#ffffff;">`</span><span style=" color:#000000; background-color:#ffffff;">shared</span><span style=" color:#dd1144; background-color:#ffffff;">`</span><span style=" color:#000000; background-color:#ffffff;"> or </span><span style=" color:#dd1144; background-color:#ffffff;">`</span><span style=" color:#000000; background-color:#ffffff;">static</span><span style=" color:#dd1144; background-color:#ffffff;">`</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--link-shared</span><span style=" color:#000000; background-color:#ffffff;">     Link the components as shared libraries.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--link-static</span><span style=" color:#000000; background-color:#ffffff;">     Link the component libraries statically.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#000080; background-color:#ffffff;">--ignore-libllvm</span><span style=" color:#000000; background-color:#ffffff;">  Ignore libLLVM and link component libraries instead.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">Typical components:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  all               All LLVM libraries </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">(</span><span style=" color:#000000; background-color:#ffffff;">default</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">)</span><span style=" color:#0086b3; background-color:#ffffff;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  engine            Either a native JIT or a bitcode interpreter.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow6"></a><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">И</span><span style=" font-size:x-large; font-weight:600; color:#000000; background-color:#fefefe;">зучаем дистрибутив LLVM</span></h2>
<h3 align="center" style=" margin-top:24px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow7"></a><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">Я</span><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">зык LLVM-IR</span></h3>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">LLVM-IR — это промежуточный язык компиляторов, использующих библиотеки LLVM, именно с ним работают ключевые подсистемы LLVM. Язык поддерживает:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">инструкции, близкие к ассемблерным</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">функции с параметрами и возвращаемым значением и их атрибуты</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">структуры и массивы</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">примитивные типы, например, целые числа от i1 (1-битное) до i64 (64-битное)</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">в присваивании участвуют не переменные, а регистры — считается, что в LLVM бесконечно много регистров</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">имена регистров локальные для функции, обычно генератор кода генерирует имена с помощью возрастающего ряда чисел</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">присваивать регистр может только одна инструкция в пределах функции, для присваивания в цикле потребуется снова прыгнуть на эту инструкцию</span></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">В языке нет ни выражений, ни ООП, поскольку из LLVM-IR без излишних преобразований генерируется машинный код. Оптимизаторы кода в составе LLVM работают именно с LLVM-IR.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;">; Function Attrs: nounwind uwtable</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#000000; background-color:#ffffff;">define</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">@add</span><span style=" color:#000000; background-color:#ffffff;">(</span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%a</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%b</span><span style=" color:#000000; background-color:#ffffff;">) </span><span style=" color:#a61717; background-color:#e3d2d2;">#</span><span style=" color:#009999; background-color:#ffffff;">0</span><span style=" color:#000000; background-color:#ffffff;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%1</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">alloca</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%2</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">alloca</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">store</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%a</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">* </span><span style=" color:#008080; background-color:#ffffff;">%1</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">store</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%b</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">* </span><span style=" color:#008080; background-color:#ffffff;">%2</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%3</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">load</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">* </span><span style=" color:#008080; background-color:#ffffff;">%1</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%4</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">load</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;">* </span><span style=" color:#008080; background-color:#ffffff;">%2</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%5</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">add</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">nsw</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%3</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" color:#008080; background-color:#ffffff;">%4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">ret</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">%5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<h3 align="center" style=" margin-top:24px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow8"></a><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">П</span><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">ример Kaleidoscope</span></h3>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">В состав дистрибутива LLVM включён пример Kaleidoscope (см. каталоги и проекты Kaleidoscope, Kaleidoscope-Ch2, Kaleidoscope-Ch3 и так далее). Для этих же примеров есть актуальные статьи на английском языке:</span><span style=" color:#000000;"> </span><a href="http://llvm.org/docs/tutorial/"><span style=" text-decoration: underline; color:#2a7ae2;">llvm.org/docs/tutorial</span></a><span style=" color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Пример реализует полноценный компилятор с кодогенерацией через LLVM. Особенности примера:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">фронтенд компилятора сильно упрощён, лексер и парсер написаны вручную</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">для простоты примера используются глобальные переменные, от которых легко избавиться средствами ООП</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">бекенд компилятора построен на библиотеках LLVM, для генерации и обработки промежуточного кода использует API библиотек LLVM</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">есть поддержка выражений (включая if-выражение, эквивалентное тернарному оператору)</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">есть поддержка инструкции for</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">есть поддержка вызова внешних функций, написанных на языке C</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">показан полный цикл кодогенерации, включая генерацию отладочной информации</span></li></ul>
<h3 align="center" style=" margin-top:24px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow9"></a><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">У</span><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">тилита llc</span></h3>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Утилита llc получает на вход LLVM-IR код и создаёт машинный код. Благодаря этому она служит прекрасным примером для создания финальной стадии бекенда: генератора машинного кода.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">код прост и понятен, и не содержит внутренней логики обработки данных</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">в своём проекте алгоритм можно упростить ещё сильнее, убрав обработку ненужных вашему компилятору опций командной строки</span></li>
<li style=" color:#000000;" style=" margin-top:0px; margin-bottom:15px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18px;">исходный код незначительно меняется от версии к версии в связи с изменениями в LLVM API</span></li></ul>
<h3 align="center" style=" margin-top:24px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><a name="wow10"></a><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">К</span><span style=" font-size:large; font-weight:600; color:#000000; background-color:#fefefe;">омпиляция из C/C++ в LLVM-IR</span></h3>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Компилятор clang способен компилировать из C/C++ в текстовое представление LLVM-IR, что позволяет исследовать способы генерации кода из различных высокоуровневых конструкций. По умолчанию clang компилирует без оптимизаций, то есть сгенерированный при обходе AST код не искажается проходами оптимизатора.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Допустим, есть файл main.cpp:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#999999; background-color:#ffffff;">#include &lt;stdio.h&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600; color:#999999; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#445588; background-color:#ffffff;">int</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#990000; background-color:#ffffff;">main</span><span style=" color:#000000; background-color:#ffffff;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">    </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">const</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">char</span><span style=" color:#000000; background-color:#ffffff;"> message[] </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">=</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;Hello, World!&quot;</span><span style=" color:#000000; background-color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">    puts(message);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">Команда для компиляции:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">clang++ </span><span style=" color:#000080; background-color:#ffffff;">-S</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#000080; background-color:#ffffff;">-emit-llvm</span><span style=" color:#000000; background-color:#ffffff;"> main.cpp</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fefefe;"><span style=" color:#000000; background-color:#fefefe;">На выходе создаётся файл main.ll с текстовым представлением LLVM-IR:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;">; ModuleID = 'main.cpp'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#000000; background-color:#ffffff;">target</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">datalayout</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;e-m:e-i64:64-f80:128-n8:16:32:64-S128&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#000000; background-color:#ffffff;">target</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">triple</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;x86_64-pc-linux-gnu&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#dd1144; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#008080; background-color:#ffffff;">@_ZZ4mainE7message</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">internal</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">constant</span><span style=" color:#000000; background-color:#ffffff;"> [</span><span style=" color:#009999; background-color:#ffffff;">14</span><span style=" color:#000000; background-color:#ffffff;"> x </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i8</span><span style=" color:#000000; background-color:#ffffff;">] </span><span style=" color:#dd1144; background-color:#ffffff;">c&quot;Hello, World!\00&quot;</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">align</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#009999; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-style:italic; color:#999988; background-color:#ffffff;">; Function Attrs: norecurse uwtable</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#000000; background-color:#ffffff;">define</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">@main</span><span style=" color:#000000; background-color:#ffffff;">() </span><span style=" color:#a61717; background-color:#e3d2d2;">#</span><span style=" color:#009999; background-color:#ffffff;">0</span><span style=" color:#000000; background-color:#ffffff;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" color:#008080; background-color:#ffffff;">%1</span><span style=" color:#000000; background-color:#ffffff;"> = </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">call</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">@puts</span><span style=" color:#000000; background-color:#ffffff;">(</span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i8</span><span style=" color:#000000; background-color:#ffffff;">* </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">getelementptr</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">inbounds</span><span style=" color:#000000; background-color:#ffffff;"> ([</span><span style=" color:#009999; background-color:#ffffff;">14</span><span style=" color:#000000; background-color:#ffffff;"> x </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i8</span><span style=" color:#000000; background-color:#ffffff;">], [</span><span style=" color:#009999; background-color:#ffffff;">14</span><span style=" color:#000000; background-color:#ffffff;"> x </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i8</span><span style=" color:#000000; background-color:#ffffff;">]* </span><span style=" color:#008080; background-color:#ffffff;">@_ZZ4mainE7message</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">0</span><span style=" color:#000000; background-color:#ffffff;">, </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">0</span><span style=" color:#000000; background-color:#ffffff;">))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">  </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">ret</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#009999; background-color:#ffffff;">0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#000000; background-color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:600; color:#000000; background-color:#ffffff;">declare</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i32</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#008080; background-color:#ffffff;">@puts</span><span style=" color:#000000; background-color:#ffffff;">(</span><span style=" font-weight:600; color:#445588; background-color:#ffffff;">i8</span><span style=" color:#000000; background-color:#ffffff;">*) </span><span style=" color:#a61717; background-color:#e3d2d2;">#</span><span style=" color:#009999; background-color:#ffffff;">1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#009999; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#a61717; background-color:#e3d2d2;">attributes</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#a61717; background-color:#e3d2d2;">#</span><span style=" color:#009999; background-color:#ffffff;">0</span><span style=" color:#000000; background-color:#ffffff;"> = { </span><span style=" color:#a61717; background-color:#e3d2d2;">n</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">or</span><span style=" color:#a61717; background-color:#e3d2d2;">e</span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">c</span><span style=" color:#a61717; background-color:#e3d2d2;">urse</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" font-weight:600; color:#000000; background-color:#ffffff;">uwtable</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;disable-tail-calls&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;less-precise-fpmad&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-frame-pointer-elim&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;true&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-frame-pointer-elim-non-leaf&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-infs-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-nans-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;stack-protector-buffer-size&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;8&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;target-cpu&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;x86-64&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;target-features&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;+fxsr,+mmx,+sse,+sse2&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;unsafe-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;use-soft-float&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#a61717; background-color:#e3d2d2;">attributes</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#a61717; background-color:#e3d2d2;">#</span><span style=" color:#009999; background-color:#ffffff;">1</span><span style=" color:#000000; background-color:#ffffff;"> = { </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;disable-tail-calls&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;less-precise-fpmad&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-frame-pointer-elim&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;true&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-frame-pointer-elim-non-leaf&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-infs-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;no-nans-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;stack-protector-buffer-size&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;8&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;target-cpu&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;x86-64&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;target-features&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;+fxsr,+mmx,+sse,+sse2&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;unsafe-fp-math&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> </span><span style=" color:#dd1144; background-color:#ffffff;">&quot;use-soft-float&quot;</span><span style=" color:#000000; background-color:#ffffff;">=</span><span style=" color:#dd1144; background-color:#ffffff;">&quot;false&quot;</span><span style=" color:#000000; background-color:#ffffff;"> }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#008080; background-color:#ffffff;">!llvm.ident</span><span style=" color:#000000; background-color:#ffffff;"> = !{</span><span style=" color:#008080; background-color:#ffffff;">!0</span><span style=" color:#000000; background-color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#008080; background-color:#ffffff;">!0</span><span style=" color:#000000; background-color:#ffffff;"> = !{</span><span style=" color:#008080; background-color:#ffffff;">!&quot;clang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)&quot;</span><span style=" color:#000000; background-color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000; background-color:#ffffff;"><br /></p></body></html>