<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:14pt; font-weight:600;">10.6. Создание и изменение файлов юнитов в systemd. Часть 2</span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">10.6.3. Конвертация SysV Init скриптов в файлы юнитов (Unit Files)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Прежде чем заняться преобразованием скрипта SysV (далее – init-скрпт) в файл юнита, убедитесь, что преобразование еще не было выполнено в другом месте. Все основные службы, установленные в Red Hat Enterprise Linux 7, поставляются со стандартными юнит-файлами, и то же самое относится ко многим сторонним программным пакетам.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преобразование init-скрипта в юнит-файл требует анализа init-скрипта и извлечения из него необходимой информации. На основе полученных данных вы можете создать файл юнита, как описано в <span style=" color:#000000;">разделе 10.6.2 «Создание пользовательских файлов юнита»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Поскольку init-скрипты могут сильно различаться в зависимости от типа сервиса, возможно вам потребуется использовать больше параметров конфигурации для конвертации, чем описано в этой главе. Обратите внимание, что некоторые уровни настройки, которые были доступны в init-скриптах, больше не поддерживаются модулями systemd, см. </span><span style=" color:#000000;">Раздел 10.1.2, «Изменения совместимости»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Большая часть информации, необходимой для конвертации, указана в заголовке скрипта. В следующем примере показан начальный раздел init-скрипта, используемого для запуска службы postfix в Red Hat Enterprise Linux 6 (пример файла юнита для postfix можно найти в <a href="mytetra://note/1712738384j2wv38dlhv"><span style=" text-decoration: underline; color:#0000ff;">предыдущей части</span></a><span style=" color:#000000;"> этой главы</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">): </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">#!/bin/bash</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># postfix      Postfix Mail Transfer Agent</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># chkconfig: 2345 80 30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># description: Postfix is a Mail Transport Agent, which is the program \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">#              that moves mail from one machine to another.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># processname: master</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># pidfile: /var/spool/postfix/pid/master.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># config: /etc/postfix/main.cf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># config: /etc/postfix/master.cf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">### BEGIN INIT INFO</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Provides: postfix MTA</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Required-Start: $local_fs $network $remote_fs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Required-Stop: $local_fs $network $remote_fs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Default-Start: 2 3 4 5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Default-Stop: 0 1 6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Short-Description: start and stop postfix</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Description: Postfix is a Mail Transport Agent, which is the program that </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">#              moves mail from one machine to another.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;">### END INIT INFO</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В приведенном выше примере обязательны только строки, начинающиеся с #chkconfig и #description, поэтому вы можете не найти остальных в разных init-файлах. Текст, заключенный между строками ### BEGIN INIT INFO и ### END INIT INFO, называется заголовком Linux Standard Base (LSB). Если LSB-заголовок указан, то он содержит директивы, определяющие описание службы, зависимости и уровни запуска (runlevels). Далее следует обзор аналитических задач, направленных на сбор данных, необходимых для нового юнит-файла. В качестве примера используется init-скрипт postfix, см. Итоговый файл модуля postfix в </span><span style=" color:#000000;">примере 10.17, «Файл юнита postfix.service»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Поиск описания сервиса</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Найдите описание скрипта в строке, начинающейся с #description. Используйте это описание вместе с именем сервиса в опции Description секции [Unit] в файле юнита. Заголовок LSB может содержать аналогичные данные в строках #Short-Description и #Description.</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Поиск зависимостей сервиса</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Заголовок LSB может содержать несколько директив, которые формируют зависимости между сервисами. Большая часть может быть переведена в опции юнита systemd, см. Таблицу 10.12, «Параметры зависимостей из заголовка LSB».</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Таблица 10.12, Параметры зависимостей из заголовка LSB</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Опция LSB</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Опция юнита</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Provides</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Задает имя сервиса при загрузке, на которое можно ссылаться в других скриптах (с префиксом “$”). Сейчас это не требуется, т.к. юнит-файлы ссылаются на другие юнит-файлы по их именам.</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">–</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Required-Start</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Содержит загрузочные имена необходимых сервисов. Т.е. это зависимости упорядочения, имена необходимых сервисов при переводе заменяются на имена юнит-файлов соответствующих сервисов или таргетов, которым они принадлежат. Например, в случае с postfix зависимость Required-Start: $network была переведена в зависимость After=network.target. </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">After, Before</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Should-Start</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Определяет более слабые зависимости, чем Required-Start. Неудачные зависимости Should-Start не влияют на запуск службы.</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">After, Before</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Required-Stop, Should-Stop</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Определяет негативные зависимости.</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Conflicts</span></p></td></tr></table>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Определение таргета для запуска сервиса</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Строка, начинающаяся с #chkconfig, содержит три числовых значения. Для нас важно первое число, которым представлены уровни запуска по умолчанию для данного сервиса. Используйте </span><span style=" color:#000000;">Таблицу 10.6, «Сравнение уровней запуска SysV с таргетами systemd»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, чтобы перевести эти уровни выполнения в таргеты systemd. Затем перечислите эти таргеты в опции WantedBy в разделе [Install] файла юнита. Например, postfix ранее запускался на уровнях запуска 2, 3, 4 и 5, что соответствует таргетам multi-user.target и graphical.target в Red Hat Enterprise Linux 7. Обратите внимание, что graphical.target зависит от multiuser.target, поэтому нет необходимости указывать оба, как в </span><span style=" color:#000000;">примере 10.17, «Файл модуля postfix.service»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Вы также можете найти информацию о дефолтных и запрещенных уровнях запуска в строках #Default-Start и #Default-Stop в заголовке LSB.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Два других значения, указанные в строке #chkconfig, представляют приоритеты запуска и завершения init-скрипта. Эти значения интерпретируются systemd, если он загружает init-скрипт, но нет эквивалентного юнит-файла.</p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Определение файлов, используемых сервисом</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Init-скрипты требуют загрузки библиотеки функций из выделенной директории и позволяют импортировать файлы конфигурации, среды и PID файлы. Переменные среды указываются в строке, начинающейся с #config в заголовке скрипта и соответствует опции EnvironmentFile в файле юнита. Файл PID, указанный в init-скрипте в строке #pidfile импортируется в файл юнита с опцией PIDFile.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ключевой информацией, которая не включена в заголовок скрипта, является путь к исполняемому файлу сервиса и, возможно, некоторые другие файлы, необходимые для сервиса. В предыдущих версиях Red Hat Enterprise Linux init-скрипты использовали оператор Bash case, чтобы определить поведение службы при действиях по умолчанию, таких как запуск, остановка или перезапуск, а также при выполнении определенных пользователем действий. Следующий фрагмент из init-скрипта postfix показывает блок кода, который должен быть выполнен при запуске сервиса. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">conf_check</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">()</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">    </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-x</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sbin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">postfix </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">exit</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">    </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-d</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">postfix </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">exit</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">    </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-d</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">var</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">spool</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">postfix </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">exit</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make_aliasesdb</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">()</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">if</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$(/usr/sbin/postconf -h alias_database)</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> == </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;hash:/etc/aliases&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># /etc/aliases.db might be used by other MTA, make sure nothing</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># has touched it since our last newaliases call</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">aliases </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-nt</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">aliases.db </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">			</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$ALIASESDB_STAMP</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-nt</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">aliases.db </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">			</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$ALIASESDB_STAMP</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-ot</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">aliases.db </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">return</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">bin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">newaliases</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">touch</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-r</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">aliases.db </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$ALIASESDB_STAMP</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">		</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">bin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">newaliases</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">start</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">()</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$EUID</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">!</span><span style=" font-family:'monospace'; font-size:12pt;">= </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;0&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&amp;&amp;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">exit</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Check that networking is up.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#800000;">${NETWORKING}</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;no&quot;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&amp;&amp;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">exit</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	conf_check</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># Start daemons.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">echo</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-n</span><span style=" font-family:'monospace'; font-size:12pt;"> $</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;Starting postfix: &quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	make_aliasesdb </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&gt;/</span><span style=" font-family:'monospace'; font-size:12pt;">dev</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">null </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&gt;&amp;</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-x</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$CHROOT_UPDATE</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&amp;&amp;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$CHROOT_UPDATE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sbin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">postfix start </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&gt;/</span><span style=" font-family:'monospace'; font-size:12pt;">dev</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">null </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">1</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&gt;&amp;</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&amp;&amp;</span><span style=" font-family:'monospace'; font-size:12pt;"> success </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">||</span><span style=" font-family:'monospace'; font-size:12pt;"> failure $</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">&quot;</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$prog</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;"> start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">RETVAL</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$RETVAL</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-eq</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">0</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&amp;&amp;</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">touch</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$lockfile</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">echo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">	</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">return</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$RETVAL</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">}</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Init-скрипт позволяет указать пользовательские функции, здесь это conf_check() и make_aliasesdb(), которые вызываются из функционального блока start(). В приведенном выше коде упоминаются несколько внешних файлов и директорий: исполняемый файл основного сервиса /usr/sbin/postfix, директории конфигураций /etc/postfix/ и /var/spool/postfix/, а также директория /usr/sbin/postconf/.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Systemd поддерживает только предопределенные действия, но позволяет выполнять пользовательские исполняемые файлы с помощью ExecStart, ExecStartPre, ExecStartPost, ExecStop и ExecReload. В случае с postfix в RHEL 7, /usr/sbin/postfix выполняется вместе со вспомогательными скриптами при запуске сервиса. Посмотрите файл юнита postfix в <span style=" color:#000000;">Примере 10.17, «Файл модуля postfix.service»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Преобразование сложных скриптов требует понимания назначения каждого оператора в скрипте. Некоторые операторы относятся к конкретной версии операционной системы, поэтому вам не нужно переводить их. С другой стороны, в новой среде могут потребоваться некоторые корректировки, как в файле юнита, так и в исполняемом файле сервиса и вспомогательных файлах.</p>
<h2 style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:x-large; font-weight:600;"><br /></h2>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">10.6.4. Изменение существующих файлов юнитов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Службы, установленные в системе, поставляются с файлами юнитов по умолчанию, которые хранятся в директории /usr/lib/systemd/system/. Системные администраторы не должны изменять эти файлы напрямую, любые настройки должны быть ограничены файлами конфигурации в директории /etc/systemd/system/. В зависимости от степени необходимых изменений выберите один из следующих подходов:</span></p>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создайте директори. для дополнительных файлов конфигурации в /etc/systemd/system/unit.d/. Этот метод рекомендуется в большинстве случаев. Это позволяет расширить конфигурацию дополнительными функциональными возможностями, ссылаясь при этом на исходный файл юнита. Поэтому изменения в юните, поисходящие при обновлении пакета, применяются автоматически. См. <span style=" font-family:'DejaVu Sans'; font-size:11pt; color:#000000;">Раздел «Расширение конфигурации юнита по умолчанию»</span> для получения дополнительной информации. </li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создайте копию файла юнита из /usr/lib/systemd/system/ в /etc/systemd/system/ и делайте изменения в ней. Копия переопределяет исходный файл, поэтому изменения, внесенные обновлением пакета, не применяются. Этот метод полезен для внесения значительных изменений в юниты, которые должны сохраняться независимо от обновлений пакета. Подробнее см. <span style=" font-family:'DejaVu Sans'; font-size:11pt; color:#000000;">в разделе «Переопределение конфигурации модуля по умолчанию»</span>.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы вернуться к стандартной конфигурации юнита, просто удалите пользовательские файлы конфигурации в /etc/systemd/system/. Чтобы применить изменения к файлам юнита без перезагрузки системы, выполните: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl daemon-reload</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Опция daemon-reload перезагружает все файлы юнитов и воссоздает все дерево зависимостей для применения любых изменений в файлах юнитов. Того же результата можно добиться с помощью следующей команды: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">init q</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Также, если модифицированный юнит-файл принадлежит работающему сервису, необходимо перезапустить сам сервис для применения новых настроек: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl restart name.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Важно</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы изменить свойства (такие как зависимости или тайм-ауты) сервиса, который обрабатывается init-скриптом SysV, не изменяйте сам init-скрипт. Вместо этого создайте системный файл конфигурации systemd для службы, как описано в разделе <span style=" color:#000000;">«Расширение конфигурации юнита по умолчанию»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и в разделе </span><span style=" color:#000000;">«Переопределение конфигурации юнита по умолчанию»</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Затем управляйте этим сервисом так же, как обычным сервисом systemd.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Например, чтобы расширить конфигурацию сервиса network, не изменяйте init-файл /etc/rc.d/init.d/network. Вместо этого создайте новую директорию /etc/systemd/system/network.service.d/ и drop-in файл /etc/systemd/system/network.service.d/my_config.conf (прим. переводчика: для себя я определяю drop-in файлы как дополнительные конфиги. Система заглядывает в каталоги конфигурации и подбирает то, что там лежит). Затем поместите измененные значения в drop-in файл. <span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Заметка</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">: systemd знает сервис network как network.service, поэтому созданный каталог должен называться network.service.d.</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Расширение конфигурации юнитов</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы добавить дополнительные параметры конфигурации в файл юнита, сначала создайте директорию конфигурации в /etc/systemd/system/. Если вы расширяете юнит сервиса, выполните следующую команду от root: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">mkdir</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">name.service.d</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Замените </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">name</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> именем сервиса, который вы хотите расширить. Вышеуказанный синтаксис применяется ко всем типам юнитов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создайте файл конфигурации в директории, созданной на предыдущем шаге. Имя файла должно иметь суффикс .conf . Наберите: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">touch</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">name.service.d</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">config_name.conf</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Замените </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">config_name</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> на имя файла конфигурации. Этот файл имеет структуру обычного файла юнита, поэтому все директивы должны быть указаны в соответствующих разделах, см. </span><span style=" color:#000000;">Раздел 10.6.1, «Понимание структуры файла юнита»</span><a href="http://www.deuteron.ru/2018/12/18/rh10_6_creating_and_modifying_systemd_unit_files/#sect_10.6.1"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">.</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Например, чтобы добавить зависимость, создайте файл конфигурации со следующим содержимым: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Unit</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">Requires</span><span style=" font-family:'monospace'; font-size:12pt;">=new_dependency</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">After</span><span style=" font-family:'monospace'; font-size:12pt;">=new_dependency</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Где </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">new_dependency</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> обозначает юнит, который помечен как зависимость. Другой пример файла конфигурации, который перезапускает сервис после того, как основной процесс завершится, с задержкой 30 секунд: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Service</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">Restart</span><span style=" font-family:'monospace'; font-size:12pt;">=always</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">RestartSec</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">30</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Рекомендуется создавать небольшие файлы конфигураций, ориентированные на одну задачу. Такие файлы легко переместить или связать (создать линк) с каталогами конфигурации других сервисов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы внесенные изменения вступили в силу, выполните от root: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl daemon-reload</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl restart name.service</span></p></td></tr></table>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Пример 10.20. Расширение конфигурации httpd.service</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Изменим юнит httpd.service так, чтобы при запуске Apache автоматически выполнялся shell-скрипт. Создайте каталог и файл конфигурации: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">~</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># mkdir /etc/systemd/system/httpd.service.d/</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">~</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># touch /etc/systemd/system/httpd.service.d/custom_script.conf</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Предположим, что /usr/local/bin/custom.sh – путь к скрипту, который вы хотите запустить вместе с Apache, вставьте следующий текст в файл custom_script.conf: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Service</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">ExecStartPost</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">local</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">bin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">custom.sh</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы принять изменения, выполните: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">~</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># systemctl daemon-reload</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">~</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic; color:#666666;"># systemctl restart httpd.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Заметка</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Файлы конфигурации из директорий /etc/systemd/system/ имеют приоритет над файлами юнитов в /usr/lib/systemd/system/. Следовательно, если файлы конфигурации содержат параметр, который может быть указан только один раз, например, Description или ExecStart, значение по умолчанию для этого параметра переопределяется. Обратите внимание, что в выходных данных команды systemd-delta, описанной в разделе </span><a href="https://www.deuteron.ru/2018/12/21/rh10_6_creating_and_modifying_systemd_unit_files_part_2/#overriding"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">«Мониторинг переопределенных юнитов»</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, такие юниты всегда помечаются как [EXTENDED], хотя фактически некоторые параметры переопределяются.</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Переопределение конфигурации юнита по умолчанию</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы внести изменения в юнит, которые сохранятся после обновления пакета, сначала скопируйте файл в каталог /etc/systemd/system/. Для этого выполните от root: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">cp</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">name.service </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">name.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Где </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">name</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> – имя сервиса, файл юнита которого вы хотите изменить. Этот синтаксис применим ко всем типам юнитов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Откройте скопированный файл в текстовом редакторе и внесите желаемые изменения. Чтобы принять изменения, выполните от root: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl daemon-reload</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl restart name.service</span></p></td></tr></table>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Пример 10.21. Изменение тайм-аута</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Вы можете указать тайм-аут для каждой службы, чтобы предотвратить зависание системы из-за сбоя в работе службы. Обычно, тайм-аут установлен в 90 секунд для обычных сервисов и 300 секунд для SysV-совместимых сервисов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Например, установим тайм-аут для httpd сервиса:</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скопируйте юнит-файл httpd в директорию /etc/systemd/system/: </li>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:200px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">cp</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">httpd.service </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">httpd.service</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p></td></tr></table>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Откройте файл /etc/systemd/system/httpd.service и определите значение TimeoutStartUSec в секции [Service]: </li>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:200px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Service</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">PrivateTmp</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">true</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">TimeoutStartSec</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Install</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">WantedBy</span><span style=" font-family:'monospace'; font-size:12pt;">=multi-user.target</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p></td></tr></table>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перезагрузите демон systemd: </li>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:200px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl daemon-reload</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p></td></tr></table>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверьте, что новый тайм-аут установлен: </li></ol>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl show httpd </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-p</span><span style=" font-family:'monospace'; font-size:12pt;"> TimeoutStartUSec</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Заметка</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы сменить тайм-аут глобально, введите значение DefaultTimeoutStartSec в файл /etc/systemd/system.conf. Подробнее см. <a href="http://www.deuteron.ru/2018/10/12/rh10_1_introduction_to_systemd/"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">раздел 10.1, “Введение в systemd”</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Мониторинг переопределенных юнитов</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы просмотреть переопределенные или измененные юниты, используйте следующую команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemd-delta</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Например, вывод вышеуказанной команды может выглядеть следующим образом: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">EQUIVALENT</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">default.target → </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">default.target</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">OVERRIDDEN</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs.service → </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs.service</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">---</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs.service      </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2014</span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">10</span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">16</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">21</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">30</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">39.000000000</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-0400</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">+++ </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs.service  </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2014</span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">11</span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">21</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">10</span><span style=" font-family:'monospace'; font-size:12pt;">:00:</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">58.513568275</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-0500</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@@</span><span style=" font-family:'monospace'; font-size:12pt;"> -</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">8</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">7</span><span style=" font-family:'monospace'; font-size:12pt;"> +</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">8</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">8</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@@</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">EnvironmentFile</span><span style=" font-family:'monospace'; font-size:12pt;">=-</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sysconfig</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">ExecStart</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sbin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">automount </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$OPTIONS</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--pid-file</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">run</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">autofs.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">ExecReload</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">bin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">kill</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-HUP</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$MAINPID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-TimeoutSec</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">180</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">+</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">TimeoutSec</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">240</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">+</span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">Restart</span><span style=" font-family:'monospace'; font-size:12pt;">=Always</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Install</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">WantedBy</span><span style=" font-family:'monospace'; font-size:12pt;">=multi-user.target</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">MASKED</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;">     </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">cups.service → </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">cups.service</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">EXTENDED</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;">   </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">usr</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">lib</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sssd.service → </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">etc</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">systemd</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">system</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sssd.service.d</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">journal.conf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">4</span><span style=" font-family:'monospace'; font-size:12pt;"> overridden configuration files found.</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В таблице 10.13 «Типы различий systemd-delta» перечислены типы переопределений, которые можно увидеть в выводе systemd-delta. Обратите внимание, что если файл переопределен, systemd-delta по умолчанию отображает сводку изменений, аналогичную выводу команды diff.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Таблица 10.13, Типы различий systemd-delta</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Опция LSB</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[MASKED] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Замаскированные юниты. Как замаскировать юнит см. </span><a href="http://www.deuteron.ru/2018/10/19/rh10_2_managing_system_services/#sect_10.2.7"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Раздел 10.2.7, “Удаление из автозагрузки”</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[EQUIVALENT] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Неизмененные копии, которые переопределяют исходные файлы, но не отличаются по содержанию, как правило, это символические ссылки.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[REDIRECTED] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Файлы, которые перенаправляют в другой файл.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[OVERRIDEN] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Перезаписанные и измененные файлы.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[EXTENDED] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Файлы, которые расширены файлами .conf в директории /etc/systemd/system/unit.d/. </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[UNCHANGED] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Неизмененные файлы, отображаются при использовании опции --type=unchanged. </span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Рекомендуется запускать systemd-delta после обновления системы, чтобы проверить, есть ли какие-либо обновления для юнитов по умолчанию, которые в настоящее время переопределяются пользовательской конфигурацией. Также можно ограничить вывод только определенным типом различий. Например, чтобы просмотреть только переопределенные блоки [OVERRIDEN], выполните: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemd-delta </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--type</span><span style=" font-family:'monospace'; font-size:12pt;">=overridden</span></p></td></tr></table>
<h2 style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:x-large; font-weight:600;"><br /></h2>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">10.6.5. Работа с юнитами, созданными из шаблона (Instantiated Units)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Можно создать несколько экземпляров из одного файла конфигурации шаблона во время выполнения. Символ «@» используется для обозначения шаблона и ассоциации юнита с ним. Instantiated units могут быть запущены из другого файла юнита (с использованием параметров Requires или Wants) или с помощью команды systemctl start. Instantiated service units именуются следующим образом: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">template_name</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">instance_name.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Где </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">template_name</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> – имя файла конфигурации шаблона. Замените </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">instance_name</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> именем экземпляра юнита. Несколько экземпляров могут указывать на один и тот же файл шаблона с параметрами конфигурации, общими для всех экземпляров юнита. Имя шаблона юнита имеет вид: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">unit_name</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Например, следующая настройка Wants в файле юнита: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">Wants</span><span style=" font-family:'monospace'; font-size:12pt;">=getty</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">ttyA.service,getty</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">ttyB.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">сначала выполняет поиск для заданных сервисных юнитов. Если таких юнитов не найдено, часть между “@” и суффиксом типа игнорируется, и systemd ищет файл getty@.service, считывает из него конфигурацию и запускает сервисы.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подстановочные знаки, называемые спецификаторами единиц, могут использоваться в любом файле конфигурации юнитов. Спецификаторы юнита заменяют определенные параметры модуля и интерпретируются во время выполнения. В таблице 10.14 «Важные спецификаторы юнитов» перечислены полезные для юнитов-шаблонов спецификаторы юнитов.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Таблица 10.14, Важные спецификаторы юнитов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Спецификатор</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Значение</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">%n</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Полное имя юнита</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Полное имя юнита, включая суффикс. %N имеет то же значение, но также заменяет запрещенные символы на коды ASCII.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">%p</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Префикс</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Имя юнита без суффикса типа. Для созданных экземпляров юнитов %p обозначает часть имени юнита перед символом «@».</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">%i</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Instance name Имя экземпляра</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Это часть имени экземпляра юнита между символом «@» и суффиксом типа. %I имеет то же значение, но также заменяет запрещенные символы на коды ASCII.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">%H</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Host name Имя хоста</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Имя хоста работающей системы в момент загрузки конфигурации юнита.</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">%t</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Runtime directory</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Represents the runtime directory, which is either /run for the root user, or the value of the XDG_RUNTIME_DIR variable for unprivileged users.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Представляет собой runtime-директорию, которая либо /run для пользователя root, либо значение из переменной окружения XDG_RUNTIME_DIR для непривилегированных пользователей.</p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Полный список спецификаторов см. в мануале systemd.unit(5). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Например, шаблон getty@.service содержит следующие директивы: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Unit</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">Description</span><span style=" font-family:'monospace'; font-size:12pt;">=Getty on </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">%</span><span style=" font-family:'monospace'; font-size:12pt;">I</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">[</span><span style=" font-family:'monospace'; font-size:12pt;">Service</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">ExecStart</span><span style=" font-family:'monospace'; font-size:12pt;">=-</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">sbin</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">agetty </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--noclear</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">%</span><span style=" font-family:'monospace'; font-size:12pt;">I </span><span style=" font-family:'monospace'; font-size:12pt; color:#007800;">$TERM</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Когда создаются экземпляры getty@ttyA.service и getty@ttyB.service из вышеприведенного шаблона, Description = преобразуется в </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">Getty on ttyA</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">Getty on ttyB</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>