<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">GNU make Версия 3.79</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Апрель 2000 Richard M. Stallman и Roland McGrath</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перевод (C) Владимир Игнатов, 2000 </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Версия перевода 0.1 </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Предисловие</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Система сборки программ Make является базовой системой сборки для многих проектов, написанных на языках Си и Си++ (хотя, через Make можно собирать вообще любые проекты). Она считается настолько типовой, что знание как работает Make почему-то считается само собой разумеющимся для программистов на языках Си и Си++. Многие майнтейнеры действительно могут управляться с Make на базовом уровне, не особо вдаваясь в подробности как Make устроено и что оно делает <span style=" font-weight:600;">на самом деле</span>. А на самом деле Make, как система управления компиляцией и как язык описания сборочных действий - очень развернутая и сложная вещь. Это отдельная большая предметная область, которыю нужно отдельно изучать и понимать несколько лет, и даже после получания такого опыта адекватный программист будет знать, что у него есть пробелы в знаниях касаемо Make и тонкостей его применения.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не стоит верить бравурным недо-программистам, которые говорят: Make? Да там все просто, что там понимать? На самом деле очень даже не просто. И данный материал является всего лишь базовым описанием системы Make, созданным в 2000 году. И естественно, в этом материале не будет тех частей, которые добавляются в Make в последующем его развитии. Кроме того, не бывает книг, которые точно и однозначно могут описать сложную вещь. Для хорошего базового понимания придется переворошить кучу литературы и сделать множество проектов прежде чем человек освоит хотя бы основные моменты, встречающиеся при конфигурировании сборки через Make-файлы.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это руководство немного модифицировано, так как оригинальное руководство и перевод не всегда последовательны, и вызывают множество вопросов по ходу повествования.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC1"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC1"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">азначение программы </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC1"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически определяет какие части большой программы должны быть перекомпилированы, и выполняет необходимые для этого действия. В данном руководстве описывается программа GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, авторами которой являются Richard Stallman и Roland McGrath. Начиная с версии 3.76, разработку программы ведет Paul D. Smith. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяет требованиям раздела 6.2 стандарта </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">IEEE Standard 1003.2-1992</span><span style=" font-family:'Sans'; font-size:12pt;"> (POSIX.2). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В приводимых примерах будут фигурировать программы на языке Си, поскольку они широко распространены. Однако, вы можете использовать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с любым языком программирования для которого имеется компилятор, работающий из командной строки. На самом деле, область применения </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не ограничивается только сборкой программ. Вы можете использовать ее для решения любых задач, где одни файлы должны автоматически обновляться при изменении других файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Перед тем, как использовать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вы должны создать так называемый </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">make-файл (makefile)</span><span style=" font-family:'Sans'; font-size:12pt;">, который будет описывать зависимости между файлами вашей программы, и содержать команды для обновления этих файлов. Как правило, исполняемый файл программы зависит от объектных файлов, которые, в свою очередь, получаются в результате компиляции соответствующих файлов с исходными текстами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">После того, как нужный make-файл создан, простой команды : </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет достаточно для выполнения всех необходимых перекомпиляций если какие-либо из исходных файлов программы были изменены. Используя информацию из make-файла, и, зная время последней модефикации файлов, утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> решает, каких из файлов должны быть обновлены. Для каждого из этих файлов будут выполнены указанные в make-файле команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, в командной строке могут быть заданы параметры, указывающие, какие файлы следует перекомпилировать и каким образом это делать. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC85"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Запуск </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC85"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC2"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC2"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак читать данное руководство</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы - начинающий пользователь make, или просто хотите получить общее представление об этой утилите, то вам следует прочесть несколько первых разделов из каждой главы, пропуская остальные. В каждой главе первые несколько разделов посвяВладимир Игнатовщены введению в тему и содержат общую информацию, а последующие разделы содержат специальную и техническую информацию. Исключение составляет раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC4"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Знакомство с make-файлами</span></a><span style=" font-family:'Sans'; font-size:12pt;">, который целиком посвящен введению в данную тему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы знакомы с другими версиями программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, обратите внимание на раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC114"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Возможности GNU </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC114"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">, в котором описан широкий набор возможностей, имеющихся в утилите GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, а также раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC115"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Несовместимость и нереализованные функции</span></a><span style=" font-family:'Sans'; font-size:12pt;">, в котором описаны несколько вещей, которые имеются в других реализациях, но отсутствуют в GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для быстрого получения справки, смотрите разделы </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;"> и </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC123"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Справочник</span></a><span style=" font-family:'Sans'; font-size:12pt;">, а также раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC36"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена специальных целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC3"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC3"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">шибки и проблемы</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX4"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли у вас возникли проблемы с использованием GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> или вам кажется, что вы обнаружили ошибку в ее работе, пожалуйста, сообщите об этом разработчикам. Мы не может обещать невозможного, однако постараемся исправить положение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Прежде, чем сообщать об ошибке, убедитесь в том что это - действительно ошибка. Еще раз внимательно перечитайте документацию. Если у вас что-то не получается - посмотрите, действительно ли в документации говорится о том, что это можно сделать. Если из документации непонятно - допустимы ли ваши действия или нет, сообщите нам об этом. Это означает ошибку в документации! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Прежде, чем сообщать об ошибке или пытаться исправить ее самостоятельно, попробуйте локализовать ошибку - создать make-файл минимального размера, на котором она проявляется. Затем, вышлите нам этот make-файл вместе с полученными результатами работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Укажите также, каких результатов вы на самом деле ожидали - это поможет нам обнаружить возможные ошибки в документации. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы действительно обнаружили проблему, пожалуйста, сообщите нам об этом по следующему адресу: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">    bug-make@gnu.org </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пожалуйста, укажите номер версии вашей программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Вы можете получить эту информацию, набрав в командной строке </span><span style=" font-family:'monospace'; font-size:12pt;">`make --version'</span><span style=" font-family:'Sans'; font-size:12pt;">. Не забудьте также указать тип вашей машины и операционной системы. По возможности, укажите содержимое файла </span><span style=" font-family:'monospace'; font-size:12pt;">`config.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, который получается в результате работы процесса конфигурирования на вашей машине. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC4"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC4"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">З</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">накомство с make-файлами (makefiles)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для работы с утилитой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вам понадобится так называемый </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">make-файл (makefile)</span><span style=" font-family:'Sans'; font-size:12pt;">, который будет содержать описание требуемых действий. Как правило, make-файл описывает, каким образом нужно компилировать и компоновать программу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этой главе мы обсудим простой make-файл, который описывает, как скомпилировать и скомпоновать программу - текстовой редактор. Наш текстовой редактор будет состоять из восьми файлов с исходными текстами на языке Си и трех заголовочных файлов. Make-файл также может инструктировать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> как выполнять те или иные действия, когда явно будет затребовано их выполнение (например, удалить определенные файлы в ответ на команду &quot;очистка&quot;). Пример более сложного make-файла будет приведен в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC125"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Пример &quot;сложного&quot; make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При компиляции текстового редактора, любой файл с исходным текстом, который был модефицирован, должен быть откомпилирован заново. Если был модефицирован какой-либо из заголовочных файлов, то, во избежании проблем, должны быть перекомпилированы все исходные файлы, которые включали в себя этот заголовочный файл. Каждая компиляция исходного файла породит новую версию соответствующего ему объектного файла. И, наконец, если какие-либо из исходных файлов были перекомпилированы, то все объектные файлы (как &quot;новые&quot;, так и оставшиеся от предыдущих компиляций) должны быть заново скомпонованы для получения новой версии исполняемого файла нашего текстового редактора. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC5"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC5"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак выглядят правила (rules)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX10"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ростой make-файл состоит из &quot;правил&quot; (rules) следующего вида: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX13"></a><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">ц</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">ель</span><span style=" font-family:'monospace'; font-size:12pt;"> ... : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">пререквизит</span><span style=" font-family:'monospace'; font-size:12pt;"> ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">цель (target)</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой имя файла, который генерируется в процессе работы утилиты </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Примером могут служить объектные и исполняемый файлы собираемой программы. Цель также может быть именем некоторого действия, которое нужно выполнить (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> - очистить). Подробнее это обсуждает в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели </span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Пререквизит (prerequisite)</span><span style=" font-family:'Sans'; font-size:12pt;"> - это файл, который используется как исходные данные для порождения цели. Очень часто цель зависит сразу от нескольких файлов. Кроме того, в качестве пререквизита может быть указана </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX16"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">К</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">оманда</span><span style=" font-family:'Sans'; font-size:12pt;"> - это действие, выполняемое утилитой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. В правиле может содержаться несколько команд - каждая на своей собственной строке. </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Важное замечание:</span><span style=" font-family:'Sans'; font-size:12pt;"> строки, содержащие команды обязательно должны начинаться с символа табуляции (делается кнопкой TAB)! Это - &quot;грабли&quot;, на которые наступают многие начинающие пользователи, которые пытаются форматировать make-файлы пробелами.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, команды находятся в правилах с пререквизитами и служат для создания файла-цели, если какой-нибудь из пререквизитов был модефицирован. Однако, правило, имеющее команды, не обязательно должно иметь пререквизиты. Например, правило с целью </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> (&quot;очистка&quot;), содержащее команды удаления, может не иметь пререквизитов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Правило (rule)</span><span style=" font-family:'Sans'; font-size:12pt;"> описывает, когда и каким образом следует обновлять файлы, указанные в нем в качестве цели. Для создания или обновления цели, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> исполняет указанные в правиле команды, используя пререквизиты в качестве исходных данных. Правило также может описывать каким образом должно выполняться некоторое действие. Подробно это обсуждается в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC20"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Составление правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Помимо правил, make-файл может содержать и другие конструкции, однако, простой make-файл может состоять и из одних лишь правил. Правила могут выглядеть более сложными, чем приведенный выше шаблон, однако все они более или менее соответствуют ему по структуре. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC6"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC6"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ример простого make-файла</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX17"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">от пример простого make-файла, в котором описывается, что исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">edit</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от восьми объектных файлов, которые, в свою очередь, зависят от восьми соответствующих исходных файлов и трех заголовочных файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В данном примере, заголовочный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> включается во все файлы с исходным текстом. Заголовочный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`command.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> включается только в те исходные файлы, которые относятся к командам редактирования, а файл </span><span style=" font-family:'monospace'; font-size:12pt;">`buffer.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> - только в &quot;низкоуровневые&quot; файлы, непосредственно оперирующие буфером редактирования. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">edit : main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">       insert.o search.o files.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o edit main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                   insert.o search.o files.o utils.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o : main.c defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c main.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">kbd.o : kbd.c defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c kbd.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">command.o : command.c defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c command.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">display.o : display.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c display.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">insert.o : insert.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c insert.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">search.o : search.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c search.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files.o : files.c defs.h buffer.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c files.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">utils.o : utils.c defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c utils.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean :</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm edit main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">           insert.o search.o files.o utils.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для повышения удобочитаемости, мы разбили длинные строки на две части с помощью символа обратной косой черты, за которым следует перевод строки. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для того, чтобы с помощью этого make-файла создать исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">, наберите:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для того, чтобы удалить исполняемый и объектные файлы из директории проекта, наберите:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make clean </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В приведенном примере, целями, в частности, являются объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`kbd.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">. К пререквизитам относятся такие файлы, как </span><span style=" font-family:'monospace'; font-size:12pt;">`main.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;">. Каждый объектный файл, фактически, является одновременно и целью и пререквизитом. Примерами команд могут служить </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c main.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c kbd.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В случае, если цель является файлом, этот файл должен быть перекомпилирован или перекомпонован всякий раз, когда был изменен какой-либо из его пререквизитов. Кроме того, любые пререквизиты, которые сами генерируются автоматически, должны быть обновлены первыми. В нашем примере, исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от восьми объектных файлов; объектный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от исходного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`main.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и заголовочного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">За каждой строкой, содержащей цель и пререквизиты, следует строка с командой. Эти команды указывают, каким образом надо обновлять целевой файл. В начале каждой строки, содержащей команду, должен находится символ табуляции. Именно наличие символа табуляции является признаком, по которому </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> отличает строки с командами от прочих строк make-файла. Имейте ввиду, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не имеет ни малейшего представления о том, как работают эти команды. Поэтому, ответственность за то, что выполняемые команды нужным образом обновят целевой файл, целиком ложится на вас. Утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> просто исполняет указанные в правиле команды если цель нуждается в обновлении. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Цель </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> является не файлом, а именем действия. Поскольку, при обычной сборке программы это действие не требуется, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> не является пререквизитом какого-либо из правил. Следовательно, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет &quot;трогать&quot; это правило, пока вы специально об этом не попросите. Заметьте, что это правило не только не является пререквизитом, но и само не содержит каких-либо пререквизитов. Таким образом, единственное предназначение данного правила - выполнение указанных в нем команд. Цели, которые являются не файлами, а именами действий называются </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">абстрактными целями (phony targets)</span><span style=" font-family:'Sans'; font-size:12pt;">. Абстрактные цели подробно рассматриваются в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">. В разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при выполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;"> описано, как заставить </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> игнорировать ошибки, которые могут возникнуть при выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;"> и любых других команд. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC7"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC7"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC7"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC7"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> обрабатывает make-файл</span></a></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX27"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">о умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> начинает свою работу с первой встреченной цели (кроме целей, чье имя начинается с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;">). Эта цель будет являться </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">главной целью по умолчанию (default goal)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Главная цель (goal)</span><span style=" font-family:'Sans'; font-size:12pt;"> - это цель, которую стремится достичь </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве результата своей работы. В разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC87"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аргументы для задания главной цели</span></a><span style=" font-family:'Sans'; font-size:12pt;"> обсуждается, каким образом можно явно задать главную цель. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В примере из предыдущего раздела, главная цель заключалась в обновлении исполняемого файла </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">, поэтому мы поместили данное правило в начало make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, когда вы даете команду: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> читает make-файл из текущей директории и начинает его обработку с первого встреченного правила. В нашем примере это правило обеспечивает перекомпоновку исполняемого файла </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">. Однако, прежде чем </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сможет полностью обработать это правило, ей нужно обработать правила для всех файлов, от которых зависит </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">. В данном случае - от всех объектных файлов программы. Каждый из этих объектных файлов обрабатывается согласно своему собственному правилу. Эти правила говорят, что каждый файл с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> (объектный файл) получается в результате компиляции соответствующего ему исходного файла. Такая компиляция должна быть выполнена, если исходный файл или какой-либо из заголовочных файлов, перечисленных в качестве пререквизитов, являются &quot;более новыми&quot;, чем объектный файл, либо объектного файла вообще не существует. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другие правила обрабатывается потому, что их цели прямо или косвенно являются пререквизитами для главной цели. Если какое-либо правило никоим образом не &quot;связано&quot; с главной целью (то есть ни прямо, ни косвенно не являются его пререквизитом), то это правило не обрабатывается. Чтобы задействовать такие правила, придется явно указать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на необходимость их обработки (подобным, например, образом: </span><span style=" font-family:'monospace'; font-size:12pt;">make clean</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Перед перекомпиляцией объектного файла, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривает необходимость обновления его пререквизитов, в данном случае - файла с исходным текстом и заголовочных файлов. В нашем make-файле не содержится никаких инструкций по обновлению этих файлов - файлы с расширениями </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> не являются целями каких-либо правил. Таким образом, утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не предпринимает никаких действий с этими файлами. Однако, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> могла бы автоматически обновлять и исходные тексты, если бы они, например, генерировались с помощью программ, подобных Bison или Yacc, и для них были бы определены соответствующие правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">После перекомпиляции объектных файлов, которые нуждаются в этом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> принимает решение - нужно ли перекомпоновывать файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это нужно делать, если файла </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> не существует или какой-нибудь из объектных файлов по сравнению с ним является более &quot;свежим&quot;. Если какой-либо из объектных файлов только что был откомпилирован заново, то он будет &quot;моложе&quot;, чем файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;">. Соответственно, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет перекомпонован. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Так, если мы модефицируем файл </span><span style=" font-family:'monospace'; font-size:12pt;">`insert.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и запустим </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, этот файл будет скомпилирован заново для обновления объектного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`insert.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и, затем, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет перекомпонован. Если мы изменим файл </span><span style=" font-family:'monospace'; font-size:12pt;">`command.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> и запустим </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, то будут перекомпилированы объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`kbd.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`command.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`files.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, а затем исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет скомпонован заново. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC8"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC8"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">У</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">прощение make-файла с помощью переменных</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX33"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> приведенном выше примере, в правиле для </span><span style=" font-family:'monospace'; font-size:12pt;">`edit'</span><span style=" font-family:'Sans'; font-size:12pt;"> нам дважды пришлось перечислять список объектных файлов программы: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">edit : main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">              insert.o search.o files.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o edit main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                   insert.o search.o files.o utils.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX35"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">одобное дублирование чревато ошибками. При добавлении в проект нового объектного файла, можно добавить его в один список и забыть про другой. Мы можем устранить подобный риск, и, одновременно, упростить make-файл, используя переменные. </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Переменные (variables)</span><span style=" font-family:'Sans'; font-size:12pt;"> позволяют, один раз определив текстовую строку, затем использовать ее многократно в нужных местах. Переменные подробно обсуждаются в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX36"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычной практикой при построении make-файлов является использование переменной с именем </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">OBJECTS</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">objs</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">OBJS</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">obj</span><span style=" font-family:'Sans'; font-size:12pt;">, или </span><span style=" font-family:'monospace'; font-size:12pt;">OBJ</span><span style=" font-family:'Sans'; font-size:12pt;">, которая содержит список всех объектных файлов программы. Мы могли бы определить подобную переменную с именем </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> таким образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          insert.o search.o files.o utils.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Далее, всякий раз, когда нам нужен будет список объектных файлов, мы можем использовать значение этой переменной с помощью записи </span><span style=" font-family:'monospace'; font-size:12pt;">`$(objects)'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот как будет выглядеть наш простой пример с использованием переменной для хранения списка объектных файлов: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          insert.o search.o files.o utils.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">edit : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o edit $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o : main.c defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c main.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">kbd.o : kbd.c defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c kbd.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">command.o : command.c defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c command.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">display.o : display.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c display.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">insert.o : insert.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c insert.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">search.o : search.c defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c search.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files.o : files.c defs.h buffer.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c files.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">utils.o : utils.c defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c utils.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean :</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm edit $(objects) </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC9"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC9"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еявные правила упрощают make-файл</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX41"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">а самом деле, нет необходимости явного указания команд компиляции отдельно для каждого из исходных файлов. Утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сама может &quot;догадаться&quot; об использовании нужных команд, поскольку у нее имеется, так называемое, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">неявное правило (implicit rule)</span><span style=" font-family:'Sans'; font-size:12pt;"> для обновления файлов с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> из файлов с расширеним </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, она бы использовала команду </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c main.c -o main.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> для преобразования файла </span><span style=" font-family:'monospace'; font-size:12pt;">`main.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в файл </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, можно убрать явное указание команд компиляции из правил, описывающих построение объектных файлов. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда файл с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически используется подобным образом, он также автоматически добавляется в список пререквизитов &quot;своего&quot; объектного файла. Таким образом, мы вполне можем убрать файлы с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> из списков пререквизитов объектных файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот новый вариант нашего примера, в который были внесены оба описанных выше изменения, а также используется переменная </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          insert.o search.o files.o utils.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">edit : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o edit $(objects)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o : defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">kbd.o : defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">command.o : defs.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">display.o : defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">insert.o : defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">search.o : defs.h buffer.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files.o : defs.h buffer.h command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">utils.o : defs.h</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY : clean</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean :</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm edit $(objects) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Примерно так и выглядят make-файлы в реальной практике. Для правила с </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> здесь использована более сложная запись, которую мы обсудим позже (смотрите разделы </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">, и </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Из-за своего удобства, неявные правила широко используются и играют важную роль в работе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC10"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC10"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Д</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ругой стиль написания make-файлов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX44"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли для создания объектных файлов используются только неявные правила, то можно использовать другой стиль написания make-файлов. В таком make-файле записи группируются по их пререквизитам, а не по их целям. Вот как может выглядеть подобный make-файл: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o kbd.o command.o display.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          insert.o search.o files.o utils.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">edit : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o edit $(objects)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects) : defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">kbd.o command.o files.o : command.h</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">display.o insert.o search.o files.o : buffer.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, заголовочный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> объявляется пререквизитом для всех объектных файлов программы. Файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`command.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`buffer.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> являются пререквизитами для перечисленных объектных файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Какой стиль построения make-файлов предпочесть - является делом вкуса. Альтернативный стиль более компактен, однако он нравится не всем - многие считают более &quot;естественным&quot; располагать информацию о каждой цели в одном месте, а не &quot;распылять&quot; ее по make-файлу. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC11"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC11"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">равило для очистки каталога</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX45"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">омпиляция программы - не единственная вещь, для которой вы, возможно, захотите написать правила. Часто, в make-файле указывается, каким образом можно выполнить некоторые другие действия, не относящиеся к компиляции программы. Таким действием, например, может быть удаление все объектных и исполняемых файлов программы для очистки каталога. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX47"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">от как можно было бы написать правило для очистки каталога в нашем проекте текстового редактора: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm edit $(objects) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На практике, скорее всего, мы бы записали это правило чуть более сложным способом, предполагающим возможность непредвиденных ситуаций: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY : clean</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean :</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm edit $(objects) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Такая запись предотвратит возможную путаницу если, вдруг, в каталоге будет находится файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также позволит </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> продолжить работу, даже если команда </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;"> завершится с ошибкой (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">, а также раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобное правило не следует помещать в начало make-файла, поскольку мы не хотим, чтобы оно запускалось &quot;по умолчанию&quot;! В нашем примере, мы помещаем данное правило в конец make-файла, чтобы главной целью по умолчанию оставалась сборка файла </span><span style=" font-family:'monospace'; font-size:12pt;">edit</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">clean</span><span style=" font-family:'Sans'; font-size:12pt;"> не является пререквизитом цели </span><span style=" font-family:'monospace'; font-size:12pt;">edit</span><span style=" font-family:'Sans'; font-size:12pt;">, это правило не будеть выполняться, если вызывать </span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;"> без аргументов. Для запуска данного правила, нужно будет набрать </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC85"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Запуск </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC85"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC12"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC12"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">оздание make-файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX48"></a><span style=" font-family:'Sans'; font-size:12pt;">M</span><span style=" font-family:'Sans'; font-size:12pt;">ake-файл является хранилищем информации, указывающей программе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, каким образом нужно перекомпилировать проект. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC13"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC13"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">з чего состоят make-файлы</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Make-файл может состоять из конструкций пяти видов: </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">явные правила</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">неявные правила</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">определения переменных</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">директивы</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">комментарии</span><span style=" font-family:'Sans'; font-size:12pt;">. Правила, переменные и директивы подробно рассматриваются в следующих главах. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX49"></a><span style=" font-weight:600;">Я</span><span style=" font-weight:600;">вное правило (explicit rule)</span> описывает, когда и каким образом следует обновлять файлы, называемые целями правила. В этом правиле перечисляются файлы, от которых зависит цель правила (так называемые <span style=" font-weight:600;">пререквизиты</span>), а также могут быть заданы команды, которые следует использовать для создания или обновления цели. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC20"><span style=" text-decoration: underline; color:#0000ff;">Составление правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Неявное правило (implicit rule)</span> описывает, когда и каким образом нужно обновлять некоторую группу файлов, имена которых подходят под определенный шаблон. Такое правило описывает, как цель может зависеть от файла со &quot;сходным&quot; именем и задает команды для обновления целей. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Определение переменной (variable definition)</span> - это строка make-файла, в которой переменной присваивается определенное текстовое значение. Далее, это значение может быть &quot;подставлено&quot; в нужном месте текста. В нашем примере make-файла, переменная <span style=" font-family:'monospace';">objects</span> определялась как список объектных файлов программы (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC8"><span style=" text-decoration: underline; color:#0000ff;">Упрощение make-файла с помощью переменных</span></a>). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Директива</span> указывает программе <span style=" font-family:'monospace';">make</span> на необходимость произведения некоторого специального действия во время чтения make-файла. Возможны, в частности, следующие действия: </li>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтение другого make-файла (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a>). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Решение (на основе значения переменных) об использовании или игнорировании части make-файла (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC71"><span style=" text-decoration: underline; color:#0000ff;">Условные части make-файла</span></a>). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Определение многострочной переменной, состоящей из нескольких строк (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC67"><span style=" text-decoration: underline; color:#0000ff;">Многострочные переменные</span></a>). </li></ul>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Символ <span style=" font-family:'monospace';">`#'</span> обозначает начало <span style=" font-weight:600;">комментария</span>. Весь текст, начиная с этого символа и до конца строки, будет игнорирован. Комментарий может быть продолжен на следущую строку с помощью одиночного символа обратной косой черты, находящегося в конце строки. Комментарии могут находиться практически в любом месте make-файла за несколькими исключениями. Они не могут находится внутри директивы <span style=" font-family:'monospace';">define</span> и, возможно, внутри команд (поскольку, здесь уже интерпретатор командной строки будет решать - что именно является комментарием). Строка make-файла, целиком состоящая из комментария, рассматривается как пустая и игнорируется. </li></ul>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC14"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC14"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">мена make-файлов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX57"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">о умолчанию, когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> ищет make-файл для обработки, она поочередно пробует найти файлы со следующими именами (в указанном порядке): </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`makefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX64"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, вам имеет смысл давать своему make-файлу имя </span><span style=" font-family:'monospace'; font-size:12pt;">`makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, либо </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">. Мы рекомендуем использовать имя </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, потому что при выводе содержимого каталога, файл с таким именем будет находится в начале списка, наряду с такими важными файлами как </span><span style=" font-family:'monospace'; font-size:12pt;">`README'</span><span style=" font-family:'Sans'; font-size:12pt;">. Первое из проверяемых имен - </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> - не может быть рекомендовано для большинсства make-файлов. Это имя можно использовать, если ваш make-файл специфичен для GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> и не будет обрабатываться другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Другие версии программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> ищут make-файлы с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`makefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, но не </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В том случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не может найти файлов с перечисленными выше именами, то она пробует продолжить работу без использования make-файла. В таком случае, при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> вы должны явно указать главную цель и утилита попробует достичь этой цели, используя только &quot;встроенные&quot; в нее неявные правила. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX65"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли вы хотите использовать &quot;нестандартное&quot; имя для вашего make-файла, вы можете указать его в командной строке, используя опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">. Аргументы </span><span style=" font-family:'monospace'; font-size:12pt;">`-f </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_файла</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--file=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_файла</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">, указывают программе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на необходимость использования файла с именем </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя_файла</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве make-файла. Вы можете задать обработку сразу нескольких make-файлов, перечислив их в командной строке с помощь нескольких опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">. Все указанные таким образом make-файлы логически &quot;объединяются&quot; в том порядке, как они были заданы в командной строке. При наличии в командной строке опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">, автоматического поиска make-файлов с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`makefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, не производится. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC15"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC15"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">одключение других make-файлов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX72"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">стретив в make-файле директиву </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> приостанавливает чтение текущего make-файла и, прежде чем продолжить работу, прочитывает один или несколько указанных в этой директиве make-файлов. Эта директива представляет собой строку make-файла, выглядящую подобным образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена_файлов</span><span style=" font-family:'monospace'; font-size:12pt;">... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена файлов могут представлять собой шаблоны имен, допустимые в интерпретаторе командной строки. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В начале строки могут находится дополнительные пробелы - все они будут игнорированы. Наличие символа табуляции в начале строки недопустимо, поскольку такие строки </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> считает командами. Между словом </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;"> и началом списка файлов, а также между именами файлов необходим пробел. Лишние пробелы между именами, а также пробелы после конца директивы, игнорируются. В конце строки с директивой может находится комментарий, начинающийся, как обычно, с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;">. Если имена файлов содержат ссылки на переменные или функции, то эти ссылки &quot;раскрываются&quot; (вместо них подставляются вычисленные значения). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если, например, у вас есть три файла с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.mk'</span><span style=" font-family:'Sans'; font-size:12pt;"> - </span><span style=" font-family:'monospace'; font-size:12pt;">`a.mk'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`b.mk'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`c.mk'</span><span style=" font-family:'Sans'; font-size:12pt;">, а переменная </span><span style=" font-family:'monospace'; font-size:12pt;">$(bar)</span><span style=" font-family:'Sans'; font-size:12pt;"> ссылается на строку </span><span style=" font-family:'monospace'; font-size:12pt;">bish bash</span><span style=" font-family:'Sans'; font-size:12pt;">, то следующая запись </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include foo *.mk $(bar) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет эквивалентна </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include foo a.mk b.mk c.mk bish bash </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывает директиву </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">, она приостанавливает чтение текущего make-файла и поочередно читает каждый файл из списка, указанного в директиве. Когда весь список будет прочитан, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> возвращается к обработке make-файла, в котором была встречена директива </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директива </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;"> может оказаться полезной если, предположим, у нас имеется несколько программ, собираемых при помощи отдельных make-файлов, которым требуется наличие некоторого &quot;общего&quot; набора определений переменных (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">) или шаблонных правил (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другой случай, когда директива </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть использована - это автоматическая генерация пререквизиттов для исходных файлов. Автоматически сгенерированные пререквизиты могут быть помещены в отдельный файл, который, затем, будет включаться в основной make-файл программы. Подобная практика, в целом, выглядит более привлекательной, чем &quot;беспорядочное&quot; добавление новых пререквизитов в конец главного make-файла, которое традиционно практикуется при работе с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC43"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматическая генерация списка пререквизитов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX81"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли указанное в директиве имя начинается не с символа '/' и файл с таким именем отсутствует в текущей директории, производится его поиск еще в нескольких каталогах. Сначала поиск производится во всех каталогах, которые были указаны в командной строке с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-I'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--include-dir'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Затем, поиск производится поочередно в следующих директориях (если, конечно, они существуют): </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">prefix</span><span style=" font-family:'monospace'; font-size:12pt;">/include'</span><span style=" font-family:'Sans'; font-size:12pt;"> (обычно </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/include'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><a name="DOCF1"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#FOOT1"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">(</span></a><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">1)</span><span style=" font-family:'Sans'; font-size:12pt;">) </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/gnu/include'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/include'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/include'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если поиск включаемого make-файла завершился неудачно, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выдает предупреждающее сообщение, которое, однако не является фатальной ошибкой, поскольку обработка make-файла, содержащего директиву </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">, еще продолжается. После того, как все включаемые файлы будут прочитаны, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается создать или обновить те из них, которые не существуют или устарели. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC17"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматическое обновление make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Только после неудачной попытки найти способ создания отсутствующих make-файлов, ситуация будет квалифицирована как фатальная ошибка и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> завершит работу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы хотите, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> просто игнорировала make-файлы, которые не существуют и не могут быть построены автоматически, используйте директиву </span><span style=" font-family:'monospace'; font-size:12pt;">-include</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">-include </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена_файлов</span><span style=" font-family:'monospace'; font-size:12pt;">... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эта директива работает аналогично директиве </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">, за исключением того, что отсутствие включаемых make-файлов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имена_файлов</span><span style=" font-family:'Sans'; font-size:12pt;"> не вызывает ошибки (даже не выдается каких-либо предупреждающих сообщений). Для совместимости с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, директива </span><span style=" font-family:'monospace'; font-size:12pt;">-include</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет второе, дополнительное имя </span><span style=" font-family:'monospace'; font-size:12pt;">sinclude</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC16"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC16"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еременная </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC16"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">MAKEFILES</span></a></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX88"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли среди переменных среды (environment variables) имеется переменная с именем </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;">, то ее содержимое интерпретируется как список имен (разделенных пробелами) дополнительных make-файлов, которые должны быть прочитаны перед тем, как начнут обрабатываться &quot;основные&quot; make-файлы. Этот механизм работает во многом аналогично директиве </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">. Аналогичным образом производится и поиск этих дополнительных make-файлов в разных каталогах (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). При этом, главная цель не может браться из этих файлов, а отсутствие какого-либо из них не рассматривается как ошибка. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX91"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">дно из основных применений переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> - это организация &quot;связи&quot; между рекурсивными вызовами </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Обычно, нежелательно устанавливать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> перед первым вызовом </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (на самом &quot;высоком&quot; уровне), чтобы не создавать причудливую &quot;смесь&quot; из основного make-файла и файлов, перечисленных в </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;">. Однако, если вы запускаете </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> без указания конкретного make-файла, дополнительные make-файлы, перечисленные в </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> могут сделать что-нибудь полезное в помощь встроенным в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> неявным правилам, например, задать нужные пути поиска (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC26"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Поиск пререквизитов по каталогам</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Некоторые пользователя соблазняются возможностью автоматически устанавливать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> при входе в систему, и пишут свои make-файлы в рассчете на это. Делать этого категорически не рекомендуется, поскольку такие make-файлы не будут работать при попытке их использования другими пользователями. Гораздо лучше, явно подключать нужные make-файлы с помощью обычной директивы </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов </span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC17"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC17"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">втоматическое обновление make-файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX92"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">ногда make-файлы могут быть получены из других файлов, таких как файлы RCS или SCCS. Если make-файл может быть получен из других файлов, скорее всего, вы захотите, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> всегда работала с самой &quot;свежей&quot; версией этого файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для этого, после чтения всех make-файлов, утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поочередно рассматривает каждый из них в качестве главной цели, пробуя обновить их. Если в make-файле имеется правило (найденное в этом же make-файле, либо в каком-нибудь другом), указывающее на способ его обновления, или имеется неявное правило, которое может быть к нему применено, то этот make-файл, при необходимости, обновляется (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). После того, как все make-файлы были проверены, если хотя бы один из них был действительно обновлен, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> начинает всю процедуру сначала и перечитывает все make-файлы заново. Возможно, утилита опять попытается обновить некоторые из make-файлов, но как правило, они уже не будут меняться, поскольку только что была получена их самая свежая версия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вам заранее известно, что некоторые ваши make-файлы не могут быть &quot;обновлены&quot;, и вы хотите, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не пыталась искать подходящие для них неявные правила (скажем, по соображениям эффективности), вы можете использовать любой &quot;стандартный&quot; прием для отключения поиска неявных правил. Например, вы можете создать явное правило с пустой командой, где в качестве цели выступает нужный вам make-файл (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC56"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Пустые команды</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если в make-файле для обновления файла имеется правило с двойным двоеточием (double-colon rule), не имеющее пререквизитов, то этот файл всегда будет обновляться (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC42"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Правила с двойным двоеточием</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В случае, если бы целью такого правила являлся make-файл, мог бы возникнуть бесконечный цикл: make-файл все время бы обновлялся, что, в свою очередь, заставляло бы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> заново перечитывать все make-файлы и так далее, до бесконечности. Поэтому, во избежание зацикливания, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> пытается обновить make-файлы, которые являются целями правил с двойным двоеточием без пререквизитов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В том случае, если при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, ей не были указаны make-файлы для обработки (с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">), то утилита попытается найти подходящий make-файл, поочередно пробую принятые по умолчанию имена make-файлов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC14"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В отличие от make-файлов, указываемых с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не может быть уверена, что эти файлы вообще существуют. Однако, если make-файл с именем, принятым по умолчанию, в данный момент не существует, но может быть построен с использованием каких-либо известных </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> правил, то вы, скорее всего захотите, чтобы эти правила были выполнены и нужный make-файл был создан. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поэтому, если ни один из make-файлов с принятыми по умолчанию именами не существует, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предпринимает попытку создать их (в том же самом порядке, каком происходил их поиск). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC14"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена make-файлов </span></a><span style=" font-family:'Sans'; font-size:12pt;">. Эти попытки продолжаются до тех пор, пока какой-либо из make-файлов не будет создан, либо </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;перепробует&quot; все имена make-файлов, принятых по умолчанию. Заметьте, что невозможность найти или построить make-файл не является ошибкой, поскольку наличие make-файла не является обязательным условием работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--touch'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">), вряд ли вы захотите оказаться в ситуации, когда для определения того, какие цели нужно пометить как обновленные, будет использована устаревшая версия make-файла. Поэтому, опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> не оказывает влияния на процедуру обновления make-файлов - они обновляются даже тогда, когда она указана. Аналогично, опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> (или </span><span style=" font-family:'monospace'; font-size:12pt;">`--question'</span><span style=" font-family:'Sans'; font-size:12pt;">) и </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> (или </span><span style=" font-family:'monospace'; font-size:12pt;">`--just-print'</span><span style=" font-family:'Sans'; font-size:12pt;">) не отменяют процедуру обновления файлов; в противном случае, использование устаревшей версии make-файла могло бы вызвать некорректную работу этих опций. Таким образом, при обработке </span><span style=" font-family:'monospace'; font-size:12pt;">`make -f mfile -n foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`mfile'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет обновлен, затем он будет перечитан заново, и, после этого, будут напечатаны команды, обновляющие цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> и ее пререквизиты. Эти команды будут соответствовать работе с обновленной версией </span><span style=" font-family:'monospace'; font-size:12pt;">`mfile'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, в определенных ситуациях, вам может понадобиться избежать обновления make-файлов. Вы может сделать это, указав в командной строке эти файлы в качестве целей и, одновременно, указать их (с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">) в качестве make-файлов. Когда make-файл явно указан в командной строке в качестве цели, опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> и аналогичные опции, могут быть к нему применены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, при обработке </span><span style=" font-family:'monospace'; font-size:12pt;">`make -f mfile -n mfile foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет прочитан make-файл </span><span style=" font-family:'monospace'; font-size:12pt;">`mfile'</span><span style=" font-family:'Sans'; font-size:12pt;">, затем будут напечатаны команды, требуемые для его обновления (без их реального исполнения), и, затем, будут напечатаны команды, необходимые для обновления </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> (также без их выполнения). Команды для обновления </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> будут соответствовать нынешнему состоянию </span><span style=" font-family:'monospace'; font-size:12pt;">`mfile'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC18"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC18"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Перекрытие&quot; (overriding) части make-файла</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX95"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">ногда, возникает потребность в нескольких make-файлах, лишь незначительно различающихся между собой. Зачастую, в такой ситуации может быть использована директива </span><span style=" font-family:'monospace'; font-size:12pt;">`include'</span><span style=" font-family:'Sans'; font-size:12pt;">: нужный make-файлы можно получить путем включения другого make-файла и добавления своего набора правил или определений переменных. Однако, с помощью подобной методики, вам не удастся задать разные команды для обновления одной и той же цели. Этого можно добиться другим способом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX97"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">о &quot;внешнем&quot; make-файле (make-файле, который включает в себя другие make-файлы) вы можете задать шаблонное правило с произвольным соответствием (match-anything pattern rule), которое будет указывать, что цели, не описанные в данном make-файле, следут поискать в другом make-файле. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где подробно описаны шаблонные правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, если у нас имеется make-файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, который описывает цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> (и другие цели), то мы можем написать make-файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, который будет содержать следующие строки: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        frobnicate &gt; foo</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%: force</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        @$(MAKE) -f Makefile $@</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">force: ; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В таком случае, при выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> считает файл </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, и увидит, что для достижения цели </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, должна быть выполнена команда </span><span style=" font-family:'monospace'; font-size:12pt;">`frobnicate &gt; foo'</span><span style=" font-family:'Sans'; font-size:12pt;">. При выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make bar'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> увидит, что цель </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;"> не описана в make-файле </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, и, поэтому, использует команду из шаблонного правила: </span><span style=" font-family:'monospace'; font-size:12pt;">`make -f Makefile bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. Если </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит правило для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">, то эта цель будет обновлена. Аналогично </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поступит и с любыми другими целями, не описанными в </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В данном примере, шаблонное правило содержит лишь </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, поэтому любая цель подходит под такой шаблон. Пререквизит </span><span style=" font-family:'monospace'; font-size:12pt;">`force'</span><span style=" font-family:'Sans'; font-size:12pt;"> указан лишь для того, чтобы команды из данного правила выполнялись всегда - даже в том случае, если целевой файл уже существует. Правило, описывающее цель </span><span style=" font-family:'monospace'; font-size:12pt;">`force'</span><span style=" font-family:'Sans'; font-size:12pt;">, содержит пустую команду для того, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не пыталась использовать неявное правило для обновления этой цели (иначе возник бы бесконечный цикл, поскольку для обновления </span><span style=" font-family:'monospace'; font-size:12pt;">`force'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попыталась бы использовать то же самое шаблонное правило). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC19"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC19"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC19"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC19"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> читает make-файл</span></a></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX98"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> работает по двухпроходной схеме. На первом проходе производится чтение всех make-файлов (в том числе и подключаемых), в ходе которого вся содержащаяся в них информация (переменные и их значения, явные и неявные правила) переводится во внутреннее представление и строится граф зависимостей для всех целей и их пререквизитов. Далее, на втором проходе, это внутреннее представление используется для определения того, какие именно цели нуждаются в обновлении и исполняются соответствующие правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Понимание такой двухпроходной схемы является важным, поскольку она оказывает непосредственное влияние на ход вычисления переменных и функций; непонимание, зачастую, является источником недоразумений при написании make-файлов. Здесь мы опишем, как происходит &quot;пофазная&quot; обработка различных конструкций. Мы будем говорить, что расширение (expansion) является </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">немедленным (immediate)</span><span style=" font-family:'Sans'; font-size:12pt;">, если оно производится во время первой фазы работы: это означает, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет вычислять переменные и функции в момент считывания и &quot;разбора&quot; make-файла. Мы будем говорить, что расширение является </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">отложенным (deferred)</span><span style=" font-family:'Sans'; font-size:12pt;">, если оно не происходит &quot;немедленно&quot;. Расширение отложенной конструкции не происходит до тех пор, пока эта конструкция не встретится позже, уже в &quot;немедленном&quot; контексте, либо она будет расширена на втором проходе. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Возможно, вы еще не знакомы со всеми конструкциями. В таком случае, вы сможете вернуться к данному разделу потом, когда вы ознакомитесь с этими конструкциями в следующих главах. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Присваивание значения переменным</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX100"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пределения переменных обрабатываются следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> ?= </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> := </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> += </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span><span style=" font-family:'monospace'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В операторе добавления, </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;">, правая часть обрабатывается &quot;немедленно&quot;, если переменная была ранее определена как упрощенно вычисляемая (с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">) и &quot;отложенно&quot; в противном случае. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Условные конструкции </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX105"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">се условные конструкции (во всех формах - </span><span style=" font-family:'monospace'; font-size:12pt;">ifdef</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">ifndef</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">ifneq</span><span style=" font-family:'Sans'; font-size:12pt;">) целиком и полностью обрабатываются &quot;немедленно&quot;. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Определения правил </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX109"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">равила всегда обрабатываются одинаковым образом, независимо от их формы: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">немедленно</span><span style=" font-family:'monospace'; font-size:12pt;"> ; </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">    </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">отложенно</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">То есть, разделы целей и пререквизитов обрабатываются немедленно, а обработка команд, используемых для обновления цели, всегда откладывается. Это общее правило действует для явных правил, шаблонных правил, суффиксных правил, статических шаблонных правил и простом определении пререквизитов. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC20"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC20"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">оставление правил (rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX114"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">П</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">равила (rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> содержатся в make-файле и описывают, когда и каким образом должны быть обновлены или созданы некоторые файлы, называемые </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">целями (targets)</span><span style=" font-family:'Sans'; font-size:12pt;">. Чаще всего, каждое правило содержит только одну цель. В правиле перечисляются файлы, которые являются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">пререквизитами (prerequisites)</span><span style=" font-family:'Sans'; font-size:12pt;"> для этой цели и </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">команды</span><span style=" font-family:'Sans'; font-size:12pt;">, которые должны быть выполнены для создания или обновления цели. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX118"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">орядок следования правил внутри make-файле не имеет значения. Исключение составляет лишь выбор </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">главной цели по умолчанию (default goal)</span><span style=" font-family:'Sans'; font-size:12pt;"> - цели, к которой стремиться </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, если вы не задали ее явно. По умолчанию, главной целью становиться цель из первого правила в первом обрабатываемом make-файле. Если это правило содержит несколько целей, то только первая из них становится главной целью. Здесь есть два исключения. Во-первых, главными целями, выбираемыми по умолчанию, не могут стать цели, имя которых начинается с точки (если только они не содержат по крайней мере одного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;">). И, во-вторых, из процесса выбора главной цели исключаются шаблонные правила (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поэтому, мы обычно пишем make-файлы таким образом, чтобы первое правило описывало процесс сборки готовой программы, или всех программ, описываемых в этом make-файле (часто, для этого используется цель с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;">). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC87"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аргументы для задания главной цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC21"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC21"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">интаксис правил</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX120"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> общем виде, правило выглядит так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">цели</span><span style=" font-family:'monospace'; font-size:12pt;"> : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">пререквизиты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">цели</span><span style=" font-family:'monospace'; font-size:12pt;"> : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">пререквизиты</span><span style=" font-family:'monospace'; font-size:12pt;"> ; </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX122"></a><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Ц</span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">ели (targets)</span><span style=" font-family:'Sans'; font-size:12pt;"> - это имена файлов, разделенные пробелами. В именах целей могут быть использованы шаблонные символы (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC22"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование шаблонных символов в именах файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Для файлов, содержащихся в архиве, может быть использована специальная форма записи: </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">, где </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> - это имя архивного файла, а </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'Sans'; font-size:12pt;"> - имя содержащегося в нем файла (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC109"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование элементов архива в качестве целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Обычно, в правиле содержится только одна цель, однако, иногда имеет смысл задать несколько целей в одном правиле (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC37"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Правила с несколькими целями</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX124"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">троки, содержащие </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">команды</span><span style=" font-family:'Sans'; font-size:12pt;">, должны начинаться с символа табуляции. Первая команда может располагаться либо в строке с пререквизитами (и отделяться от них точкой с запятой), либо в следующей строке после пререквизитов (эта строка должна начинаться с символа табуляции). В обоих случаях, результат будет один и тот же. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC44"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Написание команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX126"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">оскольку знак доллара используется для ссылки на переменные, для использования его в правилах, нужно писать </span><span style=" font-family:'monospace'; font-size:12pt;">`$$'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Длинные строки make-файла могут быть разделены на части с помощью символа '\', находящегося в конце строки. Это может повысить удобочитаемость make-файла, но &quot;технической&quot; необходимости в этом нет - </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> никак не ограничивает длину строк make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правило содержит информацию о двух вещах: когда следует считать, что цель &quot;устарела&quot;, и каким образом она может быть обновлена при возникновении такой необходимости. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX129"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">ритерий &quot;устаревания&quot; вычисляется по отношению к </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">пререквизитам</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют из себя имена файлов, разделенные пробелами. В именах пререквизитов могут использоваться шаблонные символы. Пререквизиты также могут быть файлами, находящимися в архивах (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Цель считается &quot;устаревшей&quot;, если такого файла не существует, либо он &quot;старше&quot;, чем какой-либо из пререквизитов (проверяется время последней модефикации файла). Смысл здесь в том, что, поскольку целевой файл строится на основе информации из файлов-пререквизитов, то изменение хотя бы одного из них может привести к тому, что содержимое целевого файла уже не будет &quot;правильным&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Команды</span><span style=" font-family:'Sans'; font-size:12pt;"> указывают на то, каким образом следует обновлять цель. Это - просто строки (с некоторыми дополнительными возможностями), исполняемые интерпретатором командной строки (обычно </span><span style=" font-family:'monospace'; font-size:12pt;">`sh'</span><span style=" font-family:'Sans'; font-size:12pt;">). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC44"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Написание команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC22"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC22"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование шаблонных символов (wildcard characters) в именах файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX131"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри использованием </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">шаблонных символов (wildcard characters)</span><span style=" font-family:'Sans'; font-size:12pt;">, с помощью одного имени можно задать целую группу файлов. В </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> шаблонными символами являются </span><span style=" font-family:'monospace'; font-size:12pt;">`*'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`?'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`[...]'</span><span style=" font-family:'Sans'; font-size:12pt;"> (как в оболочке Bourne). Например, шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`*.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет соответствовать всем файлам с суффиксом </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, находящимся в текущей директории. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX137"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">имвол </span><span style=" font-family:'monospace'; font-size:12pt;">`~'</span><span style=" font-family:'Sans'; font-size:12pt;"> в начале имени файла, также имеет специальное значение. Одиночный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`~'</span><span style=" font-family:'Sans'; font-size:12pt;"> или сочетание </span><span style=" font-family:'monospace'; font-size:12pt;">`~/'</span><span style=" font-family:'Sans'; font-size:12pt;"> означает ваш домашний каталог. Например, выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`~/bin'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет означать </span><span style=" font-family:'monospace'; font-size:12pt;">`/home/you/bin'</span><span style=" font-family:'Sans'; font-size:12pt;">. Если сразу за символом </span><span style=" font-family:'monospace'; font-size:12pt;">`~'</span><span style=" font-family:'Sans'; font-size:12pt;"> следует некоторое имя, такая строка будет представлять собой домашнюю директорию пользователя с этим именем. Например, строка </span><span style=" font-family:'monospace'; font-size:12pt;">`~john/bin'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет означать </span><span style=" font-family:'monospace'; font-size:12pt;">`/home/john/bin'</span><span style=" font-family:'Sans'; font-size:12pt;">. В системах, где пользователи не имеют своего домашнего каталога (таких как MS-DOS или MS-Windows), такое поведение может эмулироваться с помощью установки переменной окружения </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">HOME</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Раскрытие шаблонных имен (замена их конкретным списком файлов, удовлетворяющих шаблону) автоматически производится в именах целей, именах пререквизитов и командах (в командах этим занимается интерпретатор командной строки). В других случаях, раскрытие шаблона производится только при явном запросе с помощью функции </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Специальное значение шаблонных символов может быть &quot;отключено&quot; с помощью предшествующего им символа '\'. Таким образом, строка </span><span style=" font-family:'monospace'; font-size:12pt;">`foo\*bar'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет ссылаться на довольно странное имя, состоящее из семи символов - начального </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, звездочки и </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC23"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC23"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">римеры шаблонных имен</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Шаблонные имена могут быть использованы в командах, которые содержатся в правилах. Такие имена будут &quot;раскрыты&quot; интерпретатором командной строки. Вот пример правила для удаления всех объектных файлов из текущей директории: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm -f *.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX140"></a><span style=" font-family:'Sans'; font-size:12pt;">Ш</span><span style=" font-family:'Sans'; font-size:12pt;">аблоны также могут быть полезны в качестве пререквизитов правил. В следующем примере, команда </span><span style=" font-family:'monospace'; font-size:12pt;">`make print'</span><span style=" font-family:'Sans'; font-size:12pt;"> вызовет печать всех файлов с исходными текстами (файлов с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">), которые были модефицированы с тех пор, как вы последний раз распечатывали их подобным образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">print: *.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        lpr -p $?</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        touch print </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX141"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> данном правиле, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`print'</span><span style=" font-family:'Sans'; font-size:12pt;"> является пустой целью (empty target file); смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC35"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование пустых целей для фиксации событий</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Автоматичесая переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$?'</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для печати только тех пререквизитов, которые были изменены (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При задании переменной, раскрытия шаблонов не производится. Например, если вы запишите: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = *.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">то значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`*.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Однако, если вы используете значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> в цели, в пререквизите или в команде, то в момент использования шаблона, будет произведено его расширение. Чтобы присвоить переменной </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> значение, полученное после расширения шаблона, используйте функцию </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects := $(wildcard *.o) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">wildcard</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC24"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC24"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роблемы при использовании шаблонных имен</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX144"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">от простой пример &quot;неправильного&quot; использования шаблонного имени, результат которого совершенно отличен от ожидаемого. Предположим, составляя make-файл, вы хотели сказать, что исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> собирается из всех объектных файлов, находящихся в текущем каталоге, и записали это следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = *.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o foo $(CFLAGS) $(objects) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При такой записи, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`*.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Расширение шаблона </span><span style=" font-family:'monospace'; font-size:12pt;">`*.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет произведено только при обработке правила с </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, и пререквизитами этой цели станут все </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">существующие</span><span style=" font-family:'Sans'; font-size:12pt;"> в данный момент файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. При необходимости, эти объектные файлы будут перекомпилированы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Но что будет, если вы удалите все файлы с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">? Когда шаблону не соответствует ни один файл, этот шаблон остается в &quot;первоначальном&quot; виде. И, таким образом, получится что цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет зависеть от файла со странным именем </span><span style=" font-family:'monospace'; font-size:12pt;">`*.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Поскольку, такого файла на самом деле не существует, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> аварийно завершит работу, выдав сообщение, что она не знает как построить файл </span><span style=" font-family:'monospace'; font-size:12pt;">`*.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Пожалуй, это совсем не то, чего вы хотели добиться! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, нужный вам результат получить вполне возможно, но для этого надо использовать более сложную методику, использующую функцию </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> и строковые подстановки. Подобная методика будет обсуждаться в следующих разделах. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX149"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> операционных системах фирмы Microsoft для разделения имен директорий используется символ '\': </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  c:\foo\bar\baz.c </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Приведенное выше имя эквивалентно имени </span><span style=" font-family:'monospace'; font-size:12pt;">`c:/foo/bar/baz.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в стиле Unix (здесь </span><span style=" font-family:'monospace'; font-size:12pt;">`c:'</span><span style=" font-family:'Sans'; font-size:12pt;"> - это, так называемое, имя диска). Когда программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> работает в таких операционных системах, она допускает использование обоих символов ('/' и '\') в именах файлов. Поддержка символа '\' </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> распространяется, однако, на шаблонные имена, где этот символ имеет специальное значение. В таких случаях, вы </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">должны</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать имена в стиле Unix (с символом '/' в качестве &quot;разделителя&quot;). </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC25"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC25"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC25"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">wildcard</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX151"></a><span style=" font-family:'Sans'; font-size:12pt;">Ш</span><span style=" font-family:'Sans'; font-size:12pt;">аблонные имена автоматически &quot;расширяются&quot; при обработке правил, где они использованы. В других случаях, например, при присваивании переменной нового значения, или в аргументах функций, такого расширения не производится. Для &quot;принудительного&quot; расширения шаблонных имен в любых нужных местах, предназначена функция </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;">, которая выглядит следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wildcard </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобная строка, будучи использована в любом месте make-файла, будет заменена списком существующих в данный момент файлов, которые удовлетворяет указанному шаблону (шаблонам). Имена файлов отделяются друг от друга пробелами. В том случае, если не будет найдено файлов, удовлетворяющих заданному шаблону, функция возвращает пустую строку. Заметьте, что такое поведение функции </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> отличается от поведения обычных шаблонов в правилах, которые, в таких случаях, остаются в исходном виде, а не игнорируются (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC24"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Проблемы при использовании шаблонных имен</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Одно из возможных применений фукнции </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> - это получение списка исходных файлов, находящихся в текущем каталоге, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wildcard *.c) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Затем, мы может превратить список исходных файлов в список объектных файлов, заменив их расширение с </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> на </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst %.c,%.o,$(wildcard *.c)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">(Здесь, для замены текста, мы использовали функцию </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, make-файл, компилирующий все файлы с исходными текстами на языке Си из текущего каталога, и, затем, компонующий их вместе, может выглядеть так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects := $(patsubst %.c,%.o,$(wildcard *.c))</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o foo $(objects) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом make-файле для компиляции исходных текстов используются неявные правила компиляции программ на языке Си, поэтому нет необходимости в явном описании правил компиляции. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где описывается оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">, который является вариантом &quot;стандартного&quot; оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC26"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC26"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">оиск пререквизитов по каталогам</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX152"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля больших систем, часто бывает полезным хранить бинарные файлы программы и файлы с ее исходными текстами отдельно, в разных каталогах. Утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может способствовать использованию такой методики с помощью механизма автоматического </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">поиска пререквизитов по каталогам</span><span style=" font-family:'Sans'; font-size:12pt;">. Когда вы будете распределять исходные файлы по директориям, вам не придется менять отдельные правила, нужно лишь будет указать пути для поиска этих файлов. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC27"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC27"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еременная </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC27"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">VPATH</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC27"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">: список каталогов для поиска пререквизитов</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX157"></a><span style=" font-family:'Sans'; font-size:12pt;">З</span><span style=" font-family:'Sans'; font-size:12pt;">начение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> указывает утилите </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> список директорий, где следует производить поиск файлов. Чаще всего, этот путь представляет собой список каталогов с файлами, которые являются пререквизитами каких-либо правил и находятся не в текущем каталоге. Однако, содержимое переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для поиска любых файлов (а не только пререквизитов), в том числе и файлов, которые являются целями каких-либо правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, если файл, который является целью или пререквизитом, не найден в текущем каталоге, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предпримет попытку найти его в каталогах, перечисленных в </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">. Если в одном из этих каталогов файл будет найден, он может стать пререквизитом (смотрите ниже). Учитывая это, правила могут составляться таким образом, что имена пререквизитов указываются так, как если бы они находились в текущем каталоге. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC30"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Написание команд с учетом поиска по каталогам</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена перечисленных в </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> каталогов, отделяются друг от друга пробелами или двоеточиями. При поиске, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> перебирает каталоги в том порядке, как они перечислены в переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">. В операционных системах MS-DOS и MS-Windows для разделения имен директорий вместо символа двоеточия, должен использоваться символ точки с запятой (поскольку символ ':' может быть частью названия каталога, находясь после имени диска). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, следующая запись: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">VPATH = src:../headers </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">указывает, что путь поиска состоит из двух каталогов, </span><span style=" font-family:'monospace'; font-size:12pt;">`src'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`../headers'</span><span style=" font-family:'Sans'; font-size:12pt;">. Поиск в этих каталогах производится в указанном порядке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При таком значении переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, следующее правило, </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : foo.c </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет интерпретировано так, как будто он записано следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : src/foo.c </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">если предположить, что файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> находится не в текущей директории, а в каталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`src'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC28"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC28"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Д</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">иректива </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC28"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">vpath</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX158"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">редством, аналогичным переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, но только более &quot;избирательным&quot;, является директива </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> (обратите внимание на нижний регистр букв). Эта директива позволяет задать пути поиска для некоторой группы файлов, а именно, файлов, чье имя подходит под определенный шаблон. Таким образом, вы можете задать некоторый список каталогов поиска для одной группы файлов, и совсем другой список - для других файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имеется три формы записи директивы </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">каталоги</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Задать путь поиска </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">каталоги</span><span style=" font-family:'Sans'; font-size:12pt;"> для файлов, чье имя удовлетворяет шаблону </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;">. Путь поиска </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">каталоги</span><span style=" font-family:'Sans'; font-size:12pt;"> - это список имен директорий, разделенных двоеточиями (точкой запятой в MS-DOS или MS-Windows) или пробелами, подобно списку поиска переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Очистить (&quot;забыть&quot;) пути поиска для шаблона </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Очистить (&quot;забыть&quot;) все пути поиска, ранее определенные с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В директиве </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">, шаблон представляет собой строку, содержащую символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Имя искомого файла должно соответствовать этой шаблонной строке, причем символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, как и в шаблонных правилах (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">), может соответствовать любой последовательности символов (в том числе и пустой). Например, шаблону </span><span style=" font-family:'monospace'; font-size:12pt;">%.h</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяют имена файлов, имеющие расширение </span><span style=" font-family:'monospace'; font-size:12pt;">.h</span><span style=" font-family:'Sans'; font-size:12pt;">. (Если шаблон не содержит символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, он должен в точности совпадать с именем искомого файла, а необходимость в этом возникает достаточно редко.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX159"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">пециальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в шаблоне директивы </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть отменено с помощью предшествующего ему символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Специальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, предшествующего символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть, в свою очередь, отменено добавлением еще одного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;"> (строка &quot;</span><span style=" font-family:'monospace'; font-size:12pt;">\\%</span><span style=" font-family:'Sans'; font-size:12pt;">&quot; будет интерпретироваться как два символа. Первый из них - символ </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, второй - символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, который будет интерпретироваться как шаблонный). Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, имеющие специальное значение, удаляются из шаблона перед тем, как он будет сравниваться с именами файлов. Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;"> не имеющие специального значения, остаются в шаблоне. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если искомого пререквизита нет в текущей директории, а его имя удовлетворяет шаблону, указанному в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">, предпринимается попытка найти его в каталогах, список которых указан в этой директиве. Поиск проходит аналогично поиску в каталогах, перечисленных в переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, и предшествует ему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, запись </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %.h ../headers </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">инструктирует </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, производить поиск пререквизитов с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> в каталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`../headers'</span><span style=" font-family:'Sans'; font-size:12pt;">, если они не могут быть найдены в текущей директории. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если имя искомого пререквизита подходит сразу под несколько шаблонов, указанных в директивах </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывает эти директивы поочередно, друг за другом, производя поиск во всех каталогах, перечисленных в каждой из них. Отдельные директивы vpath обрабатываются в том порядке, как они расположены в make-файле; несколько директив с одинаковым шаблоном никак не влияют друг на друга. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, в случае: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %.c foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %   blish</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %.c bar </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">поиск файла с раширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет происходить в каталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, затем </span><span style=" font-family:'monospace'; font-size:12pt;">`blish'</span><span style=" font-family:'Sans'; font-size:12pt;">, и, наконец </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">, а в случае </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %.c foo:bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath %   blish </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">поиск такого файла будет производиться в каталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, затем </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">, и затем </span><span style=" font-family:'monospace'; font-size:12pt;">`blish'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC29"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC29"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роцедура поиска по каталогам</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX164"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли файл, являющийся пререквизитом, найден с помощь поиска в каталогах (независимо от типа поиска - &quot;общего&quot; или &quot;избирательного&quot;), найденный путь к этому файлу не всегда будет присутствовать в имени пререквизита, которое передаст вам </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. В некоторых случаях найденный путь &quot;отбрасывается&quot; и не используется. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот алгоритм, который использует </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> при решении вопроса о том, следует ли оставлять или отбрасывать найденный в процессе поиска по каталогам путь: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если целевой файл не может быть найден в директории, которая указана в make-файле, проводится его поиск по каталогам. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если поиск завершился успешно, найденный путь запоминается и искомый целевой файл временно помечается как найденная цель. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Используя этот же метод, проверяются все пререквизиты данной цели. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После обработки всех пререквизитов, для цели, возможно потребуется ее обновление: </li></ol>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если цель <span style=" font-style:italic;">не</span> нуждается в обновлении, директория, найденная в процессе поиска по каталогам, используется для всех пререквизитов этой цели. Иначе говоря, если цель не нуждается в обновлении, то используется директория, найденная в процессе поиска по каталогам. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если цель <span style=" font-style:italic;">нуждается</span> в обновлении (является устаревшей), то найденный в процессе поиска по каталогам путь <span style=" font-style:italic;">отбрасывается</span>, и цель обновляется с использовании только ее имени, указанном в make-файле. Другими словами, если <span style=" font-family:'monospace';">make</span> должна обновить цель, то эта цель строится или обновляется &quot;локально&quot;, а не в той директории, которая была найдена во время поиска по каталогам. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Хотя этот алгоритм и выглядит сложным, на практике, он, как правило, дает именно тот результат, который вы и ожидали. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX166"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ругии версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> используют более простой алгоритм: если файла нет в текущей директории, но он был найден в процесс поиска по каталогам, установленный таким образом путь к этому файлу используется всегда, независимо от того, нуждается ли цель в обновлении или нет. Таким образом, при обновлении цели, новая версия файла будет расположена по тому же пути, где была найдена и &quot;старая&quot; версия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX168"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли для вас желательно именно такое поведение </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> по отношению к некоторым (или всем) каталогам, вы можете использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">GPATH</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для переменной </span><span style=" font-family:'monospace'; font-size:12pt;">GPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> используется такой же синтаксис, что и для </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> (список имен каталогов, разделенных пробелами или двоеточиями). Если &quot;устаревший&quot; целевой файл был найден в результате проведения поиска по каталогам, и найденный путь присутствует в списке </span><span style=" font-family:'monospace'; font-size:12pt;">GPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, он не будет &quot;отброшен&quot;. Далее, цель будет обновлена именно по этому пути. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC30"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC30"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">аписание команд с учетом поиска по каталогам</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX169"></a><span style=" font-family:'Sans'; font-size:12pt;">Т</span><span style=" font-family:'Sans'; font-size:12pt;">от факт, что пререквизит был найден с помощью поиска по каталогам, никак не влияет на исполняемые команды правила - они будут исполнены именно в том виде, как они записаны в make-файле. Имея это ввиду, следут внимательно отнестись к написанию команд - файлы, которые является пререквизитами, должны браться командами из тех каталогов, где они были найдены программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это может быть сделано с использованием </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">автоматических переменных</span><span style=" font-family:'Sans'; font-size:12pt;">, таких как </span><span style=" font-family:'monospace'; font-size:12pt;">`$^'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Например, значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`$^'</span><span style=" font-family:'Sans'; font-size:12pt;"> является список всех пререквизитов правила с именами каталогов, где эти пререквизиты были найдены, а значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> является имя цели. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : foo.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c $(CFLAGS) $^ -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">(Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для того, чтобы иметь возможность указать опции компиляции исходных текстов на Си для неявных правил; в данном случае мы использовали ее просто в целях &quot;унификации&quot; процесса компиляции (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Часто, в список пререквизитов попадают файлы, которые не нужно передавать в исполняемую команду (например, заголовочные файлы). В такой ситуации можно использовать автоматическую переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая содержит лишь первый пререквизит правила: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">VPATH = src:../headers</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : foo.c defs.h hack.h</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c $(CFLAGS) $&lt; -o $@ </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC31"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC31"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">оиск в каталогах и неявные правила</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX171"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">оиск в каталогах, указанных с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> происходит также и при использовании неявных правил (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, если для файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> не имеется явных правил, то </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> пробует использовать имеющиеся у нее неявные правила, в частности, правило, говорящее что для получения </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, надо скомпилировать файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> (если, конечно, такой файл существует). Если искомого файла нет в текущей директории, то </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предпринимает его поиск по каталогам. Если файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет найден в каком-либо из каталогов (или упомянут в make-файле), то к нему будет применено соответствующее неявное правило для компиляции программ на языке Си. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Командам из неявных правил &quot;по необходимости&quot; приходится пользоваться автоматическими переменными, следовательно они будут использовать имена файлов, полученных в результате поиска по каталогам, без каких-либо дополнительных усилий с вашей стороны. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC32"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC32"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">оиск в каталогах для подключаемых библиотек</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX178"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">оиск в каталогах может производиться специальным образом для файлов, являющихся библиотеками. Эта специфическая особенность вступает в силу для пререквизитов, чье имя имеет специальную форму </span><span style=" font-family:'monospace'; font-size:12pt;">`-l</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">. (Возможно, вам это покажется странным, поскольку пререквизит, обычно, является именем файла, а файл библиотеки </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'Sans'; font-size:12pt;">, как правило, называется </span><span style=" font-family:'monospace'; font-size:12pt;">`lib</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.a'</span><span style=" font-family:'Sans'; font-size:12pt;">, а не </span><span style=" font-family:'monospace'; font-size:12pt;">`-l</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда имя пререквизита имеет форму </span><span style=" font-family:'monospace'; font-size:12pt;">`-l</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывает ее специальным образом, производя поиск файла с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`lib</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.so'</span><span style=" font-family:'Sans'; font-size:12pt;"> сначала в текущей директории, затем в каталогах, перечисленных в подходящих директивах </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">, каталогах из </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, и, наконец, в каталогах </span><span style=" font-family:'monospace'; font-size:12pt;">`/lib'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/lib'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">prefix</span><span style=" font-family:'monospace'; font-size:12pt;">/lib'</span><span style=" font-family:'Sans'; font-size:12pt;"> (обычно </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/lib'</span><span style=" font-family:'Sans'; font-size:12pt;">, но версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> для операционных систем MS-DOS/MS-Windows ведут себя так, как если бы </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">prefix</span><span style=" font-family:'Sans'; font-size:12pt;"> был корневым каталогом, где инсталлирован компилятор DJGPP). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если такой файл не обнаружен, предпринимается попытка найти файл </span><span style=" font-family:'monospace'; font-size:12pt;">`lib</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> (в перечисленных выше каталогах). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Так, если в вашей системе имеется библиотека </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/lib/libcurses.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> (и отсутствует файл </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/lib/libcurses.so'</span><span style=" font-family:'Sans'; font-size:12pt;">), то в следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : foo.c -lcurses</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc $^ -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет выполнена команда </span><span style=" font-family:'monospace'; font-size:12pt;">`cc foo.c /usr/lib/libcurses.a -o foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> если </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;старше&quot; чем </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/lib/libcurses.a'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Хотя, по умолчанию проводится поиск файлов с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`lib</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.so'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`lib</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.a'</span><span style=" font-family:'Sans'; font-size:12pt;">, это поведение может быть изменено с помощью переменной </span><span style=" font-family:'monospace'; font-size:12pt;">.LIBPATTERNS</span><span style=" font-family:'Sans'; font-size:12pt;">. Каждое слово в значении этой переменной рассматривается как шаблонная строка. Встретив пререквизит вида </span><span style=" font-family:'monospace'; font-size:12pt;">`-l</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> заменяет символ процента в каждом из шаблонов на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'Sans'; font-size:12pt;"> и производит описанную выше процедуру поиска для полученного имени библиотечного файла. Если библиотечный файл не найден, используется следующий шаблон из списка и так далее. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По умолчанию, значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">.LIBPATTERNS</span><span style=" font-family:'Sans'; font-size:12pt;"> является строка &quot;</span><span style=" font-family:'monospace'; font-size:12pt;">`lib%.so lib%.a'</span><span style=" font-family:'Sans'; font-size:12pt;">&quot;, которая и обеспечивает описанное выше поведение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Присвоив этой переменной пустое значение, вы можете полностью отключить описанный механизм поиска подключаемых библиотек. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC33"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC33"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">бстрактные цели (phony targets)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX187"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">бстрактная цель (phony target) - это цель, которая не является, на самом деле, именем файла. Это - просто имя для некоторой последовательности команд, которую при необходимости может выполнить </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Есть по крайней мере два соображения в пользу использования абстрактных целей: их использование позволяет избежать конфликтов с файлами, имеющими такое же имя, а также ускорить работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы напишите правило, которое не будет порождать указанный в нем целевой файл, то команды этого правила будут выполняться всякий раз при попытке достижения цели правила. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm *.o temp </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поскольку исполнение команды </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;"> не приводит к созданию файла </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, такой файл, скорее всего, вообще не будет существовать. В таком случае, команда </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;"> будет выполняться всякий раз, когда вы скажете </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX191"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">днако, правило с такой &quot;псевдо-целью&quot; откажется работать, если в текущем каталоге по какой-нибудь причине окажется файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. Поскольку в правиле не указано каких-либо пререквизитов, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> всегда будет считаться &quot;новым&quot; и команды, указанные в правиле никогда не выполнятся. Во избежании подобной проблемы, вы можете прямо указать, что некоторая цель является абстрактной. Для этого используется специальная цель </span><span style=" font-family:'monospace'; font-size:12pt;">.PHONY</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC36"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена специальных целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В нашем примере достаточно записать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY : clean </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">После этого, вызов </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет приводить к исполнению нужных команд, независимо от того, существует файл </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> или нет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поскольку абстрактные цели не являются файлами, которые могут быть обновлены при изменении других файлов, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не предпринимает попыток применить неявные правила для таких целей (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В результате, использование абстрактных целей может ускорить обработку make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, сначала должна идти строка, объявляющая </span><span style=" font-family:'monospace'; font-size:12pt;">clean</span><span style=" font-family:'Sans'; font-size:12pt;"> абстрактной целью, а затем уже следует правило, описывающее эту цель: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: clean</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm *.o temp </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующий пример демонстрирует полезность использования абстрактных целей при рекурсивном вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. В таких случаях, как правило, в make-файле имеется переменная, хранящая список подкаталогов с &quot;подчиненными&quot; проектами, которые должны быть собраны. Далее, один из возможных вариантов - создание правила, где с помощью интерпретатора командной строки организуется цикл, выполняющий поочередную обработка всех подкаталогов, например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SUBDIRS = foo bar baz</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subdirs:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        for dir in $(SUBDIRS); do \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          $(MAKE) -C $$dir; \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        done </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Такому методу, однако, присущи некоторые недостатки. Во-первых, любые ошибки, возникшие при обработке подпроектов, останутся &quot;незамеченными&quot; - при возникновении ошибки в подпроекте </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет продолжать обработку оставшихся подкаталогов &quot;как ни в чем ни бывало&quot;. Разумеется, в цикл можно ввести дополнительный код, который будет детектировать ошибочные ситуации и прерывать работу. К сожалению, при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">-k</span><span style=" font-family:'Sans'; font-size:12pt;">, такое поведение будет нежелательно. Второй недостаток, (возможно, более серьезный) состоит в том, что при таком подходе нельзя задействовать возможность &quot;параллельной&quot; работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (из-за наличия единственного правила). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Объявив подкаталоги абстрактными целями (вы должны это сделать так как подкаталоги проектов обычно уже существуют и иначе они не стали бы обрабатываться) вы можете решить эти проблемы: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SUBDIRS = foo bar baz</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: subdirs $(SUBDIRS)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subdirs: $(SUBDIRS)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(SUBDIRS):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(MAKE) -C $</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: baz </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Мы также объявили, что подкаталог </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> не может быть обработан до тех пор, пока не будет закончена обработка подкаталога </span><span style=" font-family:'monospace'; font-size:12pt;">`baz'</span><span style=" font-family:'Sans'; font-size:12pt;">; подобного рода декларация потребуется для случая &quot;параллельной&quot; работы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Как правило, абстрактная цель не должна быть пререквизитом какого-либо целевого файла, в противном случае указанные в подобном правиле команды будут исполняться всякий раз при его обработке. Если абстрактная цель не является пререквизитом какого-либо реального файла, команды из правила, где она описана, будут исполняться только в том случае, когда эта цель будет указана в качестве главной (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC87"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аргументы для задания главной цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Абстрактные цели могут иметь пререквизиты. Например, когда в одном каталоге содержится сразу несколько собираемых программ, удобно хранить их описания в одном make-файле. Так как главной целью по умолчанию становится первая цель из make-файла, в таких случаях, обычно, первым правилом make-файла делают правило с абстрактной целью </span><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;">, пререквизитами которой являются все собираемые программы. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all : prog1 prog2 prog3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY : all</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog1 : prog1.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o prog1 prog1.o utils.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog2 : prog2.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o prog2 prog2.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog3 : prog3.o sort.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o prog3 prog3.o sort.o utils.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Теперь вам достаточно сказать </span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;">, чтобы обновить все три программы, или указать нужные аргументы для обновления конкретных программ (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`make prog1 prog3'</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда одна абстрактная цель является пререквизитом другой абстрактной цели, она работает как своего рода &quot;подпрограмма&quot;. В следующем примере, </span><span style=" font-family:'monospace'; font-size:12pt;">`make cleanall'</span><span style=" font-family:'Sans'; font-size:12pt;"> удалит объектные файлы, diff-файлы, и файл </span><span style=" font-family:'monospace'; font-size:12pt;">`program'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: cleanall cleanobj cleandiff</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cleanall : cleanobj cleandiff</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm program</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cleanobj :</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm *.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cleandiff :</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm *.diff </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC34"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC34"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">равила без команд и пререквизитов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX192"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли правило не имеет команд и пререквизитов, а целью этого правила является имя несуществующего файла, то каждый раз, при обработке такого правила, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет считать что его цель нуждается в обновлении. Если эта цель, в свою очередь, является пререквизитом каких-либо правилах, то указанные в них команды всякий раз будут выполняться. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean: FORCE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FORCE: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`FORCE'</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяет специальным условиям (не имеет пререквизитов и команд). Цель </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от </span><span style=" font-family:'monospace'; font-size:12pt;">`FORCE'</span><span style=" font-family:'Sans'; font-size:12pt;">, поэтому команды из правила с </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> вынуждены будут выполняться. В имени </span><span style=" font-family:'monospace'; font-size:12pt;">`FORCE'</span><span style=" font-family:'Sans'; font-size:12pt;"> нет ничего &quot;необычного&quot;, просто оно часто используется для подобных целей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Очевидно, что такое использование </span><span style=" font-family:'monospace'; font-size:12pt;">`FORCE'</span><span style=" font-family:'Sans'; font-size:12pt;"> эквивалентно объявлению цели </span><span style=" font-family:'monospace'; font-size:12pt;">clean</span><span style=" font-family:'Sans'; font-size:12pt;"> абстрактной, с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`.PHONY: clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подход с использованием </span><span style=" font-family:'monospace'; font-size:12pt;">`.PHONY'</span><span style=" font-family:'Sans'; font-size:12pt;"> более понятен и эффективен, однако другие версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> могут не поддерживать </span><span style=" font-family:'monospace'; font-size:12pt;">`.PHONY'</span><span style=" font-family:'Sans'; font-size:12pt;">. В силу этой причины, во многих make-файлах используется </span><span style=" font-family:'monospace'; font-size:12pt;">`FORCE'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC35"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC35"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование пустых целей (empty target files) для фиксации событий</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX196"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">П</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">устая цель (empty target)</span><span style=" font-family:'Sans'; font-size:12pt;"> является вариантом абстрактной цели. Такие цели используются для хранения команд, исполняющих действие, выполнение которого вам может иногда потребоваться. В отличие от астрактных целей, пустая цель действительно может существовать в виде файла. Однако, содержимое такого файла никоим образом не используется, и, зачастую, он просто пуст. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Назначение подобной цели - запомнить (с помощью времени последней модефикации), когда последний раз исполнялись указанные в правиле команды. Это делается при помощи включения в список команд, содержащихся в правиле, команды </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;">, обновляющей эту цель. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пустая цель должна иметь какие-нибудь пререквизиты (иначе в ней нет смысла). Когда вы запрашиваете обновление этой цели, команды из ее правила будут выполняться, если какой-либо из пререквизитов &quot;новее&quot;, чем цель. Другими словами, команды будут выполняться если какой-либо из пререквизитов был обновлен со времени последнего обновления цели. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">print: foo.c bar.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        lpr -p $?</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        touch print </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX199"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;"> таким правилом, </span><span style=" font-family:'monospace'; font-size:12pt;">`make print'</span><span style=" font-family:'Sans'; font-size:12pt;"> приведет к выполнению команды </span><span style=" font-family:'monospace'; font-size:12pt;">lpr</span><span style=" font-family:'Sans'; font-size:12pt;">, если какой-нибудь из исходных файлов был изменен с момента последнего вызова </span><span style=" font-family:'monospace'; font-size:12pt;">`make print'</span><span style=" font-family:'Sans'; font-size:12pt;">. Автоматическая переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$?'</span><span style=" font-family:'Sans'; font-size:12pt;"> использована для того, чтобы печатать только те исходные файлы, которые были изменены (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC36"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC36"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">мена специальных целей</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX202"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">екоторые имена имеют специальное значение, когда используются в качестве целей. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX205"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ререквизиты специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.PHONY</span><span style=" font-family:'Sans'; font-size:12pt;"> объявляются абстрактными целями. При необходимости обновления таких целей, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет выполнять команды &quot;безусловно&quot;, независимо от того, существует ли файл с таким именем, и времени, когда он был модефицирован. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пререквизиты специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;"> представляют собой список суффиксов (расширений) имен файлов, которые будут использоваться при поиске суффиксных правил. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Команды, определенные для цели </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">, будут использованы со всеми целями make-файла, для которых не найдено ни явных, ни неявных правил. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC105"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение правил &quot;последнего шанса&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Команды, определенные для </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">, будут использованы для всех пререквизитов, не являющихся целями каких-либо правил. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC107"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Алгоритм поиска неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX209"></a><span style=" font-family:'Sans'; font-size:12pt;">Ц</span><span style=" font-family:'Sans'; font-size:12pt;">ели, перечисленные в качестве пререквизитов </span><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;">, подвергаются специальной обработке. В том случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет принудительно завершена или прервана во время исполнения команд для их обновления, эти цели не будут удалены. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC49"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Прерывание или принудительное завершение </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC49"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Также, если цель является &quot;промежуточным&quot; файлов, он не будет, как обычно, удаляться после того, как необходимость в нем отпала. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. В последнем случае, эта специальная цель работает подобно </span><span style=" font-family:'monospace'; font-size:12pt;">.SECONDARY</span><span style=" font-family:'Sans'; font-size:12pt;">. В качестве пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть указан шаблон имени (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o'</span><span style=" font-family:'Sans'; font-size:12pt;">), что позволит сохранять все промежуточные файлы с именами, удовлетворяющими этому шаблону. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.INTERMEDIATE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX212"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ререквизиты цели </span><span style=" font-family:'monospace'; font-size:12pt;">.INTERMEDIATE</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматриваются как промежуточные файлы. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">.INTERMEDIATE</span><span style=" font-family:'Sans'; font-size:12pt;"> без списка пререквизитов не производит никакого эффекта. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SECONDARY</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX214"></a><span style=" font-family:'Sans'; font-size:12pt;">Ц</span><span style=" font-family:'Sans'; font-size:12pt;">ели, указанные в качестве пререквизитов </span><span style=" font-family:'monospace'; font-size:12pt;">.SECONDARY</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматриваются как промежуточные файлы, за исключением того, что они никогда не удаляются автоматически. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">.SECONDARY</span><span style=" font-family:'Sans'; font-size:12pt;"> без указания пререквизитов, помечает таким образом все цели, перечисленные в make-файле. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.DELETE_ON_ERROR</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX217"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри наличии в make-файле цели с именем </span><span style=" font-family:'monospace'; font-size:12pt;">.DELETE_ON_ERROR</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет удалять цель правила если она была модефицированы, а обновляющая ее команда завершилась с ненулевым кодом возврата; аналогично, цель будет удаляться при прерывании работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.IGNORE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет игнорировать ошибки при выполнении команд, обновляющих цели, перечисленные в качестве пререквизитов </span><span style=" font-family:'monospace'; font-size:12pt;">.IGNORE</span><span style=" font-family:'Sans'; font-size:12pt;">. Команды, указываемые для </span><span style=" font-family:'monospace'; font-size:12pt;">.IGNORE</span><span style=" font-family:'Sans'; font-size:12pt;">, не имеют значения. Использование </span><span style=" font-family:'monospace'; font-size:12pt;">.IGNORE</span><span style=" font-family:'Sans'; font-size:12pt;"> без списка пререквизитов, означает необходимость игнорирования ошибок во всех командах, исполняемых для обновления любой цели make-файла. Такое использование </span><span style=" font-family:'monospace'; font-size:12pt;">`.IGNORE'</span><span style=" font-family:'Sans'; font-size:12pt;"> поддерживается только по историческим соображениям для обеспечения совместимости. Этот прием не слишком полезен, поскольку воздействует на любую команду make-файла; вместо этого, мы рекомендуем использовать более &quot;избирательный&quot; метод, позволяющий игнорировать ошибки в конкретных командах. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы указали некоторые цели в качестве пререквизитов </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;">, то в процессе обновления этих целей, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет печатать выполняемые при этом команды. Указываемые для </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;"> команды не имеют значения. В случае использования </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;"> без списка пререквизитов, будет отключена печать всех исполняемых команд. Такое использование </span><span style=" font-family:'monospace'; font-size:12pt;">`.SILENT'</span><span style=" font-family:'Sans'; font-size:12pt;"> поддерживается только по историческим причинам, для обеспечения совместимости. Мы рекомендуем использовать более избирательный метод для подавления печати отдельных команд. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC45"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Отображение исполняемых команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Временно подавить печать исполняемых команд можно, запуская </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с опциями </span><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--silent'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.EXPORT_ALL_VARIABLES</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Будучи просто упомянутой в качестве цели, указывает </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на необходимость, по умолчанию, экспортировать все переменные для возможности их использования в дочернем процессе. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с make &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.NOTPARALLEL</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX222"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри наличии в make-файле цели </span><span style=" font-family:'monospace'; font-size:12pt;">.NOTPARALLEL</span><span style=" font-family:'Sans'; font-size:12pt;">, данный экземпляр </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет работать &quot;последовательно&quot; (даже при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;">). Рекурсивно запущенные экземпляры </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> по-прежнему могут работать &quot;параллельно&quot; (если только их make-файлы не содержат такой же специальной цели). Любые пререквизиты данной цели игнорируются. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Любой суффикс, определенный для суффиксных правил, а также &quot;сцепление&quot; двух суффиксов (например, такое как </span><span style=" font-family:'monospace'; font-size:12pt;">`.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;">), находясь на месте цели, рассматриваются специальным образом. Такие цели представляют из себя суффиксные правила - устаревший, однако, по-прежнему, широко распространенный способ задания шаблонных правил. В принципе, любое имя могло бы, таким образом, стать специальной целью, если разбить его на две части и добавить обе из них к списку суффиксов. На практике, суффиксы обычно начинаются с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;">, поэтому такие специальные цели также начинаются с </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC37"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC37"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">равила с несколькими целями</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX223"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">равило с несколькими целями, эквивалентно нескольким правилам с одной целью, которые, за исключением имени цели, полностью идентичны друг другу. Ко всем целям будет применяться один и тот же набор команд, однако, эффект от их исполнения может быть разным, поскольку они могут ссылаться на имя обрабатываемой в данный момент цели, используя автоматическую переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;">. А также, все цели подобного правила имеют один и тот же список пререквизитов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это может быть полезно в двух случаях. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вам нужны только пререквизиты, а не команды. Например, строка: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">kbd.o command.o files.o: command.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">объявляет дополнительный пререквизит для каждого из трех указанных объектных файлов. </span></p>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сходные команды используются для обновления всех целей. Эти команды не обязаны быть абсолютно идентичными, поскольку, для подстановки конкретного имени цели, может быть использована автоматическая переменная <span style=" font-family:'monospace';">`$@'</span> (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a>). Например: </li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bigoutput littleoutput : text.g</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        generate text.g -$(subst output,,$@) &gt; $@ </span><a name="IDX227"></a><span style=" font-family:'monospace'; font-size:12pt;">э</span><span style=" font-family:'monospace'; font-size:12pt;">квивалентно </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bigoutput : text.g</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        generate text.g -big &gt; bigoutput</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">littleoutput : text.g</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        generate text.g -little &gt; littleoutput</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, мы предполагаем, что гипотетическая программа </span><span style=" font-family:'monospace'; font-size:12pt;">generate</span><span style=" font-family:'Sans'; font-size:12pt;"> может генерировать выходную информацию двух видов, переключаясь с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-big'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-little'</span><span style=" font-family:'Sans'; font-size:12pt;">. Работа функции </span><span style=" font-family:'monospace'; font-size:12pt;">subst</span><span style=" font-family:'Sans'; font-size:12pt;"> описана в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предположим, вы хотели бы менять список пререквизитов для конкретной цели, подобно тому, как переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> позволяет вам варьировать исполняемые команды. Этого невозможно добиться при помощи обычного правила с несколькими целями, однако вы можете это сделать, используя </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">статические шаблонные правила</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC39"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Статические шаблонные правила </span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC38"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC38"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">есколько правил с одной целью</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX228"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">дин и тот же файл может являться целью нескольких правил. Все пререквизиты такой цели, перечисленные в разных правилах, объединяются в один общий список ее пререквизитов. Команды для обновления цели, будут выполняться в том случае, если хотя бы один пререквизит из любого правила окажется &quot;более новым&quot;, чем эта цель. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для одной цели может быть исполнен только один набор команд. Если команды для обновления цели указаны сразу в нескольких правилах, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выполнит только последний встретившийся набор команд и выдаст сообщение об ошибке. (В специальном случае, когда имя целевого файла начинается с точки, сообщение об ошибке не выдается. Такое странное поведение сохранено только для совместимости с другими реализациями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">). У вас нет причин писать свои make-файлы таким странным образом, поэтому вы получите сообщение об ошибке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Дополнительное правило, содержащее только пререквизиты, может быть использовано для &quot;быстрого&quot; добавления нескольких дополнительных пререквизитов одновременно ко многим файлам. Например, в make-файле обычно имеется переменная </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащая список всех объектных файлов собираемой программы. Возможно, простейший путь указать, что все объектные файлы должны быть перекомпилированы при изменении </span><span style=" font-family:'monospace'; font-size:12pt;">`config.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> - это написать: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = foo.o bar.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : defs.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar.o : defs.h test.h</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects) : config.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобная запись хороша тем, что может быть легко добавлена в make-файл или удалена из него, не затрагивая &quot;основные&quot; правила, используемые для генерации объектных файлов. Это удобно при необходимости &quot;срочно&quot; добавить в make-файл еще несколько пререквизитов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другой возможный прием заключается в том, чтобы передавать список дополнительных пререквизитов в переменной, значение которой устанавливать в командной строке при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC90"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В следующем примере, </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">extradeps=</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects) : $(extradeps) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">вызов </span><span style=" font-family:'monospace'; font-size:12pt;">`make extradeps=foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет добавлять </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> в список пререквизитов каждого из объектных файлов. При обычном вызове </span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;">, этого делаться не будет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если ни одно из правил, описывающее цель, не имеет команд, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается применить к этой цели неявные правила (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC39"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC39"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">татические шаблонные правила (static pattern rules)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX232"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">С</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">татические шаблонные правила (static pattern rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> - это правила с несколькими целями, и возможностью автоматически создавать список пререквизитов для каждой цели, используя ее имя. Это - механизм более общий, чем обычные правила с несколькими целями, потому что их цели не должны иметь идентичные пререквизиты. Их пререквизиты должны быть </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">похожими</span><span style=" font-family:'Sans'; font-size:12pt;">, но не обязательно </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">идентичными</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC40"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC40"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">интаксис статических шаблонных правил</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX237"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля статических шаблонных правил используется следующий синтаксис: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">цели</span><span style=" font-family:'monospace'; font-size:12pt;"> ...: </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон-цели</span><span style=" font-family:'monospace'; font-size:12pt;">: </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблоны-пререквизитов</span><span style=" font-family:'monospace'; font-size:12pt;"> ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команды</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В списке </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">целей</span><span style=" font-family:'Sans'; font-size:12pt;"> перечисляются цели, к которым будет применяться данное правило. Так же, как и в обычных правилах, при задании имен целей могут использоваться шаблонные символы (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC22"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование шаблонных символов в именах файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX239"></a><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Ш</span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">аблон-цели</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблоны-пререквизитов</span><span style=" font-family:'Sans'; font-size:12pt;"> описывают, как вычислять список пререквизитов для каждой цели. Каждая цель статического шаблонного правила сопоставляется с </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблоном-цели</span><span style=" font-family:'Sans'; font-size:12pt;">, для получения части имени цели, называемой </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">основой</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, полученная основа имени подставляется в каждый из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов-пререквизитов</span><span style=" font-family:'Sans'; font-size:12pt;"> для получения имен пререквизитов (по одному имени из каждого </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблона-пререквизита</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, в каждом шаблоне содержится по одному символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Когда цель сопоставляется с </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблоном-цели</span><span style=" font-family:'Sans'; font-size:12pt;">, символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> может соответствовать любой части имени цели; именно эта часть будет являться </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">основой</span><span style=" font-family:'Sans'; font-size:12pt;">. Прочие части имени цели должны в точности совпадать с шаблоном. Например, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяет шаблону </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и ее основой будет </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">. Цели же </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.out'</span><span style=" font-family:'Sans'; font-size:12pt;"> не будут удовлетворять этому шаблону. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX241"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">мена пререквизитов для каждой цели генерируются путем подстановки основы вместо символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в каждом из шаблонов пререквизитов. Например, из одного шаблона пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`%.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и основы </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, будет получено имя пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Шаблоны пререквизитов, не содержащие символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> также вполне допустимы, в этом случае, указанный пререквизит будет одинаков для всех целей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX242"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">пециальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в шаблоне может быть отменено с помощью предшествующего ему символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Специальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, предшествующего символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, может быть, в свою очередь, отменено добавлением еще одного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;"> (строка </span><span style=" font-family:'monospace'; font-size:12pt;">\\%</span><span style=" font-family:'Sans'; font-size:12pt;"> будет интерпретироваться как два символа. Первый из них - символ </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, второй - символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, который будет интерпретироваться как шаблонный). Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, имеющие специальное значение, удаляются из шаблона перед тем, как он будет сравниваться с именами файлов. Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, которые не могут повлиять на интерпретацию </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, остаются в шаблоне. Например, шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`the\%weird\\%pattern\\'</span><span style=" font-family:'Sans'; font-size:12pt;"> состоит из строки </span><span style=" font-family:'monospace'; font-size:12pt;">`the%weird\'</span><span style=" font-family:'Sans'; font-size:12pt;">, за которой следуют шаблонный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> и строка </span><span style=" font-family:'monospace'; font-size:12pt;">`pattern\\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Последние два символа остаются без изменений, поскольку не могут повлиять на способ интерпретации какого-либо символа </span><span style=" font-family:'monospace'; font-size:12pt;">%</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот пример, где объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> компилируются из соответствующих им исходных файлов с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = foo.o bar.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all: $(objects)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects): %.o: %.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $&lt; -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом примере, автоматическая переменные </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> содержат, соответственно, имя пререквизита и имя цели (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждая перечисленная в правиле цель, должна удовлетворять шаблону цели, иначе будет выдано соответствующее предупреждение. Если у вас имеется список файлов, лишь некоторые из которых удовлетворяют шаблону, вы можете удалить неподходящие имена с помощью функции </span><span style=" font-family:'monospace'; font-size:12pt;">filter</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files = foo.elc bar.o lose.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter %.o,$(files)): %.o: %.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $&lt; -o $@</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter %.elc,$(files)): %.elc: %.el</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        emacs -f batch-byte-compile $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом примере, результатом </span><span style=" font-family:'monospace'; font-size:12pt;">`$(filter %.o,$(files))'</span><span style=" font-family:'Sans'; font-size:12pt;"> является </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o lose.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и первое статическое правило вызывает компиляцию этих объектных файлов из соответствующих им исходных файлов. Результатом выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$(filter %.elc,$(files))'</span><span style=" font-family:'Sans'; font-size:12pt;"> является </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.elc'</span><span style=" font-family:'Sans'; font-size:12pt;">, и этот файл получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.el'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующий пример иллюстрирует использование автоматической переменной </span><span style=" font-family:'monospace'; font-size:12pt;">$*</span><span style=" font-family:'Sans'; font-size:12pt;"> в статическом шаблонном правиле: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bigoutput littleoutput : %output : text.g</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        generate text.g -$* &gt; $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При запуске команды </span><span style=" font-family:'monospace'; font-size:12pt;">generate</span><span style=" font-family:'Sans'; font-size:12pt;">, ссылка на </span><span style=" font-family:'monospace'; font-size:12pt;">$*</span><span style=" font-family:'Sans'; font-size:12pt;"> будет заменена соответствующей основой имени - строкой </span><span style=" font-family:'monospace'; font-size:12pt;">`big'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`little'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC41"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC41"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">равнение статических шаблонных правил (static pattern rules) и неявных правил (implicit rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX248"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">татические шаблонные правила имеют много общего с обычными шаблонными правилами (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Оба вида правил содержат шаблон для цели и шаблон для конструирования имен пререквизитов. Разница заключается в том, каким образом </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> принимает решение о необходимости применения данного правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Неявное правило </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">может</span><span style=" font-family:'Sans'; font-size:12pt;"> быть применено к любой цели, которая подходит под его шаблон, однако оно действительно </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">будет</span><span style=" font-family:'Sans'; font-size:12pt;"> применено только в том случае, когда цель не имеет команд, определенных иным способом и имеются все необходимые для этого пререквизиты. Если для одной цели могут быть применены сразу несколько неявных правил, будет использовано только одно из них; какое именно - будет зависеть от порядка их следования. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Статическое шаблонное правило, напротив, применяется к точно указанному набору целей. Оно не может быть применено к каким-либо другим целям и одинаковым образом применяется ко всем перечисленным в нем целям. Случай, когда к одной и той же цели могут быть применены два разных статических шаблонных правила, оба из которых имеют команды, считается ошибкой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Статические шаблонные правила могут быть предпочтительней неявных правил по следующим причинам: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вы можете использовать статические шаблонные правила для тех файлов, чье имя синтаксически не подходит для использования в неявных правилах, но может быть явно указано в списке целей. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы не уверены, какие, в точности, файлы содержатся в вашей директории, вы не можете быть уверены в том, что какие-нибудь &quot;ненужные&quot; в данный момент файлы не повлият на работу <span style=" font-family:'monospace';">make</span>. Может случится, что будут использованы не те неявные правила, на которые вы рассчитывали, поскольку их выбор будет зависеть от применяемой процедуры поиска. В случае статических шаблонных правил такой неоднозначности не существует: каждое правило будет применяться в точности к тем целям, которые были в нем указаны. </li></ul>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC42"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC42"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">равила с двойным двоеточием (double-colon rules)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX250"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">П</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">равила с двойным двоеточием (double-colon rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> представляют собой правила, записанные с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`::'</span><span style=" font-family:'Sans'; font-size:12pt;"> вместо обычного </span><span style=" font-family:'monospace'; font-size:12pt;">`:'</span><span style=" font-family:'Sans'; font-size:12pt;"> после имени цели. По сравнению с обычными правилами, они обрабатываюся по-другому в случаях, когда одна и та же цель указана сразу в нескольких правилах. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда цель указана в нескольких правилах, все они должны быть одного и того же типа: либо обычными правилами, либо правилами с двойным двоеточием. Если все они являются правилами с двойным двоеточием, то каждое из них является независимым от других. Команды, указанные в правиле с двойным двоеточием, будут выполняться, если его цель окажется &quot;старше&quot;, чем какой-либо из его пререквизитов. Результатом может быть выполнение всех или нескольких правил. Может получиться и так, что ни одно из правил не будет выполнено. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, правила с двойным двоеточием полностью независимы друг от друга. Каждое из этих правил, обрабатывается индивидуально, как если бы они были обычными правилами с разными целями. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правила с двойным двоеточием исполняются в том порядке, как они описаны в make-файле. Однако, в случаях, когда использование таких правил действительно необходимо, порядок исполнения команд, как правило, не имеет значения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В типичных ситуациях, правила с двойным двоеточиям не слишком полезны. Они используются в тех случаях, когда способ обновления цели зависит от того, какой именно из пререквизитов вызвал необходимость ее обновления. А такие случаи встречаются нечасто. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждое правило с двойным двоеточием должно содержать команды, в противном случае </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается применить подходящее неявное правило. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC43"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC43"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">втоматическая генерация списка пререквизитов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX254"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">ак правило, в типичном make-файле значительная часть правил служит лишь для того, чтобы описать зависимость объектных файлов от некоторых заголовочных файлов. Например, если </span><span style=" font-family:'monospace'; font-size:12pt;">`main.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> использует </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, включая его с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">#include</span><span style=" font-family:'Sans'; font-size:12pt;">, вы можете написать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o: defs.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это правило необходимо для того, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обновляла объектный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> при каждом изменении </span><span style=" font-family:'monospace'; font-size:12pt;">`defs.h'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для большой программы, скорее всего, вам придется написать большое количество подобных правил. Далее, каждый раз при изменении исходных текстов путем добавления или удаления директивы </span><span style=" font-family:'monospace'; font-size:12pt;">#include</span><span style=" font-family:'Sans'; font-size:12pt;">, вам придется модефицировать соответствующим образом и make-файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX258"></a><span style=" font-family:'Sans'; font-size:12pt;">Ч</span><span style=" font-family:'Sans'; font-size:12pt;">тобы избежать подобных неудобств, большинство современных компиляторов могут автоматически создать для вас такие правила, просматривая содержимое исходных файлов, и учитывая встретившиеся в них директивы </span><span style=" font-family:'monospace'; font-size:12pt;">#include</span><span style=" font-family:'Sans'; font-size:12pt;">. Обычно, это делается при помощи опции компилятора </span><span style=" font-family:'monospace'; font-size:12pt;">`-M'</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, результатом работы команды </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -M main.c </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o : main.c defs.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, вам больше не потребуется писать подобные правила &quot;вручную&quot; - эту работу возьмет на себя компилятор. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что в приведенной выше зависимости упоминается файл </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и, следовательно, этот файл не сможет рассматриваться как промежуточный в процессе поиска неявных правил. Как следствие, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> никогда не будет удалять этот файл после его использования; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX259"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри работе со старыми реализациями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, обычной практикой являлась генерация пререквизитов по отдельному запросу, наподобие </span><span style=" font-family:'monospace'; font-size:12pt;">`make depend'</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта команда создаст файл </span><span style=" font-family:'monospace'; font-size:12pt;">`depend'</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащий все автоматически сгенерированные пререквизиты; затем они могут быть включены в make-файл с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Возможность автоматического обновления make-файлов, заложенная в GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, делает эту практику устаревшей --вам никогда не понадобится явно указыватть утилите </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на необходимость обновления списка пререквизитов, поскольку она всегда обновляет любые используемые make-файлы, если они устарели. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC17"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматическое обновление make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Мы рекомендуем вам использовать подход, когда для каждого исходного файла имеется свой маленький make-файл, содержащий список пререквизитов этого исходного файла. Для каждого исходного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> имеется make-файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.d'</span><span style=" font-family:'Sans'; font-size:12pt;">, в котором перечислен список файлов, от которых зависит объектный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">name</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. При таком подходе, новые списки пререквизитов могут строиться только для тех исходных файлов, которые действительно были модефицированы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот пример шаблонного правила для генерации файлов пререквизитов (то есть make-файлов), имеющих имя </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.d'</span><span style=" font-family:'Sans'; font-size:12pt;"> из файлов с исходным текстом </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.d: %.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        set -e; $(CC) -M $(CPPFLAGS) $&lt; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                  | sed 's/\($*\)\.o[ :]*/\1.o $@ : /g' &gt; $@; \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                [ -s $@ ] || rm -f $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для получения подробной информации об определении шаблонных правил смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Флажок </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;"> заставляет интерпретатор командной строки немедленно завершать работу в случае, если при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">$(CC)</span><span style=" font-family:'Sans'; font-size:12pt;"> произойдет ошибка (команда возвратит отличный от нуля код завершения). Обычно, интерпретатор командной строки завершается с кодом возврата, полученным от последней выполненной команды из всей цепочки команд (</span><span style=" font-family:'monospace'; font-size:12pt;">sed</span><span style=" font-family:'Sans'; font-size:12pt;"> в данном случае) и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может просто &quot;не заметить&quot; ошибочной ситуации, произошедшей при вызове компилятора. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX261"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри использовании компилятора GNU C, вместо опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-M'</span><span style=" font-family:'Sans'; font-size:12pt;"> вы можете попробовать использовать опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-MM'</span><span style=" font-family:'Sans'; font-size:12pt;">. При этом, в список пререквизитов не будут попадать системные заголовочные файлы. Смотрите раздел `Options Controlling the Preprocessor' руководства по компилятору GNU C. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX262"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">азначение команды </span><span style=" font-family:'monospace'; font-size:12pt;">sed</span><span style=" font-family:'Sans'; font-size:12pt;"> заключается в преобразовании (например) строки: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o : main.c defs.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">в строку: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">main.o main.d : main.c defs.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX263"></a><span style=" font-family:'Sans'; font-size:12pt;">Т</span><span style=" font-family:'Sans'; font-size:12pt;">аким образом, получается, что каждый файл с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.d'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от всех тех же исходных и заголовочных файлов, что и соответствующий ему объектный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Теперь, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет заново генерировать список пререквизитов при любом изменении исходного либо заголовочных файлов программы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">После того, как вы создали правило, обновляющее все </span><span style=" font-family:'monospace'; font-size:12pt;">`.d'</span><span style=" font-family:'Sans'; font-size:12pt;"> файлы, надо сделать эти файлы доступными для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Для этого используется директива </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">sources = foo.c bar.c</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include $(sources:.c=.d) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">(В этом примере, для преобразования списка исходных файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c bar.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в список пререквизитов (</span><span style=" font-family:'monospace'; font-size:12pt;">`foo.d bar.d'</span><span style=" font-family:'Sans'; font-size:12pt;">), используется техника ссылки на переменную с подстановкой. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC61"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ссылка с заменой</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Поскольку файлы с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.d'</span><span style=" font-family:'Sans'; font-size:12pt;"> являются полноправными make-файлами, утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет сама заботится об их своевременном обновлении, не требуя от вас каких-либо дополнительных усилий. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC17"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматическое обновление make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC44"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC44"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">аписание команд</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX264"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пределенные в правиле команды, представляют собой текстовые строки с командами для интерпретатора командной строки. Команды эти исполняются последовательно, одна за другой. Каждая строка, содержащая команду, должна начинаться с символа табуляции. Первая команда также может быть расположена в строке правила, содержащей список целей и пререквизитов - в таком случае она отделяется от списка пререквизитов символом точки с запятой и не требует наличия символа табуляции в ее начале. Среди строк, содержащих команды, могут присутствовать пустые строки и строки, содержащие лишь комментарии - все они будут проигнорированы. (Но имейте ввиду, что &quot;пустая&quot; строка, начинающаяся с символа табуляции, на самом деле </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> является пустой! Она рассматривается как строка, содержащая пустую команду; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC56"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Пустые команды</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Несмотря на то, что пользователи могут пользоваться разными интерпретаторами командной строки, для интерпретации команд из make-файла всегда используется оболочка </span><span style=" font-family:'monospace'; font-size:12pt;">`/bin/sh'</span><span style=" font-family:'Sans'; font-size:12pt;">(если только в make-файле явно не задается использование какой-либо другого интерпретатора). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX267"></a><span style=" font-family:'Sans'; font-size:12pt;">Т</span><span style=" font-family:'Sans'; font-size:12pt;">ип используемой в системе оболочки определяется исходя из того, может ли в командных строках использоваться комментарий и используемый для этого синтаксис. В оболочке </span><span style=" font-family:'monospace'; font-size:12pt;">`/bin/sh'</span><span style=" font-family:'Sans'; font-size:12pt;">, комментарий начинается с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;"> и продолжается до конца строки. Символ </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;"> может располагаться и не в начале строки. Текст до символа </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;"> не является частью комментария. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC45"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC45"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">тображение исполняемых команд (command echoing)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX270"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> печатает каждую командную строку перед тем, как она будет выполнена. Мы называем такой механизм </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">эхом (echoing)</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку он создает впечатление, что это вы сами набираете исполняемые команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если строка, содержащая команду, начинается с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">, печать этой команды не производится. Символ </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;"> удаляется из строки с командой перед тем, как она передается для обработки интерпретатору командной строки. Такой прием часто используется для команд, назначением которых является вывод некоторого сообщения, например, команд </span><span style=" font-family:'monospace'; font-size:12pt;">echo</span><span style=" font-family:'Sans'; font-size:12pt;">, используемых для отображения хода обработки make-файла: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">@echo About to make distribution files </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX275"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">огда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> вызывается с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--just-print'</span><span style=" font-family:'Sans'; font-size:12pt;">, происходит только лишь отображение команд, без их реального выполнения. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Это единственный случай, когда команды, начинающиеся с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">, также будут напечатаны. Используя эти опции, можно увидеть, какие команды </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> считает необходимым выполнить, без того, чтобы реально их выполнять. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX279"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пции </span><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--silent'</span><span style=" font-family:'Sans'; font-size:12pt;"> отключают всякое отображение команд, как если бы все команды начинались с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">. Использование в make-файле правила со специальной целью </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;"> без указания пререквизитов, имеет аналогичный эффект (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC36"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена специальных целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Использование специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;"> является устаревшей практикой, взамен которой мы рекомедуем пользоваться более гибким механизмом - символом </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC46"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC46"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">сполнение команд</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX283"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">оследовательность команд, обновляющих цель, исполняется путем вызова отдельного экземпляра интерпретатора командной строки для каждой из строк make-файла, содержащих команды. (На практике, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может использовать некоторую оптимизацию, однако это не сказывается на конечном результате.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX287"></a><span style=" font-family:'Sans'; font-size:12pt;">Э</span><span style=" font-family:'Sans'; font-size:12pt;">то, в частности, означает, что (</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">обратите внимание!</span><span style=" font-family:'Sans'; font-size:12pt;">) такие команды, как </span><span style=" font-family:'monospace'; font-size:12pt;">cd</span><span style=" font-family:'Sans'; font-size:12pt;">, влияющие на переменные среды процесса, не окажут никакого влияния на следующие за ними команды. </span><a name="DOCF2"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#FOOT2"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">(</span></a><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">2)</span><span style=" font-family:'Sans'; font-size:12pt;"> Если вы хотите, чтобы команда </span><span style=" font-family:'monospace'; font-size:12pt;">cd</span><span style=" font-family:'Sans'; font-size:12pt;"> повлияла на следующую за ней команду, поместите обе команды на одну строку make-файла, отделив друг от друга с помощью точки с запятой. В таком случае, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет рассматривать их как единую команду и &quot;вместе&quot; передаст их интерпретатору командной строки для последовательного выполнения. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : bar/lose</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd bar; gobble lose &gt; ../foo </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX288"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля повышения удобочитаемости, вы можете разбить длинные строки с командами на несколько частей с помощью символа </span><span style=" font-family:'monospace'; font-size:12pt;">'\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Его нужно поместить в конец каждой строки-фрагмента, за исключением последней. Перед вызовом интерпретатора командной строки, подобная последовательность строк будет скомбинирована в одну строку, путем удаления конечных символов </span><span style=" font-family:'monospace'; font-size:12pt;">'\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, предыдущий пример можно записать так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : bar/lose</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd bar;  \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        gobble lose &gt; ../foo </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX294"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">мя программы, являющейся интерпретатором командной строки, берется из переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">. По умолчанию, используется программа </span><span style=" font-family:'monospace'; font-size:12pt;">`/bin/sh'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX295"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри работе в операционной системе MS-DOS, если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> не установлена, имя интерпретатора командной строки берется из переменной </span><span style=" font-family:'monospace'; font-size:12pt;">COMSPEC</span><span style=" font-family:'Sans'; font-size:12pt;"> (которая установлена всегда). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX296"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри работе в операционной системе MS-DOS, обработка строк make-файла, изменяющих содержимое переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">, имеет некоторые особенности. Стандартный для MS-DOS интерпретатор командной строки </span><span style=" font-family:'monospace'; font-size:12pt;">`command.com'</span><span style=" font-family:'Sans'; font-size:12pt;"> обладает столь ограниченными возможностями, что большое число пользователей </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предпочитают заменить его на что-нибудь более приемлимое. Поэтому, работая под управлением MS-DOS, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> отслеживает значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">, и меняет свое поведение в зависимости от того, указывает ли эта переменная на интерпретатор с ограниченными функциональными возможностями (в стиле MS-DOS), либо на &quot;полнофункциональный&quot; интерпретатор (в стиле Unix). Это позволяет утилите </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сохранять приемлимую функциональность даже в случае, когда переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> указывает на командный интерпретатор </span><span style=" font-family:'monospace'; font-size:12pt;">`command.com'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> указывает на интерпретатор командной строки, выдержанный в Unix-стиле, программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, работающая под управлением MS-DOS, дополнительно проверяет - действительно ли указанный интерпретатор существует; если нет, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет игнорировать строки make-файла, изменяющие значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">. Работая под управлением MS-DOS, утилита GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проводит поиск интерпретатора командной строки в следующих местах: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В точности том месте, куда указывает значение переменной <span style=" font-family:'monospace';">SHELL</span>. Например, если в make-файле указано <span style=" font-family:'monospace';">`SHELL = /bin/sh'</span>, <span style=" font-family:'monospace';">make</span> будет искать интерпретатор в каталоге <span style=" font-family:'monospace';">`/bin'</span> текущего диска. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В текущем каталоге. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В каждом из каталогов, перечисленных в переменной <span style=" font-family:'monospace';">PATH</span> (в том порядке, как они указаны). </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В каждом из проверяемых каталогов </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сначала пытается найти файл с известным ей конкретным именем (</span><span style=" font-family:'monospace'; font-size:12pt;">`sh'</span><span style=" font-family:'Sans'; font-size:12pt;"> в приведенном выше примере). Если такого файла не существует, делается попытка найти файл с подобным именем, но имеющим другое расширение. При этом, проверяются нзвестные расширения, используемые для исполняемых файлов ( </span><span style=" font-family:'monospace'; font-size:12pt;">`.exe'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`.com'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`.bat'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`.btm'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`.sh'</span><span style=" font-family:'Sans'; font-size:12pt;"> и некоторые другие). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При успешном завершении любой из этих попыток, в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> записывается полное имя (с путем) найденного интерпретатора командной строки. При неудачном завершении всех попыток найти командный интерпретатор, присваивание переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> нового значения игнорируется и ее содержимое не изменяется. Таким образом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет поддерживать специфических для оболочек Unix-подобного стиля возможности, только в том случае, если подходящая оболочка действительно имеется в системе, где была запущена </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что описанная выше процедура поиска командного интерпретатора выполняется только в тех случаях, когда переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> устанавливается из из make-файла. Если значение этой переменной берется из среды (environment) или устанавливается с помощью командной строки, ожидается что она будет содержать полное имя (с путем) интерпретатора командной строки, подобно тому, как это происходит в Unix. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эффект от подобной специфической для MS-DOS обработки, состоит в том, что строка make-файла </span><span style=" font-family:'monospace'; font-size:12pt;">`SHELL = /bin/sh'</span><span style=" font-family:'Sans'; font-size:12pt;"> (встречающаяся во многих make-файлах, ориентированных на Unix), без именений будет работать в среде MS-DOS - достаточно лишь поместить (например) программу </span><span style=" font-family:'monospace'; font-size:12pt;">`sh.exe'</span><span style=" font-family:'Sans'; font-size:12pt;"> в какой-нибудь из каталогов, перечисленных в </span><span style=" font-family:'monospace'; font-size:12pt;">PATH</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX297"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> отличие от большинства переменных, </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> никогда не получает свое значение из среды (environment). Это делается потому, что значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для указания командного интерпретатора, который выбран вами для интерактивного использования. Было бы неправильно, если бы ваш персональный выбор отражался бы на работоспособности make-файлов. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC68"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменные из операционного окружения</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Переменная среды </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">используется</span><span style=" font-family:'Sans'; font-size:12pt;">, однако, при работе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в операционных системах MS-DOS и MS-Windows, поскольку, как правило, пользователи, работающие в этих системах, не используют переменную </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> для каких-либо иных целей, кроме работы с </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Если, при работе в MS-DOS, вы по какой-либо причине не можете воспользоваться переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо нее вы можете использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKESHELL</span><span style=" font-family:'Sans'; font-size:12pt;">. При наличии переменой </span><span style=" font-family:'monospace'; font-size:12pt;">MAKESHELL</span><span style=" font-family:'Sans'; font-size:12pt;">, значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> не учитывается. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC47"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC47"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">араллельное исполнение команд</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX298"></a><span style=" font-family:'Sans'; font-size:12pt;">G</span><span style=" font-family:'Sans'; font-size:12pt;">NU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> умеет одновременно выполнять несколько команд. Обычно, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выполняет команды поочередно, ожидая завершения очередной команды, перед тем, как выполнять следующую. Однако, с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--jobs'</span><span style=" font-family:'Sans'; font-size:12pt;"> можно заставить </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выполнять одновременно несколько команд. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В операционной системе MS-DOS, опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> не работает, поскольку эта система не поддерживает многозадачность. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">За опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> может следовать целое число, которое будет указывать количество одновременно исполняемых команд (это понятие называется числом </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">слотов задания (job slots)</span><span style=" font-family:'Sans'; font-size:12pt;">). В случае, если после опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> не указано конкретное число слотов задания, подразумевается их неограниченное количество. По умолчанию, количество слотов задания равняется единице, что, фактически, означает последовательное выполнение (одновременно может выполняться только одна команда). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Одно из неприятных последствий одновременной работы нескольких команд, заключается в возможности &quot;перемешивания&quot; их сообщений, поскольку нескольким командам может &quot;одновременно&quot; понадобится вывести некоторую информацию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другая проблема заключается в том, что два разных процесса не могут одновременно читать данные из одного устройства. Дабы иметь уверенность в том, что одновременно только одна команда сможет попытаться прочесть входные данные с терминала, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> закрывает стандартные потоки ввода у всех запущенных команд, кроме одной. Это означает, что попытка запущенной команды прочитать данные из стандартного ввода обычно заканчивается фатальной ошибкой (например, получением сигнала </span><span style=" font-family:'monospace'; font-size:12pt;">`Broken pipe'</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Невозможно заранее предсказать, какая именно команда получит в качестве стандартного ввода работающий входной поток (подключенный к терминалу или другому источнику, куда был перенаправлен стандартный ввод утилиты </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">). Сначала этот входной поток получит в свое распоряжение первая запущенная команда, затем первая команда, которая была запущена по окончанию работы этой команды и так далее. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Возможно, в будущем, если мы найдем лучшую альтернативу, подобное поведение </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет изменено. Пока же, вам не следует использовать команды, работающие со стандартным вводом, если вы используете механизм параллельного исполнения команд. Если вы не пользуетесь подобной возможностью, во всех командах стандартный ввод будет работать нормально. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Наконец, параллельное исполнение команд имеет некоторые особенности при рекурсивной работе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Подробно это обсуждается в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Передача опций в </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При аварийном завершении команды (от нее был получен ненулевой код возврата либо она была прервана полученным сигналом) для которой не был указан режим игнорирования ошибок (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">), оставшиеся командные строки (обновляющие ту же цель) не будут выполняться. При этом, если в командной строке не были указаны опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--keep-going'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">), программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> аварийно завершается. При любом аварийном завершении (в том числе и из-за получения сигнала), перед тем как закончить работу, программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> дожидается завершения всех своих дочерних процессов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX306"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли ваша компьютерная система сильно загружена, вам возможно захочется, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> одновременно запускала меньшее число заданий, чем это делается при нормальной загрузке. В таком случае можно использовать опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-l'</span><span style=" font-family:'Sans'; font-size:12pt;"> для того, чтобы поставить число одновременно выполняемых команд в зависимость от средней загрузки системы. Для этого, за опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-l'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--max-load'</span><span style=" font-family:'Sans'; font-size:12pt;"> должно следовать число с плавающей точкой. Например в следующем случае: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">-l 2.5 </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет запускать одновременно не более одной команды, если средняя загрузка системы будет больше чем 2.5. Опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-l'</span><span style=" font-family:'Sans'; font-size:12pt;">, за которой не следует число, отменяет установленное ранее ограничение на максимальную загрузку систему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии ограничения на загрузку системы, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поступает следующим образом. Перед тем как запустить новое задание, если, по крайней мере, одно задание уже работает, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проверяет среднюю загрузку системы. Если она превышает установленный предел, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> ожидает, пока загрузка не упадет до нужного уровня либо все прочие задания завершатся. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По умолчанию, загрузка системы не ограничивается. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC48"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC48"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">шибки при исполнении команд</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX312"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">осле завершения очередной команды, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проверяет полученный от нее код возврата. В случае успешного ее завершения, выполняется (своим экземпляром командного интерпретатора) следующая командная строка; после выполнения последней команды, обработка правила считается завершенной. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если во время выполнения команды произошла ошибка (от нее был получен ненулевой код возврата), </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> прекращает обработку текущего правила, и, возможно, прерывает работу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В определенных ситуациях, ошибка при выполнении некоторой команды не является проблемой. Например, вы можете использовать команду </span><span style=" font-family:'monospace'; font-size:12pt;">mkdir</span><span style=" font-family:'Sans'; font-size:12pt;">, дабы быть уверенным в существовании некоторого каталога. Если такая директория уже существует, команда </span><span style=" font-family:'monospace'; font-size:12pt;">mkdir</span><span style=" font-family:'Sans'; font-size:12pt;"> сообщит об ошибке, но, скорее всего, вы захотите, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в таком случае продолжила работу, не обращая внимания на ошибку. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX315"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля того, чтобы проигнорировать ошибки в команде, поместите в начало строки (после символа табуляции), где она описана, символ </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;">. Перед тем, как эта команда будет передана интерпретатору командной строки, символ </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет из нее удален. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm -f *.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX316"></a><span style=" font-family:'Sans'; font-size:12pt;">о</span><span style=" font-family:'Sans'; font-size:12pt;">бработка make-файла не будет прервана даже в том случае, если команда </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;"> не сможет удалить файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX317"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-i'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--ignore-errors'</span><span style=" font-family:'Sans'; font-size:12pt;">, будут игнорироваться ошибки во всех командах, любого из правил. Такой же эффект достигается при изпользовании специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.IGNORE</span><span style=" font-family:'Sans'; font-size:12pt;"> в правиле, не имеющем пререквизитов. Вместо подобной устаревшей практики, мы рекомендуем применять более гибкую методику с использованием </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда произошедшая ошибка игнорируется (например, вследствие использования </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;"> или опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-i'</span><span style=" font-family:'Sans'; font-size:12pt;">), ошибочное завершение команды обрабатывается аналогично нормальному завершению, за исключением того, что при этом печатается полученный от команды код возврата и выдается сообщение, что ошибка была проигнорирована. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При возникновении ошибки, насчет которой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не имеет инструкций о необходимости ее игнорирования, считается что текущая цель не может быть корректно обновлена. По этой причине, любые другие цели, прямо или косвенно зависящие от нее, также не могут быть достигнуты. Соответственно, никакие команды, обновляющие эти цели, более исполняться не будут, поскольку не будут выполняться их предварительные условия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX320"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, в такой ситуации </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> прекращает работу, возвращая ненулевой результат. Однако, если была указана опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--keep-going'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> продолжает обработку других пререквизитов оставшихся целей, при необходимости обновляя их. Например, после неудачной компиляции объектного файла, </span><span style=" font-family:'monospace'; font-size:12pt;">`make -k'</span><span style=" font-family:'Sans'; font-size:12pt;"> продолжит работу, компилируя оставшиеся объектные файлы, хотя уже заранее известно, что их компоновка закончится неудачей. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">. По окончанию работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, ненулевой код возврата будет указывать на произошедшую ошибку. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Мотивы подобного поведения </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> просты. Обычно, запуская </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вы хотите получить свежую версию указанной цели. Как только </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> понимает, что это невозможно, она сразу же может собщить о происшедшей ошибке. Напротив, задание опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> означает, что ваша цель - наболее полно протестировать процесс сборки программы, по возможности обнаружив максимальное количество проблем. После устранения всех найденных проблем, можно будет заново повторить процесс компиляции. Подобными соображениями, например, руководствуется редактор Emacs, по умолчанию запуская </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;">, при выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">compile</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX323"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, если при аварийном завершении команды, целевой файл все же обновился, то он, скорее всего просто поврежден и непригоден для дальнейшего использования. В любом случае, он, как минимум, обновился некорректно. Однако, поскольку время модефикации файла все-таки изменилось, при следующем запуске, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> уже не будет обновлять этот файл, считая что имеется его &quot;свежая&quot; версия. Похожая ситуация возникает, когда исполняемая команда аварийно завершается из-за получения сигнала (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC49"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Прерывание или принудительное завершение make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Пожалуй, правильнее всего будет удалять целевой файл, если обновляющая его команда завершилась с ошибкой. Утилита </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет поступать подобным образом при наличии в make-файле специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.DELETE_ON_ERROR</span><span style=" font-family:'Sans'; font-size:12pt;">. Практически во всех случаях подобное поведение является наилучшей стратегией, однако, по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> этого не делает (из &quot;исторических&quot; сображений). Для того, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически удаляла некорректно построенные целевые файлы, вы должны явно этого потребовать. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC49"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC49"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">рерывание (interrupting) или принудительное завершение (killing) </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC49"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX327"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли при выполнении какой-либо команды, программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> получит прерывающий ее сигнал, она может удалить целевой файл, который предполагалось обновить с помощью этой команды. Файл будет удален в том случае, если время его последней модефикации изменилось с тех пор, как </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проверяла его впервые. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смысл удаления целевого файла заключается в том, чтобы при следующем запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, он был построен заново. Для чего это делается? Предположим, что во время работы компилятора, в то самое время как он начал записывать на диск объектный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, вы нажали </span><span style=" font-family:'monospace'; font-size:12pt;">Ctrl-c</span><span style=" font-family:'Sans'; font-size:12pt;">. Нажатие </span><span style=" font-family:'monospace'; font-size:12pt;">Ctrl-c</span><span style=" font-family:'Sans'; font-size:12pt;"> немедленно прервет работу компилятора, в результате чего на диске останется фрагмент не полностью записанного файла с более поздним временем модефикации, чем исходный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. К счастью, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> также получит сигнал </span><span style=" font-family:'monospace'; font-size:12pt;">Ctrl-c</span><span style=" font-family:'Sans'; font-size:12pt;"> и удалит этот &quot;не доделанный&quot; файл. Если бы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> этого не сделала, при следующем вызове она могла бы подумать, что уже имеется &quot;свежая&quot; версия файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и он больше не нуждается в обновлении - результатом был бы странный сбой в работе компоновщика, попытающегося скомпоновать поврежденный объектный файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX333"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ы можете предотвратить удаление целевого файла в подобной ситуации, сделав его пререквизитом специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;">. Перед тем, как обновить цель, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проверяет - не является ли она пререквизитом цели </span><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;">, и на основании этого решает - нужно ли удалять ее при получении сигнала или нет. В некоторых ситуациях вам может потребоваться, чтобы при возникновении сигнала, цель, тем не менее, не удалялась. Например, если цель служит только для запоминания времени последней модефикации (и ее содержимое не имеет значия), или, по каким-либо соображениям, она должна существовать всегда, или же процесс ее обновления является &quot;атомарной&quot; операцией. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC50"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC50"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Р</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">екурсивный вызов </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC50"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX334"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри рекурсивном использовании, программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сама выступает в качестве одной из команд make-файла. Подобная техника полезна, когда вы хотите иметь отдельные make-файлы для различных подсистем, составляющих большую систему. Предположим, у вас имеется подкаталог </span><span style=" font-family:'monospace'; font-size:12pt;">`subdir'</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащий свой собственный make-файл, и вы хотите, чтобы make-файл из &quot;объемлющего&quot; каталога запускал </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в этом подкаталоге. Вы можете сделать это, написав: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subsystem:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd subdir &amp;&amp; $(MAKE) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subsystem:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(MAKE) -C subdir </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX336"></a><span style=" font-family:'Sans'; font-size:12pt;">Р</span><span style=" font-family:'Sans'; font-size:12pt;">азумеется, вы может просто взять и использовать приведенные выше примеры в своих make-файлах, однако, для понимания механизма рекурсивного вызова </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вам необходимо знать множество вещей, в том числе, каким образом </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;верхнего уровня&quot; взаимодействует с рекурсивно вызванными копиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для удобства, GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> записывает имя текущего рабочего каталога в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">CURDIR</span><span style=" font-family:'Sans'; font-size:12pt;">. В случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> была запущена с параметром </span><span style=" font-family:'monospace'; font-size:12pt;">-C</span><span style=" font-family:'Sans'; font-size:12pt;">, эта переменная будет содержать имя нового (установленного с помощью параметра </span><span style=" font-family:'monospace'; font-size:12pt;">-C</span><span style=" font-family:'Sans'; font-size:12pt;">) каталога, а не &quot;оригинального&quot; рабочего каталога. Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CURDIR</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет &quot;приоритет&quot; такой же, как если бы она была установлена внутри make-файла (по умолчанию, переменная среды </span><span style=" font-family:'monospace'; font-size:12pt;">CURDIR</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет &quot;перекрывать&quot; ее значение). Если вы сами запишете в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">CURDIR</span><span style=" font-family:'Sans'; font-size:12pt;"> новое значение, это никак не повлияет на работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC51"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC51"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак работает переменная </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC51"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">MAKE</span></a></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX338"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри рекурсивном использовании </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо &quot;прямого&quot; указания имени команды (</span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;">), всегда следует использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;">, как показано в следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subsystem:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd subdir &amp;&amp; $(MAKE) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эта переменная содержит имя исполняемого файла, запущенного в ответ на команду </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Если, например, этот файл назывался </span><span style=" font-family:'monospace'; font-size:12pt;">`/bin/make'</span><span style=" font-family:'Sans'; font-size:12pt;">, то в приведенном выше примере будет вызвана команда </span><span style=" font-family:'monospace'; font-size:12pt;">`cd subdir &amp;&amp; /bin/make'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, при каждом рекурсивном вызове, будет использована та же самая программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, которая была вызвана для make-файла &quot;верхнего&quot; уровня. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Использование переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;"> оказывает влияние на работу опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> (</span><span style=" font-family:'monospace'; font-size:12pt;">`--touch'</span><span style=" font-family:'Sans'; font-size:12pt;">), </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> (</span><span style=" font-family:'monospace'; font-size:12pt;">`--just-print'</span><span style=" font-family:'Sans'; font-size:12pt;">) и </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> (</span><span style=" font-family:'monospace'; font-size:12pt;">`--question'</span><span style=" font-family:'Sans'; font-size:12pt;">). Командная строка, содержащая переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;">, работает так, как если бы в ее начале находился специальный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`+'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предположим, в предыдущем примере </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> была вызвана следующим образом: </span><span style=" font-family:'monospace'; font-size:12pt;">`make -t'</span><span style=" font-family:'Sans'; font-size:12pt;">. (Опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> заставляет </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> пометить все цели как &quot;обновленные&quot;, не выполняя в действительности каких-либо команд; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) Следуя тому, каким образом обычно описывается поведение опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">, команда </span><span style=" font-family:'monospace'; font-size:12pt;">`make -t'</span><span style=" font-family:'Sans'; font-size:12pt;"> создала бы файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`subsystem'</span><span style=" font-family:'Sans'; font-size:12pt;"> и на этом завершила бы свою работу. Скорее всего, однако, вы хотели бы получить другой результат, а именно, запуск команды </span><span style=" font-family:'monospace'; font-size:12pt;">`cd subdir &amp;&amp; make -t'</span><span style=" font-family:'Sans'; font-size:12pt;">. Но для достижения такого результата потребовалось бы выполнение команды, в то время как опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> говорит, что команды выполняться не должны. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для получения желаемого результата, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывает строки с командами, содержащие ссылку на переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;"> специальным образом: опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> на такие строки не действуют. Командные строки с переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;"> выполняются обычными образом, не обращая внимания на опции, отключающие выполнение команд. Для передачи параметров от </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;высшего&quot; уровня на &quot;нижние&quot; уровни используется обычный механизм - переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Передача опций в </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Таким образом, все ваши запросы на обновление даты модефикации целевых файлов или печать исполняемых команд, будут переданы &quot;вниз&quot;, во все подсистемы. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC52"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC52"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">вязь с </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC52"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC52"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; (sub-</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC52"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC52"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">) через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX344"></a><span style=" font-family:'Sans'; font-size:12pt;">З</span><span style=" font-family:'Sans'; font-size:12pt;">начения переменных, определенных в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;верхнего уровня&quot;, могут быть переданы в &quot;порожденные&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> через среду (как переменные среды), при явном на то указании. Эти переменные будут определены и в &quot;порожденных&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, однако их значение может быть &quot;перекрыто&quot; другим значением, устанавливаемым в самом make-файле &quot;нижнего уровня&quot; (если только не использовать опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;">; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Чтобы &quot;передать вниз&quot; или </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">экспортировать</span><span style=" font-family:'Sans'; font-size:12pt;"> переменную, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> добавляет переменную с таким же именем и значением в набор переменных среды перед выполнением каждой команды. В свою очередь, &quot;порожденные&quot; копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, будут использовать значения переменных среды для инициализации своих внутренних таблиц переменных. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC68"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменные из операционного окружения</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">За исключением случаев явного указания, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> экспортирует только те переменные, которые &quot;изначально&quot; были определены в среде, либо те из них, которые были определены с помощью командной строки (и только в том случае, если имя переменной состоит только из букв, цифр и символов подчеркивания, поскольку прочие имена могут &quot;не работать&quot; с некоторыми версиями командных интерпретаторов). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Специальные переменные </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> экспортируются всегда (за исключением случаев, когда вы &quot;принудительно&quot; запретили их экспорт). Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> экспортируется в том случае, если вы присвоили ей какое-либо значение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменные, определенные с помощью командной строки, автоматически передаются &quot;вниз&quot;, поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> помещает их (наряду с другими параметрами) в специальную переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите следующий раздел). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменные, которые по умолчанию созданы самой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> передаются &quot;вниз&quot; (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Такие переменные каждая </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;нижнего уровня&quot;, при необходимости, создаст самостоятельно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX351"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля экспорта указанной переменной в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;нижнего уровня&quot;, используется директива </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX352"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">запрета</span><span style=" font-family:'Sans'; font-size:12pt;"> экспорта переменной, используется директива </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">unexport </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> ... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для удобства, вы можете одновременно определить переменную и указать на необходимость ее экспортирования. Это делается с помощью записи: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> = значение </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">что эквивалентно: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> = значение</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> := значение </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">что эквивалентно: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> := значение</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогично, </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> += значение </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентно: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> += значение </span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC65"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Добавление текста к переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете заметить, что директивы </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;"> работают в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> таким же образом, как и подобные директивы командного интерпретатора </span><span style=" font-family:'monospace'; font-size:12pt;">sh</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы хотите, чтобы, по умолчанию, все переменные экспортировались, используйте директиву </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> без аргументов: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эта конструкция говорит о том, что все переменные, которые не были явно указаны в директивах </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;">, должны быть экспортированы. Любые переменные, перечисленные в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;">, по-прежнему </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> будут экспортироваться. При использовании директивы </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров, переменные, чьи имена содержат не только алфавитно-цифровые символы и подчеркивания, экспортированы не будут. Для экспорта таких переменных надо явно указать их в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX353"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">тарые версии GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, по умолчанию, экспортируют все переменные (как если бы была использована директива </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров). Если ваш make-файл рассчитан на такое поведение и вы хотите, чтобы он оставался &quot;совместим&quot; со старыми версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, то вместо директивы </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров, можно использовать правило со специальной целью </span><span style=" font-family:'monospace'; font-size:12pt;">.EXPORT_ALL_VARIABLES</span><span style=" font-family:'Sans'; font-size:12pt;">. Старые версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> просто проигнорируют такое правило, в то время как использование директивы </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> вызвало бы синтаксическую ошибку. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогично, вы можете использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров для того, чтобы, по умолчанию, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> экспортировать переменные. Поскольку именно так, по умолчанию, и ведет себя </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, необходимость в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров может возникнуть только в случае, если ранее где-то была использована директива </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров (возможно, в каком-нибудь из включаемых make-файлов). Вы </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">не можете</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать директивы </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров для того, чтобы экспортировать переменные для одних команд и не экспортировать для других. Сработает самая &quot;последняя&quot; из перечисленных в make-файле директив </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">unexport</span><span style=" font-family:'Sans'; font-size:12pt;">, которая и будет определять поведение </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на все время обработки make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX355"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">пециальная переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKELEVEL</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для отражения &quot;уровня вложенности&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Ее значение меняется при переходе &quot;с уровня на уровень&quot;. Значением этой переменной является строка с десятичным числом, показывающим &quot;уровень вложенности&quot; данной копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> самого &quot;верхнего&quot; уровня, ее значением является </span><span style=" font-family:'monospace'; font-size:12pt;">`0'</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, во &quot;вложенной&quot; копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> ее значением будет </span><span style=" font-family:'monospace'; font-size:12pt;">`1'</span><span style=" font-family:'Sans'; font-size:12pt;">, следующая &quot;вложенная&quot; копия </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`2'</span><span style=" font-family:'Sans'; font-size:12pt;"> и так далее. Значение этой переменной увеличивается в тот момент, когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> устанавливает переменные среды для запуска очередной команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В основном, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKELEVEL</span><span style=" font-family:'Sans'; font-size:12pt;"> применяется в условных директивах (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC71"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Условные части make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">); с ее использованием вы можете написать make-файл, который будет вести себя по-разному в зависимости от того, был ли он запущен непосредственно вами, либо исполнялся рекурсивно вызванной копией </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX357"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля передачи во &quot;вложенные&quot; копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> дополнительного списка make-файлов, которые нужно интерпретировать, вы можете использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;">. Значением этой переменной является список имен make-файлов, разделенных пробелами. Будучи определенной в make-файле &quot;высшего уровня&quot;, эта переменная будет передаваться &quot;вниз&quot; через переменные среды и будет работать как список make-файлов, которые должны быть прочтены &quot;порожденными&quot; копиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> перед чтением основного make-файла. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">MAKEFILES</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC53"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC53"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ередача опций в </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC53"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC53"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX358"></a><span style=" font-family:'Sans'; font-size:12pt;">Т</span><span style=" font-family:'Sans'; font-size:12pt;">акие опции как </span><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически передаются в &quot;порожденные&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта автоматически устанавливаемая переменная содержит имена всех опций, переданных программе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в командной строке. Например, при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">`make -ks'</span><span style=" font-family:'Sans'; font-size:12pt;">, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`ks'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Далее, каждая &quot;порожденная&quot; копия </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> через переменные среды и интерпретирует ее содержимое как набор опций для своей работы (аналогично тому, как если бы эти опции были переданы через командную строку). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX361"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">налогично, переменные, определенные с помощью командной строки, передаются в &quot;порожденные&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> через переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Слова (из переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">), содержащие символ </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривает как определение переменной (аналогично тому, как если бы она были определена с помощью командной строки). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC90"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX364"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пции </span><span style=" font-family:'monospace'; font-size:12pt;">`-C'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`-W'</span><span style=" font-family:'Sans'; font-size:12pt;"> не записываются в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> и, соответственно, не передаются в &quot;порожденные&quot; копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX378"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пция </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывается специальным образом (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC47"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Параллельное исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Если в этой опции вы задали некоторое числовое значение </span><span style=" font-family:'monospace'; font-size:12pt;">`N'</span><span style=" font-family:'Sans'; font-size:12pt;">, то при наличии в вашей операционной системе соответствующих возможностей (присутствующих в большинстве UNIX системах; в других системах, обычно, отсутствуют), </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;верхнего уровня&quot; и &quot;подчиненные&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> взаимодействуют между собой, контролируя общее число запущенных во всех копиях </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> заданий, не допуская ситуацию, когда оно превысит </span><span style=" font-family:'monospace'; font-size:12pt;">`N'</span><span style=" font-family:'Sans'; font-size:12pt;">. Обратите внимание, что задания, помеченные как рекурсивно исполняемые (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">), при подсчете общего количества заданий не учитываются (иначе, может получиться, что у нас запущено </span><span style=" font-family:'monospace'; font-size:12pt;">`N'</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;порожденных&quot; копий </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> и не осталось свободных слотов заданий для выполнения &quot;реальной&quot; работы!) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если ваша операционная система не поддерживает нужный механизм межпрограммного взаимодействия, то, вместо указанного вами числового значения, в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> всегда записывается </span><span style=" font-family:'monospace'; font-size:12pt;">`-j 1'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это делается для того, чтобы случайно не превысить максимальное число одновременной запускаемых заданий из-за возможного рекурсивного запуска </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;"> без числовых аргументов передается &quot;вниз&quot; без изменений (поскольку она означает запуск максимального возможного числа заданий). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы не хотите передавать &quot;вниз&quot; другие опции, вы должны соответствующим образом изменить значение </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subsystem:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd subdir &amp;&amp; $(MAKE) MAKEFLAGS= </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX382"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">а самом деле, определения переменных, заданные в командной строке, помещаются в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEOVERRIDES</span><span style=" font-family:'Sans'; font-size:12pt;">, а </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит ссылку на эту переменную. Если вы хотите передать опции в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;нижнего уровня&quot;, но не хотите передавать определения переменных, заданные в командной строке, вы можете записать в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEOVERRIDES</span><span style=" font-family:'Sans'; font-size:12pt;"> пустое значение, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKEOVERRIDES = </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX383"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, в этом нет особого смысла, однако, некоторые системы имеют небольшой и фиксированный лимит размера операционной среды, который легко может быть превышен при записи в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> такого большого количества информации. Эта проблема может проявляться в виде сообщения об ошибке </span><span style=" font-family:'monospace'; font-size:12pt;">`Arg list too long' (список аргументов слишком велик)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><a name="IDX385"></a><span style=" font-family:'Sans'; font-size:12pt;">(</span><span style=" font-family:'Sans'; font-size:12pt;">Для строгого соответствия стандарту POSIX.2, изменение </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEOVERRIDES</span><span style=" font-family:'Sans'; font-size:12pt;"> не влияет на </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> при наличии в make-файле специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">`.POSIX'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для вас, скорее всего, это и неважно.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX387"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">о &quot;историческим&quot; соображениям (для обеспечения совместимости) существует похожая переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Она содержит такое же значение, как и </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, но в это значение не попадают определения переменных, заданных в командной строки, и, если это значение не пусто, оно всегда начинается с дефиса (значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> начинается с дефиса только в том случае, если первая опция не имеет однобуквенного варианта названия, например </span><span style=" font-family:'monospace'; font-size:12pt;">`--warn-undefined-variables'</span><span style=" font-family:'Sans'; font-size:12pt;">). Традиционно, </span><span style=" font-family:'monospace'; font-size:12pt;">MFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> используется исключительно для рекурсивного вызова </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, наподобие: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">subsystem:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd subdir &amp;&amp; $(MAKE) $(MFLAGS) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> делает подобную технику ненужной. Используйте эту методику в том случае, если вы хотите сделать ваш make-файл &quot;совместимым&quot; со старыми вариантами </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">; она будет нормально работать и с современными версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX388"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">еременная </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> может оказаться полезной и в том случае, если вы хотите, чтобы некоторые опции, такие как </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">), использовались при каждом запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Поместите нужное значение в переменную среды </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Вы также может установить значение </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> в make-файле, задав, таким образом, опции, которые должны использоваться для этого make-файла. (Обратите внимание, что вы не можете подобным образом использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Значение этой переменной устанавливается только для совместимости; самостоятельное присваивание этой переменной другого значения никак не будет интерпретироваться </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При интерпретации значения </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> (полученного как из операционной среды, так и из make-файла), значение этой переменной сначала предваряется дефисом (если оно еще не начинатеся с дефиса). Далее, это значение рассматривается как разделенные пробелами слова, являющиеся именами опций. Эти опции интерпретируются так, как если бы они были заданы в командной строке (за исключением того, что опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-C'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-h'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-W'</span><span style=" font-family:'Sans'; font-size:12pt;"> и их версии с длинными именами, игнорируются, а неверные опции не вызывают ошибки). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Используя </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> как переменную среды будьте внимательны и не помещайте в нее никаких опций, которые оказывают &quot;глобальное влияние&quot; на работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Так, например, помещение опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> в переменные среды будет иметь &quot;катастрофические&quot; последствия и приведет к &quot;удивительным&quot; и неприятным эффектам. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC54"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC54"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">пция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC54"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">`--print-directory'</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX392"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри многократном рекурсивном вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, могут оказаться полезными опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-w'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--print-directory'</span><span style=" font-family:'Sans'; font-size:12pt;">, заставляющие </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> печатать имя текущего каталога, когда утилита начинает и заканчивает работу в нем. Например, при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">`make -w'</span><span style=" font-family:'Sans'; font-size:12pt;"> в директории </span><span style=" font-family:'monospace'; font-size:12pt;">`/u/gnu/make'</span><span style=" font-family:'Sans'; font-size:12pt;">, следующая строка: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make: Entering directory `/u/gnu/make'. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет выведена перед тем, как </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> начнет что-либо делать, а строка: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make: Leaving directory `/u/gnu/make'. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет выведена перед тем, как работа будет закончена. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX395"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">ак правило, вам не придется самостоятельно указывать эти опции, поскольку печать каталогов автоматически включаются при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-C'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также в &quot;порожденных&quot; копиях </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Печать каталогов не будет включаться автоматически при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> (подавляющей вывод информации) или опции </span><span style=" font-family:'monospace'; font-size:12pt;">`--no-print-directory'</span><span style=" font-family:'Sans'; font-size:12pt;"> (явно запрещающей печать каталогов). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC55"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC55"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">менованные командные последовательности (canned command sequences)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX405"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">огда одна и та же последовательность команд может быть использована для обновления разных целей, с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> можно определить ее как именованную командную последовательность и, далее, использовать ее во всех правилах с такими целями. Именованная командная последовательность на самом деле является переменной, поэтому ее имя не должно конфликтовать с именами других переменных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот пример определения именованной командной последовательности: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define run-yacc</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">yacc $(firstword $^)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">mv y.tab.c $@</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX407"></a><span style=" font-family:'Sans'; font-size:12pt;">З</span><span style=" font-family:'Sans'; font-size:12pt;">десь, </span><span style=" font-family:'monospace'; font-size:12pt;">run-yacc</span><span style=" font-family:'Sans'; font-size:12pt;"> является именем определяемой переменной; </span><span style=" font-family:'monospace'; font-size:12pt;">endef</span><span style=" font-family:'Sans'; font-size:12pt;"> обозначает конец определения; остальные строки являются командами. Ссылки на переменные и функции внутри директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> не &quot;раскрываются&quot;; символы </span><span style=" font-family:'monospace'; font-size:12pt;">`$'</span><span style=" font-family:'Sans'; font-size:12pt;">, скобки, имена переменных и прочее, становятся частью значения определяемой вами переменной. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC67"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Многострочные переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где описана работа директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом примере, первая команда запустит программу Yacc для первого пререквизита правила, в котором использована данная командная последовательность. Выходная информация программы Yacc всегда будет помещаться в файл </span><span style=" font-family:'monospace'; font-size:12pt;">`y.tab.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Вторая команда даст выходному файлу имя целевого файла правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для того, чтобы задействовать именованную последовательность команд, подставьте переменную с этой последовательностью в качестве команды правила (подстановка делается &quot;обычным&quot; для всех переменных способом; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC58"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обращение к переменным</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Переменные, определенные с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> являются рекурсивно вычисляемыми, поэтому все все ссылки на переменные, находящиеся внутри директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">, будут при этом вычислены. Так, в следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.c : foo.y</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(run-yacc) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">при вычислении значения переменной </span><span style=" font-family:'monospace'; font-size:12pt;">run-yacc</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`$^'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет подставлено имя </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.y'</span><span style=" font-family:'Sans'; font-size:12pt;">, и имя </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это достаточно реалистичный пример, однако, на практике, в данном конкретном правиле нет необходимости, поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет соответствующие неявные правила, имеющие аналогичный эффект (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX408"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри выполнении команды, каждая строка именованной командной последовательности рассматривается так, как если бы она являлась отдельной строкой правила и ей предшествовал бы символ табуляции. Так же, каждая строка будет выполняться своей отдельной копией интерпретатора командной строки. В начале каждой командной строки именованной последовательности могут использоваться специальные символы </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`+'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC44"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Написание команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Например, при использовании следующей командной последовательности: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define frobnicate</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">@echo &quot;frobnicating target $@&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frob-step-1 $&lt; -o $@-step-1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frob-step-2 $@-step-1 -o $@</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет отображать первую командную строку, однако напечает следующие две строки с командами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В то же время, специальный символ в начале строки, ссылающейся на именованную командную последовательность, будет применен к каждой строке этой последовательности. Так, при обработке правила: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frob.out: frob.in</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        @$(frobnicate) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">ни одна</span><span style=" font-family:'Sans'; font-size:12pt;"> команда отображена не будет. (Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC45"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Отображение исполняемых команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где обсуждается использование специального символа </span><span style=" font-family:'monospace'; font-size:12pt;">`@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC56"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC56"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">устые команды (empty commands)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX411"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">ногда, возникает потребность задать команду, которая, на самом деле, не выполняет никаких действий. Такая команда задается с помощью командной строки, не содержащей ничего, кроме пробела. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">target: ; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">определяется пустую команду для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`target'</span><span style=" font-family:'Sans'; font-size:12pt;">. Можно также использовать отдельную командную строку, начинающуюся с символа табуляции, однако это может вызвать путаницу, поскольку такая строка выглядит как пустая. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX413"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли вам непонятно, зачем может понадобиться пустая команда, вспомните о наличии неявных правил. Правило с пустой командой может предовратить применение для указанной цели команд, определенных в неявных правилах (или правилах со специальной целью </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">); смотрите разделы </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;"> и </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC105"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение правил &quot;последнего шанса&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете попытаться использовать пустые команды для тех целей, которые на самом деле не являются файлами, а служат лишь для того, чтобы были обновлены все их пререквизиты. Это, однако, не слишком хорошая идея, поскольку при наличии реального файла, имя которого совпадает с именем цели, пререквизиты могут и не быть обновлены в нужный момент. В таких ситуациях лучше пользоваться абстрактными целями (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC57"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC57"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование переменных (variables)</span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX414"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">П</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">еременная (variable)</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой имя, определенное в make-файле для представления строки текста, называемой </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">значением</span><span style=" font-family:'Sans'; font-size:12pt;"> переменной. Далее, по вашему запросу, эти значения могут быть подставлены в нужные места make-файла (например, в имена целей, имена пререквизитов, команды и так далее). В некоторых других версиях </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, переменные называются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">макросами (macros)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">За исключением нескольких мест, переменные и функции во всех частях make-файла вычисляются при его чтении. Исключение составляют команды, передаваемые интерпретатора командной строки, правые части определений (с помощью символа </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">) переменных, а также определения переменных с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная может представлять собой что угодно, например, список файлов, набор передаваемых компилятору опций, имя запускаемой программы, список каталогов с исходными файлами, директорию для выходных файлов и так далее. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Именем переменной может быть любая последовательность символов, не содержащая </span><span style=" font-family:'monospace'; font-size:12pt;">`:'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> и начальных или конечных пробелов. Однако, мы рекомендуем избегать использования имен переменных, содержащих символы, отличные от букв, цифр и символа подчеркивания. Во-первых, такие имена в будущем могут получить какое-либо специальное значение, и, во-вторых, не все интерпретаторы командной строки смогут передать (через переменные среды) такие переменные &quot;порожденным&quot; копиям </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с make &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена переменных чувствительны к регистру. Таким образом, имена </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`FOO'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`Foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> будут ссылаться на разные переменные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Традиционно, имена переменных записывались с использованием букв верхнего регистра. Мы, однако, рекомендуем вам пользоваться нижним регистром для всех переменных, используемых для &quot;внутренних нужд&quot; make-файла. Верхний же регистр мы рекомендуем оставить для переменных, влияющих на работу неявных правил или содержащих параметры, которые пользователь может переопределять (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC90"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Некоторые переменные имеют имена, состоящие лишь из одного или нескольких символов пунктуации. Это, так называемые, </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">автоматические переменные</span><span style=" font-family:'Sans'; font-size:12pt;">; они используются специальным образом. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC58"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC58"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">бращение к переменным</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX419"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля подстановки значения переменной, напишите знак доллара, за которым следует имя переменной, заключенное в круглые или фигурные скобки: обе записи </span><span style=" font-family:'monospace'; font-size:12pt;">`$(foo)'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`${foo}'</span><span style=" font-family:'Sans'; font-size:12pt;"> представляют собой ссылку на переменную </span><span style=" font-family:'monospace'; font-size:12pt;">foo</span><span style=" font-family:'Sans'; font-size:12pt;">. Из-за подобного специального значения символа </span><span style=" font-family:'monospace'; font-size:12pt;">`$'</span><span style=" font-family:'Sans'; font-size:12pt;">, для получения знака доллара в имени файла или команде нужно использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$$'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ссылка на переменную может быть использована практически в любом контексте: в качестве цели, пререквизита, команды. Она может использоваться в большинстве директив, а также выступать в качестве нового значения другой переменной. Вот типичный пример, где переменная используется для хранения списка объектных файлов программы: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = program.o foo.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">program : $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o program $(objects)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects) : defs.h </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ссылки на переменную обрабатываются при помощи простой текстовой подстановки. Таким образом, правило, описывающее процесс компиляции программы из исходного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`prog.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, могло бы выглядеть так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo = c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog.o : prog.$(foo)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(foo)$(foo) -$(foo) prog.$(foo) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пробелы, находящиеся в операторе присваивания перед новым значеним переменной, игнорируются, поэтому переменная </span><span style=" font-family:'monospace'; font-size:12pt;">foo</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать строку </span><span style=" font-family:'monospace'; font-size:12pt;">`c'</span><span style=" font-family:'Sans'; font-size:12pt;">. (Не следует, однако, принимать этот пример &quot;всерьез&quot; и писать подобным образом свои make-файлы!) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если за знаком доллара следует символ, отличный от доллара, открывающейся круглой скобки или открывающейся фигурной скобки, то этот одиночный символ рассматривается как имя переменной. Таким образом, вы можете обратиться к переменной </span><span style=" font-family:'monospace'; font-size:12pt;">x</span><span style=" font-family:'Sans'; font-size:12pt;">, используя запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$x'</span><span style=" font-family:'Sans'; font-size:12pt;">. Однако, такая практика крайне нежелательна, за исключением случаев обращения к автоматическим переменным (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC59"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC59"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Д</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ве разновидности (flavors) переменных</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX423"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> есть два способа, с помощью которых переменные могут получить свое значение. Мы называем это двумя разновидностями (flavors) переменных. Две разновидности отличаются тем, каким образом переменная была определена и что происходит при вычислении ее значения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX428"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ервая разновидность - это </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">рекурсивно вычисляемые (recursively expanded)</span><span style=" font-family:'Sans'; font-size:12pt;"> переменные. Такие переменные определяются с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">) или директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC67"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Многострочные переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Значение этой переменной запоминается точно в том виде, как вы его указали; если оно содержит ссылки на другие переменные, то эти ссылки будут вычислены (заменены своими текстовыми значениями) только в момент вычисления значения самой переменной (когда будет вычисляться какая-то другая строка, где использована эта переменная). Этот процесс называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">рекурсивным вычислением (recursive expansion)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, следущий make-файл: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo = $(bar)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar = $(ugh)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ugh = Huh?</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all:;echo $(foo) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">выдаст на экран </span><span style=" font-family:'monospace'; font-size:12pt;">`Huh?'</span><span style=" font-family:'Sans'; font-size:12pt;">: при вычислении ссылки </span><span style=" font-family:'monospace'; font-size:12pt;">`$(foo)'</span><span style=" font-family:'Sans'; font-size:12pt;">, она будет заменена на </span><span style=" font-family:'monospace'; font-size:12pt;">`$(bar)'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая, свою очередь, заменена на </span><span style=" font-family:'monospace'; font-size:12pt;">`$(ugh)'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая , наконец, будет расширена в </span><span style=" font-family:'monospace'; font-size:12pt;">`Huh?'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эта разновидность переменных - единственная, поддерживаемая другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Она имеется свои достоинства и недостатки. Ее преимущество (по мнению большинства) заключается в том, что, например, следующий фрагмент: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS = $(include_dirs) -O</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include_dirs = -Ifoo -Ibar </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет работать так, как и ожидалось: ссылки на переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`CFLAGS'</span><span style=" font-family:'Sans'; font-size:12pt;"> будут &quot;раскрываться&quot; в текст </span><span style=" font-family:'monospace'; font-size:12pt;">`-Ifoo -Ibar -O'</span><span style=" font-family:'Sans'; font-size:12pt;">. С другой стороны, серьезный недостаток заключается в том, что вы не можете ничего &quot;добавить&quot; к переменной, наподобие </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS = $(CFLAGS) -O </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">поскольку это вызовет бесконечный цикл при попытке вычислить ее значение. (На самом деле, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> распознает ситуацию зацикливания и сообщает об ошибке.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другой недостаток рекурсивно вычисляемых переменных состоит в том, что все функции, на которые они ссылаются (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">) будут вычисляться заново при каждой &quot;подстановке&quot; этой переменной. Работа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> при этом, разумеется, замедляется. Но еще хуже то, что результат выполнения функций </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;"> становится труднопредсказуемым, поскольку сложно в точности сказать, когда и сколько раз эти функции будут выполнены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобных недостатков лишена другая разновидность переменных - упрощенно вычисляемые переменные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX431"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">У</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">прощенно вычисляемые (simply expanded) переменные</span><span style=" font-family:'Sans'; font-size:12pt;"> определяются с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Значение такой переменной вычисляется (с расширением всех ссылок на другие переменные и вычислением функций) только в момент присваивания ей нового значения. После определения переменной, ее значение представляет собой обычный текст, уже не содержащий ссылок на другие переменные. Таким образом, </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x := foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y := $(x) bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x := later </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентно </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y := foo bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x := later </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При ссылке на упрощенно вычисляемую переменную делается простая подстановка ее значения (без каких-либо дополнительных вычислений). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот чуть более сложный пример, иллюстрирующей использование </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;"> совместно с функцией </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;">. (Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC83"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC83"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">shell</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) Этот пример также демонстрирует использование переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKELEVEL</span><span style=" font-family:'Sans'; font-size:12pt;">, которая изменяется во время переходов &quot;с уровня на уровень&quot; при рекурсивном использовании </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX434"></a><span style=" font-family:'monospace'; font-size:12pt;">i</span><span style=" font-family:'monospace'; font-size:12pt;">feq (0,${MAKELEVEL})</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cur-dir   := $(shell pwd)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">whoami    := $(shell whoami)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">host-type := $(shell arch)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKE := ${MAKE} host-type=${host-type} whoami=${whoami}</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Преимущество использования </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;"> заключается в том, что типичная команда `спуска в подкаталог' будет выглядеть как: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">${subdirs}:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">      ${MAKE} cur-dir=${cur-dir}/$@ -C $@ all </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В общем случае, упрощенно вычисляемые переменные позволяют сделать процесс программирования сложных make-файлов более предсказуемым, поскольку они работают аналогично обычным переменным в большинстве языков программирования. Они позволяют переопределять переменные, используя их собственные значения (возможно, обработанные какими-либо функциями) и использовать функции подстановки гораздо более эффективным образом (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX436"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">прощенно вычисляемые переменные можно использовать для добавления начальных пробелов в значения переменных. Начальные пробелы удаляются из значения переменной, однако, что вы можете сохранить начальный пробел, &quot;защитив&quot; его с помощью ссылки на переменную, например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">nullstring :=</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">space := $(nullstring) # end of the line </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">space</span><span style=" font-family:'Sans'; font-size:12pt;"> будет в точности один пробел. Комментарий </span><span style=" font-family:'monospace'; font-size:12pt;">`# конец строки'</span><span style=" font-family:'Sans'; font-size:12pt;"> включен только для большей ясности. Поскольку конечные пробелы </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> удаляются из значения переменной, единственного пробела в конце строки было бы достаточно для получения нужного эффекта (но такая запись была бы менее понятна). Если вы помещаете пробел в конец значения переменной, хорошей идеей будет помещение соответствующего комментария в конец строки, поясняющего ваши намерения. И наоборот, если для вас </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> желательно наличие пробелов в конце значения переменной, помните, что вы не должны помещать каких-либо комментариев в конец строки после пробелов: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dir := /foo/bar    # directory to put the frobs in </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">dir</span><span style=" font-family:'Sans'; font-size:12pt;"> будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`/foo/bar '</span><span style=" font-family:'Sans'; font-size:12pt;"> (с четырьмя пробелами в конце), чего вы, скорее всего, совсем не хотели. (Представьте себе, что случится со строкой, наподобие </span><span style=" font-family:'monospace'; font-size:12pt;">`$(dir)/file'</span><span style=" font-family:'Sans'; font-size:12pt;"> в этом случае!) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX439"></a><span style=" font-family:'Sans'; font-size:12pt;">G</span><span style=" font-family:'Sans'; font-size:12pt;">NU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поддерживает еще один оператор присваивания </span><span style=" font-family:'monospace'; font-size:12pt;">`?='</span><span style=" font-family:'Sans'; font-size:12pt;">. Он называется оператором условного присваивания, поскольку срабатывает лишь в том случае, когда переменная еще не была определена. Например, выражение: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FOO ?= bar </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентно (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">origin</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(origin FOO), undefined)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  FOO = bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание на то, что переменная, содержащая &quot;пустое&quot; значение, все равно считается определенной, и оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`?='</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет присваивать ей нового значения. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC60"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC60"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Расширенные&quot; способы обращения к переменным</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX442"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> этом разделе обсуждаются некоторые дополнительные возможности, которые можно использовать в ссылках на переменные для придания им большей гибкости. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC61"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC61"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">сылка с заменой (substitution reference)</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX443"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри использовании </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">ссылки с заменой (substitution reference)</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо нее подставляется значение переменной, модефицированное указанным вами способом. Такая ссылка имеет форму </span><span style=" font-family:'monospace'; font-size:12pt;">`$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;"> (или </span><span style=" font-family:'monospace'; font-size:12pt;">`${</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">}'</span><span style=" font-family:'Sans'; font-size:12pt;">). Это значит, что должно быть взято значение переменной </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;">, и каждая найденная в нем цепочка символов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;">, находящаяся в конце слова, должна быть заменена на цепочку символов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Говоря &quot;находящаяся в конце слова&quot;, мы имеем ввиду, что за последовательностью символов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> должен следовать пробел, либо она должна находиться в конце строки (со значением переменной); только в этих случаях она будет заменена на последовательность </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;">. Все прочие цепочки </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> (не удовлетворяющие указанным условиям) будут оставлены без изменений. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo := a.o b.o c.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar := $(foo:.o=.c) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`a.c b.c c.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, ссылка с заменой представляет собой &quot;укороченый&quot; вариант использования функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Для поддержания совместимости с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, мы поддерживаем оба этих механизма - функцию </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;"> и ссылки с заменой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX449"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ругой вариант ссылки с заменой соизмерим по &quot;мощности&quot; с использование функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">. Он имеет аналогичную форму </span><span style=" font-family:'monospace'; font-size:12pt;">`$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">, но теперь в строке </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> должен присутствовать одиночный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Этот вариант ссылки с заменой эквивалентен </span><span style=" font-family:'monospace'; font-size:12pt;">`$(patsubst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">,$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">))'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где описана работа функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo := a.o b.o c.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar := $(foo:%.o=%.c) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`a.c b.c c.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC62"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC62"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">В</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ычисляемые имена переменных (computed variable names)</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX450"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ычисляемые имена переменных - достаточно сложная концепция, полезная для программирования лишь весьма &quot;нетривиальных&quot; make-файлов. В большинстве случаев, у вас не возникнет потребности в изучении этого механизма - достаточно лишь знать, что знак доллара внутри имени переменной может привести к весьма &quot;странным&quot; результатам. Однако, если вы хотите досконально изучить работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> или же действительно заинтересованы в изучении этого механизма, то читайте дальше. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Внутри имени переменной может находится ссылка на другую переменную. Это называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">вычисляемым именем переменной (computed variable name)</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">вложенной ссылкой (nested variable reference)</span><span style=" font-family:'Sans'; font-size:12pt;">. В следущем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x = y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y = z</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a := $($(x)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`z'</span><span style=" font-family:'Sans'; font-size:12pt;">: ссылка </span><span style=" font-family:'monospace'; font-size:12pt;">`$(x)'</span><span style=" font-family:'Sans'; font-size:12pt;"> внутри выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(x))'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет заменена на </span><span style=" font-family:'monospace'; font-size:12pt;">`y'</span><span style=" font-family:'Sans'; font-size:12pt;">, так что строка </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(x))'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет преобразована в </span><span style=" font-family:'monospace'; font-size:12pt;">`$(y)'</span><span style=" font-family:'Sans'; font-size:12pt;"> и, далее, расширена в </span><span style=" font-family:'monospace'; font-size:12pt;">`z'</span><span style=" font-family:'Sans'; font-size:12pt;">. Здесь имя переменной не указано &quot;прямо&quot;, а вычисляется при расширении выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$(x)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Ссылка </span><span style=" font-family:'monospace'; font-size:12pt;">`$(x)'</span><span style=" font-family:'Sans'; font-size:12pt;"> здесь находится внутри другой ссылки на переменную. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предыдущий пример демонстрировал два &quot;уровня вложенности&quot;. На самом деле, число таких уровней может быть неограниченным. Следующий пример демонстрирует три &quot;уровня вложенности&quot;: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x = y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y = z</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">z = u</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a := $($($(x))) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь самая внутренняя ссылка </span><span style=" font-family:'monospace'; font-size:12pt;">`$(x)'</span><span style=" font-family:'Sans'; font-size:12pt;"> заменяется на </span><span style=" font-family:'monospace'; font-size:12pt;">`y'</span><span style=" font-family:'Sans'; font-size:12pt;">, так что строка </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(x))'</span><span style=" font-family:'Sans'; font-size:12pt;"> расширяется в </span><span style=" font-family:'monospace'; font-size:12pt;">`$(y)'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая, в свою очередь, расширяется в </span><span style=" font-family:'monospace'; font-size:12pt;">`z'</span><span style=" font-family:'Sans'; font-size:12pt;">; теперь мы получаем ссылку </span><span style=" font-family:'monospace'; font-size:12pt;">`$(z)'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая заменяется на </span><span style=" font-family:'monospace'; font-size:12pt;">`u'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ссылки на вычисляемые имена переменных, в свою очередь, сами могут находится внутри имен переменных. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x = $(y)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y = z</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">z = Hello</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a := $($(x)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`Hello'</span><span style=" font-family:'Sans'; font-size:12pt;">: строка </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(x))'</span><span style=" font-family:'Sans'; font-size:12pt;"> преобразуется в строку </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(y))'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая преобразуется в строку </span><span style=" font-family:'monospace'; font-size:12pt;">`$(z)'</span><span style=" font-family:'Sans'; font-size:12pt;"> которая, в свою очередь, имеет значение </span><span style=" font-family:'monospace'; font-size:12pt;">`Hello'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вложенные ссылки могут содержать ссылки с заменой, а также вызовы функций (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Вот пример, в котором используется функция </span><span style=" font-family:'monospace'; font-size:12pt;">subst</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x = variable1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable2 := Hello</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">y = $(subst 1,2,$(x))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">z = y</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a := $($($(z))) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">a</span><span style=" font-family:'Sans'; font-size:12pt;"> получает значение </span><span style=" font-family:'monospace'; font-size:12pt;">`Hello'</span><span style=" font-family:'Sans'; font-size:12pt;">. Вряд ли кто-нибудь будет писать подобным образом, однако, это пример действительно работает: выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$($($(z)))'</span><span style=" font-family:'Sans'; font-size:12pt;"> преобразуется в строку </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(y))'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая, затем, преобразуется в </span><span style=" font-family:'monospace'; font-size:12pt;">`$($(subst 1,2,$(x)))'</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, из переменной </span><span style=" font-family:'monospace'; font-size:12pt;">x</span><span style=" font-family:'Sans'; font-size:12pt;"> берется ее текущее значение (</span><span style=" font-family:'monospace'; font-size:12pt;">`variable1'</span><span style=" font-family:'Sans'; font-size:12pt;">), которое, с помощью подстановки, заменяется на </span><span style=" font-family:'monospace'; font-size:12pt;">`variable2'</span><span style=" font-family:'Sans'; font-size:12pt;">. После этого, выражение выглядит как </span><span style=" font-family:'monospace'; font-size:12pt;">`$(variable2)'</span><span style=" font-family:'Sans'; font-size:12pt;">, и его значеним является строка </span><span style=" font-family:'monospace'; font-size:12pt;">`Hello'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вычисляемое имя переменной совсем не обязательно должно состоять из единственной ссылки на переменную. Оно вполне может включать в себя несколько ссылок на переменные, а также обычные текстовые строки. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a_dirs := dira dirb</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">1_dirs := dir1 dir2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a_files := filea fileb</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">1_files := file1 file2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;$(use_a)&quot; &quot;yes&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a1 := a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a1 := 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;$(use_dirs)&quot; &quot;yes&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">df := dirs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">df := files</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dirs := $($(a1)_$(df)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">dirs</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение одной из переменных (</span><span style=" font-family:'monospace'; font-size:12pt;">a_dirs</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">1_dirs</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">a_files</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">1_files</span><span style=" font-family:'Sans'; font-size:12pt;">) в зависимости от значений переменных </span><span style=" font-family:'monospace'; font-size:12pt;">use_a</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">use_dirs</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вычисляемые имена переменных также могут использоваться в ссылках с заменой. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a_objects := a.o b.o c.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">1_objects := 1.o 2.o 3.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">sources := $($(a1)_objects:.o=.c) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">sources</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`a.c b.c c.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> либо </span><span style=" font-family:'monospace'; font-size:12pt;">`1.c 2.c 3.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, в зависимости от значения переменной </span><span style=" font-family:'monospace'; font-size:12pt;">a1</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Единственно ограничение на подобное использование вложенных ссылок состоит в том, что они не могут определять часть имени вызываемой функции. Оно вызвано тем, что распознание имен функций происходит до того, как производится вычисление вложенных ссылок. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef do_sort</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">func := sort</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">func := strip</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar := a d b g q c</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo := $($(func) $(bar)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо ожидаемого значения (результата применения функций </span><span style=" font-family:'monospace'; font-size:12pt;">sort</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">strip</span><span style=" font-family:'Sans'; font-size:12pt;"> к аргументу </span><span style=" font-family:'monospace'; font-size:12pt;">`a d b g q c'</span><span style=" font-family:'Sans'; font-size:12pt;">), будет записана строка </span><span style=" font-family:'monospace'; font-size:12pt;">`sort a d b g q c'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`strip a d b g q c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Возможно, в будущем подобное ограничение будет снято, если это окажется полезным. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вычисляемые имена переменных могут использоваться в левой части оператора присваивания и в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dir = foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(dir)_sources := $(wildcard $(dir)/*.c)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define $(dir)_print</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">lpr $($(dir)_sources)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В данном примере определяются переменные </span><span style=" font-family:'monospace'; font-size:12pt;">`dir'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo_sources'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`foo_print'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">вложенные ссылки на переменные</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">рекурсивно вычисляемые переменные</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">), - это разные концепции, хотя при написаниии &quot;нетривиальных&quot; make-файлов, они часто используются совместно. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC63"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC63"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">К</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ак переменные получают свои значения</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX457"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">еременные могут получать свои значения разными путями: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При запуске <span style=" font-family:'monospace';">make</span>, в командной строке вы можете задать значение переменной, которое &quot;перекроет&quot; значение, устанавливаемое в make-файле. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC90"><span style=" text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; переменных</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вы можете задать значение переменной внутри make-файла с помощью оператора присваивания (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a>) или с помощью директивы <span style=" font-family:'monospace';">define</span> (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC67"><span style=" text-decoration: underline; color:#0000ff;">Многострочные переменные</span></a>). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переменные среды (environment variables) автоматически становятся переменными <span style=" font-family:'monospace';">make</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC68"><span style=" text-decoration: underline; color:#0000ff;">Переменные из операционного окружения</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Несколько переменных, называемых <span style=" font-weight:600;">автоматическими</span>, &quot;автоматически&quot; получают новое значение при обработке каждого правила. Каждая из таких переменных предназначена для какого-то конкретного применения. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Некоторые переменные имеют &quot;фиксированное&quot; начальное значение. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a>. </li></ul>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC64"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC64"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">У</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">становка значения переменной</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX459"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля установки значения переменной внутри make-файла, используется строка, начинающаяся с имени переменной, за которым следует </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">. Все, что в этой строке следует за символом </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">, становится значением переменной. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o foo.o bar.o utils.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">определяется переменная с именем </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;">. Пробелы &quot;вокруг&quot; имени переменной и после </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, игнорируются. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменные, определенные с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, являются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">рекурсивно вычисляемыми (recursively expanded)</span><span style=" font-family:'Sans'; font-size:12pt;"> переменными. Переменные, определенные с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">, являются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">упрощенно вычисляемыми (simply expanded)</span><span style=" font-family:'Sans'; font-size:12pt;"> переменными; их определения могут содержать ссылки на другие переменные, которые будут вычислены до того, как будет сделано определение (иными словами, до того, как в переменную будет записано новое значение). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена переменных могут содержать ссылки на другие переменные и функции, которые будут вычислены (во время чтения make-файла) для получения действительного имени переменной. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На длину строки, являющейся значением переменной, не накладывается каких-либо ограничений (за исключением доступного программе объема памяти). &quot;Хорошей идеей&quot; является разбиение длинного определения переменной на несколько отдельных строк с помощью символа </span><span style=" font-family:'monospace'; font-size:12pt;">'\'</span><span style=" font-family:'Sans'; font-size:12pt;">, за которым следует символ перевода строки. Такое разбиение никак не отразится на работе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, но будет способствовать повышению удобочитаемости make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Большинство переменных, значение которых вы нигде не устанавливали, рассматриваются как содержащие пустую строку. Некоторые переменные имеют заранее определенные непустые начальные значения (которые, разумеется, вы можете изменить обычным образом; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Некоторые специальные переменные автоматически получают новое значение при обработке каждого правила; они называются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">автоматическими</span><span style=" font-family:'Sans'; font-size:12pt;"> переменными (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы хотите, чтобы переменная получила новое значение только в том случае, если ей еще не было присвоено какого-либо значения, вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> используйте оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`?='</span><span style=" font-family:'Sans'; font-size:12pt;">. Следующие два фрагмента make-файла производят одинаковый эффект (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">origin</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FOO ?= bar </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">и </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(origin FOO), undefined)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FOO = bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC65"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC65"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Д</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">обавление текста к переменной</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX464"></a><span style=" font-family:'Sans'; font-size:12pt;">Ч</span><span style=" font-family:'Sans'; font-size:12pt;">асто возникает необходимость добавить некоторый текст к значению уже определенной переменной. Вы можете это сделать с помощью оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects += another.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, к значению переменной </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> добавляется текст </span><span style=" font-family:'monospace'; font-size:12pt;">`another.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> (предваренный одиночным пробелом). Так, в результате выполнения фрагмента: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o foo.o bar.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects += another.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">objects</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`main.o foo.o bar.o utils.o another.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Примерный аналог этого фрагмента без использования </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> может выглядеть так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = main.o foo.o bar.o utils.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects := $(objects) another.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, аналогия здесь не полная, поскольку работа оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> отличается некоторыми деталями, которые проявляются при работе с более сложными значениями переменных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если рассматриваемая переменная до сих пор не была определена, оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> ведет себя как обычный </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, определяя рекурсивно вычисляемую переменную. Если же переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">была</span><span style=" font-family:'Sans'; font-size:12pt;"> ранее определена, поведение оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> будет зависеть от ее разновидности (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда вы что-либо добавляете с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> к значению уже определенной переменной, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, по существу, действует так, как если бы этот дополнительный текст был включен в первоначальное определение переменной. Предположим, что переменная была ранее определена с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;"> и является, вследствие этого, упрощенно вычисляемой переменной. Тогда, при добавлении к ней нового текста, оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> предварительно его &quot;расширит&quot; (аналогично тому, как это делает оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC64"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Установка значения переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где описана работа оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">). Таким образом, фрагмент </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable := value</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable += more </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентен следующему: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable := value</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable := $(variable) more </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">С другой стороны, при использовании оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> с рекурсивно вычисляемой переменной, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> работает немного по-другому. Вспомните, что когда вы определяете подобную переменную, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не сразу вычисляет ссылки на функции и другие переменные, присутствующие в устанавливаемом для нее значении. Вместо этого, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> запоминает указанный вами текст в &quot;оригинальном&quot; виде, так что все присутствующие в нем ссылки на переменные и функции остаются и могут быть вычислены позднее, когда переменная будет &quot;раскрываться&quot; (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Таким образом, при использовании оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> с рекурсивно вычисляемой переменной, указанный вами текст добавляется к &quot;нераскрытому&quot; значению, которое хранится внутри переменной. Поэтому, следующий фрагмент: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable = value</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable += more </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">примерно эквивалентен: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">temp = value</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">variable = $(temp) more </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">(разумеется, на самом деле, никакой переменной </span><span style=" font-family:'monospace'; font-size:12pt;">temp</span><span style=" font-family:'Sans'; font-size:12pt;"> не создается). Важность этого становится понятной при рассмотрении более сложных случаев, когда &quot;старое&quot; значение переменной содержит ссылки на другие переменные. Рассмотрим типичный пример: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS = $(includes) -O</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS += -pg # enable profiling </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В первой строке этого примера определяется переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, которая содержит ссылку на другую переменную с именем </span><span style=" font-family:'monospace'; font-size:12pt;">includes</span><span style=" font-family:'Sans'; font-size:12pt;">. (переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> используется в неявных правилах для компиляции программ на языке Си; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC95"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Перечень имеющихся неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) Использование оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> определяет переменную </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> как рекурсивно вычисляемую, и, значит, выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(includes) -O'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> будет вычисляться вв момент определения этой переменной. Таким образом, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">includes</span><span style=" font-family:'Sans'; font-size:12pt;"> совсем не обязана к этому времени быть определена. Достаточно, чтобы она была определена к тому моменту, когда будет вычисляться значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Если мы попробуем обойтись без оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;">, придется сделать что-нибудь, наподобие: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS := $(CFLAGS) -pg # enable profiling </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">К сожалению, этот фрагмент работает не совсем так, как хотелось бы. Из-за использования оператора </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;"> переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> становится упрощенно вычисляемой; это означает, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;раскроет&quot; выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CFLAGS) -pg'</span><span style=" font-family:'Sans'; font-size:12pt;"> перед тем, как присвоить его переменной. Если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">includes</span><span style=" font-family:'Sans'; font-size:12pt;"> еще не была определена, в качестве результата &quot;раскрытия&quot; мы получим строку </span><span style=" font-family:'monospace'; font-size:12pt;">` -O -pg'</span><span style=" font-family:'Sans'; font-size:12pt;">, и последующее определение includes уже не сможет повлиять на этот результат. Напротив, при использовании </span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;"> в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> запишется </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">нераскрытое</span><span style=" font-family:'Sans'; font-size:12pt;"> значение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(includes) -O -pg'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, мы сохраняем ссылку на переменную </span><span style=" font-family:'monospace'; font-size:12pt;">includes</span><span style=" font-family:'Sans'; font-size:12pt;">. Если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">includes</span><span style=" font-family:'Sans'; font-size:12pt;"> будет определена где-нибудь позднее, то ссылка на </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет использовать ее значение. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC66"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC66"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Д</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">иректива </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC66"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX467"></a><span style=" font-family:'Sans'; font-size:12pt;">Е</span><span style=" font-family:'Sans'; font-size:12pt;">сли переменная была установлена при помощи командной строки (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC90"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">), то &quot;обычное&quot; присваивание ей нового значения внутри make-файла игнорируется. Если вы все-таки хотите присвоить подобной переменной новое значение, нужно использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">, выглядящую следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> := </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При добавлении текста к переменной, определенной через командную строку, используйте конструкцию: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> += </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">добавляемый-текст</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC65"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Добавление текста к переменной</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Разумеется, директива </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> была придумана не для &quot;экскалации войны&quot; между make-файлом и параметрами командной строки. Идея заключалась в том, чтобы дать возможность изменять или дополнять передаваемые пользователем в командной строке значения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предположим, вы хотите, чтобы компилятор Си всегда запускался с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;"> и, в то же время, хотели бы дать пользователю возможность самостоятельно указать необходимые опции компиляции. Это можно сделать с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override CFLAGS += -g </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директиву </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> можно также использовать совместно с директивой </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">. Выглядит это аналогично: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override define foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смотрите следующий раздел, где описана работы директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC67"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC67"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">М</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ногострочные переменные</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX470"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ругой способ установки значения переменной - использование директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта директива имеет несколько необычный синтаксис, позволяющий включать в ее значение символы перевода строки. С ее помощью удобно определять именованные командные последовательности (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC55"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Именованные командные последовательности</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На первой строке находится только название директивы (</span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">), за которым следует имя переменной. Значение переменной указывается в следующих строках. Меткой конца значения переменной служит строка, содержащая единственное слово </span><span style=" font-family:'monospace'; font-size:12pt;">endef</span><span style=" font-family:'Sans'; font-size:12pt;">. За исключением синтаксических различий, директива </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> работает аналогично оператору </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, создавая рекурсивно вычисляемую переменную (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Имя этой переменной может содержать функции и ссылки на другие переменные, которые будут &quot;вычислены&quot; в момент чтения директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;"> для нахождения действительного имени определяемой переменной. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define two-lines</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">echo foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">echo $(bar)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании обычного оператора присваивания, значение переменной не может содержать символов перевода строки. При использовании же директивы </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">, символы перевода строки (за исключением символа, находящегося перед строкой с </span><span style=" font-family:'monospace'; font-size:12pt;">endef</span><span style=" font-family:'Sans'; font-size:12pt;">) становятся частью значения переменной. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предыдущий пример функционально подобен: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">two-lines = echo foo; echo $(bar) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">поскольку две команды, разделенные точкой с запятой работают во многом также, как и две отдельные команды. Заметьте, однако, что для команд, расположенных в двух отдельных строках, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет вызывать командный интерпретатор дважды, запуская каждую команду в своей отдельной копии интерпретатора. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для переменных, определенных при помощи </span><span style=" font-family:'monospace'; font-size:12pt;">define</span><span style=" font-family:'Sans'; font-size:12pt;">, также может использоваться директива </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">. Как обычно, при ее использовании, определение переменной внутри make-файла будет иметь &quot;приоритет&quot; перед определением этой же переменной из командной строки: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override define two-lines</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(bar)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC68"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC68"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еременные из операционного окружения (environment)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX475"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">еременные в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> могут &quot;приходить&quot; из программного окружения (environment), в котором </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> была запущена. Каждая переменная среды (environment variable), видимая для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, преобразуется в соответствующую переменную </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с таким же именем и значением. Однако, явное определение такой же переменной внутри make-файла или через командную строку, &quot;перекроет&quot; значение, полученное из операционной среды. (При наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;">, значения из переменных среды будут иметь &quot;приоритет&quot; перед значениями, определенными в make-файле. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Но мы не рекомендуем использовать такую практику.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, установив, например, переменную среды </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, вы заставите большинство make-файлов запускать компилятор Си с указанными вами опциями. Такая методика относительно безопасна для переменных со стандартными или общепринятыми значениями, поскольку вряд-ли make-файлы будут использовать такие переменные для каких-либо других целей. (Разумеется, стропроцентной гарантии надежности здесь дать нельзя; например, некоторые make-файлы самостоятельно устанавливают переменную </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> и, таким образом, не зависят от значения соответствующей переменной среды.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При рекурсивном вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, переменные, определенные на &quot;верхних уровнях&quot; могут быть переданы на &quot;нижние уровни&quot; через операционное окружение (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">). По умолчанию, через операционную среду будут передаваться только переменные, которые были &quot;первоначально&quot; в ней определены, а также переменные, определенные с помощью командной строки. Для передачи через операционную среду любых других переменных, следует использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где обсуждается этот вопрос. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Использовать переменные среды для других целей мы не рекомендуем. Плохо, если поведение make-файлов будет зависеть от значения (неподконтрольных им) переменных среды; это может привести к тому, что один и тот же make-файл у разных пользователей будет работать по-разному, выдавая разные результаты. Это противоречило бы самой идее make-файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Скорее всего, такие проблемы возникли бы и с переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">, которая обычно присутствует в операционной среде для указания выбранной пользователем командной оболочки. Было бы очень нежелательно, чтобы этот выбор пользователя влиял на работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Поэтому </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> игнорирует значение переменной среды </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> (за исключением случаев, когда она работает в операционных системах MS-DOS и MS-Windows, где переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> , как правило, не устанавливается. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC69"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC69"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ц</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еле-зависимые (target-specific) значения переменных</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX477"></a><span style=" font-family:'Sans'; font-size:12pt;">З</span><span style=" font-family:'Sans'; font-size:12pt;">начения переменных в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обычно являются глобальными; другими словами, они одинаковы - в каком бы месте make-файла они ни вычислялись. Одно из исключений - автоматические переменные (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другое исключение - это </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">целе-зависимые значения переменных (target-specific variable values)</span><span style=" font-family:'Sans'; font-size:12pt;">. С их помощью вы можете задать для одной и той же переменной разные значения в зависимости от того, какую цель в данный момент обновляет </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Так же как и автоматические переменные, эти значения доступны только в контексте выполняемых для обновления цели команд (а также других целе-зависимых операторов присваивания). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Целе-зависимые значения переменных устанавливаются с помощью конструкции вида: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">цель</span><span style=" font-family:'monospace'; font-size:12pt;"> ... : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">присваивание-переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">цель</span><span style=" font-family:'monospace'; font-size:12pt;"> ... : override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">присваивание-переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При указании сразу нескольких </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">целей</span><span style=" font-family:'Sans'; font-size:12pt;">, для каждой из них создается свое отдельное целе-зависимое значение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Присваивание-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть любой допустимой формой оператора присваивания; рекурсивной (</span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">), статической (</span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">), дополняющей (</span><span style=" font-family:'monospace'; font-size:12pt;">`+='</span><span style=" font-family:'Sans'; font-size:12pt;">), или условной (</span><span style=" font-family:'monospace'; font-size:12pt;">`?='</span><span style=" font-family:'Sans'; font-size:12pt;">). Все переменные, участвующие в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">присваивании-переменной</span><span style=" font-family:'Sans'; font-size:12pt;">, вычисляются &quot;в контексте&quot; указанных целей: таким образом, все ранее определенные для этих целей целе-зависимые переменные будут здесь доступны. Обратите внимание, что целе-зависимые значения переменных не обязательно должны принадлежать к одной разновидности (рекурсивно вычисляемые или упрощенно вычисляемые). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Целе-зависимые переменные имеют такой же приоритет как и любые другие переменные make-файла; переменные, определенные через командную строку (или &quot;взятые&quot; из переменных среды при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;">) будут иметь перед ними &quot;приоритет&quot;. По-прежнему, использование директивы </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> позволит целе-зависимой переменной избежать &quot;перекрытия&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Одна из особенностей целе-зависимых переменных заключается в следующем: когда вы определили целе-зависимую переменную, ее значение также будет &quot;видно&quot; для всех пререквизитов данной цели (конечно, если для пререквизитов не определены свои собственные целе-зависимые переменные). Так, например, в следующем выражении: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog : CFLAGS = -g</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prog : prog.o foo.o bar.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> будет иметь значение </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;"> во всех командах, выполняемых для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`prog'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также (обратите внимание!) для целей </span><span style=" font-family:'monospace'; font-size:12pt;">`prog.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и всех их пререквизитов. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC70"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC70"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ш</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">аблонно-зависимые (pattern-specific) значения переменных</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX479"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> дополнении к целе-зависимым значениям переменных (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC69"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Целе-зависимые значения переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">), GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поддерживает шаблонно-зависимые значения переменных. Эти переменные считается определенными для всех целей, подходящих под указанный шаблон. Определенные таким образом переменные &quot;принимаются в рассчет&quot; после целе-зависимых переменных, явно определенных для рассматриваемой цели но до того, как будут рассмотрены целе-зависимые переменные &quot;родительских&quot; целей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Шаблонно-зависимые переменные устанавливаются с помощью конструкции вида: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;"> ... : </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">присваивание-переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;"> ... : override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">присваивание-переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">где </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой шаблон с символом </span><span style=" font-family:'monospace'; font-size:12pt;">'%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Подобно случаю задания целе-зависимых переменных, при указании сразу нескольких </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов</span><span style=" font-family:'Sans'; font-size:12pt;">, для каждого из них создается отдельный экземпляр шаблонного-зависимого значения. </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Присваивание-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть любой допустимой формой оператора присваивания. Как обычно, переменные, определенные через командную строку будут иметь &quot;приоритет&quot; если только не использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.o : CFLAGS = -O </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> будет присвоено значение </span><span style=" font-family:'monospace'; font-size:12pt;">`-O'</span><span style=" font-family:'Sans'; font-size:12pt;"> при обработке всех целей, удовлетворяющих шаблону </span><span style=" font-family:'monospace'; font-size:12pt;">%.o</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC71"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC71"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">У</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">словные части (conditional parts) make-файла</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX481"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">У</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">словная конструкция (conditional)</span><span style=" font-family:'Sans'; font-size:12pt;"> заставляет </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обрабатывать или игнорировать часть make-файла в зависимости от значения некоторых переменных. В качестве условия может использоваться сравнение двух переменных или сравнение переменной с константной строкой. Условные конструкции управляют тем, &quot;каким&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;увидит&quot; обрабатываемый make-файл, и, поэтому, их </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">нельзя</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать для управления командами оболочки во время их исполнения. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC72"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC72"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ример условной конструкции</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В следующем примере, условная конструкция инструктирует </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать разные наборы библиотек в зависимости от того, имеет ли переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;"> значение </span><span style=" font-family:'monospace'; font-size:12pt;">`gcc'</span><span style=" font-family:'Sans'; font-size:12pt;"> или нет. Условная конструкция работает, управляя тем, какая из двух командных строк будет использоваться в качестве команды правила. В результате, при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с параметром </span><span style=" font-family:'monospace'; font-size:12pt;">`CC=gcc'</span><span style=" font-family:'Sans'; font-size:12pt;"> произойдет не только изменение используемого компилятора, но и изменение набора библиотек, с которыми будет компоноваться собираемая программа. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">libs_for_gcc = -lgnu</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">normal_libs =</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(CC),gcc)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o foo $(objects) $(libs_for_gcc)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o foo $(objects) $(normal_libs)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этой условной конструкции используется три директивы: </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">endif</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директива </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;"> определяет начало условной конструкции и указывает само условие. Она имеет два параметра, разделенных запятой и заключенных в скобки. Эти параметры вычисляются и, затем, сравниваются. Если два параметра совпадают, строки, следующие за </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;">, обрабатываются; в противном случае они игнорируются. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании директивы </span><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;">, следующие за ней строки должны быть обработаны, если условие (из директивы </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;">) не выполняется. В предыдущем примере, это означает использование второй, альтернативной команды компоновки, если первая альтернатива не будет использована. Наличие директивы </span><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;"> в условной конструкции не является обязательным. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директива </span><span style=" font-family:'monospace'; font-size:12pt;">endif</span><span style=" font-family:'Sans'; font-size:12pt;"> завершает условную конструкцию. Следующие за этой директивой строки, относятся уже к &quot;безусловной&quot; части make-файла. Наличие директивы </span><span style=" font-family:'monospace'; font-size:12pt;">endif</span><span style=" font-family:'Sans'; font-size:12pt;"> является обязательным. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Как видно из предыдущего примера, условные конструкции работают на &quot;текстовом&quot; уровне: отдельные строки рассматриваются как часть make-файла либо игнорируются, в зависимости от проверяемого условия. Поэтому, более крупные синтаксические элементы (например, правила) могут пересекать &quot;границы&quot; условной конструкции. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать значение </span><span style=" font-family:'monospace'; font-size:12pt;">`gcc'</span><span style=" font-family:'Sans'; font-size:12pt;">, то приведенный выше пример будет работать как: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o foo $(objects) $(libs_for_gcc) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При любом другом значении переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;">, тот же пример будет работать как: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o foo $(objects) $(normal_libs) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогичного результата можно добиться, заключив оператор присваивания переменной нужного значения в условную конструкцию, и, затем, использовать эту переменную &quot;безусловно&quot;: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">libs_for_gcc = -lgnu</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">normal_libs =</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(CC),gcc)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  libs=$(libs_for_gcc)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  libs=$(normal_libs)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: $(objects)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o foo $(objects) $(libs) </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC73"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC73"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">интаксис условных конструкций</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX482"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">интаксис простой (без директивы </span><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;">) условной конструкции выглядит следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">условная-директива</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой последовательность любых строк текста, которые будут рассматриваться как часть make-файла, если проверяемое условие выполняется. В противном случае, этот текст не используется. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Синтаксис &quot;сложной&quot; условной конструкции выглядит так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">условная-директива</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении условия, используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">; иначе, используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">. Фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> может содержать любое количество строк. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Условная-директива</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет одинаковый синтаксис как в простой, так и в сложной условной конструкции. Имеется четыре разных директивы, проверяющих разные условия. Вот они: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">' '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">' &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Значения параметров </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляются и сравниваются между собой. При их совпадении используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">; иначе используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> (если он имеется). Часто возникает необходимость проверить - содержит ли переменная какое-нибудь &quot;непустое&quot; значение. Трудность состоит в том, что после разного рода преобразований и вычислений функций, значение, выглядящее как &quot;пустое&quot;, будет, на самом деле, состоять из пробелов и, таким образом, не будет считаться &quot;пустым&quot;. Для того, чтобы избежать интерпретации пробелов как непустых значений, можно воспользоваться функцией </span><span style=" font-family:'monospace'; font-size:12pt;">strip</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(strip $(foo)),)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-случая-пустого-значения</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-случая-пустого-значения</span><span style=" font-family:'Sans'; font-size:12pt;"> будет использован даже в том случае, если значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">$(foo)</span><span style=" font-family:'Sans'; font-size:12pt;"> будет состоять из пробелов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">' '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'monospace'; font-size:12pt;">' &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Значения параметров </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметр1</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметр2</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляются и сравниваются между собой. Если они не совпадают, используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">; иначе используется фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> (если он имеется). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет непустое значение, будет использован фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">; иначе, будет использован фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> (если таковой имеется). Переменные, которые еще не определены, рассматриваются как имеющие пустые значения. Обратите внимание, что директива </span><span style=" font-family:'monospace'; font-size:12pt;">ifdef</span><span style=" font-family:'Sans'; font-size:12pt;"> просто проверяет - имеет ли переменная непустое значение. Она никогда не пытается вычислить это значение и проверить - не пустое ли оно. Как следствие, проверка с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">ifdef</span><span style=" font-family:'Sans'; font-size:12pt;"> будет возвращать &quot;истину&quot; для всех определений, кроме определений, подобных: </span><span style=" font-family:'monospace'; font-size:12pt;">foo =</span><span style=" font-family:'Sans'; font-size:12pt;">. Для проверки &quot;вычисленного&quot; значения переменной, используйте конструкцию </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq ($(foo),)</span><span style=" font-family:'Sans'; font-size:12pt;">. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar =</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo = $(bar)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frobozz = yes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frobozz = no</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`frobozz'</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`yes'</span><span style=" font-family:'Sans'; font-size:12pt;">, а в примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo =</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frobozz = yes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">frobozz = no</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`frobozz'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет установлена в </span><span style=" font-family:'monospace'; font-size:12pt;">`no'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifndef </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя-переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет пустое значение, будет использован фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">; иначе, будет использован фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> (если такой фрагмент имеется). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В начале строки с условной директивой могут находится пробелы (которые игнорируются) но не символ табуляции. (При наличии символа табуляции такая строка рассматривалась бы как команда правила.) За этим маленьким исключением, пробелы и символы табуляции могут свободно использоваться в любом месте строки с условной директивой (только, разумеется, не внутри имени самой директивы и не внутри аргументов). В конце строки может располагаться комментарий, начало которого обозначается символом </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Две другие директивы, используемые в условных конструкциях - это директивы </span><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">endif</span><span style=" font-family:'Sans'; font-size:12pt;">. Каждая из этих директив записывается в одно слово и не имеет параметров. В начале строк с этими директивами, могут находится дополнительные пробелы (которые будут игнорированы), а в конце строк - пробелы и символы табуляции (которые также будут игнорированы). В конце таких строк может располагаться комментарий, начало которого обозначается символом </span><span style=" font-family:'monospace'; font-size:12pt;">`#'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Условные конструкции влияют на то, какие строки make-файла в действительности будет использовать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. При выполнении указаного условия, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет рассматривать строки </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;"> как часть make-файла; при невыполнении условия, эти строки будут игнорироваться. Вследствие этого, синтаксические единицы make-файла (такие как правила) вполне могут пересекать границы условной конструкции. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Условия, указанные в условных конструкциях, вычисляются в момент чтения make-файла. Как следствие, в качестве условий не может использоваться проверка автоматических переменных, поскольку они являются неопределенными до момента запуска команд правила (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Во избежании неприятных конфузов, не разрешается &quot;начинать&quot; условную конструкцию в одном make-файле и &quot;заканчивать&quot; ее в другом. Однако, внутри условной конструкции вы можете использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">include</span><span style=" font-family:'Sans'; font-size:12pt;"> (при условии, что включаемый make-файл не будет пытаться &quot;завершить&quot; эту условную конструкцию). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC74"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC74"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роверка опций запуска </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC74"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC74"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> в условных конструкциях</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете написать условную конструкцию, проверяющую наличие определенных опций (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">), указанных при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Это можно сделать, используя переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> совместно с функцией </span><span style=" font-family:'monospace'; font-size:12pt;">findstring</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Необходимость в этом может возникнуть, например, в ситуации, когда одного лишь использования команды </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;"> недостаточно для обновления файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Функция </span><span style=" font-family:'monospace'; font-size:12pt;">findstring</span><span style=" font-family:'Sans'; font-size:12pt;"> определяет, входит ли одна строка в другую в качестве подстроки. Если, например, вы хотите проверить наличие опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">, используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`t'</span><span style=" font-family:'Sans'; font-size:12pt;"> как первую строку (первый параметр функции), а переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> - как другую строку (второй параметр функцции). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В следующем примере, в качестве завершающего шага пометки архивного файла как &quot;обновленного&quot;, используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`ranlib -t'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">archive.a: ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq (,$(findstring t,$(MAKEFLAGS)))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        +touch archive.a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        +ranlib -t archive.a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ranlib archive.a</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Префикс </span><span style=" font-family:'monospace'; font-size:12pt;">`+'</span><span style=" font-family:'Sans'; font-size:12pt;"> помечает командные строки как &quot;рекурсивные&quot;. Эти команды будут выполняться даже при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC75"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC75"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункции преобразования текста</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX488"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;"> помощью </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">функций</span><span style=" font-family:'Sans'; font-size:12pt;">, вы можете производить в make-файле некоторую текстовую обработку, определяя с ее помощью имена обрабатываемых файлов или используемые команды. При </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">вызове функции</span><span style=" font-family:'Sans'; font-size:12pt;">, вы указываете ее имя и некоторый текст (</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">параметры</span><span style=" font-family:'Sans'; font-size:12pt;">), который будет обрабатываться этой функцией. Результат работы функции будет &quot;подставлен&quot; в make-файл на месте ее вызова (подобно тому, как вместо ссылки на переменную подставляется ее значение). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC76"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC76"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">интаксис вызова функций</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX489"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ызов функции внешне напоминает ссылку на переменную. Он выглядит так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">функция</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметры</span><span style=" font-family:'monospace'; font-size:12pt;">) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">или так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">${</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">функция</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметры</span><span style=" font-family:'monospace'; font-size:12pt;">} </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">функция</span><span style=" font-family:'Sans'; font-size:12pt;"> является именем функции. В </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> имеется некоторое количество &quot;встроенных&quot; функций. С помощью встроенной функции </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> вы можете определить свою собственную функцию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Параметры</span><span style=" font-family:'Sans'; font-size:12pt;"> являются параметрами функции. От имени функции они отделяются одним или несколькими пробелами или символами табуляции. При наличии нескольких параметров, они отделяются друг от друга запятыми. Такие пробелы и запятые не рассматриваются как часть значения параметра. Разделители, которые вы использовали для обозначения вызова функции (круглые или фигурные скобки), могут появляться в аргументах только &quot;попарно&quot;; другие символы разделителей могут появляться и поодиночке. Если аргументы сами, в свою очередь, содержат ссылки на другие функции или переменные, для всех ссылок рекомендуется использовать один и тот же вид разделителей; то есть, например, писать </span><span style=" font-family:'monospace'; font-size:12pt;">`$(subst a,b,$(x))'</span><span style=" font-family:'Sans'; font-size:12pt;">, а не </span><span style=" font-family:'monospace'; font-size:12pt;">`$(subst a,b,${x})'</span><span style=" font-family:'Sans'; font-size:12pt;">. Такая запись является не только более ясной, но и более &quot;простой&quot; для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (только один вид разделителей используется при поиске конца ссылки). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Перед тем, как аргумент будет передан для обработки в функцию, вычисляются все содержащиеся в нем ссылки на переменные и функции. Обработка аргументов производится в том порядке, как они перечислены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Запятые и непарные скобки не могут &quot;явным&quot; образом появляться в аргументах функции; нельзя также &quot;явным&quot; образом указать наличии ведущих пробелов в первом параметре функции. Однако, эти символы могут быть вставлены в аргумент с помощью ссылки на переменные. Это можно сделать, определив, например, переменные </span><span style=" font-family:'monospace'; font-size:12pt;">comma</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">space</span><span style=" font-family:'Sans'; font-size:12pt;">, значениями которых будут, соответственно, одиночные символы запятой и пробела. Далее, значения этих переменных могут быть подставлены в любое место аргументов, где требуется наличие соответствующего символа. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">comma:= ,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">empty:=</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">space:= $(empty) $(empty)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo:= a b c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bar:= $(subst $(space),$(comma),$(foo))</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># bar is now `a,b,c'. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, с помощью функции </span><span style=" font-family:'monospace'; font-size:12pt;">subst</span><span style=" font-family:'Sans'; font-size:12pt;">, каждый символ пробела, содержащийся в переменной </span><span style=" font-family:'monospace'; font-size:12pt;">foo</span><span style=" font-family:'Sans'; font-size:12pt;">, заменяется на символ запятой. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC77"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC77"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункции анализа и подстановки строк</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX493"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">иже перечислены функции, оперирующие со строками: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(subst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">заменяемый_фрагмент</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX494"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">роизводит текстовую замену в тексте </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;">: каждой вхождение подстроки </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">заменяемый_фрагмент</span><span style=" font-family:'Sans'; font-size:12pt;"> заменяется на фрагмент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'Sans'; font-size:12pt;">. Результат подставляется в место вызова функции. Результатом следующего примера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(subst ee,EE,feet on the street)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`fEEt on the strEEt'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX495"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">аходит в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;"> разделенные пробелом слова, удовлетворяющие </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблону</span><span style=" font-family:'Sans'; font-size:12pt;"> и заменяет их на строку </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Шаблон</span><span style=" font-family:'Sans'; font-size:12pt;"> может содержать символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, который работает как специальный шаблонный символ, соответствующий любому количеству произвольных символов внутри слова. Если строка </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'Sans'; font-size:12pt;"> также содержит символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, он будет заменен текстом, соответствующим символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблоне</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><a name="IDX496"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">пециальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть отменено предшествующим ему символом </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Специальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, который мог бы отменить специальное значение символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, может, в свою очередь, быть отменено дополнительным символом </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, отменяющие специальное значение символов </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, удаляются из шаблона перед тем, как он будет использоваться для сравнения или подстановки. Символы </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;">, не могущие повлиять на трактовку </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, остаются нетронутыми. Например, в шаблоне </span><span style=" font-family:'monospace'; font-size:12pt;">`the\%weird\\%pattern\\'</span><span style=" font-family:'Sans'; font-size:12pt;"> за строкой </span><span style=" font-family:'monospace'; font-size:12pt;">`the%weird\'</span><span style=" font-family:'Sans'; font-size:12pt;"> следует шаблонный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> и строка </span><span style=" font-family:'monospace'; font-size:12pt;">`pattern\\'</span><span style=" font-family:'Sans'; font-size:12pt;">. Два завершающих символа </span><span style=" font-family:'monospace'; font-size:12pt;">`\'</span><span style=" font-family:'Sans'; font-size:12pt;"> остаются нетронутыми, поскольку они не могут повлиять на трактовку символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Пробельные символы между словами преобразуются в одиночные пробелы; начальные и конечные пробелы отбрасываются. Например, результатом выражения </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst %.c,%.o,x.c.c bar.c)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`x.c.o bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Ссылка с заменой (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC61"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ссылка с заменой</span></a><span style=" font-family:'Sans'; font-size:12pt;">) является упрощенным способом получения эффекта, аналогичного использованию функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">. Выражение: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентно </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">,$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Еще одна упрощенная форма записи имеется для распространенного способа использования функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">: замены суффиксов в именах файлов. Выражение: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентно: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst %</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'monospace'; font-size:12pt;">,%</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">,$(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пусть, например, у вас имеется список объектных файлов: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects = foo.o bar.o baz.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Тогда, для получения списка соответствующих исходных файлов, вы можете просто написать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(objects:.o=.c)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">вместо того, чтобы использовать &quot;обобщенную&quot; форму записи: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst %.o,%.c,$(objects)) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(strip </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">строка</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX501"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">даляет начальные и конечные пробелы из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">строки</span><span style=" font-family:'Sans'; font-size:12pt;">, а также заменяет все внутренние последовательности пробельных символов на одиночные пробелы. Так, результатом выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$(strip a b c )'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`a b c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Функция </span><span style=" font-family:'monospace'; font-size:12pt;">strip</span><span style=" font-family:'Sans'; font-size:12pt;"> весьма полезна в условных конструкциях. Например, при использовании директив </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">ifneq</span><span style=" font-family:'Sans'; font-size:12pt;"> для сравнения с пустой строкой </span><span style=" font-family:'monospace'; font-size:12pt;">`'</span><span style=" font-family:'Sans'; font-size:12pt;">, обычно желательно, чтобы строка, целиком состоящая из пробельных символов, рассматривалась как пустая (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC71"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Условные части make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Так, например, следующий фрагмент make-файла не всегда будет работать желаемым образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: all</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq   &quot;$(needs_made)&quot; &quot;&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all: $(needs_made)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all:;@echo 'Nothing to make!'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Заменив в директиве </span><span style=" font-family:'monospace'; font-size:12pt;">ifneq</span><span style=" font-family:'Sans'; font-size:12pt;"> ссылку на переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$(needs_made)'</span><span style=" font-family:'Sans'; font-size:12pt;"> вызовом функции </span><span style=" font-family:'monospace'; font-size:12pt;">`$(strip $(needs_made))'</span><span style=" font-family:'Sans'; font-size:12pt;">, мы получим более надежно работающую конструкцию. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(findstring </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">строка</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX505"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">роизводит поиск </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмента</span><span style=" font-family:'Sans'; font-size:12pt;"> в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">строке</span><span style=" font-family:'Sans'; font-size:12pt;">. В случае успеха (фрагмент найден) возвращает значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент</span><span style=" font-family:'Sans'; font-size:12pt;">; в противном случае, возвращается пустая строка. Эту функцию можно использовать в условных конструкциях для проверки наличия в рассматриваемой строке определенной подстроки. Результатами следующих двух примеров: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(findstring a,a b c)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(findstring a,b c)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будут, соответственно, строки </span><span style=" font-family:'monospace'; font-size:12pt;">`a'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`'</span><span style=" font-family:'Sans'; font-size:12pt;"> (пустая строка). В разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC74"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Проверка опций запуска </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC74"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC74"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> в условных конструкциях</span></a><span style=" font-family:'Sans'; font-size:12pt;"> приведен достаточно реалистичный пример использования функции </span><span style=" font-family:'monospace'; font-size:12pt;">findstring</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удаляет из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> все разделенные пробелами слова, которые не удовлетворяют ни одному из указанных </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов</span><span style=" font-family:'Sans'; font-size:12pt;"> и возвращает только слова, подходящие под шаблоны. Шаблоны записываются с использованием шаблонного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, аналогично тому, как это делается в функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;"> (описана выше). Функция </span><span style=" font-family:'monospace'; font-size:12pt;">filter</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть использована для отделения друг от друга строк (например, имен файлов) разных &quot;типов&quot;. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">sources := foo.c bar.c baz.s ugh.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo: $(sources)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc $(filter %.c %.s,$(sources)) -o foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">объявляется, что цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`baz.s'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`ugh.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, однако, при вызове компилятора, ему будут переданы только файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`baz.s'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter-out </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX512"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">даляет из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> все разделенные пробелами слова, которые соответствуют какому-либо из перечисленных </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов</span><span style=" font-family:'Sans'; font-size:12pt;">, возвращая только слова, не соответствующие ни одному из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта функция представляет собой &quot;противоположность&quot; функции </span><span style=" font-family:'monospace'; font-size:12pt;">filter</span><span style=" font-family:'Sans'; font-size:12pt;">. Если, например, у нас имеется такой фрагмент: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">objects=main1.o foo.o main2.o bar.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">mains=main1.o main2.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">то следующее выражение возвратит список объектных файлов, не входящих в </span><span style=" font-family:'monospace'; font-size:12pt;">`mains'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter-out $(mains),$(objects)) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(sort </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Отсортировывает слова из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">списка</span><span style=" font-family:'Sans'; font-size:12pt;"> в лексикографическом порядке, удаляя дубликаты (повторяющейся слова). Результатом является список слов, разделенных одиночными пробелами. Так, результатом выражения </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(sort foo bar lose)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`bar foo lose'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><a name="IDX517"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">аже если вас не интересует лексикографическая сортировка, вы можете пользоваться фунцией </span><span style=" font-family:'monospace'; font-size:12pt;">sort</span><span style=" font-family:'Sans'; font-size:12pt;"> просто для удаления повторяющихся слов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот довольно реалистичный пример использования функций </span><span style=" font-family:'monospace'; font-size:12pt;">subst</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">. Предположим, у вас имеется make-файл, в котором для указания списка каталогов, где </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> следует производить поиск пререквизитов, используется переменная VPATH (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">VPATH</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">: список каталогов для поиска пререквизитов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В следующем примере демонстрируется, как можно указать компилятору на необходимость поиска заголовочных файлов в том же списке каталогов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой список имен каталогов, разделенных двоеточиями, например </span><span style=" font-family:'monospace'; font-size:12pt;">`src:../headers'</span><span style=" font-family:'Sans'; font-size:12pt;">. Сперва используем функцию </span><span style=" font-family:'monospace'; font-size:12pt;">subst</span><span style=" font-family:'Sans'; font-size:12pt;"> для замены символов двоеточия на пробелы: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(subst :, ,$(VPATH)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Полученный результат будет выглядеть как </span><span style=" font-family:'monospace'; font-size:12pt;">`src ../headers'</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, с помощью функции </span><span style=" font-family:'monospace'; font-size:12pt;">patsubst</span><span style=" font-family:'Sans'; font-size:12pt;">, преобразуем каждое из имен каталогов в соответствующую опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-I'</span><span style=" font-family:'Sans'; font-size:12pt;"> компилятора. Полученное значение можно добавить к содержимому переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, которая автоматически передается компилятору: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override CFLAGS += $(patsubst %,-I%,$(subst :, ,$(VPATH))) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Как результат, к первоначальному значению переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> добавляется строка </span><span style=" font-family:'monospace'; font-size:12pt;">`-Isrc -I../headers'</span><span style=" font-family:'Sans'; font-size:12pt;">. Директива </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> была использована для того, чтобы изменить значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> даже в том случае, если она была задана с помощью командной строки (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC78"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC78"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункции для обработки имен файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX520"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">есколько функций ориентированы на работу с именами файлов или списками имен файлов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждая из перечисленных ниже функций выполняет некоторое преобразование имени файла. Аргумент функции рассматривается как последовательность имен файлов, разделенных пробелами. (Начальные и конечные пробелы игнорируются.) Каждое из перечисленных имен файлов преобразуется одинаковым образом и результаты этих преобразований, разделенные одиночными пробелами, объединяются вместе. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(dir </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX522"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">з каждого имени файла, перечисленного в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">именах</span><span style=" font-family:'Sans'; font-size:12pt;">, выделяет имя каталога, где этот файл расположен. Именем каталога считается часть имени до последнего встреченного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;"> (включая и этот символ). Если имя файла не содержит символов </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;">, его именем каталога считается строка </span><span style=" font-family:'monospace'; font-size:12pt;">`./'</span><span style=" font-family:'Sans'; font-size:12pt;">. Результатом следующего примера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(dir src/foo.c hacks)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`src/ ./'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(notdir </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX525"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">з каждого имени файла, перечисленного в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">именах</span><span style=" font-family:'Sans'; font-size:12pt;">, удаляет имя каталога, где он находится. Имена файлов, не содержащие символов </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;">, остаются без изменений. В противном случае (при наличии символов </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;">), из имени файла удаляется все, что расположено до последнего встреченного символа </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;"> (включая и сам этот символ). Это означает, что имя файла, оканчивающееся символом </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;"> преобразуется в пустую и строку, и, таким образом, количество имен файлов на выходе функции может не совпадать с количеством имен файлов, переданных ей на вход. К сожалению, мы пока не видим лучшей альтернативы. Результатом следующего примера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(notdir src/foo.c hacks)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c hacks'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(suffix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX528"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">з каждого имени файла, перечисленного в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">именах</span><span style=" font-family:'Sans'; font-size:12pt;">, выделяется его суффикс. Если имя файла содержит точку, суффиксом имени считается строка, начинающаяся с последнего встреченного символа точки. В противном случае (имя не содержит точек), суффиксом считается пустая строка. Из-за этого, во многих случаях результатом функции может быть пустая строка, хотя список </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имен</span><span style=" font-family:'Sans'; font-size:12pt;"> был непуст. Вдобавок, список имен файлов, полученный на выходе функции, может оказаться &quot;короче&quot; чем список, переданный ей на вход. Например, результатом следующего выражения: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(suffix src/foo.c src-1.0/bar.c hacks)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`.c .c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(basename </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX531"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">з каждого имени файла, перечисленного в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">именах</span><span style=" font-family:'Sans'; font-size:12pt;">, выделяет так называемое &quot;базовое имя&quot; (basename) - все то, что не относится к суффиксу. Если имя файла содержит точку, то базовым именем считается все, что находится до последнего символа точки (не включая ее). Точки, которые находятся внутри имени каталога, игнорируются. Если рассматриваемое имя файла не содержит точек, оно целиком считается базовым именем. Результатом следующего примера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(basename src/foo.c src-1.0/bar hacks)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`src/foo src-1.0/bar hacks'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addsuffix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX534"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается как последовательность разделенных пробелами имен; аргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается как строка. Результатом работы этой функции является список имен (разделенных одиночными символами пробелов), каждое из которых получено из соответствующего &quot;исходного&quot; имени, в конец которого добавлен суффикс </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'Sans'; font-size:12pt;">. Результатом следующего примера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addsuffix .c,foo bar)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c bar.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addprefix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">префикс</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX537"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается как последовательность разделенных пробелами имен; аргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">префикс</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается как строка. Результатом этой функции является список имен (разделенных одиночными символами пробелов), каждое из которых получено из соответствующего &quot;исходного&quot; имени, в начало которого добавлен префикс </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">префикс</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, результатом следующего выражения: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addprefix src/,foo bar)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`src/foo src/bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(join </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список1</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список2</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX540"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Пословно&quot; объединяет оба аргумента: первые два слова (по одному из каждого аргумента) объединяются в первое слово результата; вторые два слова (второе слово каждого из аргументов) объединяются во второе слово результата и так далее. Таким образом </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;">-ное слово результата строится из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;">-ного слова каждого из аргументов. Если один из аргументов содержит большее количество слов чем другой, &quot;избыточные&quot; слова копируются в результат без изменений. Например, результатом выражения: </span><span style=" font-family:'monospace'; font-size:12pt;">`$(join a b,.c .o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`a.c b.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. &quot;Оригинальные&quot; пробелы между словами списка не сохраняются - они заменяются на одиночный символ пробела. Применив </span><span style=" font-family:'monospace'; font-size:12pt;">join</span><span style=" font-family:'Sans'; font-size:12pt;"> к результатам работы функций </span><span style=" font-family:'monospace'; font-size:12pt;">dir</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">notdir</span><span style=" font-family:'Sans'; font-size:12pt;">, можно получить &quot;исходный&quot; список файлов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(word </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX543"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">озвращает </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;">-ное слово </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;">. Допустимые значения </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;"> начинаются с 1. Если значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;"> превышает количество слов в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">, результатом работы фунции будет пустая строка. В следующий примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(word 2, foo bar baz)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет получена строка </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wordlist </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">e</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX546"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">озвращает список слов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;">, начиная со слова номер </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'Sans'; font-size:12pt;"> и заканчивая словом номер </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">e</span><span style=" font-family:'Sans'; font-size:12pt;"> (включительно). Допустимые значения </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">e</span><span style=" font-family:'Sans'; font-size:12pt;"> начинаются с 1. Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'Sans'; font-size:12pt;"> превышает количество слов в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">, возращается пустая строка. Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">e</span><span style=" font-family:'Sans'; font-size:12pt;"> превышается количество слов в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">, возвращаются все слова до конца </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;">. Если величина </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'Sans'; font-size:12pt;"> превышает </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">e</span><span style=" font-family:'Sans'; font-size:12pt;">, также возвращается пустая строка. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wordlist 2, 3, foo bar baz)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет получен результат </span><span style=" font-family:'monospace'; font-size:12pt;">`bar baz'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(words </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX549"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">озвращает число слов в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, последнее слово </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> можно получить с помощью выражения </span><span style=" font-family:'monospace'; font-size:12pt;">$(word $(words </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">),</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(firstword </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX551"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается как последовательность имен, разделенных пробелами. Результатом функции является первое имя из списка. Остальные имена игнорируются. Например, результатом выражения: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(firstword foo bar)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">. Хотя выражение </span><span style=" font-family:'monospace'; font-size:12pt;">$(firstword </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> и эквивалентно </span><span style=" font-family:'monospace'; font-size:12pt;">$(word 1,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;">, использование функции </span><span style=" font-family:'monospace'; font-size:12pt;">firstword</span><span style=" font-family:'Sans'; font-size:12pt;"> может повысить удобочитаемость make-файла. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wildcard </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX553"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ргумент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;"> является шаблоном имени файла и, обычно, содержит шаблонные символы (такие же как в шаблонах имен файлов интерпретатора командной строки). Результатом функции </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> является список разделенных пробелами имен существующих в данный момент файлов, удовлетворяющих указанному шаблону. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC22"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование шаблонных символов в именах файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC79"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC79"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC79"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">foreach</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX555"></a><span style=" font-family:'Sans'; font-size:12pt;">Ф</span><span style=" font-family:'Sans'; font-size:12pt;">ункция </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> сильно отличается от других функций. При ее использовании, некоторый фрагмент текста используется многократно, каждый раз с &quot;подстановкой&quot; в него нового значения. Это напоминает команду </span><span style=" font-family:'monospace'; font-size:12pt;">for</span><span style=" font-family:'Sans'; font-size:12pt;"> командного интерпретатора </span><span style=" font-family:'monospace'; font-size:12pt;">sh</span><span style=" font-family:'Sans'; font-size:12pt;"> или команду </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> оболочки </span><span style=" font-family:'monospace'; font-size:12pt;">csh</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Синтаксис функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> выглядит следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(foreach </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Сначала, вычисляются значения первых двух аргументов - </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">списка</span><span style=" font-family:'Sans'; font-size:12pt;">; последний аргумент, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;">, пока </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляется. Далее, каждое слово из вычисленного значения аргумента </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">список</span><span style=" font-family:'Sans'; font-size:12pt;"> поочередно подставляется в переменную с (заранее вычисленным) именем </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> и производится &quot;расширение&quot; текста </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;">. Как правило, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит ссылку на эту переменную, поэтому при каждой новой подстановке получаются разные результаты. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Затем, полученные таким образом результаты &quot;расширений&quot; </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> (их количество равно количеству разделенных пробелами слов в аргументе </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">список</span><span style=" font-family:'Sans'; font-size:12pt;">) &quot;соединяются&quot; вместе (с вставкой пробела между ними). Полученная таким образом строка и является результатом работы функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В следующем примере, в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`files'</span><span style=" font-family:'Sans'; font-size:12pt;"> заносится список всех файлов, находящихся в каталогах, которые перечислены в переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`dirs'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dirs := a b c d</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files := $(foreach dir,$(dirs),$(wildcard $(dir)/*)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, аргументом </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;"> является выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(wildcard $(dir)/*)'</span><span style=" font-family:'Sans'; font-size:12pt;">. При первой итерации, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">dir</span><span style=" font-family:'Sans'; font-size:12pt;"> получает значение </span><span style=" font-family:'monospace'; font-size:12pt;">`a'</span><span style=" font-family:'Sans'; font-size:12pt;">, что производит эффект, аналогичный </span><span style=" font-family:'monospace'; font-size:12pt;">`$(wildcard a/*)'</span><span style=" font-family:'Sans'; font-size:12pt;">; вторая интерация даст результат, аналогичный </span><span style=" font-family:'monospace'; font-size:12pt;">`$(wildcard b/*)'</span><span style=" font-family:'Sans'; font-size:12pt;">; и, наконец, третья итерация даст результат, как от выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$(wildcard c/*)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, приведенный выше пример даст результат, аналогичный (за исключением установки переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`dirs'</span><span style=" font-family:'Sans'; font-size:12pt;">) выражению: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files := $(wildcard a/* b/* c/* d/*) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда выражение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;"> достаточно сложно, вы можете повысить удобочитаемость make-файла, поместив его в отдельную дополнительную переменную: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">find_files = $(wildcard $(dir)/*)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dirs := a b c d</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files := $(foreach dir,$(dirs),$(find_files)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для подобной цели в приведенном выше примере использована переменная </span><span style=" font-family:'monospace'; font-size:12pt;">find_files</span><span style=" font-family:'Sans'; font-size:12pt;">. Для ее определения как рекурсивно вычисляемой переменной, мы использовали обычный оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">. Вследствие этого, ее значение (содержащее ссылку на функцию </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;">), будет вычисляться многократно, под управлением функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;">; с упрощенно вычисляемой переменной этого бы не произошло, поскольку функция </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;"> была бы выполнена лишь однажды, во время определении переменной </span><span style=" font-family:'monospace'; font-size:12pt;">find_files</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Работа функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> не оказывает &quot;необратимого&quot; влияния на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменную</span><span style=" font-family:'Sans'; font-size:12pt;">; ее значение и &quot;разновидность&quot; после выполнения функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> остаются неизменными (такими же, как и до выполнения этой функции). Другие значения, которые берутся из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">списка</span><span style=" font-family:'Sans'; font-size:12pt;">, &quot;действуют&quot; только временно, на период работы функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;">. Во время работы функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> считается упрощенно вычисляемой. Если до выполнения функции </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> не была определена, она остается неопределенной и после вызова этой функции. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следует быть осторожным при использовании сложных выражений, вычисляющих имя используемой переменной, поскольку допустимым именем переменной могут считаться достаточно странные вещи. Например, следующее выражение: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files := $(foreach Esta escrito en espanol!,b c ch,$(find_files)) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">по-видимому, может оказаться полезным только в том случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">find_files</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать ссылку на переменную с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`Esta escrito en espanol!'</span><span style=" font-family:'Sans'; font-size:12pt;"> (нет ли у вас такой переменной?). Но, скорее всего, вы просто ошиблись. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC80"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC80"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC80"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">if</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX557"></a><span style=" font-family:'Sans'; font-size:12pt;">Ф</span><span style=" font-family:'Sans'; font-size:12pt;">ункция </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;"> обеспечивает поддержку для условного вычисления выражений (не путайте с поддерживаемыми GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> условными конструкциями наподобие </span><span style=" font-family:'monospace'; font-size:12pt;">ifeq</span><span style=" font-family:'Sans'; font-size:12pt;">, которые &quot;действуют&quot; на уровне make-файла; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC73"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Синтаксис условных конструкций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вызове функции </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;">, ей передается два или три аргумента: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(if </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">условие</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'monospace'; font-size:12pt;">[,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'monospace'; font-size:12pt;">]) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Сначала из первого аргумента, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">условия</span><span style=" font-family:'Sans'; font-size:12pt;">, удаляются начальные и конечные пробелы, затем он вычисляется. Если в результате получается любая непустая строка, то условие считается &quot;истинным&quot;. При получении пустой строки, условие считается &quot;ложным&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если условие выполняется, вычисляется второй аргумент, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">, и полученный результат становится результатом вычисления всей функции </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если условие не выполняется, вычисляется третий аргумент, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">, и полученный результат становится результатом вычисления всей функции </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;">. При отсутствии третьего аргумента, результатом выполнения функции </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;"> становится пустая строка. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что всегда вычисляется только один из фрагментов - либо </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-выполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">, либо </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">фрагмент-для-невыполненного-условия</span><span style=" font-family:'Sans'; font-size:12pt;">. Поэтому, оба из них могут производить какие-либо &quot;побочные&quot; эффекты (например, вызывать функцию </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC81"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC81"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC81"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">call</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX559"></a><span style=" font-family:'Sans'; font-size:12pt;">Ф</span><span style=" font-family:'Sans'; font-size:12pt;">ункция </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> уникальна тем, что с ее помощью вы можете определять свои собственные функции с параметрами. Вы можете запомнить сложное выражение в качестве значения переменной, а затем использовать функцию </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> для его вычисления с разными параметрами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для функции </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> используется следующий синтаксис: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(call </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр</span><span style=" font-family:'monospace'; font-size:12pt;">,...) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вычислении этой функции, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> помещает каждый из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметров</span><span style=" font-family:'Sans'; font-size:12pt;"> во временные переменные </span><span style=" font-family:'monospace'; font-size:12pt;">$(1)</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">$(2)</span><span style=" font-family:'Sans'; font-size:12pt;"> и так далее. Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">$(0)</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать имя </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;">. На максимальное число параметров ограничения нет. Нет ограничения и на минимальное число параметров, однако, нет особого смысла в использовании </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> без параметров. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Далее, значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляется &quot;в контексте&quot; этих временных переменных. Так, любая ссылка на </span><span style=" font-family:'monospace'; font-size:12pt;">$(1)</span><span style=" font-family:'Sans'; font-size:12pt;"> в значении </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> будет ссылаться на первый </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметр</span><span style=" font-family:'Sans'; font-size:12pt;">, переданный при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> - это </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имя</span><span style=" font-family:'Sans'; font-size:12pt;"> переменной, а не </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">ссылка</span><span style=" font-family:'Sans'; font-size:12pt;"> на эту переменную. Поэтому, как правило, вам не потребуется использовать </span><span style=" font-family:'monospace'; font-size:12pt;">`$'</span><span style=" font-family:'Sans'; font-size:12pt;"> или скобки при описании этого аргумента. (Вы можете, однако, использовать внутри имени ссылку на другую переменную, если вы хотите, чтобы имя не было &quot;константным&quot;.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> представляет собой имя &quot;встроенной&quot; функции, то вызывается именно она (даже если существует переменная с таким же именем). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Перед тем, как присвоить значения временным переменным, функция </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляет значения всех </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметров</span><span style=" font-family:'Sans'; font-size:12pt;">. Это означает, что значения </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащие ссылки на встроенные функции, имеющие специальные правила вычисления (наподобие </span><span style=" font-family:'monospace'; font-size:12pt;">foreach</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">if</span><span style=" font-family:'Sans'; font-size:12pt;">), могут работать не так, как вы ожидали. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот несколько примеров использования функции </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующая функция &quot;переставляет&quot; свои аргументы в обратном порядке: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">reverse = $(2) $(1)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo = $(call reverse,a,b) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">foo</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать </span><span style=" font-family:'monospace'; font-size:12pt;">`b a'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующий пример более интересен: здесь определяется функция, которая производит поиск указанной программы в каталогах, перечисленных в </span><span style=" font-family:'monospace'; font-size:12pt;">PATH</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">pathsearch = $(firstword $(wildcard $(addsufix /$(1),$(subst :, ,$(PATH)))))</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LS := $(call pathsearch,ls) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная LS будет содержать </span><span style=" font-family:'monospace'; font-size:12pt;">/bin/ls</span><span style=" font-family:'Sans'; font-size:12pt;"> или что-нибудь подобное. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Функция </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть &quot;вложенной&quot;. Каждый рекурсивный вызов получит свои собственные локальные копии </span><span style=" font-family:'monospace'; font-size:12pt;">$(1)</span><span style=" font-family:'Sans'; font-size:12pt;"> и прочих переменных, которые &quot;замаскируют&quot; своих &quot;тезок&quot; из </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;"> более &quot;высокого&quot; уровня. Вот пример реализации функции </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">map</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">map = $(foreach a,$(2),$(call $(1),$(a))) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Теперь, с помощью функции </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">map</span><span style=" font-family:'Sans'; font-size:12pt;">, вы можете &quot;за один шаг&quot; вызывать функции, имеющие только один параметр (наподобие </span><span style=" font-family:'monospace'; font-size:12pt;">origin</span><span style=" font-family:'Sans'; font-size:12pt;">), сразу для нескольких значений. Так, в следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">o = $(call map,origin,o map MAKE) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">o</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать нечто вроде </span><span style=" font-family:'monospace'; font-size:12pt;">`file file default'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">И последнее предупреждение: будьте осторожны при добавлении пробелов к аргументам функции </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;">. Как и с другими функциями, любые пробелы, содержащиеся во втором и последующих аргументах, сохраняются; это может привести к весьма странным результатам. Надежнее всего, удалять все &quot;дополнительные&quot; пробелы, указывая параметры для функции </span><span style=" font-family:'monospace'; font-size:12pt;">call</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC82"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC82"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC82"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">origin</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX562"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> отличие от других функций, функция </span><span style=" font-family:'monospace'; font-size:12pt;">origin</span><span style=" font-family:'Sans'; font-size:12pt;"> не оперирует значениями переменных; вместо этого, она позволяет вам получить некоторую информацию </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">о самой</span><span style=" font-family:'Sans'; font-size:12pt;"> переменной. Точнее, она позволяет узнать, откуда &quot;взялась&quot; рассматриваемая переменная. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Синтаксис функции </span><span style=" font-family:'monospace'; font-size:12pt;">origin</span><span style=" font-family:'Sans'; font-size:12pt;"> следующий: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(origin </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> является </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">именем</span><span style=" font-family:'Sans'; font-size:12pt;"> переменной, а не </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">ссылкой</span><span style=" font-family:'Sans'; font-size:12pt;"> на нее. Таким образом, вам, как правило, не придется использовать символ </span><span style=" font-family:'monospace'; font-size:12pt;">`$'</span><span style=" font-family:'Sans'; font-size:12pt;"> или скобки при написании этого аргумента. (Однако, внутри имени переменной может находится ссылка на другую переменную, если вы хотите, чтобы имя переменной не было &quot;фиксированным&quot;.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Результатом этой функции будет строка, указывающая на то, каким образом переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`undefined'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> не была определена. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`default'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена по умолчанию (как, например, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;"> и ей подобные). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Обратите внимание, что если вы переопределили переменную, имеющую значение по умолчанию, функция </span><span style=" font-family:'monospace'; font-size:12pt;">origin</span><span style=" font-family:'Sans'; font-size:12pt;"> возвратит информацию о более позднем переопределении. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`environment'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была создана из соответствующей переменной среды и опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не была </span><span style=" font-family:'Sans'; font-size:12pt;">включена (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`environment override'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была создана из соответствующей переменной среды и опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">была</span><span style=" font-family:'Sans'; font-size:12pt;"> включена (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`file'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена внутри make-файла. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`command line'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена с помощью командной строки. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`override'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена в make-файле с с использованием директивы </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`automatic'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> является автоматической переменной, определяемой во время выполнения команд каждого правила (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Помимо &quot;праздного любопытства&quot;, подобная информация может быть полезна, в первую очередь, для того, чтобы определить, насколько вы можете &quot;доверять&quot; значению, содержащемуся в рассматриваемой переменной. Предположим, для примера, что у вас имеется make-файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, который включает в себя другой make-файл </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. Вы хотите, чтобы при запуске команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make -f bar'</span><span style=" font-family:'Sans'; font-size:12pt;">, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">bletch</span><span style=" font-family:'Sans'; font-size:12pt;"> была определена в make-файле </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;"> даже в том случае, если аналогичная переменная </span><span style=" font-family:'monospace'; font-size:12pt;">bletch</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержаться в операционном окружении. Однако, если переменная </span><span style=" font-family:'monospace'; font-size:12pt;">bletch</span><span style=" font-family:'Sans'; font-size:12pt;"> уже была определена в make-файле </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> (до подключения make-файла </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">), вы бы не хотели &quot;переопределять&quot; эту переменную в </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это можно было бы сделать, используя в файле </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> директиву </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">: в этом случае определение переменной, данное в файле </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> имело бы приоритет перед более поздним ее определением в файле </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">. К сожалению, директива </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;"> также &quot;перекрыла&quot; бы любое определение этой переменное, заданное в командной строке. Решение может выглядеть следующим образом (фрагмент make-файла </span><span style=" font-family:'monospace'; font-size:12pt;">`bar'</span><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef bletch</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;$(origin bletch)&quot; &quot;environment&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bletch = barf, gag, etc.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">bletch</span><span style=" font-family:'Sans'; font-size:12pt;"> будет переопределена, если она была определена из соответствующей переменной среды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы хотите &quot;перекрыть&quot; определение </span><span style=" font-family:'monospace'; font-size:12pt;">bletch</span><span style=" font-family:'Sans'; font-size:12pt;">, пришедшее из программного окружения, даже при наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;">, то можно написать: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq &quot;$(findstring environment,$(origin bletch))&quot; &quot;&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bletch = barf, gag, etc.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, переопределение произойдет, если выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(origin bletch)'</span><span style=" font-family:'Sans'; font-size:12pt;"> вернет любую из строк - </span><span style=" font-family:'monospace'; font-size:12pt;">`environment'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`environment override'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC83"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC83"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункция </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC83"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">shell</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX565"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> отличие от большинства других функций (кроме, пожалуй, функции </span><span style=" font-family:'monospace'; font-size:12pt;">wildcard</span><span style=" font-family:'Sans'; font-size:12pt;">; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">wildcard</span></a><span style=" font-family:'Sans'; font-size:12pt;">), функция </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;"> служит для &quot;общения&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с внешним миром. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Функция </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;"> работает аналогично символу </span><span style=" font-family:'monospace'; font-size:12pt;">``'</span><span style=" font-family:'Sans'; font-size:12pt;"> в большинстве интерпретаторов командной строки: она производит подстановку результата выполнения команды. Это означает, что в качестве аргумента она принимает команду интерпретатора командной строки, а в качестве результата возвращает &quot;выходные данные&quot; этой команды. Единственным преобразованием полученного результата, которое выполняет </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> перед подстановкой его в окружающий текст, является преобразование символов перевода строки (или пар перевод-строки/возврат-каретки) в одиночные пробелы. Также производится удаление &quot;конечных&quot; (находящихся в конце данных) символов перевода строки (или пар перевод-строки/возврат-каретки). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Команды, указанные в </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;">, запускаются в момент вычисления этой функции. Как правило, это происходит в момент чтения make-файла. Исключение составляет случай, когда эта функция </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;"> используется в командах правила. В этом случае она будет вычисляться (будут выполняться указанные в ней команды) во время работы команд правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот несколько примеров использования функции </span><span style=" font-family:'monospace'; font-size:12pt;">shell</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">contents := $(shell cat foo) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом примере, в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">contents</span><span style=" font-family:'Sans'; font-size:12pt;"> записывается содержимое файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> (видоизмененное таким образом, что все символы перевода строки заменены в нем на пробелы). В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">files := $(shell echo *.c) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">files</span><span style=" font-family:'Sans'; font-size:12pt;"> записывается список файлов, полученных по маске </span><span style=" font-family:'monospace'; font-size:12pt;">`*.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Скорее всего (если только вы не имеете какой-нибудь очень странный командный интерпретатор), результат будет аналогичен использованию выражения </span><span style=" font-family:'monospace'; font-size:12pt;">`$(wildcard *.c)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC84"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC84"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ф</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ункции управления сборкой</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX569"></a><span style=" font-family:'Sans'; font-size:12pt;">Э</span><span style=" font-family:'Sans'; font-size:12pt;">ти функции управляют ходом сборки. В основном, они используются для выдачи некоторой информации пользователю make-файла или для завершения работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> при обнаружении каких-либо проблем в &quot;окружающей среде&quot;. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(error </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX571"></a><span style=" font-family:'Sans'; font-size:12pt;">Г</span><span style=" font-family:'Sans'; font-size:12pt;">енерирует &quot;фатальную&quot; ошибку с сообщением </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;">. Обратите внимание, что ошибка генерируется в момент вычисления функции. Соответственно, если вы вызываете эту функцию внутри команд правила или в правой части оператора присваивания для рекурсивной переменной, ошибка будет генерироваться не сразу. Перед генерацией ошибки </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">сообщение</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;расширяется&quot;. В следующем примере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef ERROR1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(error error is $(ERROR1))</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">во время чтения make-файла будет генерироваться фатальная ошибка если была определена переменная </span><span style=" font-family:'monospace'; font-size:12pt;">ERROR1</span><span style=" font-family:'Sans'; font-size:12pt;">. Здесь: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ERR = $(error found an error!)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: err</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">err: ; $(ERR)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">фатальная ошибка будет генерироваться при обработке цели </span><span style=" font-family:'monospace'; font-size:12pt;">err</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(warning </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX574"></a><span style=" font-family:'Sans'; font-size:12pt;">Э</span><span style=" font-family:'Sans'; font-size:12pt;">та функция работает подобно описанной выше функции </span><span style=" font-family:'monospace'; font-size:12pt;">error</span><span style=" font-family:'Sans'; font-size:12pt;">, но, в отличии от нее, не вызывает завершения работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Сообщение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;расширяется&quot; и выводится, после чего обработка make-файла продолжается. Возвращаемое значение этой функции - пустая строка. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC85"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC85"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">З</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">апуск </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC85"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Make-файл, описывающий, каким образом следует перекомпилировать программу, может использоваться по-разному. В простейшем случае, он используется для перекомпиляции всех &quot;устаревших&quot; файлов программы. Обычно, make-файлы пишутся таким образом, чтобы при запуске без параметров, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выполняла именно это действие. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, у вас может возникнуть потребность выполнить какие-нибудь другие действия, например: обновить только некоторые из файлов, использовать другой компилятор или другие опции компиляции. Наконец, у вас может появиться желание просто узнать какие из файлов нуждаются в обновлении без того, чтобы в действительности их обновлять. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Указывая дополнительные параметры при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вы сможете выполнить эти и многие другие действия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По окончанию работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, код завершения программы представляет собой одно из трех возможных значений: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">0</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Код завершения равен нулю если работа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> завершена успешно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">2</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Код завершения равен двум если в ходе работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> возникли какие-то ошибки. Суть происшедших ошибок описана в выдаваемых </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сообщениях. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">1</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Код завершения равен одному, если при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> была указана опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> определила, что некоторые цели нуждаются в обновлении. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC86"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC86"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ргументы для задания make-файла</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX577"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля указания имени make-файла, который следует интерпретировать, служат опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;"> (также работает опция </span><span style=" font-family:'monospace'; font-size:12pt;">`--makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">). Например, </span><span style=" font-family:'monospace'; font-size:12pt;">`-f altmake'</span><span style=" font-family:'Sans'; font-size:12pt;"> указывает на необходимость использования </span><span style=" font-family:'monospace'; font-size:12pt;">`altmake'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При задании сразу нескольких опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> с аргументом, все указанные make-файлы будут использованы (логически &quot;объединяясь&quot; в один make-файл). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При отсутствии опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-f'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--file'</span><span style=" font-family:'Sans'; font-size:12pt;">, по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> пытается найти файлы с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`GNUmakefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;"> (в указанном порядке). Первый же найденный файл, который существует или может быть построен, используется как make-файл для работы (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC12"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Создание make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC87"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC87"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ргументы для задания главной цели (goal)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX580"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Г</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">лавная цель (goal)</span><span style=" font-family:'Sans'; font-size:12pt;"> - это цель которую стремится достичь </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в результате своей работы. Прочие цели make-файла обновляеются только в том случае, если они прямо или косвенно являются пререквизитами главной цели. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По умолчанию, главной целью становится первая цель make-файла (кроме целей, чьи имена начинаются с точки). Поэтому, обычно, make-файлы пишутся таким образом, чтобы первая цель описывала процесс компиляции программы или набора программ, для сборки которых предназначается make-файл. Если первое правило make-файла описывает сразу несколько целей, только первая из целей (а не все описываемые цели) становится главной целью по умолчанию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете задать </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> главную цель (или несколько главных целей), указав ее (или их) имя в качестве аргументов. При задании сразу нескольких главных целей, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет обрабатывать их поочередно, в том порядке, как они были перечислены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В качестве главной цели может быть указана любая цель make-файла (за исключением целей, чье имя начинается с символа </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;"> или содержит символ </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку такая цель будет &quot;воспринята&quot; как задание опции или определение переменной). Можно задать даже такую цель, которая не описана в make-файле; в этом случае </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается ее достичь, используя имеющиеся у нее неявные правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX581"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">писок главных целей, указанных вами в командной строке, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> записывает в специальную переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKECMDGOALS</span><span style=" font-family:'Sans'; font-size:12pt;">. Если в командной строке не было задано ни одной цели, эта переменная остается пустой. Обратите внимание, что эта переменная должна использоваться только в особых случаях. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующий пример демонстрирует &quot;надлежащее&quot; использование переменной </span><span style=" font-family:'monospace'; font-size:12pt;">MAKECMDGOALS</span><span style=" font-family:'Sans'; font-size:12pt;">. Она используется для того, чтобы избежать подключения файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.d'</span><span style=" font-family:'Sans'; font-size:12pt;">, когда в командной строке указывается цель </span><span style=" font-family:'monospace'; font-size:12pt;">clean</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC43"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматическая генерация списка пререквизитов</span></a><span style=" font-family:'Sans'; font-size:12pt;">), так что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет пытаться создать эти файлы только для того, чтобы тут же их удалить: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">sources = foo.c bar.c</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq ($(MAKECMDGOALS),clean)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include $(sources:.c=.d)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Явное указание главной цели полезно, если вы хотите перекомпилировать только часть программы или только одну из нескольких программ. В таком случае, укажите в качестве главной цели все файлы, которые вы хотели бы обновить. Пусть, например, у вас имеется каталог, содержащий сразу несколько программ и make-файл, который начинается примерно так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.PHONY: all</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all: size nm ld ar as </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы работаете над программой </span><span style=" font-family:'monospace'; font-size:12pt;">size</span><span style=" font-family:'Sans'; font-size:12pt;">, удобно запускать </span><span style=" font-family:'monospace'; font-size:12pt;">`make size'</span><span style=" font-family:'Sans'; font-size:12pt;"> чтобы перекомпилировались только файлы, относящиеся к этой программы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Явное задание цели может применяться для построения тех файлов, которые при &quot;обычной&quot; работе не строятся. Это, например, может быть файл с отладочной информацией или специальная тестовая версия программы, для которых в make-файле имеется свое правило, но которые не являются пререквизитами главной цели, выбираемой по умолчанию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Явное указание главной цели может использоваться для запуска команд, ассоциированных с абстрактной (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">) или пустой (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC35"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование пустых целей для фиксации событий</span></a><span style=" font-family:'Sans'; font-size:12pt;">) целью. Например, во многих make-файлах есть абстрактная цель </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, которая очищает каталог, удаляя все файлы, кроме файлов с исходными текстами. Естественно, это делается только по вашему требованию </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. Ниже приведен список типичных абстрактных и пустых целей. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC121"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Стандартные имена целей для пользователей</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где описываются все &quot;стандартные&quot; имена целей, используемые в программах GNU. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX583"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">остроить все &quot;высокоуровневые&quot; цели make-файла. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX584"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">далить все файлы, которые, обычно, создаются в результате работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`mostlyclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX585"></a><span style=" font-family:'Sans'; font-size:12pt;">Р</span><span style=" font-family:'Sans'; font-size:12pt;">аботает аналогично </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, но может воздержаться от удаления некоторых файлов, которые, как правило, не желательно перекомпилировать. Например, в make-файле, описывающем сборку компилятора GCC, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`mostlyclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> не удаляет файл </span><span style=" font-family:'monospace'; font-size:12pt;">`libgcc.a'</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку его перекомпиляция требуется редко и занимает много времени. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`distclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX586"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">realclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX587"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">clobber'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX588"></a><span style=" font-family:'Sans'; font-size:12pt;">Л</span><span style=" font-family:'Sans'; font-size:12pt;">юбая из этих целей может быть определена для удаления </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">большего</span><span style=" font-family:'Sans'; font-size:12pt;"> числа файлов, чем это делает </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">. Так, например, могли бы удаляться конфигурационные файлы или линки, которые создаются при подготовке к компиляции (не обязательно самим make-файлом). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`install'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX589"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">копировать исполняемый файл в каталог, где обычно хранятся исполняемые файлы программ; скопировать дополнительные файлы, используемые исполняемым файлом, в нужные каталоги (где исполняемый файл ожидает их найти). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`print'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX590"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ечать листингов всех исходных файлов, которые были модефицированы. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`tar'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX591"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">оздает tar-архив с файлами исходных текстов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`shar'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX592"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">оздать самораспаковывающийся архив (shar-файл) из исходных файлов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`dist'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX593"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">оздать из исходных файлов дистрибутив. Это может быть tar-файл, shar-файл, сжатые их версии или что-нибудь другое. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`TAGS'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX594"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бновить таблицу тегов для этой программы. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`check'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX595"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">test'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX596"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ыполнить самотестирование программ, построенных этим make-файлом. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC88"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC88"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">В</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">место исполнения команд</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX597"></a><span style=" font-family:'Sans'; font-size:12pt;">M</span><span style=" font-family:'Sans'; font-size:12pt;">ake-файл указывает программе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, как определить - нуждается ли цель в обновлении и каким образом ее следует обновлять. Однако, не всегда вам требуется именно обновление цели. Указывая подходящие опции, можно заставить </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выполнять другие действия. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--just-print'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--dry-run'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--recon'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX599"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Нет операции&quot;. Будут печататься (без реального выполнения) команды, которые бы выполнила </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> для обновления целей. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--touch'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX603"></a><span style=" font-family:'Sans'; font-size:12pt;">Ц</span><span style=" font-family:'Sans'; font-size:12pt;">ели помечаются как &quot;обновленные&quot; без реального их изменения. Иначе говоря, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> просто &quot;делает вид&quot; что скомпилировала нужные цели, на самом деле не изменяя их. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--question'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX607"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Проверка&quot;. Делается проверка - нуждаются ли цели в обновлении, но никаких команд не исполняется. Никакой компиляции и никакого вывода сообщений при этом не производится. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-W </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--what-if=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--assume-new=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--new-file=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX610"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Что если?&quot;. За каждой опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-W'</span><span style=" font-family:'Sans'; font-size:12pt;"> следует имя файла. Для указанных таким образом файлов, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предполагает, что их время модефикации равно текущему времени (при этом, реальное время модефикации этих файлов не меняется). Совместно используя опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-W'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;">, можно увидеть, какие действия предпримет </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, если перечисленные файлы действительно будут модефицированы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> только печатает команды, без реального их выполнения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эффект опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> состоит в том, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> игнорирует команды, указанные в правилах и использует вместо них команду </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;"> для всех целей, нуждающихся в обновлении. Печатается также команда </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;">, если только не были указаны опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">.SILENT</span><span style=" font-family:'Sans'; font-size:12pt;">. В действительности, для увеличения скорости, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не вызывает программу </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;">, а выполняет всю требуемую работу &quot;напрямую&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> ничего не печатает и не исполняет никаких команд, а просто возвращает соответствующий код возврата. Нулевой код возврата означает, что цели не нуждаются в обновлении. Код возврата, равный единице, означает, что какие-то из целей нуждаются в обновлении. И, наконец, код возврата, равный двум, означает, что произошла ошибка (таким образом, вы можете отличить ошибочную ситуацию от случая, когда цели нуждаются в обновлении). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, можно указать только одну из трех вышеперечисленных опций - задание сразу нескольких опций считается ошибкой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> не влияют на командные строки, начинающиеся с </span><span style=" font-family:'monospace'; font-size:12pt;">`+'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также строки, содержащие </span><span style=" font-family:'monospace'; font-size:12pt;">`$(MAKE)'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`${MAKE}'</span><span style=" font-family:'Sans'; font-size:12pt;">. Обратите внимание, что при наличии вышеперечисленных опций будут запускаться только строки, начинающиеся с </span><span style=" font-family:'monospace'; font-size:12pt;">`+'</span><span style=" font-family:'Sans'; font-size:12pt;"> или содержащие </span><span style=" font-family:'monospace'; font-size:12pt;">`$(MAKE)'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`${MAKE}'</span><span style=" font-family:'Sans'; font-size:12pt;"> - другие строки тех же правил не будут запускаться (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Как работает переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">MAKE</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-W'</span><span style=" font-family:'Sans'; font-size:12pt;"> можно использовать двумя путями: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При наличии опций <span style=" font-family:'monospace';">`-n'</span> или <span style=" font-family:'monospace';">`-q'</span>, вы можете увидеть, какие действия предпринила бы <span style=" font-family:'monospace';">make</span>, если бы вы модефицировали указанные файлы. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При отсутствии опций <span style=" font-family:'monospace';">`-n'</span> или <span style=" font-family:'monospace';">`-q'</span>, опции <span style=" font-family:'monospace';">`-W'</span> заставят <span style=" font-family:'monospace';">make</span> вести себя во время выполнения команд так, как если бы указанные файлы были модефицированы (хотя, на самом деле, они и не были модефицированы). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Другую информацию о </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> и используемых make-файлах вы можете получить с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-p'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`-v'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC89"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC89"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">редотвращение перекомпиляции некоторых файлов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX616"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">ногда, после изменения исходного файла, вам хотелось бы избежать перекомпиляции всех файлов, которые от него зависят. Предположим, что вы добавили макрос или прототип функции в заголовочный файл, от которого зависят многие исходные файлы. Будучи &quot;консервативной&quot;, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> предполагает что любые изменения, внесенные в заголовочные файлы, требуют перекомпиляции всех файлов, которые от них зависят. Вы, однако, понимаете, что, в данном случае, нет необходимости в подобной перекомпиляции и не хотели бы тратить время, ожидая ее завершения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы заранее предвидели эту проблему и еще не внесли изменения в заголовочный файл, вы можете воспользоваться опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта опция заставит </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не исполняя команд, пометить все цели как &quot;обновленные&quot;, изменив время их последней модефикации. Поступая так, вам следует придерживаться следующей процедуры: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Используйте команду <span style=" font-family:'monospace';">`make'</span> для перекомпиляции всех файлов, которые действительно в этом нуждаются. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Внесите изменения в заголовочные файлы. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Используйте команду <span style=" font-family:'monospace';">`make -t'</span>, чтобы пометить все объектные файлы как &quot;обновленные&quot;. При следующем запуске <span style=" font-family:'monospace';">make</span>, внесенные в заголовочные файлы изменения, уже не вызовут перекомпиляции программы. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, если вы уже внесли изменения в заголовочный файл, в то время как у вас еще имеются другие файлы, нуждающиеся в обновлении, использовать приведенную выше процедуру уже поздно. Вместо этого, вы можете воспользоваться опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-o </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> дабы указанный файл рассматривался как &quot;старый&quot; (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). В таком случае ни этот файл, ни зависящие от него файлы обновляться не будут. Придерживайтесь следующей процедуры: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перекомпилируйте все исходные файлы, которые нуждаются в компиляции по причинам, не связанным с вашей модефикацией заголовочного файла, используя <span style=" font-family:'monospace';">`make -o </span><span style=" font-family:'monospace'; font-style:italic;">имя_заголовочного_файла</span><span style=" font-family:'monospace';">'</span>. Если вы изменили несколько заголовочных файлов, используйте отдельные опции <span style=" font-family:'monospace';">`-o'</span> для каждого из них. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обновите время модефикации всех объектных файлов, используя <span style=" font-family:'monospace';">`make -t'</span>. </li></ol>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC90"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC90"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Перекрытие&quot; (overriding) переменных</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX622"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ргумент командной строки, содержащий </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> определяет значение переменной: запись </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">v</span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> означает, что переменная </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">v</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'Sans'; font-size:12pt;">. Если значение переменной было задано подобным образом, то все &quot;обычные&quot; присваивания этой переменной нового значения внутри make-файла будут игнорироваться; мы говорим что они будут </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">перекрыты (overridden)</span><span style=" font-family:'Sans'; font-size:12pt;"> аргументом командной строки. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Чаще всего, данное средство используется для передачи дополнительных опций компилятору. Например, в &quot;правильно&quot; написанном make-файле переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> используется при каждом вызове компилятора Си, так что исходный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> мог бы компилироваться приблизительно так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -c $(CFLAGS) foo.c </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, значение, хранящееся в </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, будет влиять на любой процесс компиляции. Вполне возможно, что в make-файле определяется некоторое &quot;обычное&quot; значение для переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS=-g </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждый раз, запуская </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, вы, при желании, можете &quot;перекрыть&quot; это значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, при вызове </span><span style=" font-family:'monospace'; font-size:12pt;">`make CFLAGS='-g -O''</span><span style=" font-family:'Sans'; font-size:12pt;">, каждая компиляция будет осуществляться с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c -g -O'</span><span style=" font-family:'Sans'; font-size:12pt;">. (Этот пример также иллюстрирует, как вы можете включать пробелы и другие специальные символы в значение переменной при ее перекрытии.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> - лишь одна из многих &quot;стандартных&quot; переменных, существующих только для того, чтобы вы могли изменять их подобным образом. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где приведен полный список таких переменных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В вашем make-файле вы можете использовать и свои собственные переменные, давая пользователю возможность влиять на ход работы make-файла путем изменения этих переменных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда вы &quot;перекрываете&quot; значение переменной с помощью командной строки, вы можете определить как рекурсивно вычисляемую, так и упрощенно вычисляемую переменную. В приведенном выше примере создавалась рекурсивно вычисляемая переменная; для определения упрощенно вычисляемой переменной, достаточно вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`='</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать оператор </span><span style=" font-family:'monospace'; font-size:12pt;">`:='</span><span style=" font-family:'Sans'; font-size:12pt;">. С другой стороны, если указанное в командной строке значение переменной не будет ссылаться на другие переменные или функции, тип создаваемой переменной не имеет значения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имеется один способ, с помощью которого внутри make-файла можно изменить значение переменной, заданное с помощью командной строки. Для этого нужно использовать директиву </span><span style=" font-family:'monospace'; font-size:12pt;">override</span><span style=" font-family:'Sans'; font-size:12pt;">, которая выглядит следующим образом: </span><span style=" font-family:'monospace'; font-size:12pt;">`override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC91"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC91"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роверка компиляции программы</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX626"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">бычно, при возникновении ошибки во время исполнения какой-либо команды, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> немедленно прекращает работу, возвращая ненулевой код возврата. Никаких команд, обновляющих какие-либо цели, после этого более не выполняется. Возникновение ошибки означает, что главная цель не может быть корректно обновлена и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сообщает об этой ситуации сразу же, как только это становится ясным. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, при компиляции программы, которую вы только что модефицировали, такое поведение </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не слишком удобно. Скорее, вам хотелось бы, чтобы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попробовала скомпилировать все модефицированные вами файлы дабы обнаружить как можно большее число ошибок. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX628"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> такой ситуации следует использовать опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--keep-going'</span><span style=" font-family:'Sans'; font-size:12pt;">. При этом </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет продолжать обработку других пререквизитов рассматриваемой цели, обновляя их при необходимости. Только после этого </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> завершит работу с возвратом ненулевого статуса. Например, при возникновении ошибки во время компиляции объектного файла, </span><span style=" font-family:'monospace'; font-size:12pt;">`make -k'</span><span style=" font-family:'Sans'; font-size:12pt;"> продолжит компиляции других объъектных файлов, хотя уже и понятно, что скомпоновать готовую программу будет невозможно. В дополнении к этому, </span><span style=" font-family:'monospace'; font-size:12pt;">`make -k'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет пытаться продолжать работу как можно дольше и после того, как станет ясно что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не знает, как можно обновить рассматриваемую цель или пререквизит. В этом случае будет выдано соответствующее сообщение об ошибке, но </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается продолжить работу (в то время, как без опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> такая ошибка считалась бы фатальной; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> исходит из того, что ваша задача - получить новую версию главной цели; как только </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> понимает что это невозможно, она сообщает об этом сразу же. Запуск с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> говорит, что, на самом деле, ваша задача - протестировать максимальное количество внесенных вами изменений (все обнаруженные таким образом проблемы можно было исправить &quot;сразу&quot;, до следующей попытки компиляции). Вот почему, кстати, при выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">M-x compile</span><span style=" font-family:'Sans'; font-size:12pt;"> редактор Emacs по умолчанию использует опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC92"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC92"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">бзор опций</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX630"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">от полный список опций, распознаваемых программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-b'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX633"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">-m'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX634"></a><span style=" font-family:'Sans'; font-size:12pt;">Э</span><span style=" font-family:'Sans'; font-size:12pt;">ти опции оставлены для совместимости с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. При работе они игнорируются. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-C </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX635"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--directory=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX636"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">еред чтением make-файла перейти в каталог </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'Sans'; font-size:12pt;">. При наличии сразу нескольких опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-C'</span><span style=" font-family:'Sans'; font-size:12pt;">, каждая из них рассматривается относительно предыдущей: так, </span><span style=" font-family:'monospace'; font-size:12pt;">`-C / -C etc'</span><span style=" font-family:'Sans'; font-size:12pt;"> эквивалентно </span><span style=" font-family:'monospace'; font-size:12pt;">`-C /etc'</span><span style=" font-family:'Sans'; font-size:12pt;">. Обычно, это используется при рекурсивном вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-d'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX637"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> дополнение к основной работе, выводить отладочную информацию. Отладочная информация содержит в себе много интересного: например, какие файлы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> считает необходимым обновить, для каких файлов сравнивается их время изменения и каков полученный результат, какие неявные правила рассматриваются в качестве кандидатов на исполнение и какие из них действительно выполняются и так далее. Опция </span><span style=" font-family:'monospace'; font-size:12pt;">-d</span><span style=" font-family:'Sans'; font-size:12pt;"> эквивалентна использованию опции </span><span style=" font-family:'monospace'; font-size:12pt;">`--debug=a'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите ниже). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--debug[=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">опции</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX638"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> дополнение к основной работе, выводить отладочную информацию. При выводе отладочной информации можно выбрать нужный ее тип и степень &quot;подробности&quot;. При отсутствии аргументов, выбирается &quot;базовый&quot; уровень отладочной информации. Ниже перечислены все возможные аргументы; при &quot;разборе&quot; аргументов учитывается только первый символ названия. При задании нескольких аргументов, они должны разделяться пробелами или запятыми. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">a (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">all</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выдача всей имеющейся отладочной информации (&quot;максимальный уровень&quot;). Эквивалентно использованию опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-d'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">b (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">basic</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">&quot;Базовый уровень&quot; отладочной информации: печатаются все цели, которые были найдены &quot;устаревшими&quot; и информация об успешности или неуспешности попытки их обновления. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">v (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">verbose</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующий уровень после &quot;базового&quot;; дополнительно выдается информация о том, какие make-файлы обрабатываются, какие пререквизиты не нуждаются в обновлении и так далее. Включение этой опции также приводит к выдаче отладочной информации &quot;базового&quot; уровня. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">i (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">implicit</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выдается информация о процессе поиска подходящих неявных правил для каждой из целей. Включение этой опции также приводит к выдаче отладочной информации &quot;базового&quot; уровня. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">j (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">jobs</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выдача информации о вызове некоторых команд. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">m (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">makefile</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По умолчанию, описанная выше отладочная информация не выдается на стадии, когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> пробует обновить make-файлы. Данная опция разрешает выдачу отладочной информации в процессе обновления make-файлов. Обратите внимание, что </span><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;"> также включает данную опцию. Эта опция также разрешает выдачу отладочных сообщений &quot;базового&quot; уровня. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-e'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX639"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--environment-overrides'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX640"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ает переменным, созданным из соответствующих переменных среды &quot;приоритет&quot; перед переменными, определенными внутри make-файла. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC68"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменные из операционного окружения</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-f </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX641"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--file=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX642"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--makefile=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX643"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">казанный </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривается в качестве make-файла. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC12"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Создание make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-h'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX644"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--help'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX645"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">апоминает вам список опций, распознаваемых </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> и завершает работу. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-i'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX646"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--ignore-errors'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX647"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">гнорировать все ошибки, возникающие в любых командах, исполняемых для обновления файлов. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-I </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX648"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--include-dir=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX649"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">казывает </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">каталог</span><span style=" font-family:'Sans'; font-size:12pt;"> для поиска включаемых make-файлов. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. При наличии нескольких опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-I'</span><span style=" font-family:'Sans'; font-size:12pt;">, поиск в указанных каталогах производится в том порядке, как они были перечислены. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-j [</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">число_заданий</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX650"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--jobs[=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">число_заданий</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX651"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">казывает количество одновременно выполняемых заданий (команд). При отсутствии аргумента, число одновременно выполняемых заданий не ограничено. При наличии сразу нескольких опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-j'</span><span style=" font-family:'Sans'; font-size:12pt;">, будет действовать только последняя из перечисленных. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC47"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Параллельное исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где подробно описан процесс запуска команд. Обратите внимание, что при работе в операционной системе MS-DOS, эта опция игнорируется. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX652"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--keep-going'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX653"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">осле возникновения ошибки, продолжить, насколько это возможно, обработку make-файла. Хотя цель, при обновлении которой произошла ошибка, уже не сможет быть корректно обновлена, и, следовательно, не могут быть правильно обновлены и все цели, зависящие от нее, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попробует обработать другие пререквизиты этих целей. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC91"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Проверка компиляции программы</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-l [</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">загрузка</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX654"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--load-average[=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">загрузка</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX655"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--max-load[=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">загрузка</span><span style=" font-family:'monospace'; font-size:12pt;">]'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX656"></a><span style=" font-family:'Sans'; font-size:12pt;">У</span><span style=" font-family:'Sans'; font-size:12pt;">казывает, что новые задания (команды) не должны запускаться если уже имеется хотя бы одно запущенная задание и загрузка системы равна или превышает значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">загрузка</span><span style=" font-family:'Sans'; font-size:12pt;"> (число с плавающей точкой). При отсутствии аргумента, ограничение на максимальную загрузку снимается. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC47"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Параллельное исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX657"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--just-print'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX658"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--dry-run'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX659"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--recon'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX660"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ечатать команды, которые должны выполняться, но не исполнять их. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-o </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX661"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--old-file=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX662"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--assume-old=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX663"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">е обновлять </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> даже если он &quot;старше&quot; своих пререквизитов и при обработке других файлов не принимать в рассчет возможные изменения в этом файле. По существу, этот файл обрабатывается как &quot;очень старый&quot; и его правила игнорируются. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC89"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Предотвращение перекомпиляции некоторых файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-p'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX664"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--print-data-base'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX665"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">еред началом основной работы, распечатать базу данных (правила и значения переменных), полученную в результате чтения make-файла. Печатается также информация о номере версии (аналогично опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-v'</span><span style=" font-family:'Sans'; font-size:12pt;">, смотрите ниже). Для того, чтобы просто распечатать базу данных, не обновляя при этом никаких файлов, используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`make -qp'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для распечатки базы данных с предопределенными правилами и переменными, используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`make -p -f /dev/null'</span><span style=" font-family:'Sans'; font-size:12pt;">. Помимо всего прочего, выводимая информация содержит имя файла и номер строки, где было дано определение правила или переменной. Это может оказаться ценным подспорьем для отладки сложных make-файлов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-q'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX668"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--question'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX669"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Режим проверки&quot;. Никаких команд не выполняется и не печатается никаких сообщений. Вся работа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> заключается в возврате соответствующего кода завершения. В случае, если указанная цель не нуждается в обновлении, возвращается нулевой код. В случае, если обновление требуется, возвращается код, равный единице. При возникновении каких-либо ошибок ошибок, возвращается код, равный двум. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX670"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--no-builtin-rules'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX671"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">тключает использование встроенных неявных правил (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Однако, вы по-прежнему можете задать свои собственные неявные правила с помощью шаблонных правил (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;"> также очищает используемый по умолчанию список суффиксов для суффиксных правил. (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">). По-прежнему, вы можете использовать специальную цель </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;"> для определения своего собственного списка суффиксов. Далее, эти суффиксы можно будет использовать в своих суффиксных правилах. Обратите внимание, что опция </span><span style=" font-family:'monospace'; font-size:12pt;">-r</span><span style=" font-family:'Sans'; font-size:12pt;"> воздействует только на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">правила</span><span style=" font-family:'Sans'; font-size:12pt;"> и никак не влияет на используемые по умолчанию переменные (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">); смотрите описание опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-R'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-R'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX672"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--no-builtin-variables'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX673"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">тключает использование встроенных переменных, используемых неявными правилами (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Разумеется, вы по-прежнему можете определять свои собственные переменные. Включение опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-R'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически приводит к включению опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите выше), поскольку нет смысла в наличии неявных правил без наличия переменных, которые в них используются. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-s'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX674"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--silent'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX675"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--quiet'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX676"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Бесшумный режим&quot;. Отключается печать исполняемых команд. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC45"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Отображение исполняемых команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-S'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX677"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--no-keep-going'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX678"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--stop'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX679"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">тменяет опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;">. Как правило, это может потребоваться только при рекурсивном использовании </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, когда опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-k'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть &quot;унаследована&quot; через переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> от </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;верхнего уровня&quot; (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">) или в случае, если эта опция была установлена через переменную среду </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-t'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX680"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--touch'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX681"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">е выполняя команд, просто обновляет время последней модефикации файлов (в действительности не изменяя их). Таким образом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;делает вид&quot; что все необходимые команды были выполнены, дабы &quot;обмануть&quot; последующие запуски </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-v'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX682"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--version'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX683"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ыдает информацию о версии программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, ее авторах, авторских правах, замечание об отсутствии гарантий и завершает работу. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-w'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX684"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--print-directory'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX685"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ечатать сообщение с именем текущего каталога до и после обработки make-файла. Это может оказаться полезным при поиске нетривиальных ошибок, связанных с рекурсивным вызовом </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. (На практике, вам редко когда понадобится указывать эту опцию, поскольку, во многих случаях, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> включает ее автоматически; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC54"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Опция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC54"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">`--print-directory'</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--no-print-directory'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX686"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">тменить печать рабочего каталога (опции </span><span style=" font-family:'monospace'; font-size:12pt;">-w</span><span style=" font-family:'Sans'; font-size:12pt;">). Эта опция может оказаться полезной в тех случаях, когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически включает опцию </span><span style=" font-family:'monospace'; font-size:12pt;">-w</span><span style=" font-family:'Sans'; font-size:12pt;">, а вы не хотели бы получать дополнительные сообщения. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC54"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Опция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC54"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">`--print-directory'</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`-W </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX687"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--what-if=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX688"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--new-file=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX689"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">--assume-new=</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX690"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Притвориться&quot;, что цель </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> только что была модефицирована. Будучи использована совместно с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;">, покажет, какие действия будут выполнены если этот файл действительно будет модефицирован. Без опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-n'</span><span style=" font-family:'Sans'; font-size:12pt;">, эффект сходен с выполнением команды </span><span style=" font-family:'monospace'; font-size:12pt;">touch</span><span style=" font-family:'Sans'; font-size:12pt;"> для указанного файла с последующим запуском </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, за исключеним того, что время последней модефикации этого файла происходит только в &quot;воображении&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`--warn-undefined-variables'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX691"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">огда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет встречать ссылки на неопределенные переменные, будут выдаваться соответствующие предупреждающие сообщения. Это может оказаться полезным при отладке make-файлов, в которых переменные используются нетривиальным образом. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC93"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC93"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование неявных правил (implicit rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX694"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">екоторые &quot;стандартные&quot; способы обновления целевых файлов используются очень часто. Например, одним из типичных способов порождения объектного файла является его получение из соответствующего исходного файла на языке Си с использованием программы </span><span style=" font-family:'monospace'; font-size:12pt;">cc</span><span style=" font-family:'Sans'; font-size:12pt;"> (компилятора языка Си). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Неявные правила (implicit rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> указывают </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> на некоторые &quot;стандартные&quot; приемы обработки файлов, дабы пользователь мог использовать их, не занимаясь каждый раз детальным описанием способа обработки. Так, например, имеется неявное правило для компиляции исходных файлов на языке Си. Вопрос о запуске тех или иных правил решается исходя из имен обрабатываемых файлов. Как правило, например, при компиляции программ на Си, из &quot;входного&quot; файла с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается файл с расширением </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, при наличии подобной комбинации расширений файлов, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может применить к ним неявное правило для компиляции Си-программ. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Неявные правила могут применяться последовательно, связываюсь в &quot;цепочки&quot;; так например, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может получить файл </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.y'</span><span style=" font-family:'Sans'; font-size:12pt;">, используя &quot;промежуточный&quot; файл </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Во встроенных неявных правилах используются некоторые переменные, изменяя которые, можно влиять на работу этих правил. Так, например, в неявном правиле для компиляции Си-программ используется переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащая передаваемые компилятору опции. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC96"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Используемые в неявных правилах переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете определить свои собственные неявные правила с помощью </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">шаблонных правил (pattern rules)</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Суффиксные правила (suffix rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> - более ограниченный (и устаревший) механизм задания неявных правил. Механизм шаблонных правил является более общим и понятным, однако суффиксные правила по-прежнему поддерживаются из соображений обеспечения совместимости. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC94"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC94"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование неявных правил (implicit rules)</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX696"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля того, чтобы предоставить </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> возможность использовать &quot;общепринятую&quot; методику для обновления целевого файла, достаточно воздержаться от самостоятельного задания команд. Для этого, можно либо задать правило, не содержащее команд, либо вообще не задавать правила. Исходя из имеющихся в наличии исходных файлов, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> решит, каким неявным правилом следует воспользоваться. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Представьте себе такой фрагмент make-файла: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo : foo.o bar.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -o foo foo.o bar.o $(CFLAGS) $(LDFLAGS) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поскольку, вы упомянули файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, но не указали правила для его создания, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически попробует найти неявное правило, с помощью которого можно этот файл обновить. Такая попытка будет произведена независимо от того, существует ли в данный момент файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> или нет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В случае, если неявное правило найдено, из него могут быть получены как нужные команды, так и пререквизиты (исходные файлы). Для задания дополнительных пререквизитов, которые не могут быть получены из неявного правила (например, заголовочных файлов), вы можете написать дополнительное правило для </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> без указания команд. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждое неявное правило имеет шаблон цели и шаблоны пререквизитов. Один и тот же шаблон цели может фигурировать сразу в нескольких неявных правилах. Например, сразу несколько правил описывают создание файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">: одно - из файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью компилятора языка Си; другое - из файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью компилятора языка Паскаль; и так далее. В действительности, будет использовано то правило, чьи пререквизиты существуют или могут быть получены. Так, если у вас имеется файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> запустит компилятор Си; в противном случае, если у вас есть файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.p'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> запустит компилятор Паскаля; и так далее. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Разумеется, составляя make-файл, вы заранее представляете, какие именно неявные правила вы хотели бы использовать. Ваша уверенность, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выберет нужные правила, основана на том, что вы знаете, какие именно файлы пререквизитов реально существуют. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC95"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Перечень имеющихся неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где приведен полный список встроенных неявных правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выше, мы уже сказали, что неявное правило может быть использовано в том случае, если его пререквизиты &quot;существуют или могут быть построены&quot;. Считается, что файл &quot;может быть построен&quot;, если его имя упоминается в make-файле в качестве цели или пререквизита, или же для его построения может быть использовано подходящее неявное правило. В случае, когда пререквизит одного неявного правила является результатом работы другого неявного правила, мы говорим, что эти правила связаны в </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">цепочку</span><span style=" font-family:'Sans'; font-size:12pt;"> (происходит </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">chaining</span><span style=" font-family:'Sans'; font-size:12pt;">). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В общем случае, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> производит поиск подходящих неявных правил для каждой цели и каждого правила с двойным двоеточием, которые не имеют команд. Файлы, упоминаемые только в качестве пререквизитов, расматриваются как цели, описанные в &quot;пустых&quot; правилах (без пререквизитов и команд), поэтому к таким файлам также могут быть применены неявные правила. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC107"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Алгоритм поиска неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где детально описана процедура поиска подходящих неявных правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Заметьте, что явное указание пререквизитов не влияет на процедуру поиска неявных правил. Рассмотрим, например, следующее явное правило: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o: foo.p </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Наличие пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> не означает, что для получения объектного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обязательно будет использовать неявное правило, описывающее получение файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> из исходного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> на языке Паскаль. Например, при наличии файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо неявного правила компиляции исходных файлов на Паскале, будет использовано правило для компиляции исходных файлов на Си, поскольку в списке предопределенных неявных правил оно находится ближе к началу списка (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC95"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Перечень имеющихся неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы не хотите, чтобы неявное правило было использовано для цели, не имеющей команд, задайте для этой цели пустую команду с помощью символа </span><span style=" font-family:'monospace'; font-size:12pt;">';'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC56"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Пустые команды</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC95"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC95"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еречень имеющихся неявных правил</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX698"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">иже приведен полный список предопределенных неявных правил. Эти правила доступны всегда, если только make-файл явно не заменяет или не отменяет их. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC104"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Отмена действия неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где обсуждается вопрос перекрытия и отмены действия неявных правил. Опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`--no-builtin-rules'</span><span style=" font-family:'Sans'; font-size:12pt;"> отменяют все предопределенные правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Даже в отсутствие опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;">, не всегда все эти правила являются определенными. Дело в том, что многие из них реализованы в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в виде суффиксных правил, поэтому список действительно определенных правил будет зависеть от используемого </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">списка суффиксов</span><span style=" font-family:'Sans'; font-size:12pt;"> (списка пререквизитов специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">). По умолчанию используется следующий список суффиксов: </span><span style=" font-family:'monospace'; font-size:12pt;">.out</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.a</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.ln</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.o</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.c</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.cc</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.C</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.p</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.f</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.F</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.r</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.y</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.l</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.s</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.S</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.mod</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.sym</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.def</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.h</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.info</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.dvi</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.tex</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.texinfo</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.texi</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.txinfo</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.w</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.ch</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">.web</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.sh</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.elc</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">.el</span><span style=" font-family:'Sans'; font-size:12pt;">. Все описанные ниже неявные правила, чьи пререквизиты имеют одно из перечисленных расширений, на самом деле являются суффиксными правилами. Если вы модефицируете список суффиксов, &quot;в силе&quot; останутся только те предопределенные правила, чьи суффиксы остались в этом списке; прочие правила будут &quot;отключены&quot;. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где подробно описаны суффиксные правила. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программ на языке Си </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX700"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> при помощи команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC) -c $(CPPFLAGS) $(CFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программ на языке C++ </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX705"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.cc'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.C'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CXX) -c $(CPPFLAGS) $(CXXFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Мы рекомендуем вам пользоваться суффиксом </span><span style=" font-family:'monospace'; font-size:12pt;">`.cc'</span><span style=" font-family:'Sans'; font-size:12pt;"> (вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`.C'</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программ на языке Паскаль </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX709"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(PC) -c $(PFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программ на языках Фортран и Ратфор </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX712"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.r'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.F'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.f'</span><span style=" font-family:'Sans'; font-size:12pt;"> при помощи компилятора Фортрана. При этом, используются следующие команды: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`.f'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(FC) -c $(FFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`.F'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(FC) -c $(FFLAGS) $(CPPFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`.r'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(FC) -c $(FFLAGS) $(RFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Препроцессорная обработка программ на языках Фортран и Ратфор </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.f'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.r'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.F'</span><span style=" font-family:'Sans'; font-size:12pt;">. При этом, исходный текст на Ратфоре или Фортране пропускается через препроцессор для получения &quot;обычной&quot; фортрановской программы. Для этого, используются следующие команды: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`.F'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(FC) -F $(CPPFLAGS) $(FFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`.r'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(FC) -F $(FFLAGS) $(RFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программ на языке Modula-2 </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX718"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.sym'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.def'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(M2C) $(M2FLAGS) $(DEFFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.mod'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(M2C) $(M2FLAGS) $(MODFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ассемблирование и препроцессорная обработка ассемблерных программ </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX723"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.s'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем запуска ассемблера (</span><span style=" font-family:'monospace'; font-size:12pt;">as</span><span style=" font-family:'Sans'; font-size:12pt;">). Для этого используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(AS) $(ASFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><a name="IDX726"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.s'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.S'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью препроцессора языка Си (</span><span style=" font-family:'monospace'; font-size:12pt;">cpp</span><span style=" font-family:'Sans'; font-size:12pt;">). При этом используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CPP) $(CPPFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компоновка одиночного объектного файла </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX727"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем запуска компоновщика (обычно, </span><span style=" font-family:'monospace'; font-size:12pt;">ld</span><span style=" font-family:'Sans'; font-size:12pt;">) с помощью компилятора Си. Для этого используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC) $(LDFLAGS) </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o $(LOADLIBES) $(LDLIBS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это правило будет работать правильно как в простейшем случае, когда текст программы состоит только из одного исходного файла, так и в более сложной ситуации, когда программа состоит из нескольких объектных файлов, один из которых имеет имя, соответствующее имени исполняемого файла. Таким образом, обрабока правила </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">x: y.o z.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">при наличии файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`x.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`y.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`z.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, вызовет выполнение команд: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -c x.c -o x.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -c y.c -o y.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -c z.c -o z.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc x.o y.o z.o -o x</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">rm -f x.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">rm -f y.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">rm -f z.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В более сложных ситуациях, когда, например, отсутствует объектный файл, чье имя соответствует имени исполняемого файла, вам придется задать явное правило для компоновки программы. Все типы файлов, автоматически преобразуемые в объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, автоматически компонуются путем вызова соответствующего компилятора (</span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC)'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`$(FC)'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`$(PC)'</span><span style=" font-family:'Sans'; font-size:12pt;">; компилятора Си </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC)'</span><span style=" font-family:'Sans'; font-size:12pt;"> для ассемблирования файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.s'</span><span style=" font-family:'Sans'; font-size:12pt;">) без опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для ускорения работы, компиляция и компоновка делается за один шаг (вместо того, чтобы использовать объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве промежуточных). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Генерация программы на Си с помощью Yacc </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX730"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем запуска программы Yacc с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(YACC) $(YFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Генерация программы на Си с помощью Lex </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX733"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.l'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью программы Lex. При этом, используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(LEX) $(LFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Генерация программы на Ратфоре с помощью Lex </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.r'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.l'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью программы Lex. Для этого используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(LEX) $(LFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Соглашение об использовании суффикса </span><span style=" font-family:'monospace'; font-size:12pt;">`.l'</span><span style=" font-family:'Sans'; font-size:12pt;"> для всех Lex-файлов, независимо от того, должны ли они преобразовываться в код на языках Си или Ратфор, делает невозможным автоматическое определение используемого в данном случае языка. При необходимости получения объектного файла из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.l'</span><span style=" font-family:'Sans'; font-size:12pt;">, программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> должна решить - какой компилятор нужно использовать. Она будет использовать компилятор Си, поскольку он более распространен. Если вы используете язык Ратфор, убедитесь в том, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> знает об этом. Для этого достаточно, чтобы нужный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.r'</span><span style=" font-family:'Sans'; font-size:12pt;"> был упомянут в make-файле. Или, если вы пользуетесь исключительно Ратфором и не используете Си, удалите </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> из списка суффиксов для неявных правил: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES: .o .r .f .l ... </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Получение Lint-библиотек из исходных файлов на Си, Yacc или Lex </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX736"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.ln'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем запуска </span><span style=" font-family:'monospace'; font-size:12pt;">lint</span><span style=" font-family:'Sans'; font-size:12pt;">. При этом, используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(LINT) $(LINTFLAGS) $(CPPFLAGS) -i'</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта же команда используется для Си-программ, полученных из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.l'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Файлы программ TeX и Web </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX739"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.dvi'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.tex'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(TEX)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.tex'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.web'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`$(WEAVE)'</span><span style=" font-family:'Sans'; font-size:12pt;">, или из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.w'</span><span style=" font-family:'Sans'; font-size:12pt;"> (и из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.ch'</span><span style=" font-family:'Sans'; font-size:12pt;"> если такой файл существует или может быть получен) с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CWEAVE)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.web'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`$(TANGLE)'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.w'</span><span style=" font-family:'Sans'; font-size:12pt;"> (и из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.ch'</span><span style=" font-family:'Sans'; font-size:12pt;"> если такой существует или может быть создан) с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CTANGLE)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Файлы программ Texinfo и Info </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX751"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.dvi'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.texinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.texi'</span><span style=" font-family:'Sans'; font-size:12pt;">, или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.txinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">, с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(TEXI2DVI) $(TEXI2DVI_FLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.info'</span><span style=" font-family:'Sans'; font-size:12pt;"> получается из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.texinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.texi'</span><span style=" font-family:'Sans'; font-size:12pt;">, или </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.txinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">, с помощью команды </span><span style=" font-family:'monospace'; font-size:12pt;">`$(MAKEINFO) $(MAKEINFO_FLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">RCS </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX759"></a><span style=" font-family:'Sans'; font-size:12pt;">Л</span><span style=" font-family:'Sans'; font-size:12pt;">юбой файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> при необходимости может быть извлечен из RCS-файла с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">,v'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`RCS/</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">,v'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для этого используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CO) $(COFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Если файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> уже существует, он не будет извлекаться из RCS-файла, даже если этот RCS-файл является более &quot;новым&quot;. Правила для RCS являются терминальными (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC103"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Шаблонные правила с призвольным соответствием</span></a><span style=" font-family:'Sans'; font-size:12pt;">), поэтому RCS-файлы не могут быть получены из других файлов - они должны действительно существовать. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">SCCS </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX762"></a><span style=" font-family:'Sans'; font-size:12pt;">Л</span><span style=" font-family:'Sans'; font-size:12pt;">юбой файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> при необходимости может быть извлечен SCCS-файла с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`s.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`SCCS/s.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для этого используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`$(GET) $(GFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Правила для SCCS являются терминальными (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC103"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Шаблонные правила с призвольным соответствием</span></a><span style=" font-family:'Sans'; font-size:12pt;">), поэтому SCCS-файлы не могут быть получены из других файлов - они должны в действительности существовать. </span><a name="IDX765"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри работе с системой SCCS, файл с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.sh'</span><span style=" font-family:'Sans'; font-size:12pt;"> извлекается в файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> и его атрибуты устанавливаются как &quot;исполняемый всеми (everyone)&quot;. Это делается для нормальной работы скриптов, помещаемых в SCCS. При работе с системой RCS подобных манипуляций не производится, поскольку она запоминает атрибуты помещаемых в нее файлов. Мы не рекомендуем вам использовать систему SCCS. Общепризнано, что RCS более совершенна и, к тому же, является свободным программным обеспечением. Используя свободное программное обеспечение вместо аналогичного или даже худшего &quot;закрытого&quot; (proprietary) программного обеспечения, вы, тем самым, поддерживаете движение за свободное программное обеспечение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Как правило, у вас может возникнуть необходимость в изменении только упоминаемых выше переменных (все они перечислены в следующем разделе). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, на самом деле, для выполнения команд, предопределенные неявные правила используют такие переменные, как </span><span style=" font-family:'monospace'; font-size:12pt;">COMPILE.c</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">LINK.p</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">PREPROCESS.S</span><span style=" font-family:'Sans'; font-size:12pt;">, которые содержат указанные выше команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> следует соглашению, согласно которому, правило, описывающее процесс компиляции исходного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">, использует переменную </span><span style=" font-family:'monospace'; font-size:12pt;">COMPILE.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'Sans'; font-size:12pt;">. Аналогично, правило для получения исполняемого файла из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> использует переменную </span><span style=" font-family:'monospace'; font-size:12pt;">LINK.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'Sans'; font-size:12pt;">, а правило для препроцессорной обработки файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> использует переменную </span><span style=" font-family:'monospace'; font-size:12pt;">PREPROCESS.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX766"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">аждое правило, создающее объектный файл, использует переменную </span><span style=" font-family:'monospace'; font-size:12pt;">OUTPUT_OPTION</span><span style=" font-family:'Sans'; font-size:12pt;">. В зависимости от опций, с которыми была скомпилирована программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, она определяет эту переменную как содержащую строку </span><span style=" font-family:'monospace'; font-size:12pt;">`-o $@'</span><span style=" font-family:'Sans'; font-size:12pt;"> или как пустую. Опция </span><span style=" font-family:'monospace'; font-size:12pt;">`-o'</span><span style=" font-family:'Sans'; font-size:12pt;"> нужна для того, чтобы выходные файлы помещались в нужное место, если исходные файлы находятся в других каталогах (например, при использовании </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC26"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Поиск пререквизитов по каталогам</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Однако, компиляторы в некоторых системах не допускают использования опции </span><span style=" font-family:'monospace'; font-size:12pt;">`-o'</span><span style=" font-family:'Sans'; font-size:12pt;"> для объектных файлов. Если у вас именно такая система и вы используете </span><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;">, некоторые скопилированные файлы могут быть помещены в &quot;неверные&quot; каталоги. Для обхода этой проблемы, поместите в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">OUTPUT_OPTION</span><span style=" font-family:'Sans'; font-size:12pt;"> строку </span><span style=" font-family:'monospace'; font-size:12pt;">`; mv $*.o $@'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC96"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC96"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользуемые в неявных правилах переменные</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX767"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">оманды, содержащиеся во &quot;встроенных&quot; неявных правилах, широко используют некоторые предопределенные переменные. Вы можете изменять эти переменные внутри make-файла, с помощью аргументов, передаваемых программе </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> или с помощью переменных среды, влияя, таким образом, на работу неявных правил. Переменные, используемые неявными правилами, могут быть &quot;отключены&quot; с помощью опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-R'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--no-builtin-variables'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, команда для компиляции исходных текстов на Си выглядит как </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC) -c $(CFLAGS) $(CPPFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;">. По умолчанию, первая переменная содержит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`cc'</span><span style=" font-family:'Sans'; font-size:12pt;">, остальные - пустое значение. В результате, используется команда </span><span style=" font-family:'monospace'; font-size:12pt;">`cc -c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Присвоив переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`CC'</span><span style=" font-family:'Sans'; font-size:12pt;"> значение </span><span style=" font-family:'monospace'; font-size:12pt;">`ncc'</span><span style=" font-family:'Sans'; font-size:12pt;">, вы заставите </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> использовать </span><span style=" font-family:'monospace'; font-size:12pt;">`ncc'</span><span style=" font-family:'Sans'; font-size:12pt;"> для всех компиляций Си-программ, выполняемых предопределенными неявными правилами. Задав переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`CFLAGS'</span><span style=" font-family:'Sans'; font-size:12pt;"> значение </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;">, вы можете включить опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;"> для всех выполняемых неявными правилами компиляций. </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Все</span><span style=" font-family:'Sans'; font-size:12pt;"> неявные правила, выполняющие компиляцию программ на Си, используют переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC)'</span><span style=" font-family:'Sans'; font-size:12pt;"> для получения имени используемого компилятора и переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CFLAGS)'</span><span style=" font-family:'Sans'; font-size:12pt;"> для передачи компилятору требуемых опций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменные, используемые в неявных правилах, можно разделить на два класса: переменные для хранения имен программ (такие, как </span><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;">) и переменные для передачи аргументов (такие, как </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">). (&quot;Имя программы&quot;, на самом деле, может включать в себя какие-то дополнительные аргументы, но в любом случае оно должно начинаться с имени исполняемого файла программы.) Если значение переменной содержит более одного аргумента, они должны быть разделены пробелами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот список переменных, используемых в неявных правилах для хранения имен программ: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">AR</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX768"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма работы с архивами; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`ar'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">AS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX770"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">ссемблер; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`as'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CC</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX772"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">омпилятор Си; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`cc'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CXX</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX774"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">омпилятор C++; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`g++'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CO</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX776"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для извлечения файлов из RCS; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`co'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CPP</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX778"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">репроцессор языка Си, выдающий результат на стандартный вывод; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`$(CC) -E'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FC</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX779"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">репроцессор и компилятор для Фортрана и Ратфора; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`f77'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">GET</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX781"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для извлечения файлов из SCCS; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`get'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LEX</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX783"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для преобразования Lex-грамматики в текст на языках Си или Ратфор; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`lex'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">PC</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX785"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">омпилятор Паскаля; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`pc'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">YACC</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX787"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для преобразования Yacc-грамматики в текст на Си; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`yacc'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">YACCR</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX789"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для преобразования Yacc-грамматики в текст на языке Ратфор; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`yacc -r'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKEINFO</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX790"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для преобразования исходного файла формата Texinfo в файл формата Info; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`makeinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">TEX</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX792"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма для преобразования исходных файлов на TeX в файлы формата DVI; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`tex'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">TEXI2DVI</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX794"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма, преобразующая исходные файлы в формате Texinfo, в DVI-файлы программы TeX; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`texi2dvi'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">WEAVE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX796"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма, преобразующая текст из формата Web в формат TeX; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`weave'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CWEAVE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX798"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма, преобразующая текст на Си-Web в формат TeX; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`cweave'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">TANGLE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX800"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма, преобразующая текст на Web в Паскаль; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`tangle'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CTANGLE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX802"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">рограмма, преобразующая текст на Си-Web в текст на Си; по умолчанию - </span><span style=" font-family:'monospace'; font-size:12pt;">`ctangle'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">RM</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX804"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">оманда удаления файла; по умолчанию, </span><span style=" font-family:'monospace'; font-size:12pt;">`rm -f'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ниже приведена таблица переменных, содержащих дополнительные параметры для перечисленных выше программ. По умолчанию, значением этих переменных является пустая строка (если не указано другое). </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ARFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX806"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пции, передаваемые программе, манипулирующей с архивными файлам; по умолчанию </span><span style=" font-family:'monospace'; font-size:12pt;">`rv'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ASFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX807"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые ассемблеру (при его явном вызове для файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.s'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`.S'</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX808"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые компилятору Си. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CXXFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX809"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые компилятору C++. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">COFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX810"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые программе </span><span style=" font-family:'monospace'; font-size:12pt;">co</span><span style=" font-family:'Sans'; font-size:12pt;"> (входящей в систему RCS). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CPPFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX811"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые препроцессору языка Си и программам, его использующим (компиляторам Си и Фортрана). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">FFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX812"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры для компилятора Фортрана. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">GFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX813"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые программе </span><span style=" font-family:'monospace'; font-size:12pt;">get</span><span style=" font-family:'Sans'; font-size:12pt;"> (входящей в систему SCCS). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LDFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX814"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые компиляторам, когда предполагается вызов компоновщика </span><span style=" font-family:'monospace'; font-size:12pt;">`ld'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX815"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые программе Lex. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">PFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX816"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые компилятору Паскаля. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">RFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX817"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые компилятору Фортрана при компиляции программ на Ратфоре. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">YFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX818"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ополнительные параметры, передаваемые программе Yacc. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC97"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC97"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Цепочки&quot; (chains) неявных правил</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX819"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> некоторых случаях, файл может быть получен путем последовательного применения нескольких неявных правил. Например, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью программы Yacc и последующего запуска компилятора </span><span style=" font-family:'monospace'; font-size:12pt;">cc</span><span style=" font-family:'Sans'; font-size:12pt;">. Подобная последовательность называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">цепочкой (chain)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> существует или упоминается в make-файле, то ситуация проста - </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;догадается&quot; что объектный файл может быть построен путем компиляции из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">; далее, при рассмотрении способа получения </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, будет использовано правило для запуска Yacc. В результате, оба файла - </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, будут обновлены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX821"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">днако, даже если файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> не существует и не упоминается в make-файле, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> знает, как &quot;восстановить&quot; недостающее звено между </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.y'</span><span style=" font-family:'Sans'; font-size:12pt;">! В этом случае, </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">промежуточным (intermediate) файлом</span><span style=" font-family:'Sans'; font-size:12pt;">. Как только </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> решит воспользоваться промежуточным файлов, он будет занесен в &quot;базу данных&quot; также, как если бы он упоминался в make-файле. Туда же добавляется неявное правило, описывающее процесс создания промежуточного файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Промежуточные файлы порождаются практически также, как и &quot;обычные&quot; файлы. Имеется, однако, два отличия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Первое отличие проявляется в случае, когда промежуточный файл не существует. Если &quot;обычный&quot; файл </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> не существует и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> рассматривает цель, зависящую от </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;">, всегда сначала будет создан файл </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;">, а затем будет обновлена зависящая от него цель. Однако, если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> является промежуточным файлом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может оставить &quot;все как есть&quot;. Она не будет беспокоиться об обновлении </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> или рассматриваемой цели, если только какой-нибудь из пререквизитов </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> не являются &quot;более новым&quot;, чем цель, или имеются какие-либо другие причины для обновления цели. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Второе отличие состоит в том, что если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">создала</span><span style=" font-family:'Sans'; font-size:12pt;"> промежуточный файл </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> для того, чтобы обновить что-нибудь еще, файл </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'Sans'; font-size:12pt;"> будет потом удален (когда он станет больше не нужен). Таким образом, если до запуска </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> промежуточный файл не существовал, его не будет и после завершения работы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> сообщит вам об удалении, печатая для каждого удаляемого файла соответствующую команду </span><span style=" font-family:'monospace'; font-size:12pt;">`rm -f'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, файл не может считаться промежуточным, если он упоминается в make-файле в качестве цели или пререквизита. Однако, вы можете явно пометить файл как промежуточный, указав его в качестве пререквизита специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.INTERMEDIATE</span><span style=" font-family:'Sans'; font-size:12pt;">. Это сработает даже в том случае, если рассматриваемый файл тем или иным образом упоминается &quot;явно&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX823"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ы можете предотвратить автоматическое удаление промежуточного файла, пометив его как </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">вторичный (secondary)</span><span style=" font-family:'Sans'; font-size:12pt;"> Для этого, укажите нужный файл в качестве пререквизита специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SECONDARY</span><span style=" font-family:'Sans'; font-size:12pt;">. Когда файл считается вторичным, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет создавать его без крайней необходимости, и, в тоже время, не будет автоматически удалять его. Помечая файл как вторичный, вы также помечаете его как промежуточный. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Указав шаблон неявного правила (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o'</span><span style=" font-family:'Sans'; font-size:12pt;">) в качестве пререквизита специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.PRECIOUS</span><span style=" font-family:'Sans'; font-size:12pt;">, можно предотвратить автоматическое удаление промежуточных файлов, полученных с помощью неявных правил, чьи цели подходят под этот шаблон; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC49"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Прерывание или принудительное завершение </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC49"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">&quot;Цепочка&quot; может состоять более чем из двух неявных правил. Например, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из </span><span style=" font-family:'monospace'; font-size:12pt;">`RCS/foo.y,v'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем последовательного запуска RCS, Yacc и </span><span style=" font-family:'monospace'; font-size:12pt;">cc</span><span style=" font-family:'Sans'; font-size:12pt;">. В этом случае, оба файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> считаются промежуточными и будут в конце удалены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ни одно из неявных правил не может использоваться в цепочке правил более одного раза. Это, например, означает, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> даже не будет пытаться получить файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> из </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем двухкратного запуска компоновщика. Помимо всего прочего, это ограничение предотвращает возможное зацикливание в процессе поиска подходящих неявных правил для построения цепочки. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Несколько специальных неявных правил предназначены для оптимизации распространенных случаев, которые, в противном случае, обрабатывались бы с помощью цепочки правил. Например, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем поочередной компиляции и компоновки с использованием отдельных правил, связанных в цепочку (при этом, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет рассматриваться как промежуточный файл). На самом деле, для этого случая существует специальное правило, осуществляющее компиляцию и компоновку за &quot;один шаг&quot;, однократным вызовом команды </span><span style=" font-family:'monospace'; font-size:12pt;">cc</span><span style=" font-family:'Sans'; font-size:12pt;">. Оптимизированное правило используется вместо цепочки правил, поскольку находится ближе к началу списка правил. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC98"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC98"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">пределение и переопределение шаблонных правил (pattern rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете задать неявное правило, написав </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">шаблонное правило (pattern rule)</span><span style=" font-family:'Sans'; font-size:12pt;">. Шаблонное правило выглядит подобно обычному правилу, за исключением того, что имя его цели содержит специальный шаблонный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> (в точности один). Цель рассматривается как шаблон имени файлов; символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> может соответствовать любой непустой подстроке, прочие символы должны совпадать. В именах пререквизитов также используется символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, показывающий, как их имена связаны с именем цели. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Так, шаблонное правило </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o : %.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> показывает, как файлы с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">основа</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> могут быть получены из соответствующих файлов с именами </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">основа</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обратите внимание, что &quot;расширение&quot; символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в шаблонном правиле прозводится </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">после</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисления всех переменных и функций (что имеет место в момент чтения make-файла). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;"> и раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC99"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC99"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">В</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ведение в шаблонные правила (pattern rules)</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX828"></a><span style=" font-family:'Sans'; font-size:12pt;">Ш</span><span style=" font-family:'Sans'; font-size:12pt;">аблонное правило содержит в имени цели символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> (в точности один); в остальном, оно выглядит как обычное правило. Цель является шаблоном, с которым сверяются имена файлов; символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> может соответствовать любой непустой строке, другие символы должны в точности совпадать. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, шаблону </span><span style=" font-family:'monospace'; font-size:12pt;">`%.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяют все имена файлов, оканчивающиеся на </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Под шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`s.%.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> подходят все имена файлов, которые начинаются с </span><span style=" font-family:'monospace'; font-size:12pt;">`s.'</span><span style=" font-family:'Sans'; font-size:12pt;">, заканчиваются на </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и имеют длину по крайней мере пять символов. (Требуется, по крайней мере, один символ для сопоставления с </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Подстрока, которая соответствует символу</span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">основой (stem)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в пререквизите шаблонного правила означает ту же основу, которая соответствует символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в имени цели. Для того, чтобы шаблонное правило могло быть применено к рассматриваемому файлу, имя этого файла должно подходить под шаблон цели, а из шаблонов пререквизитов должны получиться имена файлов, которые существуют или могут быть получены. Эти файлы станут пререквизитами рассматриваемого целевого файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, правило вида </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.o : %.c ; </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span><span style=" font-family:'monospace'; font-size:12pt;">... </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">указывает, как файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, являющегося его пререквизитом, при условии, что </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> существует или может быть создан. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В шаблонном правиле также могут присутствовать пререквизиты, не использующие шаблонный символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">; такие пререквизиты будут добавлены к каждому файлу, полученному с помощью этого шаблонного правила. Такие &quot;константные&quot; пререквизиты иногда могут оказаться полезными. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Шаблонное правило не обязано содержать пререквизитов с </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Более того, оно вообще не обязано иметь каких-либо пререквизитов. Такое правило можно рассматривать как &quot;обобщенный&quot; шаблон. Оно будет описывать способ получения любых файлов, подходящих под шаблон цели. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC105"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Определение правил &quot;последнего шанса&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Шаблонные правила могут иметь несколько целей. Однако, в отличие от обычных правил, такой случай не рассматривается как несколько правил с одними и теми же пререквизитами и командами. Наличие в шаблонном правиле нескольких целей, означает для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, что указанные в правиле команды обновляют сразу все перечисленные цели. Команды правила исполняются только один раз, вызывая обновление всех целей. Когда выполняется поиск подходящего шаблонного правила для обрабатываемой цели, прочие присутствующие в правиле шаблоны целей не принимаются во внимание: для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> существенны лишь указанные в правиле пререквизиты и команды рассматриваемой цели. Однако, после выполнения команд, обновляющих эту цель, все прочие цели, перечисленные в шаблонном правиле, также помечаются как обновленные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Порядок следования шаблонных правил в make-файле является существенным, посколько именно в этом порядке они рассматриваются. Из нескольких подходящих правил будет использовано только первое из найденных. Написанные вами правила имеют &quot;приоритет&quot; над предопределенными правилами. Помните, однако, что правила, чьи пререквизиты в действительности существуют или могут быть построены, всегда имеют больший приоритет, нежели правила, чьи пререквизиты, для своего построения, требуют использовать цепочки неявных правил. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC100"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC100"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">римеры шаблонных правил</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот несколько примеров шаблонных правил, в действительности предопределенных в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Сперва, правило, компилирующее файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.o : %.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">С помощью этого правила, любой файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из соответствующего файла </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для того, чтобы при каждом применении этого правила, использовались правильные имена целевого и исходного файлов, его команда использует автоматические переменные </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот другое встроенное правило: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">% :: RCS/%,v</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CO) $(COFLAGS) $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">С его помощью, любой файл </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть получен из соответствующего файла </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">,v'</span><span style=" font-family:'Sans'; font-size:12pt;">, находящегося в подкаталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`RCS'</span><span style=" font-family:'Sans'; font-size:12pt;">. Так как в качестве имени цели указан шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, это правило может быть применено к любому файлу, имеющему подобный пререквизит. Двойное двоеточие определяет это правило как </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">терминальное (terminal)</span><span style=" font-family:'Sans'; font-size:12pt;">, вследствие чего, его пререквизит не может быть промежуточным файлом. (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC103"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Шаблонные правила с призвольным соответствием</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующее правило имеет две цели: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.tab.c %.tab.h: %.y</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        bison -d $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правило говорит о том, что выполнение команды </span><span style=" font-family:'monospace'; font-size:12pt;">`bison -d </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> приведет к созданию обоих файлов - </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.tab.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.tab.h'</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, если файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, а файл </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> зависит от файла </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, то при изменении </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.y'</span><span style=" font-family:'Sans'; font-size:12pt;">, команда </span><span style=" font-family:'monospace'; font-size:12pt;">`bison -d parse.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет запущена только один раз, в результате чего пререквизиты обоих файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, будут обновлены. (Предполагается, что файл </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет скомпилирован из </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, а файл </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> - из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. В свою очередь, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;"> компонуется из </span><span style=" font-family:'monospace'; font-size:12pt;">`parse.tab.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`scan.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и прочих, после чего успешно работает.) </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC101"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC101"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">втоматические переменные</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX837"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">редположим, вы хотите написать шаблонное правило для компиляции файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в объектные файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">: каким образом вам задать правильное имя исходного файла для команды </span><span style=" font-family:'monospace'; font-size:12pt;">`cc'</span><span style=" font-family:'Sans'; font-size:12pt;">? Вы не можете явно указать имя файла, поскольку это имя будет различным в каждом случае использования данного правила. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, вам придется воспользоваться так называемыми </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">автоматическими переменными</span><span style=" font-family:'Sans'; font-size:12pt;">. Значения этих переменных автоматически вычисляются заново для каждого исполняемого правила в зависимости от его целей и пререквизитов. В приведенном выше примере вам следует использовать </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве имени объектного файла и </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве имени исходного файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот полный перечень имеющихся автоматических переменных: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$@</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX840"></a><span style=" font-family:'Sans'; font-size:12pt;">И</span><span style=" font-family:'Sans'; font-size:12pt;">мя файла цели правила. Если цель является элементом архива (archive member), то </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> обозначает имя архивного файла. В шаблонном правиле с несколькими целями (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC99"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Введение в шаблонные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">), </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> обозначает имя цели, которая вызывала запуск команд данного правила. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$%</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для целей, являющихся элементами архива, обозначает имя этого элемента. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Например, для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.a(bar.o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$%'</span><span style=" font-family:'Sans'; font-size:12pt;"> принимает значение </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, а переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> - значение </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.a'</span><span style=" font-family:'Sans'; font-size:12pt;">. Если цель не является элементом архива, </span><span style=" font-family:'monospace'; font-size:12pt;">`$%'</span><span style=" font-family:'Sans'; font-size:12pt;"> имеет пустое значение. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$&lt;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя первого пререквизита. В случае, если выполняемые команды относятся к неявному правилу, первым пререквизитом является тот, который был указан в неявном правиле. (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$?</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена всех пререквизитов (разделенные пробелами), которые являются &quot;более новыми&quot;, чем цель. Для членов архива, используется имя самого элемента (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$^</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена всех пререквизитов (разделенные пробелами). Для пререквизитов, которые являются элементами архивов, используются только имена элементов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Независимого от того, сколько раз конкретный файл был указан в списке пререквизитов, цель будет иметь только одну зависимость от этого файла. Таким образом, если в списке пререквизитов одно и то же имя файла будет фигурировать несколько раз, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">$^</span><span style=" font-family:'Sans'; font-size:12pt;"> все равно будет содержать только одну копию этого имени. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$+</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогично </span><span style=" font-family:'monospace'; font-size:12pt;">`$^'</span><span style=" font-family:'Sans'; font-size:12pt;">, но пререквизиты, перечисленные более, чем один раз, также будут продублированы (в том порядке, как они были указаны в make-файле). В основном, эта переменная может быть полезна в командах компоновки, где порядок следования библиотек и их возможное дублирование является существенным. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$*</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Основа (stem), с которой было сопоставлено неявное правило (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC102"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Процедура сопоставления с шаблоном</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Например, для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`dir/a.foo.b'</span><span style=" font-family:'Sans'; font-size:12pt;"> и шаблона цели </span><span style=" font-family:'monospace'; font-size:12pt;">`a.%.b'</span><span style=" font-family:'Sans'; font-size:12pt;">, основой будет строка </span><span style=" font-family:'monospace'; font-size:12pt;">`dir/foo'</span><span style=" font-family:'Sans'; font-size:12pt;">. Основа имени может быть полезной для конструирования имен взаимосвязанных файлов. </span><a name="IDX858"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> статическом шаблонном правиле, основой является часть имени файла, соотвествующая символу </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> в шаблоне цели. Для явного правила такое определение неприменимо, поэтому </span><span style=" font-family:'monospace'; font-size:12pt;">`$*'</span><span style=" font-family:'Sans'; font-size:12pt;"> вычисляется по-другому. В случае явного правила, если имя цели имеет один из &quot;известных&quot; суффиксов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">), в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">`$*'</span><span style=" font-family:'Sans'; font-size:12pt;"> записывается имя цели без этого суффикса. Например, для цели </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$*'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет установлена в </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> является одним из &quot;известных&quot; суффиксов. Программа GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поступает столь причудливым образом лишь по соображениям совместимости с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Мы рекомендуем вам избегать использования переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`$*'</span><span style=" font-family:'Sans'; font-size:12pt;"> где-либо, кроме неявных или статических шаблонных правил. В случае, если цель явного правила не имеет один известных </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> суффиксов, для данного правила значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`$*'</span><span style=" font-family:'Sans'; font-size:12pt;"> является пустая строка. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$?'</span><span style=" font-family:'Sans'; font-size:12pt;"> может оказаться полезна даже в явных правилах, когда вы хотите работать только с пререквизитами, которые были изменены. Представьте, например, что архивный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`lib'</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит копии некоторых объектных файлов. Следующее правило запишет в архив копии только изменившихся объектных файлов: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">lib: foo.o bar.o lose.o win.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ar r lib $? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Из всех перечисленных выше переменных, четыре переменные представляют собой одиночные имена файлов, а две переменные - списки имен файлов. Каждая из указанных шести переменных имеет варианты, позволяющие получить вместо полного имени файла только имя каталога, где он расположен, или же только имя файла внутри каталога. Имена этих дополнительных вариантов переменных образуются путем добавления к &quot;основному&quot; имени переменной символов </span><span style=" font-family:'monospace'; font-size:12pt;">`D'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`F'</span><span style=" font-family:'Sans'; font-size:12pt;">, соответственно. В GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> эти варианты переменных можно считать устаревшими, поскольку вместо них лучше использовать функции </span><span style=" font-family:'monospace'; font-size:12pt;">dir</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">notdir</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Заметьте, однако что </span><span style=" font-family:'monospace'; font-size:12pt;">`D'</span><span style=" font-family:'Sans'; font-size:12pt;">-варианты переменных не содержат конечного </span><span style=" font-family:'monospace'; font-size:12pt;">'/'</span><span style=" font-family:'Sans'; font-size:12pt;">, который всегда присутствует на выходе функции </span><span style=" font-family:'monospace'; font-size:12pt;">dir</span><span style=" font-family:'Sans'; font-size:12pt;">. Вот список дополнительных вариантов автоматических переменных: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(@D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX859"></a><span style=" font-family:'Sans'; font-size:12pt;">Ч</span><span style=" font-family:'Sans'; font-size:12pt;">асть имени файла, определяющее имя каталога, где он расположен (без конечного символа </span><span style=" font-family:'monospace'; font-size:12pt;">'/'</span><span style=" font-family:'Sans'; font-size:12pt;">). Например, если значением </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> является </span><span style=" font-family:'monospace'; font-size:12pt;">`dir/foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, то </span><span style=" font-family:'monospace'; font-size:12pt;">`$(@D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> получит значение </span><span style=" font-family:'monospace'; font-size:12pt;">`dir'</span><span style=" font-family:'Sans'; font-size:12pt;">. В случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> не содержит символов </span><span style=" font-family:'monospace'; font-size:12pt;">'/'</span><span style=" font-family:'Sans'; font-size:12pt;">, переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$(@D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(@F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя файла без имени каталога. Например, если значением </span><span style=" font-family:'monospace'; font-size:12pt;">`$@'</span><span style=" font-family:'Sans'; font-size:12pt;"> является </span><span style=" font-family:'monospace'; font-size:12pt;">`dir/foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, то </span><span style=" font-family:'monospace'; font-size:12pt;">`$(@F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет содержать </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. Выражение </span><span style=" font-family:'monospace'; font-size:12pt;">`$(@F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> эквивалентно </span><span style=" font-family:'monospace'; font-size:12pt;">`$(notdir $@)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(*D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX865"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">$(*F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Часть основы, определяющая имя каталога и имя файла внутри каталога, соответственно; в данном примере, это будут строки </span><span style=" font-family:'monospace'; font-size:12pt;">`dir'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`foo'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(%D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX869"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">$(%F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для целей, являющихся элементами архивов, определяет имя каталога и имя файла элемента архива. Эти переменные имеют смысл только целей, которые являются элементами архива (имеющих форму </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">архив</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">) и полезны только в случае, если </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'Sans'; font-size:12pt;"> может содержать имя каталога. (Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC109"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование элементов архива в качестве целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(&lt;D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX873"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">$(&lt;F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя каталога и имя файла (внутри каталога) первого пререквизита. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(^D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX877"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">$(^F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Список каталогов и имен файлов всех пререквизитов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`$(?D)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX881"></a><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt;">$(?F)'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Список каталогов и имен файлов всех пререквизитов, которые являются &quot;более новыми&quot;, чем цель. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете обратить внимание на то, что при ссылке на автоматические переменные, чьи имена состоят из одного символа, мы используем запись вида </span><span style=" font-family:'monospace'; font-size:12pt;">$имя_переменной</span><span style=" font-family:'Sans'; font-size:12pt;">, а не </span><span style=" font-family:'monospace'; font-size:12pt;">$(имя_переменной)</span><span style=" font-family:'Sans'; font-size:12pt;">, как это практикуется для &quot;обычных&quot; переменных. На самом деле, это лишь ничего не значащее стилистическое соглашение. С тем же успехом, мы могли бы писать </span><span style=" font-family:'monospace'; font-size:12pt;">`$(&lt;)'</span><span style=" font-family:'Sans'; font-size:12pt;"> вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC102"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC102"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роцедура сопоставления с шаблоном</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX883"></a><span style=" font-family:'Sans'; font-size:12pt;">Ш</span><span style=" font-family:'Sans'; font-size:12pt;">аблон цели состоит из символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, заключенного между префиксом и суффиксом, каждый из которых (или оба сразу) может быть пустым. Имя файла будет подходить под указанный шаблон только если оно начинается с указанного префикса и заканчивается указанным суффиксом (причем, префикс и суффикс не могут перекрываться). Текст, заключенный между префиксом и суффиксом, называется </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">основой (stem)</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`test.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> удовлетворяет шаблону </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и его основой является строка </span><span style=" font-family:'monospace'; font-size:12pt;">`test'</span><span style=" font-family:'Sans'; font-size:12pt;">. Пререквизиты шаблонного правила преобразуются в имена конкретных файлов, путем подстановки основы вместо символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Так, в приведенном выше примере, из пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`%.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, будет получено имя файла </span><span style=" font-family:'monospace'; font-size:12pt;">`test.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если шаблон цели не содержит символа </span><span style=" font-family:'monospace'; font-size:12pt;">'/'</span><span style=" font-family:'Sans'; font-size:12pt;"> (так, обычно, и происходит), то имя каталога будет удалено из имени рассматриваемого файла, перед тем, как оно будет сравниваться с префиксом и суффиксом шаблона. Далее, после сравнения имени файла с шаблоном, это имя каталога будет опять добавлено к уже сгенерированным именам пререквизитов (имя каталога удалялось лишь для нахождения подходящего неявного правила). Так, имя </span><span style=" font-family:'monospace'; font-size:12pt;">`src/eat'</span><span style=" font-family:'Sans'; font-size:12pt;"> подойдет под шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`e%t'</span><span style=" font-family:'Sans'; font-size:12pt;">, а его основой будет являться </span><span style=" font-family:'monospace'; font-size:12pt;">`src/a'</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, при получении имен пререквизитов, имя каталога, содержащегося в выделенной основе, будет добавляться в начало каждого пререквизита, а оставшаяся часть основы будет подставляться вместо символа </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, основа </span><span style=" font-family:'monospace'; font-size:12pt;">`src/a'</span><span style=" font-family:'Sans'; font-size:12pt;"> в комбинации с шаблоном пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`c%r'</span><span style=" font-family:'Sans'; font-size:12pt;">, даст имя файла </span><span style=" font-family:'monospace'; font-size:12pt;">`src/car'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC103"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC103"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Ш</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">аблонные правила с призвольным (match-anything) соответствием</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX884"></a><span style=" font-family:'Sans'; font-size:12pt;">К</span><span style=" font-family:'Sans'; font-size:12pt;">огда в качестве цели шаблонного правила выступает шаблон </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">, ему может соответствовать любое имя файла. Такие правила мы называем </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">правилами с произвольным (match-anything) соответствием</span><span style=" font-family:'Sans'; font-size:12pt;">. Зачастую, они весьма полезны, но, к сожалению, могут требовать очень много времени для своей обработки, поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> должна будет рассмотреть возможность их применения к любому файлу, указанному в качестве цели или пререквизита. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Допустим, что в make-файле упоминается имя </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для такой цели </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> должна будет рассмотреть возможность компоновки ее из объектного файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, возможность использования компилятора Си для компиляции и компоновки ее из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, возможность использования компилятора Паскаля для компиляции и компоновки ее из файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.p'</span><span style=" font-family:'Sans'; font-size:12pt;">, и множество других аналогичных возможностей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Конечно, мы знаем, что подобные сценарии бессмыслены, поскольку </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> является исходным текстом на языке Си, а не исполняемым файлом. В конце концов </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> также отвергнет подобные возможности, поскольку файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> не будут существовать. Однако, из-за большого числа разнообразных возможностей, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> придется затратить очень много времени на их проверку. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для ускорения работы, мы внесли некоторые ограничения в процесс обработки программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> шаблонных правил с произвольным соответствием. Существуют два возможных вида ограничений. Каждый раз, при задании правила с произвольным соответствие, вы должны выбрать один или другой вид ограничения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Один из вариантов - пометить такое правила как </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">терминальное</span><span style=" font-family:'Sans'; font-size:12pt;">, задав его с помощью двойного двоеточия. Если правило является терминальным, оно может быть применено только в том случае, когда его пререквизит реально существуют. Случаи, когда пререквизит &quot;может быть получен&quot;, не рассматриваются. Иными словами, терминальное правило не может служить &quot;окончанием&quot; цепочки правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, встроенные неявные правила для извлечения исходных файлов из файлов RCS и SCCS, являются терминальными. В результате, например, при отсутствии файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c,v'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будет пытаться получить его из файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c,v.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`RCS/SCCS/s.foo.c,v'</span><span style=" font-family:'Sans'; font-size:12pt;">. Как правило, файлы RCS и SCCS являются действительно &quot;исходными&quot;, и не могут быть получены из любых других файлов; таким образом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> может сэкономить массу времени, не пытаясь найти способ для их обновления. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы не помечаете правило с произвольным соответствием как терминальное, оно будет считаться нетерминальным. Для таких правил существует другое ограничение - они не могут быть применены к файлам, имеющим некоторые &quot;известные&quot; типы. Такими &quot;известными&quot; типами считаются все типы, которые подходят под шаблон цели любого из неявных правил (кроме правил с произвольным соответствием). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Так, например, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> подходит под шаблон цели неявного правила </span><span style=" font-family:'monospace'; font-size:12pt;">`%.c : %.y'</span><span style=" font-family:'Sans'; font-size:12pt;"> (правила для запуска Yacc). Независимо от того, применимо ли в данном случае это правило (это зависит от существования файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.y'</span><span style=" font-family:'Sans'; font-size:12pt;">), самого факта наличия правила с такой целью, достаточно, чтобы предотвратить попытки применения любых нетерминальных правил с произвольным соответствием к файлу </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. Таким образом, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> даже не будет рассматривать возможность получения файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> из таких файлов, как </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.c.p'</span><span style=" font-family:'Sans'; font-size:12pt;"> и так далее. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Смысл этого ограничения состоит в том, что нетерминальные правила с произвольным соответствием используются для создания файлов, содержащих определенный вид данных (например, исполняемых файлов), а файлы с &quot;известными&quot; суффиксами содержат какие-то другие специфические виды данных (например, исходные файлы на Си). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит большое число специальных шаблонных правил-&quot;пустышек&quot;, единственное назначение которых - распознать определенные имена файлов, дабы нетерминальные правила с произвольным соответствием к таким файлам не применялись. Эти правила-&quot;пустышки&quot; не содержат ни команд, ни пререквизитов, и, будучи &quot;бесполезны&quot;, игнорируются во всех других случаях. Так, например, встроенное неявное правило </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.p : </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">существует только для того, чтобы файлы с исходными текстами на Паскале (например, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.p'</span><span style=" font-family:'Sans'; font-size:12pt;">) сопоставлялись с определенным шаблоном цели, и, соответственно, не тратилось время на поиск файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.p.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.p.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и тому подобных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогичные шаблонные правила-&quot;пустышки&quot; существуются для всех суффиксов, которые используются в суффиксных правилах (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC104"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC104"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">тмена действия неявных правил</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете &quot;перекрыть&quot; встроенное неявное правило (или ваше собственное правило), задав новое шаблонное правило, имеющее такую же цель и пререквизиты, но другие команды. При определении нового правила, встроенное правило будет заменено. &quot;Позиция&quot; нового правила в списке неявных правил, будет зависеть от месторасположения его определения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете отменить встроенное неявное правило, определив собственное шаблонное правило с такой же целью и пререквизитами, но не имеющее команд. Так, например, для отключения правила, запускающего ассемблер, достаточно написать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.o : %.s </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC105"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC105"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">пределение правил &quot;последнего шанса&quot; (last-resort rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX886"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">ы можете определить правило &quot;последнего шанса&quot; (last-resort rule), написав терминальное правило с произвольным соответствием, не имеющее пререквизитов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC103"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Шаблонные правила с призвольным соответствием</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Такое правило является обычным шаблонным правилом; единственная его особенность заключается в том, что с ним может быть &quot;сопоставлена&quot; любая цель. Таким образом, команды из этого правила будут использованы для всех целей и пререквизитов, не имеющих своих собственных команд и к которым не подходит ни одно из имеющихся неявных правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, при тестировании работы make-файла, обычно, важен лишь сам факт наличия требуемых исходных файлов, а не их реальное содержимое. Написав, в таком случае, следующее правило: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%::</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        touch $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">вы получите эффект, что все требуемые (в качестве пререквизитов) исходные файлы, при необходимости, будут созданы автоматически. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX888"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;">озможен и другой подход - вы можете задать команды, которые будут использованы для целей, не имеющих подходящих правил (даже правил без команд). Для этого надо задать правило со специальной целью </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">. Команды из этого правила будут использованы для всех пререквизитов, не имеющих явных правил и к которым не может быть применено ни одно из неявных правил. Естественно, по умолчанию правила с целью </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;"> не существует. Такое правило нужно писать самостоятельно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правило для цели </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">, не имеющее пререквизитов и команд: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">очищает список команд, ранее определенных для </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> работает так, как если бы </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;"> никогда не определялась. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы не хотите, чтобы для цели были использованы команды из шаблонного правила с произвольным (match-anything) соответствием или из правила для цели </span><span style=" font-family:'monospace'; font-size:12pt;">.DEFAULT</span><span style=" font-family:'Sans'; font-size:12pt;"> и, в то же время, вы не хотите, чтобы для цели запускались какие-либо команды, вы можете использовать для нее пустые команды (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC56"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Пустые команды</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вы можете использовать правило &quot;последнего шанса&quot; для &quot;перекрытия&quot; части другого make-файла. Смотрите раздел</span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC18"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Перекрытие&quot; части make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC106"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC106"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">У</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">старевшие суффиксные правила (suffix rules)</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX889"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">С</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">уффиксные правила (suffix rules)</span><span style=" font-family:'Sans'; font-size:12pt;"> являются устаревшим способом задания неявных (implicit) правил. Поскольку механизм шаблонных (pattern) правил является более &quot;общим&quot; и понятным, суффиксные правила можно считать устаревшими. Программа GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> поддерживает их только по соображениям совместимости со &quot;старыми&quot; make-файлами. Суффиксные правила разделяются на два вида: с </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">одиночным суффиксом (single-suffix)</span><span style=" font-family:'Sans'; font-size:12pt;"> и с </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">двойным суффиксом (double-suffix)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правило с двойным суффиксом содержит в себе пару суффиксов: один для цели и один для пререквизита. Под него подходит любая цель, чье имя имеет указанный суффикс цели. Соответствующее имя пререквизита получается путем замены суффикса цели на суффикс пререквизита в имени обрабатываемого файла. Правило с двойным суффиксом, чей суффикс цели </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> и суффикс пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, эквивалентно шаблонному правилу </span><span style=" font-family:'monospace'; font-size:12pt;">`%.o : %.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Правило с одиночным суффиксом определяет только суффикс исходного файла. Под это правило может подойти любое имя файла, а имя соответствующего пререквизита получается путем добавления указанного суффикса исходного файла. Так, правило с одиночным суффиксом </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> эквивалентно шаблонному правилу </span><span style=" font-family:'monospace'; font-size:12pt;">`% : %.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Суффиксное правило распознается путем сравнения цели каждого правила с определенным в данный момент списком &quot;известных&quot; суффиксов. Когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> видит правило, чья цель является одним из &quot;известных&quot; суффиксов, это правило рассматривается как суффиксное правило с одиночных суффиксом. Если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> видит правило, чья цель представляет собой конкатенацию (сцепление) двух &quot;известных&quot; суффиксов, такое правило рассматривается как суффиксное правило с двойным суффиксом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Например, оба суффикса - </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> присутствуют в используемом по умолчанию списке &quot;известных&quot; суффиксов. Следовательно, при наличии у правила цели </span><span style=" font-family:'monospace'; font-size:12pt;">`.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет рассматривать его как суффиксное правило с двумя суффиксами. При этом, </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет являться исходным суффиксом, а </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет суффиксом цели. Вот пример устаревшего способа, которым можно задать правило, компилирующее файлы с исходными текстами на языке Си: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.o:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Суффиксные правила не могут иметь собственных пререквизитов. Более того, при наличии пререквизитов, суффиксное правило будет рассматриваться как обычное правило со &quot;странным&quot; именем целевого файла. Так, например, правило: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.o: foo.h</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">описывает процесс получения файла </span><span style=" font-family:'monospace'; font-size:12pt;">`.c.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> из пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, а не рассматривается как шаблонное правило: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">%.o: %.c foo.h</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">которое задает способ получения файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> из файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.c'</span><span style=" font-family:'Sans'; font-size:12pt;"> и указывает на зависимость всех файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, полученных с помощью этого шаблонного правила, от файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Суффиксные правила без команд также не имеют смысла, поскольку не отменяют действие ранее определенных правил (как это делают шаблонные правила, не имеющие команд; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC104"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Отмена действия неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Такие правила просто добавляют в базу данных свой суффикс (или пару сцепленных суффиксов) в качестве цели. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX891"></a><span style=" font-family:'Sans'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;">Известные суффиксы&quot; являются просто списком пререквизитов специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">. Вы можете добавить в этот список новые суффиксы, указав их в правиле для цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES: .hack .win </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, суффиксы </span><span style=" font-family:'monospace'; font-size:12pt;">`.hack'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`.win'</span><span style=" font-family:'Sans'; font-size:12pt;"> добавляются в конец списка &quot;известных&quot; суффиксов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы хотите задать свой собственный список суффиксов, а не добавлять свои суффиксы к существующему списку, используйте правило с целью </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">, не имеющее пререквизитов. Такое правило обрабатывается специальным образом и очищает список &quot;известных&quot; суффиксов. Далее, вы можете написать еще одно правило для добавления нужных вам суффиксов. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES:            # Delete the default suffixes</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES: .c .o .h   # Define our suffix list </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Задание опций </span><span style=" font-family:'monospace'; font-size:12pt;">`-r'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`--no-builtin-rules'</span><span style=" font-family:'Sans'; font-size:12pt;"> приводит к тому, что используемый по умолчанию список суффиксов, будет пуст. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX892"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">пределенный по умолчанию список &quot;известных&quot; суффиксов (который был определен до того, как </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> начнет обрабатывать make-файлы) заносится в переменную </span><span style=" font-family:'monospace'; font-size:12pt;">SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, вы можете менять список суффиксов с помощью правил для специальной цели </span><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;">, но это не будет отражаться на значении этой переменной. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC107"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC107"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">А</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">лгоритм поиска неявных правил</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX893"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">иже приведен алгоритм, которому следует </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в процессе поиска подходящего неявного правила для цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта процедура выполняется для всех правил с двойным двоеточием, у которых нет команд. Она также выполняется для каждой цели обычных правил, если ни в одном из этих правил не указано команд. Этот же алгоритм поиска применяется для всех пререквизитов, не являющихся целями ни одного из правил make-файла, а также рекурсивно выполняется для пререквизитов неявных правил в процессе поиска возможных &quot;цепочек&quot; неявных правил. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Суффиксные правила не упоминаются в этом алгоритме, поскольку преобразуются в эквивалентные им шаблонные правила во время чтения make-файла. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для целей, которые являются элементами архива (имеют форму </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">архив</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">), указанный ниже алгоритм применяется дважды; первый раз - с использованием полного имени цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;">, и во второй раз - используя </span><span style=" font-family:'monospace'; font-size:12pt;">`(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;"> (если при первом проходе подходящее правило найдено не было). </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Разделить имя цели <span style=" font-style:italic;">t</span> на две части - имя каталога (<span style=" font-style:italic;">d</span>), и остаток строки (без имени каталога) <span style=" font-style:italic;">n</span> . Например, если имя <span style=" font-style:italic;">t</span> представляет собой строку <span style=" font-family:'monospace';">`src/foo.o'</span>, то частью <span style=" font-style:italic;">d</span> будет <span style=" font-family:'monospace';">`src/'</span>, а частью <span style=" font-style:italic;">n</span> - фрагмент <span style=" font-family:'monospace';">`foo.o'</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Составить список шаблонных правил, чьи цели могут быть сопоставлены с <span style=" font-style:italic;">t</span> или <span style=" font-style:italic;">n</span>. Если шаблон цели содержит символ <span style=" font-family:'monospace';">'/'</span>, он будет сравниваться с <span style=" font-style:italic;">t</span>; в противном случае, шаблон будет сравниваться с <span style=" font-style:italic;">n</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если хотя бы одно правило из этого списка, <span style=" font-style:italic;">не</span> является правилом с произвольным соответствием, удалить из списка все нетерминальные правила с произвольным соответствием. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удалить из списка все правила, не имеющие команд. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для каждого шаблонного правила из списка: </li>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ищется основа <span style=" font-style:italic;">s</span>, которая представляет из себя непустую часть <span style=" font-style:italic;">t</span> или <span style=" font-style:italic;">n</span>, соответствующую символу <span style=" font-family:'monospace';">`%'</span> в шаблоне цели. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Путем подстановки основы <span style=" font-style:italic;">s</span> вместо <span style=" font-family:'monospace';">`%'</span>, вычисляются имена пререквизитов; Если шаблон цели не содержит символа <span style=" font-family:'monospace';">'/'</span>, добавить <span style=" font-style:italic;">d</span> в начало имени каждого из пререквизитов. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверить, все ли пререквизиты существуют или должны существовать. (Мы говорим, что файл &quot;должен существовать&quot;, если он упоминается в make-файле в качестве цели или явно указанного пререквизита.) Если все пререквизиты существуют или должны существовать, или, если в правиле нет пререквизитов, это правило применяется. </li></ol>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если подходящее шаблонное правило до сих пор не найдено, производится вторая попытка - для каждого шаблонного правила из списка: </li>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если правило является терминальным, пропустить его и перейти к следующему правилу. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вычислить имена пререквизитов (также, как это делалось ранее, во время первого прохода). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверить, все ли пререквизиты существуют или могут быть созданы. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Рекурсивно используя описываемый алгоритм поиска, для каждого несуществующего пререквизита определить, может ли он быть создан с помощью подходящего неявного правила. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если все пререквизиты существуют, должны существовать, или могут быть получены с помощью неявных правил, рассматриваемое правило применяется. </li></ol>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если ни одно из неявных правил не может быть применено, используется правило для цели <span style=" font-family:'monospace';">.DEFAULT</span> (если такое правило существует). В этом случае, для цели <span style=" font-style:italic;">t</span> выполняются те же команды, какие указаны для цели <span style=" font-family:'monospace';">.DEFAULT</span>. Иначе, считается, что для цели <span style=" font-style:italic;">t</span> нет команд. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Как только подходящее правило будет найдено, для каждого шаблона цели (кроме того, который был сопоставлен с </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;">), символ </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;"> заменяется на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">s</span><span style=" font-family:'Sans'; font-size:12pt;"> и получившееся имя запоминается до тех пор, пока не будут выполнены команды, обновляющие </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;">. После выполнения этих команд, все запомненные имена файлов добавляются в &quot;базу данных&quot; и помечаются как обновленные (информация о статусе обновления, при этом, заимствуется из файла </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении команд шаблонного правила для цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">t</span><span style=" font-family:'Sans'; font-size:12pt;">, автоматические переменные получают значения, соответствующие данной цели и пререквизитам. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC108"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC108"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC108"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC108"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX895"></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">А</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">рхивные файлы</span><span style=" font-family:'Sans'; font-size:12pt;"> представляют из себя файлы, содержащие внутри себя набор файлов. Эти &quot;внутренние&quot; файлы называются </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">элементами (members)</span><span style=" font-family:'Sans'; font-size:12pt;">. Для работы с архивными файлами используется программа </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;">. Одно из основных применений архивных файлов - хранение библиотеки подпрограмм, используемых при компоновке программы. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC109"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC109"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование элементов архива в качестве целей</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX896"></a><span style=" font-family:'Sans'; font-size:12pt;">О</span><span style=" font-family:'Sans'; font-size:12pt;">тдельные элементы архивного файла могут быть использованы в качестве целей или пререквизитов. Указать элемент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'Sans'; font-size:12pt;"> архива </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">архив</span><span style=" font-family:'Sans'; font-size:12pt;"> можно с помощью конструкции: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">архив</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">элемент</span><span style=" font-family:'monospace'; font-size:12pt;">) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эту конструкцию можно использовать только в именах целей и пререквизитов, но не в командах! Большинство программ не поддерживают такой синтаксис и не могут &quot;напрямую&quot; работать с элементами архивов. Только программа </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;"> и другие программы, специально спроектированные для работы с архивами, могут это делать. Поэтому, как правило, все команды для обновления цели, являющейся элементом архива, так или иначе будут использовать программу </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, следующее правило создает элемент </span><span style=" font-family:'monospace'; font-size:12pt;">`hack.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> архива </span><span style=" font-family:'monospace'; font-size:12pt;">`foolib'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем копирования в архив файла </span><span style=" font-family:'monospace'; font-size:12pt;">`hack.o'</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foolib(hack.o) : hack.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ar cr foolib hack.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, практически все цели, являющиеся элементами архивов, обновляются подобным образом; для этого даже существует соответствующее неявное правило. </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Обратите внимание</span><span style=" font-family:'Sans'; font-size:12pt;"> на необходимость задания для программы </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;"> опции </span><span style=" font-family:'monospace'; font-size:12pt;">`c'</span><span style=" font-family:'Sans'; font-size:12pt;"> в том случае, если архивный файл пока не существует. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для задания сразу нескольких элементов одного архива, можно написать имена всех элементов &quot;вместе&quot; внутри скобок. Так, следующий пример: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foolib(hack.o kludge.o) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">эквивалентен: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foolib(hack.o) foolib(kludge.o) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX897"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри задании имен элементов архивов можно также использовать шаблонные символы &quot;в стиле&quot; командного интерпретатора. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC22"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование шаблонных символов в именах файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Например, </span><span style=" font-family:'monospace'; font-size:12pt;">`foolib(*.o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет ссылаться на все существующие элементы архива </span><span style=" font-family:'monospace'; font-size:12pt;">`foolib'</span><span style=" font-family:'Sans'; font-size:12pt;">, чьи имена заканчиваются на </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">; возможно, это будут элементы </span><span style=" font-family:'monospace'; font-size:12pt;">`foolib(hack.o) foolib(kludge.o)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC110"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC110"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еявные правила для целей - элементов архива</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вспомните, что цель вида </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">, означает элемент </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'Sans'; font-size:12pt;"> архивного файла </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> подбирает подходящее неявное правило для подобной цели, наряду с правилами, которые могут соответствовать цели </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">, она рассматривает также и правила, которые могут быть применены к цели </span><span style=" font-family:'monospace'; font-size:12pt;">`(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При этом, будет запущено специальное правило с целью </span><span style=" font-family:'monospace'; font-size:12pt;">`(%)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это правило обновляет цель </span><span style=" font-family:'monospace'; font-size:12pt;">`</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">(</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'monospace'; font-size:12pt;">)'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем копирования файла </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">m</span><span style=" font-family:'Sans'; font-size:12pt;"> в архив. Например, это правило сможет обновить цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.a(bar.o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> путем копирования </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">файла</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> в архив </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">элемента</span><span style=" font-family:'Sans'; font-size:12pt;"> с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Будучи связанным в цепочку с другими, это правило может сослужить хорошую службу. Так, при наличии файла </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.c'</span><span style=" font-family:'Sans'; font-size:12pt;">, команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make &quot;foo.a(bar.o)&quot;'</span><span style=" font-family:'Sans'; font-size:12pt;"> (здесь, кавычки использованы для предотвращения специальной интерпретации символов </span><span style=" font-family:'monospace'; font-size:12pt;">`('</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`)'</span><span style=" font-family:'Sans'; font-size:12pt;"> интерпретатором командной строки) будет достаточно для запуска такой последовательности команд (при этом, даже не потребуется make-файла): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cc -c bar.c -o bar.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ar r foo.a bar.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">rm -f bar.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В этом примере, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> использовала файл </span><span style=" font-family:'monospace'; font-size:12pt;">`bar.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве промежуточного. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобные неявные правила пишутся с использованием автоматической переменной </span><span style=" font-family:'monospace'; font-size:12pt;">`$%'</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя каталога не может содержаться в имени элемента архива, но его можно использовать в make-файле для получения аналогичного эффекта. Например, цель </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.a(dir/file.o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет автоматически обновляться </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> с помощью команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ar r foo.a dir/file.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">которая будет копировать файл </span><span style=" font-family:'monospace'; font-size:12pt;">`dir/file.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> в элемент </span><span style=" font-family:'monospace'; font-size:12pt;">`file.o'</span><span style=" font-family:'Sans'; font-size:12pt;"> архива </span><span style=" font-family:'monospace'; font-size:12pt;">foo.a</span><span style=" font-family:'Sans'; font-size:12pt;">. В подобных случаях, могут быть полезны автоматические переменные </span><span style=" font-family:'monospace'; font-size:12pt;">%D</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">%F</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC111"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC111"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">бновление каталога символов архивного файла</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX898"></a><span style=" font-family:'Sans'; font-size:12pt;">А</span><span style=" font-family:'Sans'; font-size:12pt;">рхивный файл, используемый в качестве библиотеки, как правило, содержит специальный элемент с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`__.SYMDEF'</span><span style=" font-family:'Sans'; font-size:12pt;">, содержащий каталог всех внешних символов, на которые ссылаются другие элементы этого архива. После обновления любого другого элемента архива, вам потребуется обновить </span><span style=" font-family:'monospace'; font-size:12pt;">`__.SYMDEF'</span><span style=" font-family:'Sans'; font-size:12pt;">, дабы он содержал актуальную информацию. Это делается путем запуска программы </span><span style=" font-family:'monospace'; font-size:12pt;">ranlib</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ranlib </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл_архива</span><span style=" font-family:'monospace'; font-size:12pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, эта команда помещается в правило для архивного файла, пререквизитами которого являются все элементы этого архива. Например, </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">libfoo.a: libfoo.a(x.o) libfoo.a(y.o) ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ranlib libfoo.a </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, при обновлении любого из элементов архива (</span><span style=" font-family:'monospace'; font-size:12pt;">`x.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`y.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, и так далее), будет запущена программа </span><span style=" font-family:'monospace'; font-size:12pt;">ranlib</span><span style=" font-family:'Sans'; font-size:12pt;">, которая обновит каталог архива - элемент </span><span style=" font-family:'monospace'; font-size:12pt;">`__.SYMDEF'</span><span style=" font-family:'Sans'; font-size:12pt;">. В приведенном выше фрагменте, правила, обновляющие элементы архива, не показаны; в большинстве ситуаций, вы можете не указывать их явно, положившись на встроенное неявное правило, копирующее файлы в архив (это правило обсуждалось в предыдущем разделе). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Программа GNU </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически обновляет элемент </span><span style=" font-family:'monospace'; font-size:12pt;">`__.SYMDEF'</span><span style=" font-family:'Sans'; font-size:12pt;">, вследствие чего, необходимость в подобного рода правилах, отпадает. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC112"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC112"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">роблемы при использовании архивов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX903"></a><span style=" font-family:'Sans'; font-size:12pt;">С</span><span style=" font-family:'Sans'; font-size:12pt;">ледует быть осторожным при одновременном использовании параллельного исполнения команд (опция </span><span style=" font-family:'monospace'; font-size:12pt;">-j</span><span style=" font-family:'Sans'; font-size:12pt;">; смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC47"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Параллельное исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">) и архивных файлов. При работе сразу нескольких программ </span><span style=" font-family:'monospace'; font-size:12pt;">ar</span><span style=" font-family:'Sans'; font-size:12pt;"> с одним и тем же архивным файлов, этот файл может быть поврежден, поскольку эти программы ничего не знают друг о друге и никак не синхронизируют между собой свою работу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Возможно, будущие версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будут иметь какой-либо механизм для обхода этой проблемы, например, с помощью &quot;сериализации&quot; все команд, оперирующих с одним и тем же архивным файлом. В настоящее время, однако, вам либо придется писать свои make-файлы таким образом, чтобы избежать подобной проблемы, либо отказаться от использования опции </span><span style=" font-family:'monospace'; font-size:12pt;">-j</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC113"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC113"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">уффиксные правила для архивных файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX907"></a><span style=" font-family:'Sans'; font-size:12pt;">Д</span><span style=" font-family:'Sans'; font-size:12pt;">ля работы с архивными файлами, вы можете использовать суффиксное правило специального вида. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где подробно обсуждаются суффиксные правила. Суффиксные правила для архивных файлов можно считать устаревшими, поскольку поддерживаемые в GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> шаблонные правила для архивов являются более &quot;общим&quot; механизмом (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC110"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Неявные правила для целей - элементов архива</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Однако, суффиксные правила для архивов по-прежнему поддерживаются из соображений совместимости с другими реализациями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Суффиксное правило для архивов пишется с использованием целевого суффикса </span><span style=" font-family:'monospace'; font-size:12pt;">`.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> (это обычный суффикс архивных файлов). Вот пример устаревшей записи - суффиксное правило для обновления библиотеки (которая является архивным файлом) из исходных файлов на языке Си: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.a:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $*.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(AR) r $@ $*.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(RM) $*.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это будет работать аналогично следующему шаблонному првилу: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">(%.o): %.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $*.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(AR) r $@ $*.o</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(RM) $*.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">На самом деле, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> именно так и поступает, видя суффиксное правило с целевым суффиксом </span><span style=" font-family:'monospace'; font-size:12pt;">`.a'</span><span style=" font-family:'Sans'; font-size:12pt;">. Любое правило с двойным суффиксом вида </span><span style=" font-family:'monospace'; font-size:12pt;">`.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.a'</span><span style=" font-family:'Sans'; font-size:12pt;">, преобразуется </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в соответствующее шаблонное правило с шаблоном цели </span><span style=" font-family:'monospace'; font-size:12pt;">`(%.o)'</span><span style=" font-family:'Sans'; font-size:12pt;"> и шаблоном пререквизита </span><span style=" font-family:'monospace'; font-size:12pt;">`%.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Поскольку вы вправе использовать суффикс </span><span style=" font-family:'monospace'; font-size:12pt;">`.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> для совершенно произвольных файлов (а не только для архивов), </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> также преобразует подобное суффиксное правило в шаблонное правило и &quot;обычным&quot; способом (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Так, суффиксное правило </span><span style=" font-family:'monospace'; font-size:12pt;">`.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">.a'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет преобразовано в два шаблонных правила: </span><span style=" font-family:'monospace'; font-size:12pt;">`(%.o): %.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`%.a: %.</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">x</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC114"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC114"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">В</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">озможности GNU </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC114"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX911"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">иже приведен обзор возможностей программы GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в сравнении с другими версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> и указано, откуда были &quot;позаимствованы&quot; те или иные функции. В качестве &quot;базовой&quot;, мы рассматриваем версию </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> из состава операционной системы BSD 4.2. Если вы стремитесь к написанию &quot;переносимых&quot; make-файлов, вам следует использовать только те возможности </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, которые не перечислены здесь, а также в разделе </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC115"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Несовместимость и нереализованные функции</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Многие возможности были позаимствованы из версии программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, имевшейся в System V. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переменная <span style=" font-family:'monospace';">VPATH</span> и ее специальное значение. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC26"><span style=" text-decoration: underline; color:#0000ff;">Поиск пререквизитов по каталогам </span></a>. Такая возможность существовала в <span style=" font-family:'monospace';">make</span> из System V, однако не была документирована. Она была документирована в <span style=" font-family:'monospace';">make</span>, входившей в состав BSD 4.3 (в документации говорилось, что она имитирует соответствующие возможности <span style=" font-family:'monospace';">make</span> из System V). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Включаемые make-файлы. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a>. Возможность подключения нескольких файлов в одной директиве, является особенностью GNU <span style=" font-family:'monospace';">make</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переменные могут читаться из операционного окружения и передаваться через него. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC68"><span style=" text-decoration: underline; color:#0000ff;">Переменные из операционного окружения</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При рекурсивном вызове, опции передаются через переменную <span style=" font-family:'monospace';">MAKEFLAGS</span> в <span style=" font-family:'monospace';">make</span> &quot;нижнего уровня&quot;. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" text-decoration: underline; color:#0000ff;">Передача опций в make &quot;нижнего уровня&quot;</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При работе с архивом, в автоматическую переменную <span style=" font-family:'monospace';">$%</span> заносится имя элемента архива. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Автоматические переменные <span style=" font-family:'monospace';">$@</span>, <span style=" font-family:'monospace';">$*</span>, <span style=" font-family:'monospace';">$&lt;</span>, <span style=" font-family:'monospace';">$%</span>, и <span style=" font-family:'monospace';">$?</span> имеют &quot;родственные&quot; формы вида <span style=" font-family:'monospace';">$(@F)</span> и <span style=" font-family:'monospace';">$(@D)</span>. Подобные же две формы имеет и переменная <span style=" font-family:'monospace';">$^</span> - это было &quot;само собой напрашивающееся&quot; расширение. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ссылка на переменную с заменой. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC58"><span style=" text-decoration: underline; color:#0000ff;">Обращение к переменным</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Опции командной строки <span style=" font-family:'monospace';">`-b'</span> и <span style=" font-family:'monospace';">`-m'</span>, принимаются, но игнорируются (хотя в <span style=" font-family:'monospace';">make</span> из System V они выполняют какие-то действия). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполнение рекурсивных команд для запуска <span style=" font-family:'monospace';">make</span> через переменную <span style=" font-family:'monospace';">MAKE</span>, даже при наличии опций <span style=" font-family:'monospace';">`-n'</span>, <span style=" font-family:'monospace';">`-q'</span> или <span style=" font-family:'monospace';">`-t'</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; text-decoration: underline; color:#0000ff;">make</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поддержка суффикса <span style=" font-family:'monospace';">`.a'</span> в суффиксных правилах. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC113"><span style=" text-decoration: underline; color:#0000ff;">Суффиксные правила для архивных файлов</span></a>. В GNU <span style=" font-family:'monospace';">make</span> подобную возможность можно считать устаревшей, поскольку обычного шаблонного правила вполне достаточно: остальную работу берет на себя обобщенный механизм &quot;цепочек&quot; неявных правил (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a>) и шаблонное правило для занесения элементов в архивы (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC110"><span style=" text-decoration: underline; color:#0000ff;">Неявные правила для целей - элементов архива</span></a>). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&quot;Оригинальный&quot; вид команд (как они записаны в make-файле), включая расположение строк и комбинаций &quot;<span style=" font-family:'monospace';">\</span>, перевод строки&quot;, при печати команд сохраняется (за исключением начальных пробелов). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующие возможности &quot;навеяны&quot; различными версиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. В некоторых случаях, мы затрудняемся сказать, откуда именно были &quot;позаимствованы&quot; те или иные возможности. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Шаблонные правила с использованием шаблонного символа <span style=" font-family:'monospace';">`%'</span>. Это было реализовано в нескольких различных версиях <span style=" font-family:'monospace';">make</span>. Трудно сказать, кто именно является изобретателем подобной конструкции, однако, она распространилась довольно широко. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC98"><span style=" text-decoration: underline; color:#0000ff;">Определение и переопределение шаблонных правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Связывание правил в цепочки и промежуточные файлы. Это было реализовано Stu Feldman в его версии <span style=" font-family:'monospace';">make</span> для AT&amp;T Eighth Edition Research Unix, и, позднее, Andrew Hume из AT&amp;T Bell Labs в его программе <span style=" font-family:'monospace';">mk</span> (он использовал термин &quot;transitive closure&quot;). Мы затрудняемся сказать, была ли подобная возможность &quot;позаимствована&quot; нами из этих программ или же мы независимо &quot;изобрели&quot; ее сами. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Автоматическая переменная <span style=" font-family:'monospace';">$^</span>, содержащая список всех пререквизитов текущей цели. Мы не знаем, чье это &quot;изобретение&quot;, но уж точно - не наше. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a>. Автоматическая переменная <span style=" font-family:'monospace';">$+</span> является просто &quot;расширением&quot; <span style=" font-family:'monospace';">$^</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Опция &quot;что, если&quot; (<span style=" font-family:'monospace';">`-W'</span> в GNU <span style=" font-family:'monospace';">make</span>) была (насколько нам известно) придумана Andrew Hume для программы <span style=" font-family:'monospace';">mk</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Концепция одновременного выполнения нескольких команд (параллелизм) существует во многих версиях <span style=" font-family:'monospace';">make</span> и ей подобных программ. Однако, в реализациях <span style=" font-family:'monospace';">make</span> из System V и BSD, такой возможности нет. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" text-decoration: underline; color:#0000ff;">Исполнение команд</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Модефицированный вариант ссылки на переменную с возможностью замены, &quot;пришел&quot; из SunOS 4. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC58"><span style=" text-decoration: underline; color:#0000ff;">Обращение к переменным</span></a>. До тех пор, пока этот альтернативный синтаксис не был поддержан в GNU <span style=" font-family:'monospace';">make</span> (для обеспечения совместимости с SunOS 4), подобная функциональность достигалась с использованием функции <span style=" font-family:'monospace';">patsubst</span>. Сложно сказать, что здесь явилось &quot;первоисточником&quot;, поскольку функция <span style=" font-family:'monospace';">patsubst</span> существовала в GNU <span style=" font-family:'monospace';">make</span> еще до того, как была реализована система SunOS 4. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Специальное значение символа <span style=" font-family:'monospace';">`+'</span> в начале строки, содержащей команды (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC88"><span style=" text-decoration: underline; color:#0000ff;">Вместо исполнения команд</span></a>), определено стандартом <span style=" font-style:italic;">IEEE Standard 1003.2-1992</span> (POSIX.2). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Синтаксис оператора <span style=" font-family:'monospace';">`+='</span>, добавляющего значение к переменной, &quot;позаимствован&quot; из <span style=" font-family:'monospace';">make</span> системы SunOS 4. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC65"><span style=" text-decoration: underline; color:#0000ff;">Добавление текста к переменной</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Синтаксис <span style=" font-family:'monospace';">`</span><span style=" font-family:'monospace'; font-style:italic;">архив</span><span style=" font-family:'monospace';">(</span><span style=" font-family:'monospace'; font-style:italic;">элемент1</span><span style=" font-family:'monospace';"> </span><span style=" font-family:'monospace'; font-style:italic;">элемент2</span><span style=" font-family:'monospace';">...)'</span> для указания нескольких элементов одного архивного файла, взят из <span style=" font-family:'monospace';">make</span>, входящей в SunOS 4. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC109"><span style=" text-decoration: underline; color:#0000ff;">Использование элементов архива в качестве целей</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Директива <span style=" font-family:'monospace';">-include</span>, позволяющая подключать make-файлы с игнорированием несуществующих, была взята из программы <span style=" font-family:'monospace';">make</span> операционной системы SunOS 4. (Заметьте, однако, что SunOS 4 <span style=" font-family:'monospace';">make</span> не допускала перечисления нескольких файлов в одной директиве <span style=" font-family:'monospace';">-include</span>.) Аналогичная возможность (под именем <span style=" font-family:'monospace';">sinclude</span>) присутствует в версиях <span style=" font-family:'monospace';">make</span> от SGI и, возможно, других системах. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Остальные возможности являются нововведениями GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование опций <span style=" font-family:'monospace';">`-v'</span> и <span style=" font-family:'monospace';">`--version'</span> для вывода информации о версии и авторских правах. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование опций <span style=" font-family:'monospace';">`-h'</span> и <span style=" font-family:'monospace';">`--help'</span> для вывода подсказки о воспринимаемых программой <span style=" font-family:'monospace';">make</span> опциях. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Упрощенно вычисляемые переменные. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC59"><span style=" text-decoration: underline; color:#0000ff;">Две разновидности переменных</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При рекурсивном использовании <span style=" font-family:'monospace';">make</span>, определение переменной, производимое с помощью командной строки, автоматически передается в <span style=" font-family:'monospace';">make</span> &quot;нижнего уровня&quot; через переменную <span style=" font-family:'monospace';">MAKE</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; text-decoration: underline; color:#0000ff;">make</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование опций <span style=" font-family:'monospace';">`-C'</span> и <span style=" font-family:'monospace';">`--directory'</span> для смены рабочего каталога. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" text-decoration: underline; color:#0000ff;">Обзор опций</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Определение многострочных переменных с помощью конструкции <span style=" font-family:'monospace';">define</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC67"><span style=" text-decoration: underline; color:#0000ff;">Многострочные переменные</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Явное объявление абстрактных целей с использование специальной цели <span style=" font-family:'monospace';">.PHONY</span>. Подобная возможность (но с другим синтаксисом) была реализована также Andrew Hume из AT&amp;T Bell Labs в его программе <span style=" font-family:'monospace';">mk</span>. По-видимому, это может считаться примером независимого &quot;параллельного&quot; изобретения. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC33"><span style=" text-decoration: underline; color:#0000ff;">Абстрактные цели</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Манипуляции с текстом путем вызова функций. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование опций <span style=" font-family:'monospace';">`-o'</span> и <span style=" font-family:'monospace';">`--old-file'</span> для имитации того, что время модефикации файла является &quot;старым&quot;. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC89"><span style=" text-decoration: underline; color:#0000ff;">Предотвращение перекомпиляции некоторых файлов</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Условные конструкции. Подобная возможность реализовывалась многократно в различных версиях <span style=" font-family:'monospace';">make</span>; она, скорее, выглядит логичным расширением &quot;в духе&quot; препроцессора языка Си и аналогичных макроязыков, нежели &quot;революционной&quot; концепцией. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC71"><span style=" text-decoration: underline; color:#0000ff;">Условные части make-файла</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Возможность задания путей поиска для подключаемых файлов. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Возможность указания дополнительных make-файлов с помощью переменной среды. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" text-decoration: underline; color:#0000ff;">Переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" font-family:'monospace'; text-decoration: underline; color:#0000ff;">MAKEFILES</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удаление начальной последовательности <span style=" font-family:'monospace';">`./'</span> из имен файлов, дабы <span style=" font-family:'monospace';">`./</span><span style=" font-family:'monospace'; font-style:italic;">файл</span><span style=" font-family:'monospace';">'</span> и <span style=" font-family:'monospace';">`</span><span style=" font-family:'monospace'; font-style:italic;">файл</span><span style=" font-family:'monospace';">'</span> рассматривались как один и тот же файл. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование специального метода поиска для пререквизитов, которые являются библиотеками и записаны в форме <span style=" font-family:'monospace';">`-l</span><span style=" font-family:'monospace'; font-style:italic;">имя</span><span style=" font-family:'monospace';">'</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC32"><span style=" text-decoration: underline; color:#0000ff;">Поиск в каталогах для подключаемых библиотек</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Суффиксы (для суффиксных правил) могут содержать произвольные символы (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a>). Во многих других версиях <span style=" font-family:'monospace';">make</span>, суффиксы обязательно должны начинаться с <span style=" font-family:'monospace';">`.'</span> и не должны содержать символов <span style=" font-family:'monospace';">`/'</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Отслеживание текущего &quot;уровня вложенности&quot; при рекурсивном вызове <span style=" font-family:'monospace';">make</span>, с помощью переменной <span style=" font-family:'monospace';">MAKELEVEL</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; text-decoration: underline; color:#0000ff;">make</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Занесение имен всех целей, заданных через командную строку, в переменную <span style=" font-family:'monospace';">MAKECMDGOALS</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC87"><span style=" text-decoration: underline; color:#0000ff;">Аргументы для задания главной цели</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Статические шаблонные правила. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC39"><span style=" text-decoration: underline; color:#0000ff;">Статические шаблонные правила</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">&quot;Выборочный&quot; поиск с помощью директивы <span style=" font-family:'monospace';">vpath</span>. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC26"><span style=" text-decoration: underline; color:#0000ff;">Поиск пререквизитов по каталогам</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вычисляемые имена переменных. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC58"><span style=" text-decoration: underline; color:#0000ff;">Обращение к переменным</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Автоматическое обновление make-файлов. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC17"><span style=" text-decoration: underline; color:#0000ff;">Автоматическое обновление make-файлов</span></a>. Программа <span style=" font-family:'monospace';">make</span> из состава System V <span style=" font-family:'monospace';">make</span>, в сильно &quot;усеченном&quot; виде имела подобную функциональность (умела обновлять make-файлы, получая их новые версии из системы SCCS. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Новые встроенные неявные правила. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC95"><span style=" text-decoration: underline; color:#0000ff;">Перечень имеющихся неявных правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Встроенная переменная <span style=" font-family:'monospace';">`MAKE_VERSION'</span>, содержащая номер версии программы <span style=" font-family:'monospace';">make</span>. </li></ul>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC115"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC115"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Н</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">есовместимость и нереализованные функции</span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX914"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">е все возможности, имеющиеся в различных версиях </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> реализованы в GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Однако, среди нет таких, которые требовались бы стандартом POSIX.2 (</span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">IEEE Standard 1003.2-1992</span><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Цель, записанная как <span style=" font-family:'monospace';">`</span><span style=" font-family:'monospace'; font-style:italic;">файл</span><span style=" font-family:'monospace';">((</span><span style=" font-family:'monospace'; font-style:italic;">имя_символа</span><span style=" font-family:'monospace';">))'</span>, означает элемент архивного файла <span style=" font-style:italic;">файл</span>. Однако, будучи объектным файлом, элемент выбирается не по своему имени, а по наличию определенного внутри него символьного имени <span style=" font-style:italic;">имя_символа</span>. Мы не стали добавлять такую возможность в программу GNU <span style=" font-family:'monospace';">make</span>, поскольку это потребовало бы от нее знания формата &quot;внутреннего&quot; представления таблицы символов, хранящейся внутри архивного файла, что противоречило бы принципам модульности. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC111"><span style=" text-decoration: underline; color:#0000ff;">Обновление каталога символов архивного файла</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Суффиксы (используемые в суффиксных правилах), которые оканчиваются символом <span style=" font-family:'monospace';">`~'</span>, имеют специальное значение в <span style=" font-family:'monospace';">make</span> из System V; они ссылаются на файл SCCS, соответствующий файлу, чьим именем является имя суффикса без конечного <span style=" font-family:'monospace';">`~'</span>. Так, например, суффиксное правило <span style=" font-family:'monospace';">`.c~.o'</span> будет описывать процесс получения файлов <span style=" font-family:'monospace';">`</span><span style=" font-family:'monospace'; font-style:italic;">n</span><span style=" font-family:'monospace';">.o'</span> из SCCS-файлов <span style=" font-family:'monospace';">`s.</span><span style=" font-family:'monospace'; font-style:italic;">n</span><span style=" font-family:'monospace';">.c'</span>. Для полного охвата всех возможных случаев, потребуется целый набор подобных суффиксных правил. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC106"><span style=" text-decoration: underline; color:#0000ff;">Устаревшие суффиксные правила</span></a>. В GNU <span style=" font-family:'monospace';">make</span>, все подобные ситуации обрабатываются с помощью двух шаблонных правил для извлечения файлов из SCCS и &quot;обобщенного&quot; механизма связывания правил в цепочки. Смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC97"><span style=" text-decoration: underline; color:#0000ff;">&quot;Цепочки&quot; неявных правил</span></a>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В <span style=" font-family:'monospace';">make</span> из System V, запись <span style=" font-family:'monospace';">`$$@'</span> имеет достаточно странный смысл: в пререквизитах правила с несколькими целями, она означает конкретную цель, которая в данный момент обрабатывается. Такая возможность не предусмотрена в GNU <span style=" font-family:'monospace';">make</span>, поскольку <span style=" font-family:'monospace';">`$$'</span> всегда означает просто <span style=" font-family:'monospace';">`$'</span>. Подобную функциональность можно получить с помощью статических шаблонных правил (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC39"><span style=" text-decoration: underline; color:#0000ff;">Статические шаблонные правила</span></a>). Например, правило для <span style=" font-family:'monospace';">make</span> из System V: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(targets): $$@.o lib.a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">может быть заменено на статическое шаблонное правило для GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(targets): %: %.o lib.a </span></p>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В реализациях <span style=" font-family:'monospace';">make</span> для System V и BSD 4.3, файлы, найденные в процессе поиска по каталогам с использованием <span style=" font-family:'monospace';">VPATH</span> (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC26"><span style=" text-decoration: underline; color:#0000ff;">Поиск пререквизитов по каталогам</span></a>), меняют свои имена внутри командных строк. Нам кажется, что намного проще всегда использовать автоматические переменные, а подобную возможность считать &quot;устаревшей&quot;. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В реализациях <span style=" font-family:'monospace';">make</span> для некоторых вариантов Unix, автоматическая переменная <span style=" font-family:'monospace';">$*</span>, будучи указана в качестве пререквизита правила, получает весьма странное значение, а именно - полное имя <span style=" font-style:italic;">цели данного правила</span>. Мы затрудняемся сказать, зачем это могло понадобиться разработчикам этих вариантов <span style=" font-family:'monospace';">make</span>; в действительности, это совершенно не согласуется с &quot;нормальным&quot; определением <span style=" font-family:'monospace';">$*</span>. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В некоторых реализациях <span style=" font-family:'monospace';">make</span>, поиск неявных правил (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC93"><span style=" text-decoration: underline; color:#0000ff;">Использование неявных правил</span></a>), по-видимому, производится для <span style=" font-style:italic;">всех</span> целей, а не только для тех, которые не имеют команд. Это, например, означает, что при наличии одного лишь правила: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cc -c foo.c make &quot;догадается&quot; о зависимости файла `foo.o' от `foo.c'. Нам это кажется неправильным. Свойства пререквизитов в make определены достаточно хорошо (по крайней мере, в GNU make), а подобные вещи плохо &quot;укладываются&quot; в общую модель. </span></p>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">GNU <span style=" font-family:'monospace';">make</span> не содержит встроенных неявных правил для компиляции или препроцессорной обработки программ на языке EFL. Если мы узнаем, что кто-то использует этот язык, мы с удовольствием добавим нужные правила. </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По всей видимости, реализация <span style=" font-family:'monospace';">make</span> из системы SVR4 поддерживает суффиксные правила без команд, но рассматривает их как правила с пустыми командами (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC56"><span style=" text-decoration: underline; color:#0000ff;">Пустые команды</span></a>). Так, например, правило: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.a:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">&quot;перекроет&quot; встроенное суффиксное правило для </span><span style=" font-family:'monospace'; font-size:12pt;">`.c.a'</span><span style=" font-family:'Sans'; font-size:12pt;">. Нам кажется более &quot;естественным&quot;, чтобы правила без команд просто добавляли к цели указанные в них пререквизиты. Для получения аналогичного эффекта, приведенный выше пример для GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> можно переписать так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.a: ; </span></p>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Некоторые версии <span style=" font-family:'monospace';">make</span> всегда вызывают командный интерпретатор с опцией <span style=" font-family:'monospace';">`-e'</span>, за исключением тех случаев, когда <span style=" font-family:'monospace';">make</span> была запущена с опцией <span style=" font-family:'monospace';">`-k'</span> (смотрите раздел <a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC91"><span style=" text-decoration: underline; color:#0000ff;">Проверка компиляции программы</span></a>). Опция <span style=" font-family:'monospace';">`-e'</span> инструктирует командный интерпретатор завершать работу сразу же, как только любая из запущенных им программ вернет ненулевой код возврата. Нам кажется более естественным помещать каждую командную строку для оболочки на отдельную строку make-файла и не использовать такую специальную возможность. </li></ul>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC116"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC116"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ринятые соглашения для make-файлов</span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX918"></a><span style=" font-family:'Sans'; font-size:12pt;">В</span><span style=" font-family:'Sans'; font-size:12pt;"> этом разделе описаны соглашения, принятые для make-файлов программ GNU. Пакет Automake может помочь вам в создании make-файлов, следующих этим соглашениям. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC117"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC117"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">О</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">бщие соглашения для make-файлов</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждый make-файл должен содержать строку: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SHELL = /bin/sh </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">во избежании проблем при работе в системах, где переменная </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть &quot;унаследована&quot; из операционного окружения. (Для GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, однако, это не составляет проблемы.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Различные варианты программы </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> имеют разный набор суффиксов и суффиксных правил - иногда это может служить источником недоразумений и ошибок. Поэтому, &quot;хорошей идеей&quot; является явное задание списка суффиксов, содержащего только те суффиксы, которые используются в данном конкретном make-файле, например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.SUFFIXES: .c .o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Первая строка очищает используемый список суффиксов, вторая строка - добавляет в него нужные суффиксы, используемые в данном make-файле. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Не следует предполагать, что </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;"> находится в пути поиска исполняемых команд. Когда вам нужно запустить программу, являющуюся частью вашего пакета, используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`./'</span><span style=" font-family:'Sans'; font-size:12pt;"> если эта программа строится в ходе обработки make-файла или </span><span style=" font-family:'monospace'; font-size:12pt;">`$(srcdir)/'</span><span style=" font-family:'Sans'; font-size:12pt;"> если запускаемый файл является &quot;неизменной&quot; частью и его можно отнести к исходному коду. Если нет ни одного из этих префиксов, будет использован текущий путь поиска. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Разница между </span><span style=" font-family:'monospace'; font-size:12pt;">`./'</span><span style=" font-family:'Sans'; font-size:12pt;"> (директория, где происходит сборка проекта) и </span><span style=" font-family:'monospace'; font-size:12pt;">`$(srcdir)/'</span><span style=" font-family:'Sans'; font-size:12pt;"> (директория с </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">исходными текстами</span><span style=" font-family:'Sans'; font-size:12pt;">) существенна, поскольку пользователь может запустить компиляцию в отдельной директории, указав опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`--srcdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> для </span><span style=" font-family:'monospace'; font-size:12pt;">`configure'</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, правило вида: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.1 : foo.man sedscript</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        sed -e sedscript foo.man &gt; foo.1 </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">не будет работать, если сборка проекта происходит не в директории с исходными файлами, поскольку файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.man'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`sedscript'</span><span style=" font-family:'Sans'; font-size:12pt;"> находятся именно там. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, можно полагаться на </span><span style=" font-family:'monospace'; font-size:12pt;">`VPATH'</span><span style=" font-family:'Sans'; font-size:12pt;"> при наличии единственного файла пререквизита, поскольку автоматическая переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> укажет на исходный файл, где бы он ни находился. (Многие версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> устанавливают </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> только для неявных правил.) Таким образом, для корректной работы </span><span style=" font-family:'monospace'; font-size:12pt;">`VPATH'</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : bar.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -I. -I$(srcdir) $(CFLAGS) -c bar.c -o foo.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">следует писать </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : bar.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -I. -I$(srcdir) $(CFLAGS) -c $&lt; -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии нескольких пререквизитов, проще всего, явно указывать префикс </span><span style=" font-family:'monospace'; font-size:12pt;">`$(srcdir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Так, приведенный выше пример для </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.1'</span><span style=" font-family:'Sans'; font-size:12pt;">, лучше всего записать следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.1 : foo.man sedscript</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        sed -e $(srcdir)/sedscript $(srcdir)/foo.man &gt; $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, можно полагаться на </span><span style=" font-family:'monospace'; font-size:12pt;">`VPATH'</span><span style=" font-family:'Sans'; font-size:12pt;"> при наличии единственного файла пререквизита, поскольку автоматическая переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> укажет на исходный файл, где бы он ни находился. (Многие версии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> устанавливают </span><span style=" font-family:'monospace'; font-size:12pt;">`$&lt;'</span><span style=" font-family:'Sans'; font-size:12pt;"> только для неявных правил.) Таким образом, для корректной работы </span><span style=" font-family:'monospace'; font-size:12pt;">`VPATH'</span><span style=" font-family:'Sans'; font-size:12pt;">, вместо </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : bar.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -I. -I$(srcdir) $(CFLAGS) -c bar.c -o foo.o </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">следует писать </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.o : bar.c</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -I. -I$(srcdir) $(CFLAGS) -c $&lt; -o $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии нескольких пререквизитов, проще всего, явно указывать префикс </span><span style=" font-family:'monospace'; font-size:12pt;">`$(srcdir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Так, приведенный выше пример для </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.1'</span><span style=" font-family:'Sans'; font-size:12pt;">, лучше всего записать следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.1 : foo.man sedscript</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        sed -e $(srcdir)/sedscript $(srcdir)/foo.man &gt; $@ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пакеты GNU, обычно, содержат некоторые файлы, не являющиеся исходными, например, файлы в формате Info, выходные файлы программ Autoconf, Automake, Bison или Flex. Поскольку, как правило, эти файлы располагаются в директории с исходными текстами, они и должны всегда располагаться там, а не в директории, где происходит сборка проекта. Таким образом, правила make-файла, обновляющие эти файлы, должны помещать их в директорию с исходными текстами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Однако, если файл не входит в состав дистрибутива, make-файле не должен помещать его в директорию с исходными текстами, поскольку, в обычных условиях, процесс сборки не должен модефицировать каталог с исходными текстами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Желательно, также, попробовать добиться корректной работы make-файла (по крайней мере, для целей сборки и инсталляции) при запуске </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в параллельном режиме. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC118"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC118"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">И</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">спользование утилит</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Команды, указываемые в make-файле (включая скрипты, такие как </span><span style=" font-family:'monospace'; font-size:12pt;">configure</span><span style=" font-family:'Sans'; font-size:12pt;">), следует писать в рассчете на интерпретатор </span><span style=" font-family:'monospace'; font-size:12pt;">sh</span><span style=" font-family:'Sans'; font-size:12pt;">, а не </span><span style=" font-family:'monospace'; font-size:12pt;">csh</span><span style=" font-family:'Sans'; font-size:12pt;">. Не используйте специфические возможности оболочек </span><span style=" font-family:'monospace'; font-size:12pt;">ksh</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">bash</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Скрипт </span><span style=" font-family:'monospace'; font-size:12pt;">configure</span><span style=" font-family:'Sans'; font-size:12pt;"> и указанные в make-файле правила для сборки и инсталляции не должны напрямую использовать никаких утилита, за исключением: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">cat cmp cp diff echo egrep expr false grep install-info</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ln ls mkdir mv pwd rm rmdir sed sleep sort tar test touch true </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В правиле </span><span style=" font-family:'monospace'; font-size:12pt;">dist</span><span style=" font-family:'Sans'; font-size:12pt;">, для компрессирования можно использовать программу </span><span style=" font-family:'monospace'; font-size:12pt;">gzip</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для этих программ следует пользоваться только &quot;общепринятыми&quot; опциями. Например, не используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`mkdir -p'</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку эта опция поддерживается лишь в немногих системах. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По возможности, следует избегать создания make-файлом символических связей, поскольку в некоторых системах они не поддерживаются. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для сборки и инсталляции, make-файл может пользоваться компиляторами и другими необходимыми программами, однако, это следует делать через определенные в </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> переменные, дабы пользователь мог указать свою альтернативу. Вот некоторые из программ, которые мы имели ввиду: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ar bison cc flex install ld ldconfig lex</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make makeinfo ranlib texi2dvi yacc </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для запуска этих программ следует использовать следующие переменные </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(AR) $(BISON) $(CC) $(FLEX) $(INSTALL) $(LD) $(LDCONFIG) $(LEX)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(MAKE) $(MAKEINFO) $(RANLIB) $(TEXI2DVI) $(YACC) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если вы используете программы </span><span style=" font-family:'monospace'; font-size:12pt;">ranlib</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">ldconfig</span><span style=" font-family:'Sans'; font-size:12pt;">, убедитесь, что не произойдет ничего плохо при отсутствии этих программ в системе. Перед выполнением такой команды, выдайте сообщение для пользователя, что отсутствие этих команд не является проблемой, а ошибку, которая может возникнуть при попытке выполнения, проигнорируйте. (Здесь, может помочь макрос </span><span style=" font-family:'monospace'; font-size:12pt;">`AC_PROG_RANLIB'</span><span style=" font-family:'Sans'; font-size:12pt;"> программы Autoconf.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При использовании символических ссылок, вы должны предусмотреть &quot;запасной вариант&quot; для систем, где они не поддерживаются. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот список дополнительных утилит, которые можно использовать через соответствующие переменные </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">chgrp chmod chown mknod </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Все прочие утилиты возможно использовать во фрагментах make-файлов (или скриптах), используемых только для определенных систем, где эти утилиты действительно существуют. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC119"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC119"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еременные для имен команд</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Make-файлы должны предоставлять переменные, с помощью которых можно изменять определенные опции, команды и тому подобное. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В частности, большинство утилит нужно запускать с помощью соответствующих переменных. Так, при использовании программы Bison, следует использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">BISON</span><span style=" font-family:'Sans'; font-size:12pt;">, чье значение, по умолчанию, устанавливается как </span><span style=" font-family:'monospace'; font-size:12pt;">`BISON = bison'</span><span style=" font-family:'Sans'; font-size:12pt;">, и использовать переменную </span><span style=" font-family:'monospace'; font-size:12pt;">$(BISON)</span><span style=" font-family:'Sans'; font-size:12pt;"> при каждом запуске Bison. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вызов утилит, манипулирующих с файлами (таких, как </span><span style=" font-family:'monospace'; font-size:12pt;">ln</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">rm</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">mv</span><span style=" font-family:'Sans'; font-size:12pt;"> и им подобных), может производится без использования переменных, поскольку пользователям нет необходимости заменять эти утилиты другими программами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для каждой переменной, содержащая имя программы, должна иметься соответствующая переменная для хранения опций, которые будут передаваться этой программе. Для получения имени этой переменной, добавьте </span><span style=" font-family:'monospace'; font-size:12pt;">`FLAGS'</span><span style=" font-family:'Sans'; font-size:12pt;"> к имени перенной, ссылающейся на соответствующую программу. Так, например, опции для </span><span style=" font-family:'monospace'; font-size:12pt;">BISON</span><span style=" font-family:'Sans'; font-size:12pt;"> должны храниться в переменной </span><span style=" font-family:'monospace'; font-size:12pt;">BISONFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. (Имена </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> для компилятора Си, </span><span style=" font-family:'monospace'; font-size:12pt;">YFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> для программы yacc и </span><span style=" font-family:'monospace'; font-size:12pt;">LFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> для lex, являются исключениями, используемыми только в силу их &quot;стандартности&quot;.) Используйте </span><span style=" font-family:'monospace'; font-size:12pt;">CPPFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> для любых команд, использующих препроцессор и переменную </span><span style=" font-family:'monospace'; font-size:12pt;">LDFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> во всех командах, производящих компоновку или компиляцию с последующей компоновкой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если имеются какие-то опции компилятора Си, которые </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">должны</span><span style=" font-family:'Sans'; font-size:12pt;"> быть использованы для правильной компиляции определенных файлов, не следует включать их в </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Пользователи вправе ожидать, что они самостоятельно могут указать любое желаемое значение </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">. Вместо этого, передавайте необходимые опции &quot;в обход&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, например, &quot;прямо&quot; указывая их в команде компиляции или используя какую-нибудь другую переменную, наподобие: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS = -g</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ALL_CFLAGS = -I. $(CFLAGS)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.c.o:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -c $(CPPFLAGS) $(ALL_CFLAGS) $&lt; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Напротив, опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;"> вполне можно включить в </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку она </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не требуется</span><span style=" font-family:'Sans'; font-size:12pt;"> для успешной компиляции. Ее можно рассматривать как значение по умолчанию, которое лишь рекомендуется. Если, по умолчанию, предполагается, что пакет будет компилироваться с помощью компилятора GCC, в начальное значение </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> можно также включить опцию </span><span style=" font-family:'monospace'; font-size:12pt;">`-O'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Помещайте ссылку на </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> в конец строки с командой компиляции, после других переменных, содержащих опции компиляции, дабы пользователь мог использовать </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> для &quot;перекрытия&quot; этих опций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> должна использоваться при любом вызове компилятора Си (как для компиляции, так и для компоновки). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждый make-файл должен определять переменную </span><span style=" font-family:'monospace'; font-size:12pt;">INSTALL</span><span style=" font-family:'Sans'; font-size:12pt;">, которая является базовой командой для инсталляции файлов в систему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каждый make-файл должен определять переменные </span><span style=" font-family:'monospace'; font-size:12pt;">INSTALL_PROGRAM</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">INSTALL_DATA</span><span style=" font-family:'Sans'; font-size:12pt;">. (По умолчанию, они должны иметь значение </span><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL)</span><span style=" font-family:'Sans'; font-size:12pt;">.) Далее, эти переменные должны использоваться для инсталляции, соответственно, исполняемых и неисполняемых файлов. Эти переменные используются примерно таким способом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL_PROGRAM) foo $(bindir)/foo</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL_DATA) libfoo.a $(libdir)/libfoo.a </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">К имени целевого файла вы можете, дополнительно, добавить значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">DESTDIR</span><span style=" font-family:'Sans'; font-size:12pt;">. Сделав это, вы дадите возможность инсталлятору получить &quot;слепок&quot; инсталляции, который, в дальнейшем, может быть использован для реальной инсталляции в систему. Не пытайтесь установить значение </span><span style=" font-family:'monospace'; font-size:12pt;">DESTDIR</span><span style=" font-family:'Sans'; font-size:12pt;"> самостоятельно, из своего make-файла. С поддержкой </span><span style=" font-family:'monospace'; font-size:12pt;">DESTDIR</span><span style=" font-family:'Sans'; font-size:12pt;">, приведенный выше пример можно переписать так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Никогда не используйте имя каталога в качестве второго аргумента команды инсталляции - используйте имя конкретного файла. Используйте отдельную команду для каждого инсталлируемого файла. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC120"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC120"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">еременные для имен каталогов инсталляции</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталоги, куда происходит инсталляция всегда должны именоваться с использованием переменных, дабы пакет легко мог быть установлен в &quot;нестандартное&quot; место. Ниже приведены стандартные имена для таких переменных. Они базируются на &quot;общепринятой&quot; (в Unix) структуре файловой системы; ее варианты используются в SVR4, 4.4BSD, Linux, Ultrix v4 и других современных операционных системах. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующие две переменные определяют корневые каталоги для всего процесса инсталляции. Все прочие каталоги, куда будет происходить инсталляция, должны быть подкаталогами одного из них. Процесс инсталляции не должен помещать каких-либо файлов непосредственно в эти корневые каталоги. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`prefix'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Префикс, используемый для конструирования значений по умолчанию для перечисленных ниже переменных. По умолчанию, значением </span><span style=" font-family:'monospace'; font-size:12pt;">prefix</span><span style=" font-family:'Sans'; font-size:12pt;"> должно быть </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local'</span><span style=" font-family:'Sans'; font-size:12pt;">. При построении полной GNU-системы &quot;с нуля&quot;, этот префикс будет содержать пустое значение, а </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет символической ссылкой на </span><span style=" font-family:'monospace'; font-size:12pt;">`/'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@prefix@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Запуск </span><span style=" font-family:'monospace'; font-size:12pt;">`make install'</span><span style=" font-family:'Sans'; font-size:12pt;"> со значением </span><span style=" font-family:'monospace'; font-size:12pt;">prefix</span><span style=" font-family:'Sans'; font-size:12pt;">, отличным от того, который использовался для сборки пакета, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> должен приводить к перекомпиляции этого пакета. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`exec_prefix'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Префикс, используемый при конструировании значений по умолчанию для некоторых из перечисленных ниже переменных. По умолчанию, значением </span><span style=" font-family:'monospace'; font-size:12pt;">exec_prefix</span><span style=" font-family:'Sans'; font-size:12pt;"> должно быть </span><span style=" font-family:'monospace'; font-size:12pt;">$(prefix)</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@exec_prefix@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) В основном, </span><span style=" font-family:'monospace'; font-size:12pt;">$(exec_prefix)</span><span style=" font-family:'Sans'; font-size:12pt;"> используется для каталогов, содержащих машинно-зависимые файлы (например, исполняемые файлы и файлы библиотек), в то время как для остальных каталогов используется </span><span style=" font-family:'monospace'; font-size:12pt;">$(prefix)</span><span style=" font-family:'Sans'; font-size:12pt;">. Запуск </span><span style=" font-family:'monospace'; font-size:12pt;">`make install'</span><span style=" font-family:'Sans'; font-size:12pt;"> со значением </span><span style=" font-family:'monospace'; font-size:12pt;">exec_prefix</span><span style=" font-family:'Sans'; font-size:12pt;">, отличным от того, который использовался для сборки пакета, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> должен приводить к перекомпиляции этого пакета. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Исполняемые файлы должны инсталлироваться в одну из следующих директорий. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`bindir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для инсталляции исполняемых программ, которые могут быть запущены пользователем. Обычно, это </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/bin'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(exec_prefix)/bin'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, пишется как </span><span style=" font-family:'monospace'; font-size:12pt;">`@bindir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`sbindir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для инсталляции исполняемых программ, которые могут быть запущены из командного интерпретатора, но полезны, в основном, только для администраторов системы. Обычно, это директория </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/sbin'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(exec_prefix)/sbin'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, пишется как </span><span style=" font-family:'monospace'; font-size:12pt;">`@sbindir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`libexecdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для инсталляции исполняемых программ, которые запускаются не пользователями, а другими программами. Обычно, это каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/libexec'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(exec_prefix)/libexec'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@libexecdir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Файлы данных, используемые программами, можно классифицировать двумя различными способами. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В ходе &quot;обычной&quot; работы пакета, некоторые файлы могут модефицироваться, другие же никогда не модефицируются (хотя некоторые из них и могут редактироваться пользователем). </li>
<li style=" font-family:'Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Одни файлы являются архитектурно-независимыми и могут использоваться на любых машинах; другие файлы являются архитектурно-зависимыми и могут использоваться только на машинах одной архитектуры; третьи файлы могут являться специфичными для конкретной машины. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Таким образом, получается шесть возможных случаев. Однако, мы не рекомендуем вам использовать каких-либо архитектурно-зависимых файлов кроме объектных и библиотечных файлов. Все прочие файлы данных, лучше всего, сохранять архитектурно-независимыми и это, в общем, не так уж и сложно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот список переменных, которые должны использоваться в make-файлах для задания каталогов: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`datadir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директория, куда инсталлируются файлы данных, используемые только для чтения и независимые от архитектуры. Обычно, это каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/share'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вы должны использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/share'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@datadir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Ниже рассматривается специальное исключение - каталоги </span><span style=" font-family:'monospace'; font-size:12pt;">`$(infodir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">`$(includedir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`sysconfdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог, куда инсталлируются файлы с неизменяемыми данных, относящиеся только к конкретной машине (грубо говоря, файлы конфигурации хоста). Примерами могут служить конфигурационные файлы почтовой программы и сетевой поддержки, </span><span style=" font-family:'monospace'; font-size:12pt;">`/etc/passwd'</span><span style=" font-family:'Sans'; font-size:12pt;"> и тому подобное. Все файлы, помещаемые в эту директорию, должны быть обычными текстовыми ASCII файлами. Как правило, это каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/etc'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/etc'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, пишется как </span><span style=" font-family:'monospace'; font-size:12pt;">`@sysconfdir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Не помещайте в эту директорию исполняемых файлов (их, скорее всего, следует поместить в </span><span style=" font-family:'monospace'; font-size:12pt;">`$(libexecdir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`$(sbindir)'</span><span style=" font-family:'Sans'; font-size:12pt;">). Также, не помещайте в этот каталог файлов, которые модефицируются в ходе &quot;обычной&quot; работы (разумеется, мы не рассматриваем случаи использования программ, предназначенных для изменения конфигурационных файлов). Изменяемые файлы следует помещать в </span><span style=" font-family:'monospace'; font-size:12pt;">`$(localstatedir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`sharedstatedir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для инсталляции архитектурно-независимых файлов данных, которые модефицируются в ходе работы пакета. Обычно, это будет </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/com'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/com'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, пишется как </span><span style=" font-family:'monospace'; font-size:12pt;">`@sharedstatedir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`localstatedir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для инсталляции файлов с модефицируемыми данными, относящимися к конкретной машине. У пользователей не должно возникать необходимости в модефикации файлов из этого каталога для конфигурирования пакета; информацию о конфигурации следует помещать в отдельные файлы, расположенные в каталогах </span><span style=" font-family:'monospace'; font-size:12pt;">`$(datadir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`$(sysconfdir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">`$(localstatedir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> обычно будет содержать значение </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/var'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/var'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@localstatedir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`libdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для размещения объектных файлов и библиотек объектных файлов. Не помещайте сюда исполняемые файлы - инсталлируйте их в директорию </span><span style=" font-family:'monospace'; font-size:12pt;">`$(libexecdir)'</span><span style=" font-family:'Sans'; font-size:12pt;">. Как правило, значением </span><span style=" font-family:'monospace'; font-size:12pt;">libdir</span><span style=" font-family:'Sans'; font-size:12pt;"> будет </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/lib'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(exec_prefix)/lib'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, пишется как </span><span style=" font-family:'monospace'; font-size:12pt;">`@libdir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`infodir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог, куда будут помещаться Info файлы вашего пакета. По умолчанию, это будет </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/info'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/info'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@infodir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`lispdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директория, куда помещаются все Lisp-файлы для редактора Emacs, входящие в состав вашего пакета. Как правило, это </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/share/emacs/site-lisp'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/share/emacs/site-lisp'</span><span style=" font-family:'Sans'; font-size:12pt;">. При использовании Autoconf, это записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@lispdir@'</span><span style=" font-family:'Sans'; font-size:12pt;">. Для того, чтобы запись </span><span style=" font-family:'monospace'; font-size:12pt;">`@lispdir@'</span><span style=" font-family:'Sans'; font-size:12pt;"> сработала, в вашем </span><span style=" font-family:'monospace'; font-size:12pt;">`configure.in'</span><span style=" font-family:'Sans'; font-size:12pt;"> должна быть следующая строка: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">lispdir='${datadir}/emacs/site-lisp'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">AC_SUBST(lispdir) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`includedir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог, куда будут помещаться заголовочные файлы, предназначенные для включения в пользовательские программы с помощью директивы </span><span style=" font-family:'monospace'; font-size:12pt;">`#include'</span><span style=" font-family:'Sans'; font-size:12pt;"> препроцессора Си. Обычно, это каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/include'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/include'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@includedir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Кроме GCC, большинство других компиляторов не выполняют поиск заголовочных файлов в каталоге </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/include'</span><span style=" font-family:'Sans'; font-size:12pt;">, так что помещение их в данный каталог имеет смысл только при использовании компилятора GCC. Зачастую, это не является проблемой, поскольку многие библиотеки ориентированы на работу только с GCC. Однако, некоторые библиотеки могут работать и с другими компиляторами, поэтому их заголовочные файлы следует помещать сразу в два места - каталоги </span><span style=" font-family:'monospace'; font-size:12pt;">includedir</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">oldincludedir</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`oldincludedir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для заголовочных файлов </span><span style=" font-family:'monospace'; font-size:12pt;">`#include'</span><span style=" font-family:'Sans'; font-size:12pt;">, предназначенных для компиляторов, отличных от GCC. Обычно, это каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/include'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@oldincludedir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) Указанные в make-файле команды инсталляции должны проверять значение </span><span style=" font-family:'monospace'; font-size:12pt;">oldincludedir</span><span style=" font-family:'Sans'; font-size:12pt;">. Если это значение пусто, процесс инсталляции не должен пытаться его использовать, а должен отменить &quot;вторую&quot; инсталляцию заголовочных файлов. Пакет не должен замещать заголовочных файлов, находящихся в этой директории, если только они не взяты из этого же пакета. Так, если в пакете Foo имеется заголовочный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, то при инсталляции он должен помещаться в каталог </span><span style=" font-family:'monospace'; font-size:12pt;">oldincludedir</span><span style=" font-family:'Sans'; font-size:12pt;"> только если (1) там нет файла </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> или (2) файл </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> существует и был ранее установлен пакетом Foo. Для проверки того, что </span><span style=" font-family:'monospace'; font-size:12pt;">`foo.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> был установлен именно пакетом Foo, поместите в этот файл (как часть комментария) строку с определенной сигнатурой, по которой файл можно будет &quot;опознать&quot; с помощью программы </span><span style=" font-family:'monospace'; font-size:12pt;">grep</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Файлы помощи в стиле Unix (man-страницы, man pages) должны размещаться в одном из следующих каталогов: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`mandir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Корневая директория для размещения файлов помощи (если такие имеются) вашего пакета. Обычно, это будет </span><span style=" font-family:'monospace'; font-size:12pt;">`/usr/local/man'</span><span style=" font-family:'Sans'; font-size:12pt;">, но вам следует использовать запись it as </span><span style=" font-family:'monospace'; font-size:12pt;">`$(prefix)/man'</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autoconf, записывается как </span><span style=" font-family:'monospace'; font-size:12pt;">`@mandir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`man1dir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог для установки man-страниц, относящихся к разделу 1. Следует записывать как </span><span style=" font-family:'monospace'; font-size:12pt;">`$(mandir)/man1'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`man2dir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Директория для man-страниц, относящихся к разделу 2. Следует записывать как </span><span style=" font-family:'monospace'; font-size:12pt;">`$(mandir)/man2'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`...'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">Не используйте формат man-страничек как основной формат документации для программ GNU. Пишите документацию в формате Texinfo. Man-странички пригодны только для людей, использующих программы GNU в Unix-подобных операционных системах. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`manext'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Расширение имени файла для инсталлируемых man-страничек. Оно должно начинаться с точки за которой следует соответствующая цифра; обычно, это будет </span><span style=" font-family:'monospace'; font-size:12pt;">`.1'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`man1ext'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Расширение имени файла для инсталляции man-страничек, относящихся к секции 1. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`man2ext'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Расширение имени файла для инсталляции man-страничек, относящихся к секции 2. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`...'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Используйте эти имена вместо </span><span style=" font-family:'monospace'; font-size:12pt;">`manext'</span><span style=" font-family:'Sans'; font-size:12pt;">, если пакет нуждается в инсталляции man-страничек, относящихся к нескольким секциям. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">И, наконец, вы должны установить следующую переменную: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`srcdir'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Каталог с исходными файлами компилируемого пакета. Значение этой переменной, обычно, устанавливается скриптом </span><span style=" font-family:'monospace'; font-size:12pt;">configure</span><span style=" font-family:'Sans'; font-size:12pt;">. (При использовании Autconf, используйте запись </span><span style=" font-family:'monospace'; font-size:12pt;">`srcdir = @srcdir@'</span><span style=" font-family:'Sans'; font-size:12pt;">.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Пример: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Общий префикс для инсталляционных каталогов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Примечание: Этот каталог должен существовать еще до начала инсталляции.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prefix = /usr/local</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">exec_prefix = $(prefix)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Сюда будет помещаться исполняемый файл команды `gcc'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bindir = $(exec_prefix)/bin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Сюда будут помещаться каталоги, используемые компилятором.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">libexecdir = $(exec_prefix)/libexec</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Сюда будут помещаться Info-файлы.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">infodir = $(prefix)/info </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Если ваша программа устанавливает большое количество файлов в один из &quot;стандартных&quot; каталогов, определенных пользователем, можно сгруппировать их в отдельный подкаталог, относящийся к данному пакету. Такие подкаталоги должны создаваться правилом </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Не следует ожидать, что устанавливаемые пользователем значения указанных выше переменных, будут содержать имена конкретных подкаталогов (соответствующих данному пакету). Смысл наличия &quot;унифицированного&quot; набора имен переменных состоит в том, чтобы пользователь мог задать одинаковые значения для нескольких разных пакетов GNU-программ. Пакеты должны быть спроектированы таким образом, чтобы правильно использовать задаваемые пользователем значения. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC121"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC121"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">тандартные имена целей для пользователей</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Все GNU-программы должны иметь в своем make-файле следующие цели: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция всей программы. По умолчанию, именно эта цель должна являться главной целью. Эта цель не должна пересобирать файлы документации; Info-файлы должны иметься в составе дистрибутива, а файлы DVI должны создаваться только по специальному запросу. По умолчанию, компиляция и компоновка должна выполняться с опцией </span><span style=" font-family:'monospace'; font-size:12pt;">`-g'</span><span style=" font-family:'Sans'; font-size:12pt;">, дабы исполняемые файлы имели отладочную информацию. Пользователи, которые не бояться оказаться в трудной ситуации, могут, при желании, потом убрать эту отладочную информацию. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`install'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Компиляция программы и копирование исполняемых файлов, файлов библиотек и прочих файлов в те места, где они должны, в действительности, располагаться в системе. При наличии какого-нибудь простого теста, проверяющего правильность инсталляции пакета, такой тест должен запускаться. Не убирайте отладочную информацию из исполняемых файлов во время их инсталляции. Озабоченные наличием такой информации пользователи, могут использовать </span><span style=" font-family:'monospace'; font-size:12pt;">install-strip</span><span style=" font-family:'Sans'; font-size:12pt;">. Будучи запущенной сразу после </span><span style=" font-family:'monospace'; font-size:12pt;">`make all'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">, по возможности, не должна ничего модефицировать в каталоге, где собиралась программа. Дело в том, что сборка программного пакета и его инсталляция очень часто выполняются под разными именами пользователей. Если каталогов, куда инсталлируются файлы пакета, не существует, они должны создаваться (в том числе и каталоги, указанные в </span><span style=" font-family:'monospace'; font-size:12pt;">prefix</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">exec_prefix</span><span style=" font-family:'Sans'; font-size:12pt;">). Для этого можно использовать правило </span><span style=" font-family:'monospace'; font-size:12pt;">installdirs</span><span style=" font-family:'Sans'; font-size:12pt;"> (описано ниже). Используйте </span><span style=" font-family:'monospace'; font-size:12pt;">`-'</span><span style=" font-family:'Sans'; font-size:12pt;"> во всех командах, инсталлирующих man-странички, дабы игнорировать любые ошибки, которые могут возникать в системах, не имеющих документации в формате man-страничек. Файлы Info инсталлируются путем копирования их в каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`$(infodir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> при помощи </span><span style=" font-family:'monospace'; font-size:12pt;">$(INSTALL_DATA)</span><span style=" font-family:'Sans'; font-size:12pt;"> (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC119"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменные для имен команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">), с последующим запуском </span><span style=" font-family:'monospace'; font-size:12pt;">install-info</span><span style=" font-family:'Sans'; font-size:12pt;"> (если эта программа задана). Переменная </span><span style=" font-family:'monospace'; font-size:12pt;">install-info</span><span style=" font-family:'Sans'; font-size:12pt;"> содержит имя программы, которая редактирует файл </span><span style=" font-family:'monospace'; font-size:12pt;">`dir'</span><span style=" font-family:'Sans'; font-size:12pt;"> (каталог Info-файлов), добавляя или обновляя записи об инсталлированных Info-файлах; эта программа является частью пакета Texinfo. Вот пример правила для инсталляции Info-файла: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(DESTDIR)$(infodir)/foo.info: foo.info</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(POST_INSTALL)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># В каталоге . может находится более новая версия info-файла, чем в srcdir.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -if test -f foo.info; then d=.; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">         else d=$(srcdir); fi; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(INSTALL_DATA) $$d/foo.info $(DESTDIR)$@; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Запускаем install-info только при его наличии.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Используем `if' вместо начального `-' </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># чтобы не пропустить ошибку, которую может вернуть install-info.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Мы используем `$(SHELL) -c', поскольку некоторые оболочки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># завершаются не вполне корректно, встретив неизвестную команду.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        if $(SHELL) -c 'install-info --version' \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">           &gt;/dev/null 2&gt;&amp;1; then \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          install-info --dir-file=$(DESTDIR)$(infodir)/dir \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                       $(DESTDIR)$(infodir)/foo.info; \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        else true; fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При описании цели </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">, вы должны отнести все ее команды к одной из трех категорий: обычные (normal), команды </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">пред-инсталляции (pre-installation)</span><span style=" font-family:'Sans'; font-size:12pt;"> и команды </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">пост-инсталляции (post-installation)</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC122"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Категории&quot; команд инсталляции</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`uninstall'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удалить все инсталлированные файлы - копии файлов, созданные при выполнении </span><span style=" font-family:'monospace'; font-size:12pt;">`install'</span><span style=" font-family:'Sans'; font-size:12pt;">. Это правило не должно модефицировать каталоги, где осуществлялась сборка пакета - можно модефицировать только каталоги с инсталлированными файлами. Команды деинсталляции также, как и команды инсталляции, делятся на три категории. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC122"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">&quot;Категории&quot; команд инсталляции</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`install-strip'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогично </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">, но в процессе инсталляции из исполняемых файлов удаляется отладочная информация. Во многих случаях, определение этой цели может быть очень простым: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">install-strip:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                install</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, мы не рекомендуем удалять из исполняемых файлов отладочную информацию, если только вы не уверены, что программа не содержит ошибок. Однако, вполне разумно инсталлировать исполняемые файлы без отладочной информации, сохранив где-нибудь (на случай ошибки) их &quot;оригинальные&quot; версии с отладочной информацией. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удалить из текущей директории все файлы, созданные в ходе сборки программы. Файлы с конфигурацией, при этом, удаляться не должны. Не должны также удаляться файлы, которые, хотя и могут быть созданы заново, но, как правило, не создаются, так как имеются в пакете уже в &quot;готовом виде&quot;. Напротив, файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.dvi'</span><span style=" font-family:'Sans'; font-size:12pt;"> следует удалить, если только они не в входят в дистрибутив пакета. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`distclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удаляет все файлы из текущей директории, созданные в процессе конфигурировании или сборки пакета. Если вы распаковали исходные файлы и собрали программу, не создавая никаких дополнительных файлов, после команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make distclean'</span><span style=" font-family:'Sans'; font-size:12pt;">, в каталоге должны остаться только файлы, входящие в исходный дистрибутив пакета. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`mostlyclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобно </span><span style=" font-family:'monospace'; font-size:12pt;">`clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, но может воздержаться от удаления некоторых файлов, которые, обычно, &quot;нежелательно&quot; перекомпилировать. Так, например, </span><span style=" font-family:'monospace'; font-size:12pt;">`mostlyclean'</span><span style=" font-family:'Sans'; font-size:12pt;"> для компилятора GCC не удаляет файл </span><span style=" font-family:'monospace'; font-size:12pt;">`libgcc.a'</span><span style=" font-family:'Sans'; font-size:12pt;">, поскольку необходимость в его перекомпиляции возникает редко, а занимает она много времени. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удаляет из текущей директории практически все, что может быть построено с помощью make-файла. В этот список, обычно, входят все файлы, удаляемые с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">distclean</span><span style=" font-family:'Sans'; font-size:12pt;">, а также: Си-программы, полученные с помощью Bison, таблицы тегов, Info-файлы и тому подобное. Мы сказали &quot;практически все&quot;, потому что команда </span><span style=" font-family:'monospace'; font-size:12pt;">`make maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> не должна удалять скрипт </span><span style=" font-family:'monospace'; font-size:12pt;">`configure'</span><span style=" font-family:'Sans'; font-size:12pt;">, даже если если для него имеется правило в make-файле, с помощью которого </span><span style=" font-family:'monospace'; font-size:12pt;">`configure'</span><span style=" font-family:'Sans'; font-size:12pt;"> может быть создан заново. В общем, команда </span><span style=" font-family:'monospace'; font-size:12pt;">`make maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> не должна удалять ничего, что необходимо для запуска </span><span style=" font-family:'monospace'; font-size:12pt;">`configure'</span><span style=" font-family:'Sans'; font-size:12pt;"> и последующей сборки пакет. Это и является единственным исключением; все остальные файлы, которые могут быть построены заново, команда </span><span style=" font-family:'monospace'; font-size:12pt;">maintainer-clean</span><span style=" font-family:'Sans'; font-size:12pt;"> должна удалять. Предполагается, что </span><span style=" font-family:'monospace'; font-size:12pt;">`maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> будет использоваться только лицом, сопровождающим данный пакет, а не обычными пользователями. Вполне возможно, что для получения некоторых файлов, удаленных при помощи </span><span style=" font-family:'monospace'; font-size:12pt;">`make maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, могут потребоваться какие-то специальные программы, не включенные в состав дистрибутива. Поскольку, все нужные для сборки пакета файлы входят в дистрибутив, нам нет смысла беспокоиться о том, насколько прост процесс их создания. Так что, если после команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make maintainer-clean'</span><span style=" font-family:'Sans'; font-size:12pt;"> окажется, что для сборки пакета вам придется заново распаковывать дистрибутив - не жалуйтесь. Для того, чтобы предупредить пользователя о возможных проблемах, правило для цели </span><span style=" font-family:'monospace'; font-size:12pt;">maintainer-clean</span><span style=" font-family:'Sans'; font-size:12pt;"> должно начинаться следующими командами: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">@echo 'This command is intended for maintainers to use; it'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">@echo 'deletes files that may need special tools to rebuild.'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">('Эта команда предназначена для использования только лицом, сопровождающим данный пакет; она удаляет некоторые файлы, для создания которых требуются специальные программы.') </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`TAGS'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обновляет таблицу тегов (tags table) для программы. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`info'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Сгенерировать все необходимые Info-файлы. Один из лучших способов определить подобное правило - использовать запись, наподобие: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">info: foo.info</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.info: foo.texi chap1.texi chap2.texi</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(MAKEINFO) $(srcdir)/foo.texi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В make-файле вы должны определить переменную </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEINFO</span><span style=" font-family:'Sans'; font-size:12pt;">. Она должна запускать программу </span><span style=" font-family:'monospace'; font-size:12pt;">makeinfo</span><span style=" font-family:'Sans'; font-size:12pt;">, входящую в состав пакета Texinfo. Как правило, пакеты программ GNU имеют в своем дистрибутиве все необходимые Info-файлы, а это означает, что Info-файлы находятся в каталоге с исходными файлами. Таким образом, команды, обновляющие info-файлы, должны обновлять их в директории с исходными файлами. Обычно, при сборке пользователем пакета программ, обновления Info-файлов не происходит, поскольку в дистрибутиве они находятся в &quot;готовом виде&quot; и не нуждаются в обновлении. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`dvi'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Сгенерировать DVI-файлы для всей документации в формате Texinfo. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dvi: foo.dvi</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">foo.dvi: foo.texi chap1.texi chap2.texi</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(TEXI2DVI) $(srcdir)/foo.texi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В make-файле вы должны определить переменную </span><span style=" font-family:'monospace'; font-size:12pt;">TEXI2DVI</span><span style=" font-family:'Sans'; font-size:12pt;">. Она должна запускать программу </span><span style=" font-family:'monospace'; font-size:12pt;">texi2dvi</span><span style=" font-family:'Sans'; font-size:12pt;">, которая входит в состав пакета Texinfo. </span><a name="DOCF3"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#FOOT3"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">(</span></a><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">3)</span><span style=" font-family:'Sans'; font-size:12pt;"> Как альтернатива, в правиле можно перечислить только пререквизиты, предоставив GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> возможность самостоятельно выполнить нужные команды. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`dist'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Создать дистрибутивный tar-файл для этой программы. Tar-файл должен быть построен таким образом, чтобы имена содержащихся в нем файлов начинались с имени каталога, отражающим название пакета, для которого предназначается данный дистрибутив. Это имя может включать в себя номер версии пакета. Например, дистрибутивный tar-файл компилятора GCC версии 1.40 распаковывается в подкаталог с именем </span><span style=" font-family:'monospace'; font-size:12pt;">`gcc-1.40'</span><span style=" font-family:'Sans'; font-size:12pt;">. Проще всего это сделать, создав подкаталог с нужным именем и поместить туда нужные файлы с помощью </span><span style=" font-family:'monospace'; font-size:12pt;">ln</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">cp</span><span style=" font-family:'Sans'; font-size:12pt;">. Далее, для этого каталога надо выполнить команду </span><span style=" font-family:'monospace'; font-size:12pt;">tar</span><span style=" font-family:'Sans'; font-size:12pt;"> и сжать полученный архивный файл программой </span><span style=" font-family:'monospace'; font-size:12pt;">gzip</span><span style=" font-family:'Sans'; font-size:12pt;">. Например, дистрибутивный файл для GCC версии 1.40 называется </span><span style=" font-family:'monospace'; font-size:12pt;">`gcc-1.40.tar.gz'</span><span style=" font-family:'Sans'; font-size:12pt;">. Цель </span><span style=" font-family:'monospace'; font-size:12pt;">dist</span><span style=" font-family:'Sans'; font-size:12pt;"> должна иметь явные зависимости от всех файлов, которые не являются исходными, но, вместе с тем, должны входить в дистрибутив. В этом случае, будет уверенность, что все такие файлы имеют самую свежую версию и попадут в состав дистрибутива. Смотрите раздел `Making Releases' документа </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">GNU Coding Standards</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`check'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выполнить самотестирование программы (если оно предусмотрено). Перед запуском тестов, пользователь должен осуществить сборку программы, но не обязан ее инсталлировать; вы должны писать тесты таким образом, чтобы для своей работы они не требовали инсталляции проверяемого пакета. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Там, где это уместно, рекомендуется использовать цели со следующими именами: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">installcheck</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Проверить правильность инсталляции (если подобный тест предусмотрен). Перед запуском теста, пользователь должен собрать и инсталлировать пакет. Не следует предполагать, что каталог </span><span style=" font-family:'monospace'; font-size:12pt;">`$(bindir)'</span><span style=" font-family:'Sans'; font-size:12pt;"> находится в пути поиска. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">installdirs</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В make-файле полезно иметь цель </span><span style=" font-family:'monospace'; font-size:12pt;">`installdirs'</span><span style=" font-family:'Sans'; font-size:12pt;">, создающую все каталоги (включая и родительские), которые используются для инсталляции файлов пакета. В составе пакета Texinfo имеется скрипт </span><span style=" font-family:'monospace'; font-size:12pt;">`mkinstalldirs'</span><span style=" font-family:'Sans'; font-size:12pt;">, который удобно использовать для подобной цели. Используя этот скрипт, соответствующее правило можно записать так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Убедиться в том, что все требуемые для инсталляции каталоги (например, $(bindir)) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># действительно существуют и, при необходимости, создать их.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">installdirs: mkinstalldirs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(srcdir)/mkinstalldirs $(bindir) $(datadir) \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                                $(libdir) $(infodir) \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                                $(mandir)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подобное правило не должно модефицировать каталогов, где осуществлялась сборка пакета. Это правило не должно делать ничего, кроме создания каталогов для инсталляции. </span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC122"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC122"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">Категории&quot; команд инсталляции</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX921"></a><span style=" font-family:'Sans'; font-size:12pt;">П</span><span style=" font-family:'Sans'; font-size:12pt;">ри описании цели </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">, вы должны отнести указываемые команды к одной из трех категорий: обычные (normal) команды, команды </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">пред-инсталляции (pre-installation)</span><span style=" font-family:'Sans'; font-size:12pt;"> и команды </span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">пост-инсталляции (post-installation)</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">&quot;Обычные&quot; команды помещают файлы в нужное место и устанавливают для них необходимые аттрибуты доступа. Они не должны модефицировать никаких файлов, кроме тех, которые взяты из данного пакет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Команды пред-инсталляции и пост-инсталляции могут изменять другие файлы; в частности, модефицировать &quot;глобальные&quot; конфигурационные файлы или файлы записей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, команды пред-инсталляции исполняются до &quot;обычных&quot; команд инсталляции, а команды пост-инсталляции - после &quot;обычных&quot; команд. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Чаще всего, команды пост-инсталляции используются для запуска </span><span style=" font-family:'monospace'; font-size:12pt;">install-info</span><span style=" font-family:'Sans'; font-size:12pt;">. Для этого не могут быть использованы обычные команды, поскольку при этом изменяется содержимое файла (Info-директории), который не является частью инсталлируемого пакета. Для этого нужно использовать команды пост-инсталляции, потому что подобное действие должно выполняться после завершения работы &quot;обычных&quot; команд, которые инсталлируют необходимые Info-файлы пакета. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Большинство программ не нуждается в командах пред-инсталляции, но, на всякий случай, мы предусмотрели и подобную возможность. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для того, чтобы отнести команды правила </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;"> к одной из трех возможных категорий, перед ними надо вставить соответствующую строку с именем категории (</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;">category lines</span><span style=" font-family:'Sans'; font-size:12pt;">). Эта строка задаст категорию для следующих за нею команд. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Строка с указанием категории состоит из символа табуляции, за которым следует ссылка на специальную переменную; в конце строки может находится комментарий. Всего существует три таких специальных переменных - по одной на каждую категорию команд; каждое имя указывает свою категорию. При &quot;обычном&quot; исполнении, строки с категориями не выполняют никаких операций, поскольку соответствующие переменные, обычно, не определены (и вы </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не должны</span><span style=" font-family:'Sans'; font-size:12pt;"> определять их в своем make-файле). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Ниже перечислены все три возможных категории: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(PRE_INSTALL)     # Далее следуют команды пред-инсталляции.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(POST_INSTALL)    # Далее следуют команды пост-инсталляции.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(NORMAL_INSTALL)  # Далее следуют &quot;обычные&quot; команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При отсутствии строки с категорией в начале правила </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;">, все командные строки от начала правила до первой строки с категорией, будут рассматриваться как &quot;обычные&quot;. При отсутствии каких-либо строк с категориями, все команды правила будут рассматриваться как &quot;обычные&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Аналогично, имеется три категории команд для правила </span><span style=" font-family:'monospace'; font-size:12pt;">uninstall</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(PRE_UNINSTALL)     # Далее следуют команды пред-деинсталляции.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(POST_UNINSTALL)    # Далее следуют команды пост-деинсталляции.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(NORMAL_UNINSTALL)  # Далее следуют &quot;обычные&quot; команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Обычно, команды пред-деинсталляции используются для удаления записей (о деинсталлируемых Info-файлах) из Info-директории. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При наличии у целей </span><span style=" font-family:'monospace'; font-size:12pt;">install</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">uninstall</span><span style=" font-family:'Sans'; font-size:12pt;"> любых пререквизитов, работающих как &quot;подпрограммы&quot; инсталляции, для </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">каждой</span><span style=" font-family:'Sans'; font-size:12pt;"> строки с командой в этих пререквизитах должна быть указана ее категория. Команды для &quot;главной&quot; цели, также должны начинаться со строки категории. Только в этом случае можно быть уверенным, что все команды попадут в нужную категорию, независимо от того, какие из пререквизитов обрабатывались. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Команды пред-инсталляции и пост-инсталляции не должны запускать каких-либо программ, кроме: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">[ basename bash cat chgrp chmod chown cmp cp dd diff echo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">egrep expand expr false fgrep find getopt grep gunzip gzip</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">hostname install install-info kill ldconfig ln ls md5sum</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">mkdir mkfifo mknod mv printenv pwd rm rmdir sed sort tee</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">test touch true uname xargs yes </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="IDX923"></a><span style=" font-family:'Sans'; font-size:12pt;">Н</span><span style=" font-family:'Sans'; font-size:12pt;">еобходимость разделения команд на категории возникает из-за необходимости уметь инсталлировать &quot;бинарные&quot; дистрибутивы пакетов. Как правило, такой пакет содержит все необходимые файлы (в том числе и исполняемые) в готовом виде и использует свой собственный метод их инсталляции. Таким образом, ему не требуется запускать &quot;обычные&quot; команды инсталляции. Однако, при инсталляции бинарного пакета, нужно выполнить команды пред-инсталляции и пост-инсталляции. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Программы для сборки бинарных пакетов работают, &quot;извлекая&quot; команды пред-инсталляции и пост-инсталляции. Вот один из возможных способов извлечения команд пред-инсталляции: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">make -n install -o all \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">      PRE_INSTALL=pre-install \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">      POST_INSTALL=post-install \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">      NORMAL_INSTALL=normal-install \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">  | gawk -f pre-install.awk </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Здесь, файл </span><span style=" font-family:'monospace'; font-size:12pt;">`pre-install.awk'</span><span style=" font-family:'Sans'; font-size:12pt;"> может содержать что-нибудь, наподобие: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$0 ~ /^\t[ \t]*(normal_install|post_install)[ \t]*$/ {on = 0}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">on {print $0}</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$0 ~ /^\t[ \t]*pre_install[ \t]*$/ {on = 1} </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В результате получается файл с командами пред-инсталляции, который, затем, выполняется командным интерпретатором в процессе инсталляции бинарного пакета. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC123"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC123"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">правочник</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В данном приложении перечислены все директивы, функции и специальные переменные, распознаваемые программой GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите также разделы </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC36"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Имена специальных целей</span></a><span style=" font-family:'Sans'; font-size:12pt;">, </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC95"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Перечень имеющихся неявных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">, и </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC92"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Обзор опций</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот перечень директив, распознаваемых GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">define </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Определить многострочную, рекурсивно-вычисляемую переменную.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC55"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Именованные командные последовательности</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifdef </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifndef </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifeq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">' '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq (</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">&quot;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">ifneq '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">a</span><span style=" font-family:'monospace'; font-size:12pt;">' '</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">b</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">else</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endif</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Условно обработать часть make-файла.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC71"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Условные части make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">include </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">-include </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">sinclude </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">файл</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подключить другой make-файл.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC15"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Подключение других make-файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> := </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> += </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'monospace'; font-size:12pt;"> ?= </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">override define </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имя_переменной</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">endef</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Определить переменную с &quot;перекрытием&quot; предыдущего ее определения (в том числе и заданного с помощью командной строки). <br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC66"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">override</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Инструктирует </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> экспортировать, по умолчанию, все переменные в дочерние процессы. <br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> = </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> := </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> += </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">export </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;"> ?= </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">значение</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">unexport </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Включить или отключить экспорт конкретной переменной в дочерние процессы. <br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">путь</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Задать путь поиска для файлов, подходящих под указанный шаблон (с символом </span><span style=" font-family:'monospace'; font-size:12pt;">%</span><span style=" font-family:'Sans'; font-size:12pt;">). <br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC28"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Директива </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC28"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">vpath</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удалить все пути поиска, заданные ранее для указанного шаблона. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удалить все пути поиска, заданные ранее с помощью директив </span><span style=" font-family:'monospace'; font-size:12pt;">vpath</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Далее приведен список функций, манипулирующих с текстом (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">): </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(subst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">исходная_строка</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">конечная_строка</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Заменить </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">исходную_строку</span><span style=" font-family:'Sans'; font-size:12pt;"> на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">конечную_строку</span><span style=" font-family:'Sans'; font-size:12pt;"> в указанном </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(patsubst </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">замена</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Заменить все слова, подходящие под </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'Sans'; font-size:12pt;">, на </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">замену</span><span style=" font-family:'Sans'; font-size:12pt;"> в указанном </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(strip </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">строка</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Удалить из указанной </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">строки</span><span style=" font-family:'Sans'; font-size:12pt;"> избыточные пробелы.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(findstring </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">искомая_строка</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Найти </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">искомую_строку</span><span style=" font-family:'Sans'; font-size:12pt;"> в указанном </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выбрать из указанного </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> все слова, подходящие под </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблон(ы)</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(filter-out </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выбрать из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> слова, </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не подходящие</span><span style=" font-family:'Sans'; font-size:12pt;"> ни под один из указанных </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">шаблонов</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(sort </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Отсортировать слова из </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">списка</span><span style=" font-family:'Sans'; font-size:12pt;"> в лексикографическом порядке, удалив дубликаты.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC77"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции анализа и подстановки строк</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(dir </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Из указанных имен файлов выделяет части, определяющие имена каталогов.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(notdir </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Из каждого указанного имени файла выделить часть, которая не является именем каталога.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(suffix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Из каждого имени файла выделить суффикс (последний </span><span style=" font-family:'monospace'; font-size:12pt;">`.'</span><span style=" font-family:'Sans'; font-size:12pt;"> и следующие за ним символы).<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(basename </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выделяет &quot;базовое имя&quot; (часть имени без суффикса) из каждого имени файла.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addsuffix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Добавляет </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">суффикс</span><span style=" font-family:'Sans'; font-size:12pt;"> к каждому из указанных </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имен</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(addprefix </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">префикс</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Предваряет </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">префиксом</span><span style=" font-family:'Sans'; font-size:12pt;"> каждое из указанных </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имен</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(join </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список1</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">список2</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Объединяет два &quot;параллельных&quot; списка слов.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(word </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выделяет </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">n</span><span style=" font-family:'Sans'; font-size:12pt;">-ное слово (счет начинается с единицы) из указанного </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(words </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Подсчитывает количество слов в указанном </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">тексте</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wordlist </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">от</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">до</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Возвращает список слов из указанного </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;"> с номерами </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">от</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">до</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(firstword </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">имена</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выделяет первое слово из указанного списка </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">имен</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC78"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции для обработки имен файлов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(wildcard </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">шаблон</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Получить список файлов, чьи имена подходят под указанный шаблон (шаблон записывает в формате интерпретатора командной строки, а </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">не</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt;">`%'</span><span style=" font-family:'Sans'; font-size:12pt;">-шаблона).<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC25"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">wildcard</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(error </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">сообщение</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вычислении этой функции, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> генерирует фатальную ошибку с указанным </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">сообщением</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC84"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции управления сборкой</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(warning </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">сообщение</span><span style=" font-family:'monospace'; font-size:12pt;">...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При вычислении этой функции, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> выдает предупреждение (warning) с указанным </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">сообщением</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC84"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции управления сборкой</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(shell </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">команда</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Выполнить команду оболочки и возвратить выведенную ей информацию. <br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC83"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC83"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">shell</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(origin </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вернуть строку, описывающую, каким образом была определена переменная </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC82"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">origin</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(foreach </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная-аргумент</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">слова</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">текст</span><span style=" font-family:'monospace'; font-size:12pt;">)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вычислить значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">текста</span><span style=" font-family:'Sans'; font-size:12pt;">, поочередно подставляя в </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменную-аргумент</span><span style=" font-family:'Sans'; font-size:12pt;"> слова из списка </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">слова</span><span style=" font-family:'Sans'; font-size:12pt;">, и объединить полученные результаты.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC79"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC79"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">foreach</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(call </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">переменная</span><span style=" font-family:'monospace'; font-size:12pt;">,</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">параметр</span><span style=" font-family:'monospace'; font-size:12pt;">,...)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вычислить и вернуть значение </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">переменной</span><span style=" font-family:'Sans'; font-size:12pt;">, заменяя ссылки </span><span style=" font-family:'monospace'; font-size:12pt;">$(1)</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">$(2)</span><span style=" font-family:'Sans'; font-size:12pt;"> на значения первого, второго и так далее </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">параметров</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC81"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функция </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC81"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">call</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот список имеющихся автоматических переменных. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC101"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Автоматические переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">, где они описаны подробно. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$@</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя файла цели. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$%</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя элемента для целей, являющихся элементами архива. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$&lt;</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя первого пререквизита из списка пререквизитов </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$?</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена всех пререквизитов (разделенные пробелами), которые являются более новыми, чем цель. Для пререквизитов, являющихся элементами архивов, используются только имена элементов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$^</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$+</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имена всех пререквизитов, разделенные пробелами. Для пререквизитов, являющихся элементами архивов, используются только имена элементов (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC108"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> для обновления архивов</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Значение переменной </span><span style=" font-family:'monospace'; font-size:12pt;">$^</span><span style=" font-family:'Sans'; font-size:12pt;"> не содержит дубликатов пререквизитов, в то время как </span><span style=" font-family:'monospace'; font-size:12pt;">$+</span><span style=" font-family:'Sans'; font-size:12pt;"> сохраняет дубликаты и &quot;оригинальный&quot; порядок следования пререквизитов. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$*</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Основа имени (stem), с которой было сопоставлено неявное правило (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC102"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Процедура сопоставления с шаблоном</span></a><span style=" font-family:'Sans'; font-size:12pt;">). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(@D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(@F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$@</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(*D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(*F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$*</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(%D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(%F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$%</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(&lt;D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(&lt;F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$&lt;</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(^D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(^F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$^</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(+D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(+F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$+</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(?D)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(?F)</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Части имени </span><span style=" font-family:'monospace'; font-size:12pt;">$?</span><span style=" font-family:'Sans'; font-size:12pt;">, которые представляют собой имя каталога и имя файла внутри каталога, соответственно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Следующие переменные GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> использует специальным образом: </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKEFILES</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Make-файлы, которые будут считываться при каждом вызове </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC16"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">MAKEFILES</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">VPATH</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Путь поиска для файлов, которые не могут быть найдены в текущем каталоге.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">VPATH</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC27"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">: список каталогов для поиска пререквизитов</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя используемого по умолчанию командного интерпретатора, обычно </span><span style=" font-family:'monospace'; font-size:12pt;">`/bin/sh'</span><span style=" font-family:'Sans'; font-size:12pt;">. В своем make-файле вы можете установить для переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> новое значение, изменив, тем самым, командный интерпретатор, который будет использоваться для вызова команд. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKESHELL</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Используется только при работе в системе MS-DOS и содержит имя командного интерпретатора, который будет использоваться </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Это значение имеет приоритет перед значением переменной </span><span style=" font-family:'monospace'; font-size:12pt;">SHELL</span><span style=" font-family:'Sans'; font-size:12pt;">. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC46"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Исполнение команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя, с помощью которого была вызвана </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Использование этой переменной в командах имеет специальное значение. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Как работает переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">MAKE</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKELEVEL</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Текущий &quot;уровень вложенности&quot; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> при рекурсивном вызове.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Связь с </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC52"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot; через переменные</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Опции, заданные для </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Вы можете установить эту переменную из операционной среды или присвоить ей нужное значение внутри make-файла.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Передача опций в </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">Никогда</span><span style=" font-family:'Sans'; font-size:12pt;"> не задавайте значение </span><span style=" font-family:'monospace'; font-size:12pt;">MAKEFLAGS</span><span style=" font-family:'Sans'; font-size:12pt;"> непосредственно в командной строке: в командный интерпретатор это значение может быть передано некорректно. Никогда не препятствуйте рекурсивно вызванным экземплярам </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в получении значения этой переменной через операционную среду. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">MAKECMDGOALS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Цели, заданные </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в командной строке. Присваивание этой переменной другого значения не влияет на работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC87"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аргументы для задания главной цели</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CURDIR</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Имя текущего рабочего каталога (после того, как были обработаны все опции </span><span style=" font-family:'monospace'; font-size:12pt;">-C</span><span style=" font-family:'Sans'; font-size:12pt;">, если такие были заданы). Присваивание этой переменной другого значения, не влияет на работу </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Рекурсивный вызов </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC50"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SUFFIXES</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Список используемых по умолчанию (до того, как </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> начнет интерпретировать make-файлы) суффиксов для суффиксных правил. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">.LIBPATTERNS</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Определяет способ именования и порядок следования библиотек, поиск которых проводит </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">.<br />Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC32"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Поиск в каталогах для подключаемых библиотек</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC124"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC124"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">С</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ообщения об ошибках</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Далее, приведен список наиболее распространенных ошибок, выдаваемых программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, с информации о том, что они означают, и как их можно исправить. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Иногда, ошибки </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не являются фатальными, особенно при наличии префикса </span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'Sans'; font-size:12pt;"> в командах или опции </span><span style=" font-family:'monospace'; font-size:12pt;">-k</span><span style=" font-family:'Sans'; font-size:12pt;"> в аргументах командной строки. Ошибки, являющиеся фатальными, предваряются строчкой </span><span style=" font-family:'monospace'; font-size:12pt;">***</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Сообщения об ошибки также предваряются именем программы (обычно, </span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;">), или, если ошибка произошла в конкретном make-файле, то именем этого файла и номером строки, где была обнаружена ошибка. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В приведенной ниже таблице такого рода общие &quot;префиксы&quot; опущены. </span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`[</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">foo</span><span style=" font-family:'monospace'; font-size:12pt;">] Error </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">NN</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`[</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">foo</span><span style=" font-family:'monospace'; font-size:12pt;">] </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">описание сигнала</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эти ошибки не являются ошибками </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Они означают, что программа, запущенная </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> в качестве команды, вернула ненулевой код возврата (</span><span style=" font-family:'monospace'; font-size:12pt;">`Error </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">NN</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;">), который интерпретируется </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> как ошибка, либо эта программа была аварийно завершена (например, получив соответствующий сигнал). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC48"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Ошибки при исполнении команд</span></a><span style=" font-family:'Sans'; font-size:12pt;">. Отсутствие в начале сообщения об ошибке строки </span><span style=" font-family:'monospace'; font-size:12pt;">***</span><span style=" font-family:'Sans'; font-size:12pt;"> означает, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> игнорировала данную ошибку из-за наличия в команде префикса </span><span style=" font-family:'monospace'; font-size:12pt;">-</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`missing separator. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`missing separator (did you mean TAB instead of 8 spaces?). Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Данные сообщения означают, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не смогла разобраться в &quot;типе&quot; очередной считанное строки. Для определения типа очередной строки, GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> проверяет наличие в ней нескольких возможных разделителей (</span><span style=" font-family:'monospace'; font-size:12pt;">:</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">=</span><span style=" font-family:'Sans'; font-size:12pt;">, символ табуляции и так далее). Данное сообщение означает, что не найден ни один из возможных разделителей. Зачастую, появление таких ошибок связано с использованием текстовых редакторов, которые, при выравнивании строк, вместо символа табуляции используют последовательность пробелов (этим отличаются многие текстовые редакторы для MS-Windows). В таких случаях </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> будет использовать второй вариант сообщения об ошибке. Помните, что каждая команда в make-файле должна начинаться с символа табуляции. Восемь пробелов не заменяют один символ табуляции. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC21"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Синтаксис правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`commands commence before first target. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`missing rule before commands. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это означает, что make-файл, похоже, начинается с командных строк: в начале идет символ табуляции, а следующая за ним конструкция не является допустимой командой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> (такой, например, как оператор присваивания). Командные строки всегда должны относиться к какой-то цели. Второй вариант сообщения об ошибке используется в том случае, когда первым непробельным символом в строке является двоеточие; </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> интерпретирует эту ситуацию как отсутствие левой части правила &quot;цель: пререквизит&quot;. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC21"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Синтаксис правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`No rule to make target `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">'.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`No rule to make target `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">', needed by `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">yyy</span><span style=" font-family:'monospace'; font-size:12pt;">'.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это означает, что программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> решила обновить указанную цель, но не может найти никаких подходящих для этого правил (ни явных, ни неявных, включая встроенные неявные правила). Если вы хотите, чтобы этот файл был создан, вам нужно добавить в make-файл соответствующее правило, описывающее процесс достижения подобной цели. Зачастую, такая ошибка является следствием простой описки (неправильно записанного имени файла) или повреждения каталога с исходными файлами (когда </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> попытается построить недостающие исходные файлы). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`No targets specified and no makefile found. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`No targets. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Первое сообщение означает, что вы не задали никаких целей в командной строке и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не может найти ни одного make-файла для обработки. Второе сообщение означает, что был найден некоторый make-файл, однако он не содержит ни одной цели, которую можно было бы выбрать по умолчанию, а в командной строке вы тоже не указали ни одной цели. В такой ситуации GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не может сделать ничего полезного. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC86"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аргументы для задания make-файла</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`Makefile `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">' was not found.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`Included makefile `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">' was not found.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Программа </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не может найти make-файл, указанный в командной строке (сообщение первого вида), или подключаемый make-файл (сообщение второго вида). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`warning: overriding commands for target `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">''</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`warning: ignoring old commands for target `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">''</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для каждой цели, GNU </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> позволяет задать лишь один набор команд (исключением являются правила с двойным двоеточием). Такое предупреждающее сообщение выдается при попытке задать команды для цели, которая ранее уже была определена как имеющая команды; при этом, первый набор команд будет &quot;перекрыт&quot; вторым заданным набором. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC38"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Несколько правил с одной целью</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`Circular </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;"> &lt;- </span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">yyy</span><span style=" font-family:'monospace'; font-size:12pt;"> dependency dropped.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это означает, что </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обнаружила циклическую зависимость: пререквизит </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">yyy</span><span style=" font-family:'Sans'; font-size:12pt;"> цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'Sans'; font-size:12pt;"> (возможно, через цепочку других пререквизитов) опять зависит от цели </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`Recursive variable `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">' references itself (eventually). Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Означает, что вы определили обычную (рекурсивно вычисляемую) переменную </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'Sans'; font-size:12pt;">, которая, при попытке ее вычисления, ссылается на саму себя (</span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'Sans'; font-size:12pt;">). Это является ошибкой; вам нужно использовать либо упрощенно-вычисляемую переменную (</span><span style=" font-family:'monospace'; font-size:12pt;">:=</span><span style=" font-family:'Sans'; font-size:12pt;">), либо оператор добавления (</span><span style=" font-family:'monospace'; font-size:12pt;">+=</span><span style=" font-family:'Sans'; font-size:12pt;">). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC57"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Использование переменных</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`Unterminated variable reference. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Означает, что вы забыли указать закрывающиеся круглые или фигурные скобки при ссылке на переменную или функцию. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`insufficient arguments to function `</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">xxx</span><span style=" font-family:'monospace'; font-size:12pt;">'. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это означает, что вы не задали необходимого числа параметров для указанной функции. Смотрите документацию на эту функцию, где указан список требуемых аргументов. Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC75"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Функции преобразования текста</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`missing target pattern. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`multiple target patterns. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`target pattern contains no `%'. Stop.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Эти ошибки возникают при неправильном составлении статических шаблонных правил. Первая ошибка означает, что в правиле нет шаблона цели. Вторая ошибка означает, что в разделе целей указано сразу несколько шаблонов. Третья ошибка означает, что имя цели не содержит шаблонного символа (</span><span style=" font-family:'monospace'; font-size:12pt;">%</span><span style=" font-family:'Sans'; font-size:12pt;">). Смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC40"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Синтаксис статических шаблонных правил</span></a><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`warning: -jN forced in submake: disabling jobserver mode.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Это и описанное ниже сообщение генерируется в том случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> обнаруживает проблему, связанную с &quot;параллельным&quot; режимом работы в системе, где такой режим поддерживается и </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;нижнего уровня&quot; могут &quot;общаться&quot; между собой (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Передача опций в </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">make</span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC53"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;"> &quot;нижнего уровня&quot;</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Данное предупреждение генерируется в том случае, если </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> &quot;нижнего уровня&quot; была запущена с аргументом </span><span style=" font-family:'monospace'; font-size:12pt;">`-j</span><span style=" font-family:'monospace'; font-size:12pt; font-style:italic;">N</span><span style=" font-family:'monospace'; font-size:12pt;">'</span><span style=" font-family:'Sans'; font-size:12pt;"> (где </span><span style=" font-family:'Sans'; font-size:12pt; font-style:italic;">N</span><span style=" font-family:'Sans'; font-size:12pt;"> больше единицы). Такое может произойти, например, если вы самостоятельно установите переменную среды </span><span style=" font-family:'monospace'; font-size:12pt;">MAKE</span><span style=" font-family:'Sans'; font-size:12pt;"> и присвоите ей значение </span><span style=" font-family:'monospace'; font-size:12pt;">`make -j2'</span><span style=" font-family:'Sans'; font-size:12pt;">. В этом случае, рекурсивно вызванные копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не будут пытаться &quot;связаться&quot; с другими копиями </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, а будут работать исходя из того, что они могут запускать не более двух заданий одновременно. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">`warning: jobserver unavailable: using -j1. Add `+' to parent make rule.'</span><span style=" font-family:'Sans'; font-size:12pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Для того, чтобы запущенные копии </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> могли &quot;общаться&quot; между собой, родительская копия передает в дочернюю копию некоторую дополнительную информацию. Это может вызвать проблемы, если дочерний процесс не является, на самом деле, программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Поэтому, родительский процесс </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> передает эту дополнительную информацию в дочерний процесс, если только он уверен, что дочерний процесс действительно является программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">. Для этого используется &quot;обычный&quot; алгоритм (смотрите раздел </span><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Как работает переменная </span></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#SEC51"><span style=" font-family:'monospace'; font-size:12pt; text-decoration: underline; color:#0000ff;">MAKE</span></a><span style=" font-family:'Sans'; font-size:12pt;">). Если make-файл построен таким образом, что родительская копия </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не уверена, что дочерний процесс является программой </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;">, в дочерний процесс будет передана лишь часть необходимой информации. В этом случае, дочерний процесс выдает предупреждающее сообщение и выполняет работу в &quot;последовательном&quot; режиме. </span></p>
<h1 style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="SEC125"></a><a href="http://linux.yaroslavl.ru/docs/prog/gnu_make_3-79_russian_manual.html#TOC125"><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">П</span></a><span style=" font-family:'Sans'; font-size:12pt; font-weight:600; text-decoration: underline; color:#0000ff;">ример &quot;сложного&quot; make-файла</span><span style=" font-family:'Sans'; font-size:12pt; font-weight:600;"> </span></h1>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">Вот пример make-файла, используемого для сборки программы GNU </span><span style=" font-family:'monospace'; font-size:12pt;">tar</span><span style=" font-family:'Sans'; font-size:12pt;">. Это - относительно сложный make-файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">По умолчанию, главной целью становится первая цель </span><span style=" font-family:'monospace'; font-size:12pt;">`all'</span><span style=" font-family:'Sans'; font-size:12pt;">. Интересной особенностью данного make-файла является то, что исходный файл </span><span style=" font-family:'monospace'; font-size:12pt;">`testpad.h'</span><span style=" font-family:'Sans'; font-size:12pt;"> автоматически создается программой </span><span style=" font-family:'monospace'; font-size:12pt;">testpad</span><span style=" font-family:'Sans'; font-size:12pt;">, которая, в свою очередь, компилируется из </span><span style=" font-family:'monospace'; font-size:12pt;">`testpad.c'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make'</span><span style=" font-family:'Sans'; font-size:12pt;"> или </span><span style=" font-family:'monospace'; font-size:12pt;">`make all'</span><span style=" font-family:'Sans'; font-size:12pt;">, будет создан исполняемый файл </span><span style=" font-family:'monospace'; font-size:12pt;">`tar'</span><span style=" font-family:'Sans'; font-size:12pt;">, демон </span><span style=" font-family:'monospace'; font-size:12pt;">`rmt'</span><span style=" font-family:'Sans'; font-size:12pt;">, обеспечивающий удаленный доступ и Info-файл </span><span style=" font-family:'monospace'; font-size:12pt;">`tar.info'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make install'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> не только создаст файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`tar'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`rmt'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`tar.info'</span><span style=" font-family:'Sans'; font-size:12pt;">, но и инсталлирует их в систему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> удаляет все файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`.o'</span><span style=" font-family:'Sans'; font-size:12pt;">, а также файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`tar'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`rmt'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`testpad'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`testpad.h'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`core'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении команды </span><span style=" font-family:'monospace'; font-size:12pt;">`make distclean'</span><span style=" font-family:'Sans'; font-size:12pt;">, помимо файлов, удаляемых в </span><span style=" font-family:'monospace'; font-size:12pt;">`make clean'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> также удалит файлы </span><span style=" font-family:'monospace'; font-size:12pt;">`TAGS'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">`Makefile'</span><span style=" font-family:'Sans'; font-size:12pt;">, и </span><span style=" font-family:'monospace'; font-size:12pt;">`config.status'</span><span style=" font-family:'Sans'; font-size:12pt;">. (В данном случае, make-файл (и файл </span><span style=" font-family:'monospace'; font-size:12pt;">`config.status'</span><span style=" font-family:'Sans'; font-size:12pt;">) генерируется пользователем с помощью программы </span><span style=" font-family:'monospace'; font-size:12pt;">configure</span><span style=" font-family:'Sans'; font-size:12pt;">, которая входит в дистрибутив </span><span style=" font-family:'monospace'; font-size:12pt;">tar</span><span style=" font-family:'Sans'; font-size:12pt;">. Эта программа здесь не показана.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">При выполнении </span><span style=" font-family:'monospace'; font-size:12pt;">`make realclean'</span><span style=" font-family:'Sans'; font-size:12pt;">, наряду с файлами, удаляемыми по команде </span><span style=" font-family:'monospace'; font-size:12pt;">`make distclean'</span><span style=" font-family:'Sans'; font-size:12pt;">, </span><span style=" font-family:'monospace'; font-size:12pt;">make</span><span style=" font-family:'Sans'; font-size:12pt;"> также удаляет Info-файлы, полученные из </span><span style=" font-family:'monospace'; font-size:12pt;">`tar.texinfo'</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:12pt;">В make-файле также имеются две цели для создания дистрибутивов: </span><span style=" font-family:'monospace'; font-size:12pt;">shar</span><span style=" font-family:'Sans'; font-size:12pt;"> и </span><span style=" font-family:'monospace'; font-size:12pt;">dist</span><span style=" font-family:'Sans'; font-size:12pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Сгенерирован автоматически из Makefile.in с помощью configure.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Un*x make-файл для программы GNU tar.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Copyright (C) 1991 Free Software Foundation, Inc.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># This program is free software; you can redistribute</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># it and/or modify it under the terms of the GNU</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># General Public License ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SHELL = /bin/sh</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#### Начало раздела конфигурации. ####</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">srcdir = .</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># При использовании gcc, вы должны либо запустить скрипт</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># fixincludes, поставляемый с этим компилятором, либо использовать</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># gcc с опцией -traditional.  Иначе, вызов ioctl</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># может быть неправильно скомпилирован в некоторых системах.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CC = gcc -O</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">YACC = bison -y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">INSTALL = /usr/local/bin/install -c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">INSTALLDATA = /usr/local/bin/install -c -m 644</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#  Опции, которые можно задать для DEFS:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DSTDC_HEADERS        Если у вас имеются стандартные ANSI C заголовочные</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       файлы и библиотеки.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DPOSIX               Если у вас имеются стандартные POSIX.1 заголовочные</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       файлы и библиотеке.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DBSD42               Если у вас имеется sys/dir.h (кроме случаев,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       когда вы используете -DPOSIX), sys/file.h,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и st_blocks в `struct stat'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DUSG                 Если у имеются System V/ANSI C</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       функции для работы со строками и памятью,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       соответствующие заголовочные файлы, sys/sysmacros.h,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       fcntl.h, getcwd, нет valloc </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и есть ndir.h (если вы только не </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       используете -DDIRENT).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DNO_MEMORY_H         В случаях, когда USG или STDC_HEADERS, но </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       не включать файл memory.h.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DDIRENT              В случае USG, но вместо ndir.h у вас </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       имеется dirent.h.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DSIGTYPE=int         Если ваши обработчики сигналов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       возвращают int, а не void.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DNO_MTIO             Если у вас нет sys/mtio.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       (ioctl для магнитной ленты).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DNO_REMOTE           Если у вас нет удаленной оболочки или</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       rexec.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DUSE_REXEC           Использовать rexec для удаленных операций с</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       лентой вместо запуска</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       rsh или remsh через fork.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DVPRINTF_MISSING     Если ваша система не имеет функции vprintf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       (но имеет _doprnt).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DDOPRNT_MISSING      Если ваша система не имеет функции _doprnt.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       Надо также определить</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       -DVPRINTF_MISSING.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DFTIME_MISSING       Если ваша система не поддерживает системный вызов ftime.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DSTRSTR_MISSING      Если ваша система не имеет функции strstr.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DVALLOC_MISSING      Если ваша система не имеет функции valloc.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DMKDIR_MISSING       Если ваша система не поддерживает системых вызовов mkdir</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и rmdir.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DRENAME_MISSING      Если ваша система не поддерживает системный вызов rename.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DFTRUNCATE_MISSING   Если система не поддерживает системный вызов ftruncate. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DV7                  Для Version 7 Unix (давно не</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       тестировалось).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DEMUL_OPEN3          Если у вас нет версии open с тремя аргументами</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и вы хотите, чтобы эта функция эмулировалась  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       с помощью имеющихся у вас системных вызовов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DNO_OPEN3            Если у вас нет версии open с тремя аргументами</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и вы хотите отключить опцию tar -k  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       вместо того, чтобы эмулировать нужную функцию open.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># -DXENIX               Если у вас имеется sys/inode.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#                       и нужно, чтобы он был 94 для своего подключения.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">DEFS =  -DSIGTYPE=int -DDIRENT -DSTRSTR_MISSING \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -DVPRINTF_MISSING -DBSD42</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Установите для этой переменной значение rtapelib.o или, если вы определили NO_REMOTE,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># установите для нее пустое значение.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">RTAPELIB = rtapelib.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LIBS =</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">DEF_AR_FILE = /dev/rmt8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">DEFBLOCKING = 20</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CDEBUG = -g</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">CFLAGS = $(CDEBUG) -I. -I$(srcdir) $(DEFS) \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -DDEF_AR_FILE=\&quot;$(DEF_AR_FILE)\&quot; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -DDEFBLOCKING=$(DEFBLOCKING)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">LDFLAGS = -g</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">prefix = /usr/local</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Префикс для каждой инсталлируемой программы,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># обычно пустой или содержит `g'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">binprefix =</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Каталог, куда будет инсталлироваться программа tar.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">bindir = $(prefix)/bin</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># Каталог, куда будут инсталлироваться Info-файлы.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">infodir = $(prefix)/info</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">#### Конец раздела конфигурации. ####</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SRC1 =  tar.c create.c extract.c buffer.c \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        getoldopt.c update.c gnu.c mangle.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SRC2 =  version.c list.c names.c diffarch.c \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        port.c wildmat.c getopt.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SRC3 =  getopt1.c regex.c getdate.y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">SRCS =  $(SRC1) $(SRC2) $(SRC3)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">OBJ1 =  tar.o create.o extract.o buffer.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        getoldopt.o update.o gnu.o mangle.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">OBJ2 =  version.o list.o names.o diffarch.o \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        port.o wildmat.o getopt.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">OBJ3 =  getopt1.o regex.o getdate.o $(RTAPELIB)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">OBJS =  $(OBJ1) $(OBJ2) $(OBJ3)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">AUX =   README COPYING ChangeLog Makefile.in  \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        makefile.pc configure configure.in \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        tar.texinfo tar.info* texinfo.tex \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        tar.h port.h open3.h getopt.h regex.h \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rmt.h rmt.c rtapelib.c alloca.c \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        msd_dir.h msd_dir.c tcexparg.c \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        level-0 level-1 backup-specs testpad.c</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">all:    tar rmt tar.info</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">tar:    $(OBJS)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">rmt:    rmt.c</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ rmt.c</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">tar.info: tar.texinfo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        makeinfo tar.texinfo</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">install: all</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(INSTALL) tar $(bindir)/$(binprefix)tar</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -test ! -f rmt || $(INSTALL) rmt /etc/rmt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(INSTALLDATA) $(srcdir)/tar.info* $(infodir)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">$(OBJS): tar.h port.h testpad.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">regex.o buffer.o tar.o: regex.h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;"># getdate.y has 8 shift/reduce conflicts.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">testpad.h: testpad</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ./testpad</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">testpad: testpad.o</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        $(CC) -o $@ testpad.o</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">TAGS:   $(SRCS)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        etags $(SRCS)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">clean:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm -f *.o tar rmt testpad testpad.h core</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">distclean: clean</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm -f TAGS Makefile config.status</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">realclean: distclean</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        rm -f tar.info*</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">shar: $(SRCS) $(AUX)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        shar $(SRCS) $(AUX) | compress \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">          &gt; tar-`sed -e '/version_string/!d' \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                     -e 's/[^0-9.]*\([0-9.]*\).*/\1/' \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                     -e q</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">                     version.c`.shar.Z</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">dist: $(SRCS) $(AUX)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        echo tar-`sed \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">             -e '/version_string/!d' \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">             -e 's/[^0-9.]*\([0-9.]*\).*/\1/' \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">             -e q</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">             version.c` &gt; .fname</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm -rf `cat .fname`</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        mkdir `cat .fname`</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        ln $(SRCS) $(AUX) `cat .fname`</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        tar chZf `cat .fname`.tar.Z `cat .fname`</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm -rf `cat .fname` .fname</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">tar.zoo: $(SRCS) $(AUX)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm -rf tmp.dir</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -mkdir tmp.dir</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm tar.zoo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        for X in $(SRCS) $(AUX) ; do \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">            echo $$X ; \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">            sed 's/$$/^M/' $$X \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">            &gt; tmp.dir/$$X ; done</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        cd tmp.dir ; zoo aM ../tar.zoo *</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">        -rm -rf tmp.dir</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:12pt;"><br /></p></body></html>