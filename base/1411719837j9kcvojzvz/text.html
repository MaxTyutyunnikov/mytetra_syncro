<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:xx-large; font-weight:600;">Nmap. Начало использования </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Вы когда-нибудь интересовались откуда атакующий знает какие порты открыты в системе? Или как узнать, какие приложения запущены на сервере, не спрашивая об этом администратора? Вы можете сделать все это и даже больше вместе с небольшим инструментом под названием Nmap.<br /><br /><a name="habracut"></a><br />Что такое Nmap? Название Nmap это сокращение от “network mapper”, сам nmap это набор инструментов для сканирования сети. Он может быть использован для проверки безопасности, просто для определения сервисов запущенных на узле, для идентификации ОС и приложений, определения типа фаерволла используемого на сканируемом узле.<br />Nmap это знаменитый инструмент. Как только вы узнаете больше о Nmap, вы поймете, что он делает в эпизодах таких фильмов как Матрица Перезагрузка, Ультиматум Борна, Хоттабыч, и <a href="http://nmap.org/movies.html"><span style=" text-decoration: underline; color:#0000ff;">других</span></a>. <br />В этом руководстве будут описаны основы использования Nmap и приведены некоторые примеры, которые вы сможете использовать.<br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Где взять Nmap?</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Если Вы используете Linux, то можете найти пакеты Nmap в репозиториях для большинства дистрибутивов. Последний релиз Nmap вышел в начале 2010, поэтому самой свежей версии может не быть в текущих стабильных ветках. Найти исходники и некоторые бинарные сборки можно на <a href="http://nmap.org/download.html"><span style=" text-decoration: underline; color:#0000ff;">странице загрузки</span></a>.<span style=" font-weight:600;">Там есть и windows версия.</span><br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Основы использования Nmap.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Синтаксис Nmap следующий: <br /><br /><span style=" font-family:'Courier New'; color:#6a1009;">nmap Опции_сканирования Цель_сканирования.</span><br /><br />Допустим Вы хотите сканировать узел и узнать какая операционная система на нем работает. Чтобы сделать это выполните следующее:<br /><br /><span style=" font-family:'Courier New,courier';">nmap -O target.host.com</span><br /><br />Заметим что Nmap требует привилегий суперпользователя для запуска подобного типа сканирования. Процесс сканирования может занять около минуты, так что будьте терпеливы. Когда процесс закончится вы увидите что то похожее на это:<br /><br /><span style=" font-family:'Courier New,courier';">Starting Nmap 5.21 ( </span><a href="http://nmap.org"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">nmap.org</span></a><span style=" font-family:'Courier New,courier';"> ) at 2010-02-27 23:52 EST<br />Nmap scan report for 10.0.0.1<br />Host is up (0.0015s latency).<br />Not shown: 997 closed ports<br />PORT STATE SERVICE<br />53/tcp open domain<br />5009/tcp open airport-admin<br />10000/tcp open snet-sensor-mgmt<br />MAC Address: 00:11:24:6B:43:E2 (Apple Computer)<br />Device type: WAP|printer<br />Running: Apple embedded, Canon embedded, Kyocera embedded, Xerox embedded<br />OS details: VxWorks: Apple AirPort Extreme v5.7 or AirPort Express v6.3; Canon imageRUNNER printer (5055, C3045, C3380, or C5185); Kyocera FS-4020DN printer; or Xerox Phaser 8860MFP printer<br />Network Distance: 1 hop<br /></span><br /><br />Как вы видите Nmap предоставляет множество информации. Здесь он отображает предположение об операционной системе, которая была запущена на узле. В данном случае выполнялось сканирование маршрутизатора Apple Airport Extrime. В качестве дополнительного бонуса Nmap сообщил, что устройство на расстоянии одного прыжка, а также MAC адрес устройства и производителя сетевой карты, открытые порты и сколько времени выполнялось сканирование.<br />Ниже приведены результаты другого сканирования, домашнего компьютера с запущенной Ubuntu 9.10:<br /><br /><span style=" font-family:'Courier New,courier';">Starting Nmap 5.21 ( </span><a href="http://nmap.org"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">nmap.org</span></a><span style=" font-family:'Courier New,courier';"> ) at 2010-02-28 00:00 EST<br />Nmap scan report for 10.0.0.6<br />Host is up (0.0039s latency).<br />Not shown: 999 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />MAC Address: 00:17:08:2A:D6:F0 (Hewlett Packard)<br />Device type: general purpose<br />Running: Linux 2.6.X<br />OS details: Linux 2.6.19 - 2.6.31<br />Network Distance: 1 hop<br /><br />OS detection performed. Please report any incorrect results at </span><a href="http://nmap.org/submit/"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">nmap.org/submit/</span></a><span style=" font-family:'Courier New,courier';"> .<br />Nmap done: 1 IP address (1 host up) scanned in 3.40 seconds<br /></span><br /><br />Здесь мы видим, что система имеет сетевую карту HP, запущено Linux между версиями 2.6.19 и 2.6.31. Кстати, Вы не сможете явно идентифицировать дистрибутив, только версию Linux ядра. <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Сканирование чужих узлов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />В примерах выше для сканирования были выбраны локальный маршрутизатор и одна из рабочих станций, потому что мы имели право на их сканирование. Однако, будет плохой идеей запуск множественного сканирования чужого узла, если вы их не контролируете или не имеете прав для сканирования. Для экспериментов Nmap имеет общедоступный тестовый сервер scanme.nmap.org который Вы можете использовать.<br />Многие администраторы не любят несанкционированного сканирования их серверов, так что лучшим вариантом будет ограничение сканирования узлов своей локальной сети или тех для которых у вас есть права на сканирование. Также в некоторых случаях вы можете нарушить договор с вашим провайдером, при использовании некоторых особо агрессивных методов сканирования Nmap, поэтому будьте осторожны.<br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Сканирование нескольких узлов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Вы можете сканировать больше чем один узел за раз, используя nmap. Если вы производите сканирование по IP-адресу вы можете определить диапазон 10.0.0.1-6 или 10.0.0.0/24.Используя диапазон 10.0.0.1-6 будут сканироваться узлы от 10.0.0.1 до 10.0.0.6. Используя определение /24 будет сканироваться весь диапазон узлов от 10.0.0.0 до 10.0.0.255. Для примера, если нужно просканировать узлы от 10.0.0.1 до 10.0.0.42 и узнать какая ОС вероятно запущена используйте:<br /><br /><span style=" font-family:'Courier New,courier';">nmap –O 10.0.0.1-42</span><br /><br />Если у вас есть некоторый список доменных имен вместо IP адресов, вы можете разделить их в командной строке, вот так:<br /><br /><span style=" font-family:'Courier New,courier';">nmap -O host1.target.com host2.target.com</span><br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Проверка открытых портов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Если вы запустите nmap вообще без опций и укажите какой то узел, то он будет сканировать порты и покажет все найденные открытые порты и сервисы запущенные на них. Например запустите: <br /><span style=" font-family:'Courier New,courier';">nmap target.hostname.com</span><br />после чего он должен выдать что то похожее на это:<br /><br /><span style=" font-family:'Courier New,courier';">Interesting ports on target.hostname.com (10.0.0.88):<br />Not shown: 1711 closed ports<br />PORT STATE SERVICE<br />22/tcp open ssh<br />80/tcp open http<br />3306/tcp open mysql<br /><br />Nmap done: 1 IP address (1 host up) scanned in 0.228 seconds<br /></span><br /><br />Nmap выдаст больше информации если использовать опцию -v (verbose).<br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Сканирование запущенных сервисов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Если вы хотите узнать какой сервис возможно запущен попробуйте опцию –sV. Эта опция произведет более агрессивное сканирование и попытается выяснить какая версия сервисов запущена на данном узле, а также может помочь более точно определить какая ОС запущена. Для пример запустим nmap –sV на тестовый сервер и получим следующий ответ:<br /><br /><span style=" font-family:'Courier New,courier';">Starting Nmap 5.21 ( </span><a href="http://nmap.org"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">nmap.org</span></a><span style=" font-family:'Courier New,courier';"> ) at 2010-02-28 00:15 EST<br />Nmap scan report for test.host.net (XX.XXX.XXX.XX)<br />Host is up (0.090s latency).<br />Not shown: 965 closed ports, 33 filtered ports<br />PORT STATE SERVICE VERSION<br />22/tcp open ssh OpenSSH 4.7p1 Debian 8ubuntu1.2 (protocol 2.0)<br />80/tcp open http Apache httpd 2.2.8 ((Ubuntu) PHP/5.2.4-2ubuntu5.10 with Suhosin-Patch)<br />Service Info: OS: Linux<br /><br />Service detection performed. Please report any incorrect results at </span><a href="http://nmap.org/submit/"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">nmap.org/submit/</span></a><span style=" font-family:'Courier New,courier';"> .<br />Nmap done: 1 IP address (1 host up) scanned in 11.43 seconds<br /></span><br /><br />Как вы видите, Nmap может проанализировать пакеты и определить версию запущенного приложений на SSH и HTTP портах. Здесь вы можете увидеть что опрашиваемая система это Ubuntu с Apache 2.2.8 и OpenSSH 4.7p1. Эта информация может быть полезна по ряду причин. Nmap сканирование может идентифицировать систему под управлением устаревших сервисов которые могут быть уязвимы для известных эксплойтов. <br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Кто в моей сети? </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Не знаете сколько онлайн узлов находятся в вашей сети? Попробуйте использовать nmap –sP который запустит ping сканирование указанной сети. Для примера, nmap –sP 10.0.0.0/24 сканирует 256 узлов от 10.0.0.0 до 10.0.0.255 проверит доступны ли они и доложит об этом. Так же вы можете использовать диапазон, например:<br /><br /><span style=" font-family:'Courier New,courier';">nmap –sP 10.0.0.1-15</span><br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium; font-weight:600;">Zenmap</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br />Наконец, если все эти радости командной строки не для вас, nmap имеет GUI который вы можете использовать для построения и выполнения команд. Называется Zenmap. Он позволит выбрать цель, запустить сканирование, отобразить результаты, а также сохранить их и сравнить с другими.<br />GUI Zenmap это хороший способ познакомиться с Nmap, но лучше знать как использовать Nmap в командной строке, если вы собираетесь работать с ним часто.<br />В будущем руководстве мы более глубоко познакомимся с Nmap и конкретными задачами которые вы сможете решить. <br /><br />Данный пост это вольный перевод статьи <a href="http://www.linux.com/learn/tutorials/290879-beginners-guide-to-nmap"><span style=" text-decoration: underline; color:#0000ff;">Beginner's Guide to Nmap</span></a>. Спасибо за внимание. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p></body></html>