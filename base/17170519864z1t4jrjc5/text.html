<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Qmake позволяет программисту создавать собственные features-файлы, которые можно включать в файлы проекта, добавляя их имена в список значений, заданных переменной </span><span style=" color:#000000;">CONFIG</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Наборы пользовательских функций и определений, размещенные в feature-файлах (т. е. файлах с расширением </span><span style=" font-family:'FreeMono'; color:#6a1009;">*.prf</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) называются функциональными возможностями.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:50px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Примечание: таким образом, по-русски, features-файлы правильно было бы называть &quot;файлами дополнительных возможностей&quot;.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Prf-файлы могут находиться в одном из многих каталогов, в которых происходит поиск feature-файлов. Стандартное расположение этих каталогов определено в нескольких местах, и qmake проверяет каждое такое место в следующем порядке :</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог, указанный в переменной среды <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEFEATURES</span>, которая содержит список каталогов, разделенных разделителем (двоеточие для Unix, точка с запятой для Windows).</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог, указанный в qmake-переменной <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEFEATURES</span>, которая содержит список каталогов, разделенных разделителем.</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог, находящийся внутри <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">mkspecs</span> каталога. Каталоги <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">mkspecs</span> могут быть расположены под любым из каталогов, перечисленных в переменной окружения <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEPATH</span>, которая содержит список каталогов, разделенных разделителем. Например: <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKEPATH/mkspecs/&lt;features&gt;</span>.</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог компонентов, расположенный как подкаталог относительно переменной окружения <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKESPEC</span><span style=" font-family:'DejaVu Sans'; font-size:11pt; color:#000000;">	</span>. Например: <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/&lt;features&gt;</span>.</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог, находящийся в каталоге <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">data_install/mkspecs</span>. Например: <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">data_install/mkspecs/&lt;features&gt;</span>.</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется каталог компонентов, который существует как аналог каталога, указанного в переменной окружения <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKESPEC</span>. Например: <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/../&lt;features&gt;</span>.</li></ol>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Кроме того, поиск features-файлов выполняется в следующих каталогах:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">features/unix</span>, <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">features/win32</span> или <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">features/macx</span>, в зависимости от используемой платформы</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">features/</span></li></ol>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Например, рассмотрим следующую настройку в файле проекта:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">CONFIG += myfeatures </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">С этим &quot;дополнением&quot; к </span><span style=" font-family:'FreeMono'; color:#6a1009;">CONFIG</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> переменной (т. к. используется &quot;+=&quot;), qmake выполнит поиск файла </span><span style=" font-family:'FreeMono'; color:#6a1009;">myfeatures.prf</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> в перечисленных выше местах. (Кстати, это произойдет только после завершения анализа файла проекта). В системах Unix будет выполнен поиск следующего файла:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKEFEATURES/myfeatures.prf </span>(для каждого каталога, указанного в переменной окружения <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEFEATURES</span>)</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$$QMAKEFEATURES/myfeatures.prf</span> (для каждого каталога, указанного в qmake-переменной <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEFEATURES</span>)</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">myfeatures.prf</span> (в корневом каталоге проекта). Корневой каталог проекта определяется файлом верхнего уровня <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">.pro</span>. Однако, если вы разместите файл <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">.qmake.cache</span> в подкаталог или в каталог подпроекта, тогда корневой каталог проекта сам станет подкаталогом (разобраться что имеется в виду).</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKEPATH/mkspecs/features/unix/myfeatures.prf</span> и <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKEPATH/mkspecs/features/myfeatures.prf</span> (для каждого каталога, указанного в переменной среды <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">QMAKEPATH</span>)</li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/features/unix/myfeatures.prf</span> и <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/features/myfeatures.prf</span></li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">data_install/mkspecs/features/unix/myfeatures.prf</span> и <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">data_install/mkspecs/features/myfeatures.prf</span></li>
<li style=" font-family:'DejaVu LGC Sans'; font-size:12pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/../features/unix/myfeatures.prf</span> и <span style=" font-family:'FreeMono'; font-size:11pt; color:#6a1009;">$QMAKESPEC/../features/myfeatures.prf</span></li></ol>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Примечание: </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">У </span><span style=" font-family:'FreeMono'; color:#6a1009;">*.prf</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> файлов имя всегда должно быть написано в нижнем регистре.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="installing-files"></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">У</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">становка (развертывание) файлов приложения</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В Unix принято использовать инструменты сборки для установки приложений и библиотек, например, путем вызова </span><span style=" font-family:'FreeMono'; color:#6a1009;">make install</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. По этой причине в </span><span style=" font-family:'FreeMono'; color:#6a1009;">qmake</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> используется концепция &quot;install set&quot;. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:49px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Install set</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - это объект, который содержит инструкции о том, как должна быть установлена часть проекта.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:49px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Например, набор файлов документации может быть описан следующим образом:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">documentation.files = docs/* </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">documentation.path = /usr/local/program/doc</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Через элемент </span><span style=" font-family:'FreeMono'; color:#6a1009;">files</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> указываюся файлы, которые должны быть скопированы в каталог установки. Через элемент </span><span style=" font-family:'FreeMono'; color:#6a1009;">path</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> указывается, что файлы должны быть установлены в </span><span style=" font-family:'FreeMono'; color:#6a1009;">/usr/local/program/doc</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Таким образом, все, что находится в каталоге </span><span style=" font-family:'FreeMono'; color:#6a1009;">docs</span> (относительно <span style=" font-family:'FreeMono'; color:#6a1009;">*.pro</span>/<span style=" font-family:'FreeMono'; color:#6a1009;">*prf</span> файла?)<span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, будет скопировано в </span><span style=" font-family:'FreeMono'; color:#6a1009;">/usr/local/program/doc</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">После того, как установочный набор будет полностью описан, вы можете добавить его в список установки с помощью строки, подобной этой:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">INSTALLS += documentation </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">qmake</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> гарантирует, что указанные файлы будут скопированы в каталог установки. Если вам требуется больше контроля над этим процессом, вы также можете использовать элемент </span><span style=" font-family:'FreeMono'; color:#6a1009;">extra</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, в котором указываются shell-команды, которые надо применить к файлам. Например, следующая строка сообщает qmake выполнить серию команд для файлов из установочного набора:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">unix:documentation.extra = create_docs; mv master.doc toc.doc </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Область действия </span><span style=" font-family:'FreeMono'; color:#6a1009;">unix</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> гарантирует, что эти конкретные команды выполняются только на платформах Unix. Соответствующие команды для других платформ могут быть определены с использованием других правил области действия.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:48px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Внимание!</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> Команды, указанные в элементе </span><span style=" font-family:'FreeMono'; color:#6a1009;">extra</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, выполняются </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">до</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> выполнения инструкций в других элементах объекта.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Если вы добавите встроенный установочный набор в INSTALLS переменную и не укажете элементы </span><span style=" font-family:'FreeMono'; color:#6a1009;">files</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> или </span><span style=" font-family:'FreeMono'; color:#6a1009;">extra</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, то </span><span style=" font-family:'FreeMono'; color:#6a1009;">qmake</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> решит, что нужно скопировать за вас. В настоящее время в qmake сделаны дефолтные наборы установки с именами </span><span style=" font-family:'FreeMono'; color:#6a1009;">target</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и </span><span style=" font-family:'FreeMono'; color:#6a1009;">dlltarget</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Например:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">target.path = /usr/local/myprogram</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">INSTALLS += target </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В приведенных выше строках qmake знает, что нужно скопировать (видимо, из переменной TARGET), и автоматически выполнит процесс установки.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="adding-custom-targets"></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Д</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">обавление пользовательских целей</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">qmake пытается выполнять все, что ожидается от инструмента кроссплатформенной сборки. Часто это далеко не идеально, когда вам действительно нужно запускать специальные команды, зависящие от платформы. Этого можно добиться с помощью специальных инструкций, используемых в различных частях файла проекта.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Настройка выходных данных Makefile выполняется с помощью API в объектном стиле, который можно найти в других местах </span><span style=" font-family:'FreeMono'; color:#6a1009;">qmake</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Объекты определяются автоматически, путем указания их </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-style:italic;">членов</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:50px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Другими словами, можно взять произвольное имя, этому имени прописать свойство </span><span style=" font-family:'FreeMono'; color:#6a1009;">target</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> (и другие свойства), и тогда будет автоматически создан объект, который описывает объект-цель.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> Например:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget.target = .buildfile</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget.commands = touch $$mytarget.target</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget.depends = mytarget2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget2.commands = @echo Building $$mytarget.target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Приведенные выше определения определяют цель qmake с именем </span><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, содержащую цель Makefile с именем </span><span style=" font-family:'FreeMono'; color:#6a1009;">.buildfile</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, которая, в свою очередь, генерируется с помощью команды </span><span style=" font-family:'FreeMono'; color:#6a1009;">touch</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Наконец, свойство </span><span style=" font-family:'FreeMono'; color:#6a1009;">.depends</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> указывает, что этот </span><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> зависит от другой цели</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"> </span><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget2</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, которая определяется впоследствии. </span><span style=" font-family:'FreeMono'; color:#6a1009;">mytarget2</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> является фиктивной целью. Он определен только для отображения некоторого текста на консоли.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Когда объекты целей определены, это не значит, что они сами по себе будут работать. Следующий шаг - это использовать переменную </span><span style=" font-family:'FreeMono'; color:#6a1009;">QMAKE_EXTRA_TARGETS</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, чтобы сообщить </span><span style=" font-family:'FreeMono'; color:#6a1009;">qmake</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, что этот объект является целью, и что его надо обрабатывать:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">QMAKE_EXTRA_TARGETS += mytarget mytarget2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Это все, что вам нужно сделать, чтобы создавать пользовательские объекты-цели. Конечно, вы можете привязать один из этих объектов-целей к </span><span style=" font-family:'FreeMono'; color:#6a1009;">qmake build target</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Для этого вам просто нужно включить ваш целевой Makefile в список </span><span style=" font-family:'FreeMono'; color:#6a1009;">PRE_TARGETDEPS</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Пользовательские целевые спецификации поддерживают следующих участников:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0"><thead>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Участник</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td></tr></thead>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">команды</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Команды для создания цели пользовательской сборки.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">НАСТРОЙКА</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Конкретные параметры конфигурации для цели пользовательской сборки. Может быть установлено в recursive, чтобы указать, что в Makefile должны быть созданы правила для вызова соответствующей цели внутри определенного для подцели Makefile. Этот участник по умолчанию создает запись для каждой из подцелей.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">зависит</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Существующие цели сборки, от которых зависит цель пользовательской сборки.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">рекурсия</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает, какие подцелевые объекты следует использовать при создании правил в Makefile для вызова конкретного подцелевого файла Makefile. Этот элемент используется только тогда, когда recursive установлен в CONFIG. Типичными значениями являются &quot;Debug&quot; и &quot;Release&quot;.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">recurse_target</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает цель, которая должна быть создана с помощью подцелевого Makefile для правила в Makefile. Этот элемент добавляет что-то вроде $(MAKE) -f Makefile.[subtarget] [recurse_target]. Этот элемент используется только тогда, когда recursive установлен в CONFIG.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">цель</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Имя цели пользовательской сборки.</span></p></td></tr></table>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="adding-compilers"></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Д</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">обавление компиляторов</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Можно настроить qmake для поддержки новых компиляторов и препроцессоров:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">new_moc.output  = moc_${QMAKE_FILE_BASE}.cpp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">new_moc.commands = moc ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">new_moc.depend_command = g++ -E -M ${QMAKE_FILE_NAME} | sed &quot;s,^.*: ,,&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">new_moc.input = NEW_HEADERS</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">QMAKE_EXTRA_COMPILERS += new_moc </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Учитывая приведенные выше определения, вы можете использовать замену moc, если она доступна. Команда выполняется для всех аргументов, заданных NEW_HEADERS переменной (из input элемента), и результат записывается в файл, определенный output элементом. Этот файл добавлен к другим исходным файлам в проекте. Кроме того, qmake будет выполнен depend_command для создания информации о зависимостях, а также для размещения этой информации в проекте.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Пользовательские спецификации компилятора поддерживают следующие элементы:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0"><thead>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Участник</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td></tr></thead>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">команды</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Команды, используемые для генерации выходных данных из входных.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">НАСТРОЙКА</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Конкретные параметры конфигурации для пользовательского компилятора. Смотрите таблицу КОНФИГУРАЦИИ для получения подробной информации.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">depend_command</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает команду, используемую для создания списка зависимостей для выходных данных.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">dependency_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает тип выходного файла. Если это файл известного типа (например, TYPE_C, TYPE_UI, TYPE_QRC), он обрабатывается как один из файлов этого типа.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">зависит</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Определяет зависимости выходного файла.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ввод</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Переменная, указывающая файлы, которые должны быть обработаны пользовательским компилятором.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Имя</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Описание того, что делает пользовательский компилятор. Это используется только в некоторых бэкендах.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">вывод</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Имя файла, созданное с помощью пользовательского компилятора.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">output_function</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Определяет пользовательскую функцию qmake, которая используется для указания создаваемого имени файла.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">переменные</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает, что указанные здесь переменные заменяются на $(QMAKE_COMP_VARNAME), когда они упоминаются в файле pro как $(VARNAME).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">variable_out</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Переменная, в которую следует добавлять файлы, созданные на основе выходных данных.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Элемент КОНФИГУРАЦИИ поддерживает следующие параметры:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0"><thead>
<tr>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Опция</span></p></td>
<td>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Описание</span></p></td></tr></thead>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">комбинировать</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает, что все входные файлы объединены в один выходной файл.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">target_predeps</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает, что выходные данные должны быть добавлены в список </span><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.87b3ffb3-66582105-4aeb8662-74722d776562/https/doc.qt.io/qt-6/qmake-variable-reference.html#pre-targetdeps"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">PRE_TARGETDEPS</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">явные зависимости</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Зависимости для выходных данных генерируются только из элемента depends и нигде больше.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">dep_existing_only</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Каждая зависимость, являющаяся результатом .depend_command , проверяется на наличие. Несуществующие зависимости игнорируются. Это значение было введено в Qt 5.13.2.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">dep_lines</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Выходные данные команды .depend_command интерпретируются как один файл на строку. По умолчанию используется разделение через пробелы, и оно поддерживается только из соображений обратной совместимости.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">no_link</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Указывает, что выходные данные не следует добавлять в список объектов, на которые нужно создавать ссылки.</span></p></td></tr></table>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="library-dependencies"></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">З</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">ависимости библиотек</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Часто при создании ссылок на библиотеку qmake полагается на базовую платформу, чтобы знать, с какими другими библиотеками связана эта библиотека, и позволяет платформе подключать их. Однако во многих случаях этого недостаточно. Например, при статическом связывании библиотеки никакие другие библиотеки не связаны, и, следовательно, никакие зависимости от этих библиотек не создаются. Однако приложению, которое позже подключится к этой библиотеке, потребуется знать, где найти символы, которые потребуются статической библиотеке. qmake пытается отслеживать зависимости библиотеки, где это уместно, если вы явно включаете отслеживание.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Первый шаг - включить отслеживание зависимостей в самой библиотеке. Для этого вы должны попросить qmake сохранить информацию о библиотеке.:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">CONFIG += create_prl </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Это относится только к lib шаблону и будет проигнорировано для всех остальных. Когда эта опция включена, qmake создаст файл, заканчивающийся на .prl, в котором будет сохранена некоторая метаинформация о библиотеке. Этот метафайл ничем не отличается от обычного файла проекта, но содержит только объявления внутренних переменных. При установке этой библиотеки, указав ее в качестве целевого объекта в </span><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.87b3ffb3-66582105-4aeb8662-74722d776562/https/doc.qt.io/qt-6/qmake-variable-reference.html#installs"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">INSTALLS</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> объявлении, qmake автоматически скопирует файл .prl в путь установки.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Вторым шагом в этом процессе является включение чтения этой метаинформации в приложениях, использующих статическую библиотеку:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">CONFIG += link_prl </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Когда это включено, qmake обработает все библиотеки, на которые ссылается приложение, и найдет их метаинформацию. qmake будет использовать это для определения соответствующей информации о связывании, в частности, добавляя значения в список файлов проекта приложения </span><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.87b3ffb3-66582105-4aeb8662-74722d776562/https/doc.qt.io/qt-6/qmake-variable-reference.html#defines"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">DEFINES</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> а также</span><a href="https://translated.turbopages.org/proxy_u/en-ru.ru.87b3ffb3-66582105-4aeb8662-74722d776562/https/doc.qt.io/qt-6/qmake-variable-reference.html#libs"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">LIBS</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. После того, как qmake обработает этот файл, он затем просмотрит недавно введенные библиотеки в LIBS переменной и найдет их зависимые файлы .prl, продолжая до тех пор, пока все библиотеки не будут разрешены. На этом этапе Makefile создается как обычно, и библиотеки явно привязаны к приложению.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Файлы .prl должны создаваться только qmake и не должны передаваться между операционными системами, поскольку они могут содержать информацию, зависящую от платформы.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p></body></html>