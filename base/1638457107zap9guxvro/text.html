<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">Зачастую свободных выводов микроконтроллера не хватает для подключения необходимого количества кнопок. При непосредственном соединении для n кнопок надо выделить столько же линий ввода-вывода, что не всегда возможно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">Для более рационального использования линий портов можно воспользоваться матричной схемой подключения на рис.1. В данном случае матрица, подключённая к порту D, имеет размер 4*4=16 кнопок (4 строки r0…r3 и 4 столбца с0…с3). Линии PD0…PD3, являющиеся строками r0…r3, всегда настроены на ввод, и подтянуты к шине питания резисторами R (типичный номинал 4,7…10 кОм). С них и производится считывание состояния кнопок SB1-SB16. На линиях PD4…PD7 (столбцы с0…с3) поочерёдно формируется сигнал логического нуля. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">Первоначально низкий уровень устанавливается на столбце с0, а на всех остальных столбцах при этом Z-состояние. Теперь только при нажатии кнопок этого столбца (SB1…SB4) на линиях строк r0…r3 может возникнуть низкий логический уровень. Далее логический 0 выставляется на столбце с1 и сканируются группа кнопок SB5…SB8 и т.д. Точно такой же алгоритм опроса кнопок применяется и для любой другой матричной клавиатуры не зависимо от числа строк и столбцов. В общем случае количество кнопок n является произведением числа строк и столбцов. Так, например, матрица 2*2 (4 линии) будет содержать 4 кнопки. Но с другой стороны столько же линий ввода-вывода понадобится и для непосредственного подключения того же числа кнопок. Таким образом, экономия выводов начинает проявляться при числе кнопок, превышающем 4…6, и становится ещё более существенной с ростом их количества.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;"><br /></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image1638457123kqvk2v5sxd.png" /></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949;">Рис.1 Матричная схема подключения кнопок</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">Элементы VD1…VD4, и R1…R4 не являются обязательными на схеме. Диоды служат для защиты от короткого замыкания между линиями строк и столбцов. Если, например, при нажатии на кнопку SB1 (в момент сканирования столбца c0) линия строки r0 вдруг окажется настроенной на вывод и на ней будет высокий логический уровень, то по цепи c0r0 начнет протекать недопустимо большой ток. Хотя логика программы не допускает такого режима работы, по разным причинам это все-таки может произойти. Поэтому, по крайней мере, при отладке программы диоды не будут лишними. Если емкость монтажа, приведенная к выводам PD3…PD0, не слишком велика, то сопротивления подтяжки к шине питания, вполне можно заменить внутренними “pull-up” резисторами. Для этого необходимо установить соответствующие разряды в регистре PORTD, когда линии настроены на ввод.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">Пример подпрограммы сканирования матричной клавиатуры</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:13px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#d4d0c8;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">1</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">2</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">3</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">4</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">5</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">6</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">7</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">8</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">9</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">10</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">11</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">12</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">13</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">14</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">15</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">16</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">17</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">18</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">19</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">20</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">21</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">22</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">23</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">24</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">25</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">26</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">27</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">28</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">29</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">30</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">31</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">32</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">33</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">34</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">35</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">36</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">37</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">38</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">39</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">40</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">41</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">42</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">43</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">44</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">45</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">46</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">47</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">48</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">49</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">50</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">51</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">52</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">53</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">54</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">55</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">56</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">57</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">58</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">59</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">60</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">61</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">62</span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#787878; background-color:#ffffff;">63</span></p></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">.def button = R16</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;регистр с кодом нажатой кнопки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">.def temp   = R17</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;регистр для промежуточных операций</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">temp,</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">high</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">(RAMEND)</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;инициализация стека </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">SPH,temp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">temp,</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">low</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">(RAMEND)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">SPL,temp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">    </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">clr   temp   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;настраиваем линии порта D на ввод</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">DDRD,temp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">temp, (1 &lt;&lt; PD0)|(1 &lt;&lt; PD1)|(1 &lt;&lt; PD2)|(1 &lt;&lt; PD3)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">PORTD,temp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">    </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">rcall</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">btn_pol </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">    </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949; background-color:#ffffff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;     Подпрограмма опроса матричной клавиатуры </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">; R16 – номер нажатой кнопки на выходе из подпрограммы,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;  если ни одна кнопка не нажата, то R16=0; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;  если нажаты две и более кнопок, то R16=0xFF</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">; R17 – регистр для определения номера строки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">; R18 – регистр для задания номера столбца</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">; R19 – счётчик столбцов    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">; R20 – регистр для промежуточных операций</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949; background-color:#ffffff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">btn_pol: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">clr   R16     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;обнуляем регистры с кодом нажатой </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">clr   R19     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;кнопки и номером столбца</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R18,0x0F</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;очищаем регистр данных PORTD порта D</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">PORTD,R18       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R18,0x00010000 </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">bp1: </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">out</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">DDRD,R18</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;настраиваем на вывод линию соответствующего                                   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">nop</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">            </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;столбца через регистр DDRD порта D</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">in</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">    </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R17,PIND</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;считываем состояние строк из регистра PIND     </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">com   R17       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">andi  R17,0x0F</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;выделяем значение 4-х строк </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,0   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если ни одна кнопка в столбце не нажата,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">breq  bp5     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;перемещаемся на следующий столбец</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">cpi   R17,0x01</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если нажата кнопка в строке c0,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,1   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;то вычисляем её номер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">breq  bp2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">cpi   R17,0x02</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если нажата кнопка в строке c1,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,2   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;то вычисляем её номер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">breq  bp2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">cpi   R17,0x04</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если нажата кнопка в строке c2,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,3   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;то вычисляем её номер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">breq  bp2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">cpi   R17,0x08</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если нажата кнопка в строке c3,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,4   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;то вычисляем её номер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">brne  bp3 </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;если нажато более одной кнопки, завершаем опрос</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">bp2: tst   R16      ;если в предыдущих столбцах были нажаты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">breq  bp4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">bp3: </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ldi</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R16,0xFF</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;кнопки, то завершаем опрос с кодом 0xFF</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">      </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ret</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">bp4:  </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">push</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">  </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R19     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;иначе вычисляем номер кнопки, как</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">      </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">lsl</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R19     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;N = 4*column + row + 1 = 4*R19 + R20 + 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">lsl</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">add</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R20,R19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">mov</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R16,R20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">pop</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">bp5:  </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">inc</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">lsl</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;">   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">R18</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">cpi   R19,4   </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;повторяем цикл опроса пока не будут</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#000000;">brne  bp1     </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#494949;"> </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#3f5fbf;">;опрошены все 4 столбца</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; color:#ff1493;">ret</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#494949; background-color:#ffffff;">При всех преимуществах матричная схема подключения обладает и одним недостатком. С её помощью тяжело реализовать чтение комбинаций кнопок. В случае, когда на такой клавиатуре будут нажаты любые три кнопки, образующие между собой прямой угол (например, SB1,SB2,SB5), то программой опроса будет зафиксировано ложное нажатие кнопки, лежащей в свободном углу прямоугольника (в данном случае SB6). При определённом раскладе такой “фантомной” кнопкой может оказаться любая кнопка на клавиатуре.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2';"><br /></p></body></html>