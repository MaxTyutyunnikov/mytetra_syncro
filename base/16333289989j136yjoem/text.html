<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Пояснение</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Фабрика объектов - это такой класс, который способен порождать объекты разных классов. Главное, чтобы эти классы имели один общий базовый класс. Предполагается, что вначале в фабрике &quot;регистрируются классы&quot;, которые может создавать фабрика, после чего фабрика может создавать объекты заданного класса.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Фраза &quot;регистрируются классы&quot; не просто так взята в кавычки. Естественно, &quot;добавлять классы&quot; в фабрику и &quot;хранить список классов&quot; в фабрике язык C++ не позволяет.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вместо этого, как будет показано в статье, <span style=" font-weight:600;">для каждого порождаемого фабрикой класса создается объект creator</span> (причем все классы creator-ов созданы на основе одного родительского класса), и именно он добавляется в фабрику через метод add(). И при создании объекта нужного класса через метод create(), вызывается соответствующий creator.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Ставим объекты на поток, паттерн фабрика объектов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Доброго времени суток, читатель. Я хочу поделится с тобой знаниями об одном из наиболее часто используемых мною паттернов — фабрики объектов, для данного паттерна так же подходит другое название — виртуальный конструктор.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Что представляет из себя этот паттерн? Исходя из названия легко догадаться, что это некая, определенная, фабрика (или завод), который создает объекты. Еще раз выражу слово определенная. Как и в реальной жизни фабрика имеет некую специализацию, создавая товары или устройства какого-либо определенного типа. И фабрика, которая выпускает, например, мебель, не может производить, например, еще и компоненты для смартфонов. По аналогии с программированием фабрика объектов может создавать только объекты определенного типа, которые используют единый интерфейс. Самыми главными преимуществами данного паттерна в С++, является упрощение создания объектов различных классов, использующих единый интерфейс. Зачастую библиотекам, которые разрабатывают программисты нужно не только уметь работать с определенными объектами, но и создавать их. Самый очевидный пример загрузка файлов различных форматов. Мы не знаем, какой файл мы будем загружать заранее, но у нас есть список возможных форматов. Пользователь указывает файл, библиотека пытается определить тип файла и вызвать соответствующий загрузчик для него. В большинстве случаев программисты использует конструкции типа switch или if, чтобы определить экземпляр какого класса им необходимо создать. И чем больше возможных вариантов появляется, тем больше разрастается эта конструкция, в последствии превращающиеся в уродливого монстра. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Что нам может предложить фабрика объектов? Во-первых, простой метод создания объектов, который сократит switch/if до 1ой строчки. Во-вторых, удобные методы для работы с объектами фабрики. Мы всегда точно можем узнать, зарегистрирован ли у нее определенный класс, количество зарегистрированных классов, а так же удобные методы для добавления и удаления экземпляров классов в фабрику. С помощью фабрики можно ограничивать набор возможных классов, которая она будет создавать, используя некую конфигурацию. </span></p>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:medium; font-weight:600; background-color:#ffffff;"><br /></h4>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;"><br /></h4>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;">Создание конкретной фабрики</span></h4>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Для начала, реализуем конкретную фабрику, не используя шаблоны, чтобы понять как же она должна работать. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Итак, нам нужен класс, который сможет создавать объекты, поддерживающие единый интерфейс. Назовем этот интерфейс Foo, а фабрику соответственно FooFactory. В качестве идентификатора для создания объекта возьмем строку. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">сlass FooFactory</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	FooFactory();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	~</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">FooFactory</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> std::string &amp; id)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:600; color:#4d4d4c;">Примечание:</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> в классе фабрики видно использование класса Foo. Однако, нигде в тексте этой статьи сам интерфейсный класс Foo не описан. Предполагается, что порождаемые фабрикой объекты будут создаваться на основе различных классов MyFoo, MyFoo2, ImprovedFoo и т.д., которые унаследованы от базового класса Foo. Эти дочерние классы тоже в статье не описываются. Предполагается, что читатель достаточно опытен, чтобы представить себе базовый и дочерние классы, которые порождаются фабрикой объектов.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Итак, пока все отлично (для автора статьи), но и написано всего пара строк кода. А как же мы будем добавлять классы и собственно создавать их экземпляры? Разберем проблемы по порядку. Прежде чем создать объект, нужно добавить класс в фабрику. Очевидно, что нужна какая-та функция. Но как передать в функцию класс, а не объект?</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Как вариант, можно использовать стратегию клонирования. То есть создавать объект, помещать его в фабрику, а при вызове метода фабрики create вызывать функцию типа clone(). Вариант прямо скажем плохой, который заставляет программиста мало того что добавлять в интерфейс Foo функцию clone, и реализовывать ее во всех конкретных классах. И к тому же при добавлении объекта в фабрику нам нужно будет его создавать — то есть выделять для объекта память. А объекты могут быть достаточно тяжелыми. Да конечно, в современном мире проблема памяти/производительности стоит не так остро, но С++ такой язык, который позволяет оптимизировать как и высокоуровневые конструкции, так и низкоуровневые и почему бы этим не пользоваться.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Еще один вариант, при добавлении класса в фабрику передавать в метод указатель на функцию, которая будет создать объект нужного типа. В таком случае возникает еще больше проблем, чем в предыдущим варианте. Нужно будет реализовывать данную функцию для каждого создаваемого конкретного класса, а при добавлении класса в фабрику передавать эту функции как параметр. Можно конечно сделать макросы, но выглядеть это будет очень не красиво, не говоря уже о том, что многие считают, что макросы в С++ — зло.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Но зато, у С++ есть шаблоны, которые и помогут решить эту не простую задачу. Для создания объектов типа Foo мы будем использовать другие объекты, вспомогательные, которые возьмут на себя работу по созданию объектов нужного нам класса. В простонародье такие классы называют creator или instantiator. Создается абстрактный класс creator, у которого обычно есть только один метод — создание объекта определенного интерфейса, в текущем варианте объекты типа Foo. А на его основе уже создаются конкретные классы creator'ы. Благодаря абстрактному классу creator, мы можем хранить набор конкретных creator'ов в любом контейнере. В данном случае шаблоны исполнят роль макросов, позволяя генерировать код для конкретного creator'а на основе параметра шаблона. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Абстракный класс </span><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">abstractFooCreator</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"> для создания объектов типа Foo: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">abstractFooCreator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">fooCreator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">От этого абстрактного класса, через наследование, создается шаблонный класс </span><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">fooCreator</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">, в котором будет генерироваться собственно код для создания объекта конкретного класса:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">fooCreator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> abstractFooCreator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> C(); }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Таким образом мы уже можем написать наш шаблонный метод для добавления класса в фабрику. Единственное, что нам нужно уже выбрать контейнер для хранения наших creator'ов. Очевидным выбором будет std::map.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">map</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, abstractFooCreator*&gt; FactoryMap;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">FactoryMap _factory;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">add</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &amp; id)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typename</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> FactoryMap::iterator it = _factory.find(id);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (it == _factory.end())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		_factory[id] = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> fooCreator&lt;C&gt;();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Теперь у нас появился первый рабочий вариант фабрики, в которую можно добавлять классы поддерживающие интерфейс Foo. Ну и собственно наша 2-ая проблема, а именно создания объектов нужного типа, практически уже решена, так как по сути она зависела только от того каким образом мы будем хранить creator'ы. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> std::string &amp; id)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typename</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> FactoryMap::iterator it = _factory.find(id);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (it != _factory.end())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> it-&gt;second-&gt;create();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Соберем весь код, чтобы увидеть полную картину:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">abstractFooCreator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">fooCreator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">fooCreator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> abstractFooCreator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> C(); }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">сlass FooFactory</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">protected</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">map</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, abstractFooCreator*&gt; FactoryMap;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	FactoryMap _factory;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	FooFactory();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	~</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">FooFactory</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">add</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &amp; id)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typename</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> FactoryMap::iterator it = _factory.find(id);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (it == _factory.end())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			_factory[id] = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> fooCreator&lt;C&gt;();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Foo * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> std::string &amp; id)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typename</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> FactoryMap::iterator it = _factory.find(id);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (it != _factory.end())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> it-&gt;second-&gt;create();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Ну и небольшой пример, как данную фабрику использовать. Добавление классов в фабрику:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">FooFactory factory;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">factory.add&lt;MyFoo&gt;(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;MyFoo&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">factory.add&lt;MyFoo2&gt;(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;MyFoo2&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">factory.add&lt;ImprovedFoo&gt;(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;ImprovedFoo&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Создание объекта с помощью фабрики: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">Foo * p = factory.create(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;MyFoo2&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Вот так просто с помощью фабрики можно управлять созданием объектов, поддерживающих единый интерфейс. </span></p>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:medium; font-weight:600; background-color:#ffffff;"><br /></h4>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;"><br /></h4>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;">Создание шаблонной фабрики</span></h4>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Ну, а теперь создадим, на основе этого конкретного примера, вполне конкретный паттерн.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Что нужно нашей фабрике, чтобы удовлетворять наши возможности? Конечно, это задание типа идентификатора, который можем быть как и enum'ом, так и std::string или любым другим типом подходящим для идентификатора. Второе — это собственно тип объектов, которые мы будем создавать, роль которого в примере выше исполнял класс Foo.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">IdType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactory</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	ObjectFactory() {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~ObjectFactory();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">add</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">IdType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &amp; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">id</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Base * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Вот так будет выглядеть наша шаблонная фабрика. Приступим к ее реализации. Как и в примере с Foo, нам нужно решить проблему создания объектов конкретного типа. То есть нам нужен абстрактный класс, у которого есть метод для создания объекта типа Base, и конкретный creator класс, который наследует этот абстрактный класс и реализует этот метод, используя шаблонный параметр.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">AbstractCreator</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	AbstractCreator() {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~AbstractCreator(){}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Base* </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Creator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> AbstractCreator&lt;Base&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Creator() { }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~Creator()	{}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Base * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">create</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> C(); }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Ну, а теперь нужно лишь использовать эти классы в нашей фабрике. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">IdType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactory</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">protected</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> AbstractCreator&lt;Base&gt; AbstractFactory;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">map</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&lt;IdType, AbstractFactory*&gt; FactoryMap;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	FactoryMap	_factory;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	ObjectFactory() {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~ObjectFactory();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">C</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">add</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">IdType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &amp; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">id</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		registerClass(id, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">new</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Creator&lt;C, Base&gt;());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">protected</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">registerClass</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> IdType &amp; id, AbstractFactory * p)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typename</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> FactoryMap::iterator it = _factory.find(id);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (it == _factory.end())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			_factory[id] = p;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">delete</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> p;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Что существенного добавилось по сравнению с примером Foo? Конечно же это метод registerClass, который в качестве параметра принимает объект типа AbstractFactory, который, в свою очередь, умеет создавать объекты того класса, который мы указываем как шаблонный параметр для метода add. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;">Добавляем возможность задания поведения фабрики</span></h4>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Опущу, пока что создание остальных простых методов, таких как проверка существование нужного класса в фабрике, их количество и удаление — полный листинг можно посмотреть в конце. Я же предлагаю сделать фабрику еще более гибкой. Ведь помимо того что мы задаем для фабрики тип идентификатора и базовый класс, интерфейс которого должны реализовывать помещаемые в фабрику классы, можно еще добавить настройку поведения нашей фабрики в случае определенных ошибок. Что делать если запрашиваемого типа нет в фабрики при создании? Возвращать нуль или бросать исключение? Что делать при попытке удаления несуществующего класса или при попытке добавить в фабрику уже зарегистрированный объект? Чтобы уметь изменять поведение фабрики нам нужно использовать другой паттерн проектирования — стратегия, так же известного под именем политика. Данный паттерн очень хорошо освещен в книге А.Александреску «Современное проектирование на С++».</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">В проектах, которые я поддерживаю необходимо, пока что, только 2 поведения. Отсутствие реакции при ошибке, и выбрасывание исключение особого типа, используемых в моих проектах. Единственным параметром, который нужен для отладки и вообще для детального описания ошибки — это идентификатор, который мы передаем в функции создания, удаления итд. Таким образом интерфейс нашей политики должен выглядеть приблизительно так:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactoryIgnoreErrorPolicy</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Base * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onCreateFailed</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onRemoveFailed</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onDuplicateRegistered</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Помимо собственно самих функций реализующих поведение, для класса политики нужны так же и тип интерфейса, который реализует фабрика и тип идентификатора для которого произошла ошибка и который передается во все методы. По аналогии c IgnoreErrorPolicy приведу в пример так же политику, которая выбрасывает исключение в случае ошибки.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-weight:600; color:#548eaa;">Пример реализации</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-weight:600; color:#548eaa; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactoryException</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::exception</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	_msg;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	ObjectFactoryException(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &amp; msg) </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">() : _msg(msg) {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~ObjectFactoryException() </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">() {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">char</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> * what() </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> _msg.c_str();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactoryThrowExceptionErrorPolicy</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">string</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">generateMessage</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">char</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> * msg, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">stringstream</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> strm;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		strm &lt;&lt; msg &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;, requested type id : &quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; type;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> strm.str();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	Base * </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onCreateFailed</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ObjectFactoryException(generateMessage(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;ObjectFactory - can't create object (not registered)&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, type));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onRemoveFailed</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ObjectFactoryException(generateMessage(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;ObjectFactory - can't remove class (not registered)&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, type));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">onDuplicateRegistered</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> Type &amp; type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">throw</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ObjectFactoryException(generateMessage(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;ObjectFactory - class already registered&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, type));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Теперь встроим нашу политику в фабрику. Это можно сделать несколькими способами — просто наследоваться от класса политики, или использовать класс политики как атрибут фабрики. В обоих случаях единственная проблема в том, каким образом из класса фабрики задавать шаблонные параметры для класса политики. В этом нам поможет замечательная особенность С++ — шаблонные шаблонные параметры. Когда при объявлении класса фабрики указываем что мы хотим передать в качестве параметра не просто какой-то класс, а шаблонный класс. Выглядеть это будет вот так: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">IdType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">template</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;class, class&gt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactoryErrorPolicy</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactoryIgnoreErrorPolicy</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">ObjectFactory</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ObjectFactoryErrorPolicy&lt;Base, IdType&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Courier New'; background-color:#fbfdff;">...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">В качестве 3-го параметра указывается template &lt;class, class&gt; class … Так же сразу же для этого параметра задается политика по умолчанию. Если необходимо задать другую политику, то при typedef фабрики нужно указать ей в качестве последнего параметра имя класса с необходимой политикой, например: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ObjectFactory&lt;Foo, FooType, ObjectFactoryThrowExceptionPolicy&gt; FooFactory;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">В моем случае я намного чаще использую политику игнорирования ошибок, поэтому и установил ее как параметр по умолчанию. Можно пойти еще дальше и сделать политику динамической, с возможностью изменять ее во время выполнения, но для меня на данный момент это не является актуальным и пока что в моей небольшой практике такой механизм не требовался. Собственно по этому я и выбрал метод наследования от класса политики, а не использование ее как атрибута фабрики. </span></p>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:medium; font-weight:600; background-color:#ffffff;"><br /></h4>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;"><br /></h4>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;">Листинг</span></h4>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;"><br /></h4>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Ну, а теперь самое время подвести итоги и представить полный листинг паттерна с моей реализацией.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-weight:600; color:#111111; background-color:#ffffff;">Примечание:</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"> ранее было сказано, что в качестве базового класса, который может порождать фабрика, используется класс Foo. Однако в примере ниже в качестве базового класса выступает класс Base, а от него наследуется класс Foo, от которого в сою очередь наследуются классы Bar и MaskedFoo. Таким образом, в этом листинге будет демонстрироваться порождение объектов-наследников класса Base, т. е. порождение объектов классов Foo, Bar, MaskedFoo.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-weight:600; color:#548eaa;">Небольшой пример использования фабрики</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-weight:600; color:#548eaa; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">#</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#f5871f;">include</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d99bf;">&quot;ObjectFactory.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">#</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#f5871f;">include</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d99bf;">&lt;iostream&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d99bf; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">enum</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	fooType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	barType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	maskedType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	unknownType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	firstType = fooType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	lastType = maskedType,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::ostream &amp; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">operator</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::ostream &amp; strm, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type &amp; type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">char</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> * names[] = {</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;foo&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;bar&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;masked&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (type &lt; firstType || type &gt; lastType)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> strm &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;unknown type(&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">(type) &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;)&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> strm &lt;&lt; names[type];	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Base</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> ~Base() {}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> = </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Foo</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Base</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> fooType; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">Bar</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> barType; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">class</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">MaskedFoo</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> : </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Foo</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">public</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">virtual</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> Type </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">type</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">const</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> { </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> barType; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">typedef</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> grs::ObjectFactory&lt;Base, Type&gt; TypeFactory;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">checkType</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">(TypeFactory &amp; factory, Type type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">auto_ptr</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">&lt;Base&gt; p;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	p.reset(factory.create(type));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">cout</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;Object with type : &quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; type;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (p.get())</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (type == p-&gt;type())	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">cout</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot; - successfully created\n&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">			</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">cout</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot; - created, but type mismatch\n&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">		</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">std</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">::</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">cout</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> &lt;&lt; </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot; - create failed\n&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">int</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">main</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	TypeFactory factory;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	factory.add&lt;Foo&gt;(fooType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	factory.add&lt;Bar&gt;(barType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	factory.add&lt;MaskedFoo&gt;(maskedType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	checkType(factory, fooType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	checkType(factory, barType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	checkType(factory, maskedType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	checkType(factory, unknownType);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">	</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Так же вместе с примером паттерн можно взять с </span><a href="https://bitbucket.org/rtorsten/torstenutils/src"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">bitbucket</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">, кроме него там есть еще несколько других классов полезного назначения. На этом — все. Хорошего и креативного кодинга!</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;">Ссылки</span></p>
<h4 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#111111; background-color:#ffffff;"><br /></h4>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Если вас заинтересовали шаблоны проектирования, советую обратить внимание на эти книги. В книге А.Александреску очень хорошо переданы особенности синтаксиса С++ при работе с шаблонами. А в книге банды 4-х можно найти все самые популярные паттерны, используемые во многих языках программирования.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p></body></html>