<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#include</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#ce9178;">&lt;stdbool.h&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#include</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#ce9178;">&quot;stm32f1xx.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// Так работает мигание светодиода</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// #define LEDPORT (GPIOC)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// #define LED1 (13)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#define</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> LEDPORT (GPIOB)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#define</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> LED1 (</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">12</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// #define ENABLE_GPIO_CLOCK (RCC-&gt;APB2ENR |= RCC_APB2ENR_IOPCEN)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// #define GPIOMODER (GPIO_CRH_MODE13_0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// Разрешение тактирования порта B</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#define</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> ENABLE_GPIO_CLOCK (RCC-&gt;</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">APB2ENR</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">|=</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> RCC_APB2ENR_IOPBEN)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// Разрешение работы пина 12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#define</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> GPIOMODER (GPIO_CRH_MODE12_0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">#define</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;"> _MODER CRH</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">void</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#dcdcaa;">msDelay</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">(</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">int</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">ms</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">   </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">while</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> (</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">ms</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">-- &gt; </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">0</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">      </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">volatile</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">int</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">x</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">=</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">500</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">      </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">while</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> (</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">x</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">-- &gt; </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">0</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">         </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#dcdcaa;">__asm</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">(</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#ce9178;">&quot;nop&quot;</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">//Alternates blue and green LEDs quickly</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">int</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#dcdcaa;">main</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">(</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">void</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">    </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">ENABLE_GPIO_CLOCK</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">;              </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// enable the clock to GPIO</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">    </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">LEDPORT</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">-&gt;</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">_MODER</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> |= </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">GPIOMODER</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">;   </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// set pins to be general purpose output</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">    </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">while</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> (</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">true</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">        </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#dcdcaa;">msDelay</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">(</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">500</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">        </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">LEDPORT</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">-&gt;</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#9cdcfe;">ODR</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> ^= (</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">1</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">&lt;&lt;</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#569cd6;">LED1</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">);  </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#6a9955;">// toggle diodes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">    </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#c586c0;">return</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"> </span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#b5cea8;">0</span><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Droid Sans Mono,monospace,monospace'; font-size:12pt; color:#d4d4d4;"><br /></p></body></html>