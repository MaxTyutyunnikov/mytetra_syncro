<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; background-color:transparent;">Мало кто знает, но в консольке винда умеет работать с флешками, в которых используется MBR с гибридным образом. Если флешка не видится в графическом интерфейсе пользователя, с ней можно попробовать работать через консольные команды.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; background-color:transparent;">Далее дано описание утилиты </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600; background-color:transparent;">diskpart</span><span style=" font-family:'Sans'; font-size:10pt; background-color:transparent;"> на английском. Следует учитывать, что состав команд, которые знает diskpart, отличается в зависимости от версии Windows.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="title"></a><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:14pt; font-weight:600; color:#000000; background-color:transparent;">T</span><span style=" font-family:'Georgia,Times New Roman,Times,serif'; font-size:14pt; font-weight:600; color:#000000; background-color:transparent;">he Disk Management Console Diskpart</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="summary"></a>Windows XP, Vista, and 7 have a powerful command-line console named <span style=" font-weight:600;">Diskpart</span> for carrying out a variety of disk operations. These include RAID, partition and boot management. Various features of Diskpart are described.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">How to use Diskpart</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">Diskpart is a separate suite of commands that runs in the command window in its own shell. It is opened by first entering the command &quot;</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">diskpart</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">&quot; (without quotes) and then entering one of the various sub-commands that are listed in the section below. To return to the regular command line, enter &quot;exit&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">For Windows Vista and Windows 7 the command line must be opened with administrator privileges. These more recent versions of Windows contain features not available in Windows XP, as indicated in the list below. Also note that Windows XP does not allow operations on removable media whereas in Windows Vista/7, media such as USB keys can be the object of Diskpart operations.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="div-gpt-ad-commandwindows_com-medrectangle-4-0"></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">B</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">efore carrying out an operation on a particular disk, partition, or volume it must first be selected with the &quot;list disk&quot;, &quot;list partition&quot;, or &quot;list volume&quot; sub-commands followed by a &quot;select&quot; command. For example, the necessary sequence of commands can be represented in this schematic way for a disk operation:</span><span style=" font-family:'Courier New,Courier,mono'; font-size:10pt; color:#000000; background-color:transparent;">Open command line-&gt;open Diskpart shell-&gt;list disk-&gt;select disk-&gt;do disk operation</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">A similar sequence would hold for a operation involving a partition or volume.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">Diskpart exists as a separate executable file</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"> </span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-style:italic; color:#000000; background-color:transparent;">diskpart.exe</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"> and can also be accessed through the </span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">Run</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"> line or the Vista/7 search boxes.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-style:italic; color:#000000; background-color:transparent;">Diskpart is a very powerful command and can easily wipe out the contents of a disk or volume so it must be used with great care. Always be sure which volume or disk you are operating on.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">Diskpart command list</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">The list of sub-commands for Diskpart are shown below. Some commands are not available in Windows XP and they are indicates with an asterisk (*).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">ACTIVE - Mark the selected partition as active.<br />ADD - Add a mirror to a simple volume.<br />ASSIGN - Assign a drive letter or mount point to the selected volume.<br />ATTRIBUTES - Manipulate volume or disk attributes.*<br />ATTACH - Attaches a virtual disk file.*<br />AUTOMOUNT - Enable and disable automatic mounting of basic volumes.*<br />BREAK - Break a mirror set.<br />CLEAN - Clear the configuration information, or all information, off the disk.<br />COMPACT - Attempts to reduce the physical size of the file.*<br />CONVERT - Convert between different disk formats.<br />CREATE - Create a volume, partition or virtual disk. (No virtual disk management in Windows XP.)<br />DELETE - Delete an object.<br />DETAIL - Provide details about an object.<br />DETACH - Detaches a virtual disk file.*<br />EXIT - Exit DiskPart.<br />EXTEND - Extend a volume.<br />EXPAND - Expands the maximum size available on a virtual disk.*<br />FILESYSTEMS - Display current and supported file systems on the volume.*<br />FORMAT - Format the volume or partition.*<br />GPT - Assign attributes to the selected GPT partition.*<br />HELP - Display a list of commands.<br />IMPORT - Import a disk group.<br />INACTIVE - Mark the selected partition as inactive.<br />LIST - Display a list of objects.<br />MERGE - Merges a child disk with its parents.*<br />ONLINE - Online an object that is currently marked as offline.<br />OFFLINE - Offline an object that is currently marked as online.<br />RECOVER - Refreshes the state of all disks in the selected pack. Attempts recovery on disks in the invalid pack, and resynchronizes mirrored volumes and RAID5 volumes that have stale plex or parity data.*<br />REM - Does nothing. This is used to comment scripts.<br />REMOVE - Remove a drive letter or mount point assignment.<br />REPAIR - Repair a RAID-5 volume with a failed member.<br />RESCAN - Rescan the computer looking for disks and volumes.<br />RETAIN - Place a retained partition under a simple volume.<br />SAN - Display or set the SAN policy for the currently booted OS.*<br />SELECT - Shift the focus to an object.<br />SETID - Change the partition type.*<br />SHRINK - Reduce the size of the selected volume.*<br />UNIQUEID - Displays or sets the GUID partition table (GPT) identifier or master boot record (MBR) signature of a disk.*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">*indicates a command missing from Windows XP.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">Make a USB key bootable</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><a name="div-gpt-ad-commandwindows_com-banner-1-0"></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">T</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">his example applies to Windows Vista and Windows 7. Windows XP does not support using Diskpart on flash drives. Open a command prompt with administrator rights and enter the following sequence of commands:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:12px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">diskpart</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">list disk</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">select disk {</span><span style=" font-size:12px; font-style:italic;">number</span><span style=" font-size:12px;">}</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">clean</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">create partition primary</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">select partition 1</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">active</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">format fs=fat32 quick</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">assign</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">exit</span></li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">In the &quot;select disk&quot; command, replace {</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-style:italic; color:#000000; background-color:transparent;">number</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">} with the drive number of your USB drive. </span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-style:italic; color:#000000; background-color:transparent;">Take care to choose the correct number since this procedure erases everything on the drive you select.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">The format command given above will create a FAT32 file system. This creates a bootable USB key that can be used for many purposes, once appropriate files are added. For example, it can be used to install Windows 7 (if the flash drive is large enough). . If you wish to use the USB key to actually</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-style:italic; color:#000000; background-color:transparent;"> run</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"> Windows 7 or otherwise need NTFS formatting, you will need to replace &quot;format fs=fat32&quot; with &quot;format fs=ntfs&quot; and also modify the boot sector.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">Gain access to a hidden partition</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">Most Windows PCs sold today come with a hidden partition containing a restore function. This partition will often have no drive letter assigned and will not be visible in Windows Explorer. It may be possible to make the partition accessible by using Diskpart to assign a drive letter to the partition. However, there are limitations and according to Mivrosoft not all hidden partitions can be assigned this way. Here is the procedure. Enter the following sequence of commands:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:12px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">diskpart</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">list disk</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">select disk 0 (</span><span style=" font-size:12px; font-style:italic;">zero is the normal numbering for the restore partition but be sure to check if this is correct by looking at the sizes</span><span style=" font-size:12px;">)</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">list partition</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">select partition 1 (</span><span style=" font-size:12px; font-style:italic;">or the smaller partition with no drive letter if the numbering is differen</span><span style=" font-size:12px;">t)</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:0px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">assign X (X is whatever drive letter you want to use)</span></li>
<li style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;" style=" margin-top:0px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-size:12px;">exit</span></li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; font-weight:600; color:#000000; background-color:transparent;">Reference</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:17px; margin-right:17px; -qt-block-indent:0; text-indent:0px; background-color:transparent;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000; background-color:transparent;">Many of the commands also have sub-commands. For more details, see</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"> </span><a href="http://technet.microsoft.com/en-us/library/cc766465(WS.10).aspx"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; text-decoration: underline; color:#0000ff; background-color:transparent;">this Microsoft reference</span></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial,Helvetica,sans-serif'; font-size:10pt; color:#000000;"><br /></p></body></html>