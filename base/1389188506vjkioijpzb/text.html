<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Здесь записываю свою последовательность действий по установке Qt 5.2 и попытке компиляции простой программы под Android.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Эти записульки надо оформить в виде отдельной статьи.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Установка Qt for Android</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вначале нужно установить <span style=" font-weight:600;">Qt for Android</span>:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://download.qt-project.org/official_releases/qt/5.2/5.2.0/qt-linux-opensource-5.2.0-android-x86-offline.run"><span style=" text-decoration: underline; color:#0057ae;">Qt 5.2.0 for Android (Linux 32-bit, 490 MB)</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; text-decoration: underline; color:#0057ae;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ссылка на скачивание на сайте qt-project.org:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">http://download.qt-project.org/official_releases/qt/5.2/5.2.0/qt-linux-opensource-5.2.0-android-x86-offline.run</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Данный файл содержит:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Среду разработки Qt Creator 3.0.0</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Библиотеки и хедеры Qt 5.2.0</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">То есть, это полная версия среды разработки Qt Creator 3.0.0 со всеми библиотеками версии 5.2. При инсталляции можно указать отдельный каталог, например <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/qt_5_2_0_for_android</span>, куда будет проинсталлирован Qt Creator 3.0.0 и библиотеки Qt 5.2, причем они не будут затрагивать уже существующие в системе библиотеки Qt. Инсталлятор представляет собой *.run - файл, которому нужно назначить права на исполнение 755 и запустить его. Запуск инсталлятора можно делать от обычного пользователя, главное чтобы он имел право писать в каталог назначения (в нашем случае <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/qt_5_2_0_for_android</span>).</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Установка Android SDK и Android NDK</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Несмотря на своё название, установленный <span style=" font-weight:600;">Qt 5.2 for Android</span> будет неспособен собирать проекты под платформу Android. Для того, чтобы заработала сборка под Android, нужно установить Android SDK и Android NDK. </p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Android SDK</span> (<span style=" font-style:italic;">software development kit</span>) — основной комплект средств разработки под Android;</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Android NDK </span>(<span style=" font-style:italic;">native development kit</span>) – набор инструментов, которые позволяют реализовать часть вашего Android-приложения используя такие языки как С/С++.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Данные пакеты нужно брать с сайта:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">http://developer.android.com/sdk/index.html</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На этом сайте, на странице с Android SDK, предлагается к скачиванию два варианта SDK:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">1. ADT Bundle (Android Developer Tools) (размер ~500Mb) - пакет, содержащий </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Eclipse + ADT plugin</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android SDK Tools</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android Platform-tools</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The latest Android platform</li>
<li style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The latest Android system image for the emulator</li></ul>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">2. SDK Tools Only (размер ~100Мв) - пакет, содержащий только </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android SDK Tools</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Оба варианта представляют из себя *.zip - архив. Совершенно непонятно, что из всего этого барахла нам действительно пригодится, поэтому качаем ADT Bundle и оттуда будем распаковывать то, что нам потребуется. На странице скачивания нам скажут, что после установки больше не будет необходимости скачивать более новые версии Android SDK, вместо этого для обновления следует пользоваться программой SDK Manager, которая идет в комплекте.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Внутри ZIP-архива с <span style=" font-weight:600;">ADT Bundle</span> находятся два подкаталога - <span style=" font-family:'Courier New'; color:#6a0e07;">eclipse</span> и <span style=" font-family:'Courier New'; color:#6a0e07;">sdk</span>. Каталог <span style=" font-family:'Courier New'; color:#6a0e07;">eclipse</span> нам ненужен, потому что у нас уже есть среда разработки Qt Creator. А каталог <span style=" font-family:'Courier New'; color:#6a0e07;">sdk</span> следует распаковать куда-нибудь в каталог /opt, например <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_sdk</span>. Уточнение. На момент написания статьи я качал версию ADT Bundle 20131030. В результате в каталоге <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_sdk</span> должны лежать следующие директории:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">$ cd /opt/android_sdk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">$ ls -lF | sort</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 3 xi xi 4096 окт 30 14:24 build-tools/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 3 xi xi 4096 окт 30 14:25 platforms/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 3 xi xi 4096 окт 30 14:26 extras/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 3 xi xi 4096 окт 30 14:26 system-images/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 4 xi xi 4096 окт 30 14:24 platform-tools/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-x--- 8 xi xi 4096 окт 30 14:23 tools/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x 2 xi xi 4096 янв  1 21:45 add-ons/<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее качаем <span style=" font-weight:600;">Android NDK</span> с того же сайта. На момент написания статьи последняя актуальная версия - r9c. Распаковываем содержимое этого архива (*.bz2) в каталог <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_ndk</span>. В результате в каталоге <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_ndk</span> должны лежать следующие директории и файлы:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">$ ls -lF | sort</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x 13 xi xi   4096 дек  4 07:53 toolchains/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x 15 xi xi   4096 окт 28 12:11 platforms/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x 18 xi xi   4096 окт 29 11:04 samples/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x  6 xi xi   4096 авг 21  2012 sources/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x  6 xi xi   4096 дек  4 07:52 build/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x  7 xi xi   4096 дек  4 07:53 prebuilt/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x  8 xi xi   4096 окт 28 12:11 docs/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">drwxr-xr-x  8 xi xi   4096 окт 28 12:11 tests/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi   1306 авг 21  2012 GNUmakefile</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi   1360 авг 21  2012 README.TXT</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi    201 авг 21  2012 documentation.html</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi    292 авг  5 11:14 ndk-build.cmd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi    294 дек  3 06:58 ndk-gdb-py.cmd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi      4 дек  4 07:52 RELEASE.TXT</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rw-r--r--  1 xi xi    856 авг  8 01:20 find-win-host.cmd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi   1127 авг  5 11:14 remove-windows-symlink.sh*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi   1674 сен 10  2012 ndk-which*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi  25349 ноя 19 05:40 ndk-gdb*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi  33460 авг 13 07:32 ndk-gdb.py*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi    355 ноя 13 11:40 ndk-gdb-py*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi  37012 авг 30 16:59 ndk-depends*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi 826396 ноя 26 10:32 ndk-stack*</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">-rwxr-xr-x  1 xi xi   9820 ноя 13 11:40 ndk-build*</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Установка Java JDK</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Помимо всего прочего нам понадобится Java JDK. Java используется при запуске эмулятора Андроид-устройств. По сути, эмулятор Android весь написан на Java, поэтому без Java нам не обойтись. У меня уже была установлена Java (даже несколько штук), Qt Creator нашел Java JDK в каталоге:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">/usr/lib/jvm/java-6-openjdk-i386</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не знаю, имеет ли значение, используется ли фирменная Java от Oracle или необходима OpenSource реализация. В моем случае работает OpenJDK.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Установка ANT</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При сборке проекта под Андроид, помимо всего прочего, используется система сборки ANT, написанная на Java. Можно рассматривать ANT как некий аналог системы сборки make. Для того чтобы шла компиляция проекта, необходимо, чтобы ANT была установлена в системе. Во многих Linux-дистрибутивах (например. в Debian Squeeze) этот пакет присутсвует в репозитарии. Он так и называется - ant. Устанавливаем его.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Конфигурирование Qt Creator 3.0.0</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После того, как установлены:</p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Qt v. 5.2.0</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Qt creator v. 3.0.0</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android SDK v. 20131030</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android NDK v. r9c</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Java JDK</li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ANT</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">можно приступать к запуску и настройке Qt Creator 3.0.0. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запускаем Qt Creator, нажимаем <span style=" font-weight:600;">Tools</span> - <span style=" font-weight:600;">Options</span>..., выбираем раздел <span style=" font-weight:600;">Android</span>. Указываем все наши пути:</p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android SDK location: <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_sdk</span></li>
<li style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Android NDK location: <span style=" font-family:'Courier New'; color:#6a0e07;">/opt/android_ndk</span></li></ul>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New'; color:#6a0e07;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ANT location: /usr/bin/ant</li></ul>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New'; color:#6a0e07;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">JDK location: /usr/lib/jvm/java-6-openjdk-i386</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В этом же окне возможно появление предупреждающего сообщения:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#6a0e07;">Qt version for architecture mips is missing.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нас оно не должно волновать: большинство устройств на Android имеет микропроцессор с архитектурой ARM. Тритить время на конфигурирование архитектуры MIPS мы не будем.</p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image51418816.png" width="500" height="337" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее необходимо в том же окне нажать кнопку <span style=" font-weight:600;">Start Android AVD Manager</span>. Откроется вот такое окно (изначально список будет пустым):</p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1805896476.png" width="767" height="396" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">AVD означает Android Virtual Device. По сути, это окно со списком виртуальных Android-машин, запускаемых в эмуляторе. На этих машинах мы будем производить тестирование и отладку нашей программы.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На закладке Device Definition присутсвует набор готовых образов Android-устройств. Можно создать AVD-образ с параметрами реально существующего устройства:</p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image518339759.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Наша задача - создать на вкладке Android Virtual Device пару-тройку устройств, в которыхъ мы будем пытаться запустить  Qt программу. Я сделал себе три устройства. Два на основе пресетов с вкладки Device Definition, одно - просто нажав кнопку <span style=" font-weight:600;">New...</span>, и задав параметры, так сказать, &quot;с нуля&quot;.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обратите внимание, что мы создаем устройство для CPU/ABI с архитектурой <span style=" font-weight:600;">armeabi-v7a</span>. Запомним этот факт, нам он пригодится в дальнейшем конфигурировании.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Теперь нам осталось проверить, запускается ли эмулятор Андроида. Для этого в окне <span style=" font-weight:600;">Options - Android</span> выбираем созданное нами устройство и нажимаем кнопку Start. Вот какое окно откроется для Nexus One:</p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image2065799477.png" width="356" height="400" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запуск будет очень медленным. У меня на Core2Duo E8400 3.0GHz этот эмулятор, написанный на Java, запускается около 3-х минут. Но, как минимум, он работает.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Создание и конфигурирование своего Qt проекта</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее создаем Qt-проект. Нажимаем <span style=" font-weight:600;">File - New File or Project</span>. В качестве типа проекта выбираем <span style=" font-weight:600;">Qt Widget Application</span>. Да-да! Qt 5.2 способен компилировать под Android классические Qt-приложения, а не только <span style=" font-weight:600;">Qt quick</span>.</p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image585497360.png" width="440" height="260" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создаем проект со стандартным окном MainWindow. После создания проекта выбираем в дереве проекта MainWindow.ui, и набрасываем форму главного окна:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1116082065.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Закрываем MainWindow.ui крестиком в правом верхнем углу.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее нам нужно скомпилировать наш проект. Но вначале нам нужно указать как и под какую платформу должна идти компиляция. Ведь по-умолчанию компиляция будет идти просто под Linux. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нажимаем кнопку <span style=" font-weight:600;">Project</span>:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1376045644.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нажимаем выпадающий список Add Kit, и выбираем строку <span style=" font-weight:600;">Android for armeabi-v7a</span>. Помните, мы запоминали, какая платформа у нашего образа виртуального устройства? Именно под эту платформу и нужно делать компиляцию, имначе будет ошибка. После добавления целевой платформы компиляции, все ее настройки сразу появятся на экране:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image687693876.png" width="489" height="368" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Строка <span style=" font-weight:600;">Build directory</span>, возможно, будет выделена красным цветом. Это означает всего лишь, что такой директории нет. Но она будет создана в момент компиляции, так что обращать на это внимания не стоит.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее нажимаем кнопку <span style=" font-weight:600;">Manage Kits...</span> и в открывшемся окне указываем платформу, под которую будет по-умолчанию идти компиляция. Для этого надо выбрать строку <span style=" font-weight:600;">Android for armeabi-v7a</span> и нажать кнопку Make Default:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image714801898.png" width="750" height="412" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее нажимаем <span style=" font-weight:600;">Build - Rebuild Project &quot;Имя_нашего_проекта&quot;</span>. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если компиляция прошла удачно (смотрим вкладку Compile Output внизу экрана), то запускаем наше приложение в эмуляторе, нажав Build - Run. Система спросит, в какой виртуальной машине произвести запуск. Выбираем машину, нажимаем OK: </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image814006009.png" width="466" height="314" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">И будет запущен эмулятор андроида с нашей программой. Повторюсь, что запуск будет очень долгим. В какой-то момент может показаться, что компьютер ничего не делает. Но это не так. Рано или поздно, эмулятор будет запущен. Вначале в эмуляторе будет переливаться надпись ANDROID, а через пару минут запустится приложение. Если до этого вы выключали эмулятор кнопкой питания, возможно вы увидите экран блокировки с замочком. Разблокируйте экран, и сразу запустится ваше приложение. Выглядит это так:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1285900528.png" width="356" height="400" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Видно, что форма кривовата. Концов длинных строк не видно. Возможно, это проблема эмулятора, так как на реальном устройстве формы выглядят правильно.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Все! У нас есть Qt-программа, которая работает на OS Android!</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для того, чтобы запустить программу на реальном устройстве, надо найти ее <span style=" font-family:'Courier New'; color:#6a0e07;">*.apk</span>-файл. Он был создан в момент компиляции, и находится в директории проекта, в поддиректории <span style=" font-family:'Courier New'; color:#6a0e07;">/android-build/bin</span>. Данный файл надо скопировать на устройство, запустить его через файл-менеджер. Программа будет установлена и заущена. В списке программ она будет иметь значек с зеленым роботом, и иметь имя, заданное в названии проекта.</p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>