<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Допустим, нужно скопировать всё из папки /source в папку /target. </span><a name="habracut"></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">П</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">ервое, что приходит на ум это: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#fbfdff;">cp /source/* /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Сразу исправим эту команду на: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a /source/* /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Ключ </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">-a</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> добавит копирование всех аттрибутов, прав и добавит рекурсию. Когда не требуется точное воспроизведение прав достаточно ключа </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">-r</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">. После копирования мы обнаружим, что скопировались не все файлы — были проигнорированы файлы начинающиеся с точки типа:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">.profile</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">.local</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">.mc</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">и тому подобные. Почему же так произошло? Потому что wildcards обрабатывает shell (</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">bash</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> в типовом случае). По умолчанию bash проигнорирует все файлы начинающиеся с точек, так как трактует их как скрытые. Чтобы избежать такого поведения нам придётся изменить поведение </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">bash</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> с помощью команды: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">shopt -s dotglob</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Чтобы это изменение поведения сохранилось после перезагрузки, можно сделать файл wildcard.sh c этой командой в папке </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">/etc/profile.d</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> (возможно в вашем дистрибутиве иная папка). А если в директории-источнике нет файлов, то shell не сможет ничего подставить вместо звёздочки, и также копирование завершится с ошибкой. Против подобной ситуации есть опции </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">failglob</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> и </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">nullglob</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">. Нам потребуется выставить </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">failglob</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">, которая не даст команде выполниться. </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">nullglob</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> не подойдёт, так как она строку с wildcards не нашедшими совпадения преобразует в пустую строку (нулевой длины), что для </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">cp</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> вызовет ошибку. Однако, если в папке тысячи файлов и больше, то от подхода с использованием wildcards стоит отказаться вовсе. Дело в том, что </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">bash</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> разворачивает wildcards в очень длинную командную строку наподобие: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a /souce/a /source/b /source/c …… /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">На длину командной строки есть ограничение, которое мы можем узнать используя команду:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">getconf ARG_MAX</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Получим максимальную длину командной строки в байтах:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#fbfdff;">2097152</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Или: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#fbfdff;">xargs --show-limits</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Получим что-то типа: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">….</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">Maximum length of command we could actually use: 2089314</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">….</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Итак, давайте будем обходиться вовсе без wildcards. Давайте просто напишем </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a /source /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">И тут мы столкнёмся с </span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-weight:600; color:#222222; background-color:#ffffff;">неоднозначностью поведения команды </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-weight:600; color:#222222; background-color:#ffffff;">cp</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">. Если папки /target не существует, то мы получим то, что нам нужно. Однако, если папка target существует, то файлы будут скопированы в папку /target/source. Не всегда мы можем удалить заранее папку /target, так как в ней могут быть нужные нам файлы и наша цель, допустим, дополнить файлы в /target файлами из /source. Если бы папки источника и приёмника назывались одинаково, например, мы копировали бы из /source в /home/source, то можно было бы использовать команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a /source /home</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">И после копирования файлы в /home/source оказались бы дополненными файлами из /source. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fff7d7;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#fff7d7;">Такая вот логическая задачка: мы можем дополнить файлы в директории-приёмнике, если папки называются одинаково, но если они отличаются, то папка-исходник будет помещена внутрь приёмника. Как скопировать файлы из /source в /target с помощью cp без wildcards?</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Чтобы обойти это вредное ограничение мы используем неочевидное решение:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a /source/. /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Те кто хорошо знаком с DOS и Linux уже всё поняли: внутри каждой папки есть 2 невидимые папки &quot;.&quot; и &quot;..&quot;, являющиеся псевдопапками-ссылками на текущую и вышестоящие директории.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:34px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%;"><span style=" font-size:16px;">При копировании </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px;">cp</span><span style=" font-size:16px;"> проверяет существование и пытается создать /target/.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:34px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%;"><span style=" font-size:16px;">Такая директория существует и это есть /target</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:34px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%;"><span style=" font-size:16px;">Файлы из /source скопированы в /target корректно.</span></li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Итак, вешаем в жирную рамочку в своей памяти или на стене:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffaa7f;"> cp -a /source/. /target </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Поведение этой команды однозначно. Всё отработает без ошибок вне зависимости от того миллион у вас файлов или их нет вовсе. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<h3 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:large; font-weight:496; color:#222222; background-color:#ffffff;">Выводы</span></h3>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Если нужно скопировать </span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; font-weight:600; color:#222222; background-color:#ffffff;">все</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> файлы из одной папки в другую, не используем wildcards, вместо них лучше использовать </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">cp</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> в сочетании с точкой в конце папки-источника. Это скопирует все файлы, включая скрытые и не завалится при миллионах файлов или полном отсутствии файлов. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<h4 style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:medium; font-weight:496; color:#222222; background-color:#ffffff;">Послесловие</span></h4>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">Аналогичный по результату вариант команды: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -a -T /source /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">или, что то же самое:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009; background-color:#ffffff;">cp -aT /source /target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;">ВНИМАНИЕ: регистр буквы </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; color:#222222; background-color:#ffffff;">T</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222; background-color:#ffffff;"> имеет значение, так как у команды cp есть опция -t, которая используется для указания директории назначения при применении команды cp в совокупности с другими консольными командами.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif'; color:#222222;"><br /></p></body></html>