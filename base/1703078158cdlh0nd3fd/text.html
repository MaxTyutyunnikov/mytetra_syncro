<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Во многих дистрибутивах Linux не настроено автоматическое подключение телефона по протоколу PTP через USB-кабель. После того, как кабель подключен и на телефоне выбран протокол PTP (передача фото), на компьютере с Linux просто ничего не происходит. Как же гарантированно подключить диск телефона, чтобы увидеть фотографии?</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для решения этой проблемы может помочь утилита <span style=" font-family:'FreeMono'; color:#6a1009;">gphotofs</span>. Данная утилита какими-то своими внутренними алгоритмами находит первое попавшееся устройство с поддержкой протокола PTP на шине USB. И позволяет его смонтировать в отдельный каталог. Если телефон виден на шине USB через команды <span style=" font-family:'FreeMono'; color:#6a1009;">dmesg</span> или <span style=" font-family:'FreeMono'; color:#6a1009;">lsusb</span>, то в случае если на нем включена передача по PTP, то каталог с изображениями будет смонтирован.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда для монтирования будет такая:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">gphotofs -o allow_other /mnt</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">где <span style=" font-family:'FreeMono'; color:#6a1009;">/mnt</span>- это каталог монтирования. Он должен существовать и должен быть пустым. Данная команда выполняется от <span style=" font-weight:600;">root</span>. Опция <span style=" font-family:'FreeMono'; color:#6a1009;">-o allow_other</span> позволяет читать содержимое каталога всем другим пользователям.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если необходимо выбрать USB-устройство, под которым виден в системе смартфон, то можно воспользоваться опцией  <span style=" font-family:'FreeMono'; color:#6a1009;">--port=...</span>,  в которой указывается путь к блочному USB-устройству.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы корректно размонтировать каталог с фотографиями, надо дать команду:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">fusermount -u /mnt</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как минимум, команда <span style=" font-family:'FreeMono'; color:#6a1009;">gphotofs</span> позволяет прочитать картинки с телефона, хотя вообще-то монтирование происходит с возможностью записи, то есть можно через компьютер удалять ненужные фотографии и наводить порядок. Фактически, <span style=" font-family:'FreeMono'; color:#6a1009;">gphotofs</span> дает возможность просматривать картинки любым просмотрщиком изображений, а не только теми, которые умеют сами подключаться к телефону через псевдо-протоколы <span style=" font-family:'FreeMono'; color:#6a1009;">ptp://</span> или <span style=" font-family:'FreeMono'; color:#6a1009;">camera://</span>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>