<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Исторически так сложилось, что в Linux на разных этапах его развития возникали разные подсистемы ввода/вывода звука. Но широко известные и используемые можно собрать в один небольшой список:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">OSS</span> - Open Sound System. Первая попытка сделать универсальный Linux-драйвер, через который любая программа могла работать со звуковым устройством. По-сути, данный драйвер был частью ядра, и создавал в системе файлы-устройства <span style=" font-family:'FreeMono'; color:#6a1009;">/dev/dsp</span> и <span style=" font-family:'FreeMono'; color:#6a1009;">/dev/mixer</span>. Через них и шла работа со звуком.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">ALSA</span> - Advanced Linux Sound Architecture. Самая популярная на текущий момент звуковая подсистема, встроенная в операционную систему Linux. В состав ALSA входят модули ядра, системные библиотеки, утилиты конфигурирования. Чтобы поддерживать различную звуковую аппаратуру различных производителей, в ALSA созданы различные модули ядра. Все модули ядра, относящиеся к ALSA, имеют наименование, начинающееся на <span style=" font-family:'FreeMono'; color:#6a1009;">snd_</span>. В части поддержки устаревшего программного обеспечения, ALSA полностью заменяет собой OSS и полностью эмулирует его работу, но во многих дистрибутивах эту возможность нужно специально настраивать.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">PulseAudio</span> - звуковой сервер в виде демона, запускаемый, что интересно, от имени обычного пользователя. Создает слой абстракции звуковых потоков для возможности различной коммутации, принимает по собственному API звуковой поток от приложений и воспроизводит его через ALSA. Так же PulseAudio создает для ALSA специальный порт, через которые может получать данные, отправляемые приложениями в сам ALSA, и такое поведение настраивается по-дефолту при установке PulseAudio. Считается надстройкой над ALSA, так как без ALSA его использование бессмысленно (будет работать только комутация, а звука не будет).</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">PipeWire</span> - более новый и продвинутый звуковой сервер, чем PulseAudio. Имеет модуль эмулирования API PulseAudio. Для работы с железом использует ALSA.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Учитывая разные варианты настройки звуковой подсистемы, встает вопрос: а как вообще понять, что сконфигурировано в системе?</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для этого можно воспользоваться утилитой <span style=" font-family:'FreeMono'; color:#6a1009;">alsa-info</span>. Данная утилита запускается только из-под <span style=" font-family:'FreeMono'; color:#6a1009;">root</span>. Она сгенерирует файл-отчет во временном каталоге, имя файла будет следующим:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">/tmp/alsa-info.txt.XXXXXXXXXX</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По-сути, это утилита, которая собирает в отчет информацию из следующих утилит и системных файлов:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">dmesg</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">lspci</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">aplay</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">amixer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">alsactl</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">rpm, dpkg</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">/proc/asound/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">/sys/class/sound/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">~/.asoundrc (etc.)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>