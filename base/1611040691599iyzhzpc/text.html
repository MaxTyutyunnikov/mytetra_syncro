<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команды <span style=" font-family:'FreeMono'; color:#6a1009;">chown</span> и <span style=" font-family:'FreeMono'; color:#6a1009;">chmod</span> имеют одну неприятную особенность: в своем стандартном синтаксисе они не обрабатывают (т. е. пропускают) скрытые файлы и каталоги. В Linux скрытые файлы и каталоги имеют в начале своего имени точку, и иногда называются dot-файлами (dot-каталогами).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Особенно такое поведение неприятно в том случае, если происходит рекурсивная обработка файлов с помощью опции <span style=" font-family:'FreeMono'; color:#6a1009;">-R</span>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вопрос: как же обрабатывать скрытые файлы через команды <span style=" font-family:'FreeMono'; color:#6a1009;">chown</span>/<span style=" font-family:'FreeMono'; color:#6a1009;">chmod</span> так, чтобы затрагивались и скрытые файлы? Немало споров было по этому поводу, но самый правильный способ, без &quot;краевых&quot; эффектов - это воспользоваться командой <span style=" font-family:'FreeMono'; color:#6a1009;">find</span>, из-под которой выполнить команду смены пользователя или команду смены режима доступа к файлу.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В общем случае, делается это так:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">find . -exec chown user:group {} \;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">find . -exec chmod 644 {} \;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">и т. п.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда <span style=" font-family:'FreeMono'; color:#6a1009;">find</span>, в отличие от <span style=" font-family:'FreeMono'; color:#6a1009;">chown</span>/<span style=" font-family:'FreeMono'; color:#6a1009;">chmod</span>, находит все файлы в указанном каталоге (символ точка &quot;.&quot; в команде - это текущий каталог), невзирая на то, скрытый это файл или нет. Команда <span style=" font-family:'FreeMono'; color:#6a1009;">find</span> ищет файлы в указанном каталоге рекурсивно, заходя во все подкаталоги.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">С помощью опции <span style=" font-family:'FreeMono'; color:#6a1009;">-exec</span> к каждому найденному файлу применяется команда, идущая после данной опции. Вместо символов &quot;{}&quot; будет подставляться имя текущего найденного файла с путем к нему. Символы &quot;\;&quot; нужны для того, чтобы в опции <span style=" font-family:'FreeMono'; color:#6a1009;">-exec</span> обозначить конец выполняемой внутри нее команды.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>