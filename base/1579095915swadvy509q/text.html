<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Всем привет! Всех с наступившим </span><span style=" font-family:'monospace'; font-size:10pt;">[20]{2,}0</span><span style=" font-family:'Sans'; font-size:10pt;"> годом. Сегодня я хочу затронуть тему, которая иногда является темой для шуток от «Да зачем тебе все это учить, если есть уже есть готовые решения» до «может тебе еще и весь Perl выучить?». Однако время идет, множество программистов начинают осваивать регулярные выражения, а на Хабре нет ни одной свежей (</span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">хоть регулярные выражения не слишком изменились за последнее время</span><span style=" font-family:'Sans'; font-size:10pt;">) статьи на этой тематику. Пришло время написать ещё одну!<br /></span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Регулярные выражения в отрыве от их конкретной реализации</span></h3>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Регулярные выражения (обозначаемые в английском как </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">RegEx </span><span style=" font-family:'Sans'; font-size:10pt;">или как </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">regex</span><span style=" font-family:'Sans'; font-size:10pt;">) являются инструментальным средством, которое применяется для различных вариантов изучения и обработки текста: поиска, проверки, поиска и замены того или иного элемента, состоящего из букв или цифр (или любых других символов, в том числе специальных символов и символов пунктуации). Изначально регулярные выражения пришли в мир программирования из среды научных исследований, которые проводились в 50-е годы в области математики. <br /><br />Спустя десятилетия принципы и идеи были перенесены в среду операционной системы UNIX (в частности вошли в утилиту </span><span style=" font-family:'monospace'; font-size:10pt;">grep</span><span style=" font-family:'Sans'; font-size:10pt;">) и были реализованы в языке программирования Perl, который на заре интернета широко использовался на бэкенде (и по сей день используется, но уже меньше) для такой задачи, как, например, валидация форм.<br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Если они вроде простые, тогда почему такие страшные на первый взгляд? </span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />На самом деле любое выражение может быть «регулярным» и применяться для проверки или поиска каких-либо символов. Например, слова </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">Pavel </span><span style=" font-family:'Sans'; font-size:10pt;">или </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">example@mail.ru </span><span style=" font-family:'Sans'; font-size:10pt;">тоже могут использоваться как регулярки, только, понятное дело, в довольно узком ключе. Для проверки работы регулярных выражений в среде PHP без запуска своего сервера или хостинга вы можете воспользоваться следующим онлайн </span><a href="https://regex101.com/"><span style=" font-family:'Sans'; font-size:10pt; text-decoration: underline; color:#0000ff;">сервисом</span></a><span style=" font-family:'Sans'; font-size:10pt;"> (вот только на нем у меня не работала обработка русских символов). Для начала в качестве регулярного выражения мы используем просто </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">Pavel</span><span style=" font-family:'Sans'; font-size:10pt;">.<br /><br />Положим у нас есть следующий текст:<br /><br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Pavel </span><span style=" font-family:'Sans'; font-size:10pt;">knows too much. </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Pavel </span><span style=" font-family:'Sans'; font-size:10pt;">using nginx and he’s not rambler.<br /><br />Сейчас регулярные выражения нашли оба вхождения слова Pavel. Здорово, но звучит не очень полезно (разве что только вы зачем-то пытаетесь проанализировать что-то вроде количества упоминания слова </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">сударь</span><span style=" font-family:'Sans'; font-size:10pt;"> в Войне и Мире через Vim и Python, но тогда у меня к вам вопросов нет). <br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Вариативность выражения</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Если ваше регулярное выражение вариативно (например, вам известна только некоторая его часть и нужно найти количество вхождений годов, начиная от 2000 и заканчивая 2099), то мы можем использовать следующее регулярное выражение: </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">20..</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br /></span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">Текст: Молодые писатели пишут много чего. Например писатель </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600; font-style:italic;">2002 </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">года рождения очень отличается от </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600; font-style:italic;">2008 </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">и </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600; font-style:italic;">2012 </span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Здесь у нас с помощью регулярного выражения найдутся все годы, но пока в этом нет никакого смысла. Скорее всего нам не нужны годы дальше 2012 (хотя молодые писатели младше 8 лет могут обидеться, но не об этом сейчас). Стоит изучить наборы символов, но об этом попозже, потому как сейчас поговорим про другую важную часть регулярных выражений: экранирование метасимволов. <br /><br />Представим, что нам нужно найти количество вхождений файлов с расширением </span><span style=" font-family:'monospace'; font-size:10pt;">.doc</span><span style=" font-family:'Sans'; font-size:10pt;"> (допустим, мы экспортируем только определенные файлы загруженные в нашу базу данных). Но ведь точка обозначает просто любой символ? Так как же быть? <br />Тут к нам на помощь приходит экранирование метасимволов обратным слешем </span><span style=" font-family:'monospace'; font-size:10pt;">\</span><span style=" font-family:'Sans'; font-size:10pt;">. Теперь выражение </span><span style=" font-family:'monospace'; font-size:10pt;">\.doc</span><span style=" font-family:'Sans'; font-size:10pt;"> будет достаточно успешно искать любой текстовое упоминание с расширением </span><span style=" font-family:'monospace'; font-size:10pt;">.doc</span><span style=" font-family:'Sans'; font-size:10pt;">:<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">\.doc</span><span style=" font-family:'Sans'; font-size:10pt;"> <br /><br />Текст: kursach</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">.doc </span><span style=" font-family:'Sans'; font-size:10pt;">, </span><span style=" font-family:'monospace'; font-size:10pt;">nepodozritelneyfail.exe</span><span style=" font-family:'Sans'; font-size:10pt;">, work</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">.doc</span><span style=" font-family:'Sans'; font-size:10pt;">, </span><span style=" font-family:'monospace'; font-size:10pt;">shaprgalka.rtf doc</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Как видите, мы успешно можем найти количество файлов с расширением </span><span style=" font-family:'monospace'; font-size:10pt;">.doc</span><span style=" font-family:'Sans'; font-size:10pt;"> в списке. Однако мы не сможем вытащить полные имена файлов с помощью данного регулярного выражения, например, в массив. Пришло время взглянуть на наборы символов.<br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Совпадение с целым набором символов </span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />В регулярных выражениях совпадения с набором обеспечивается с помощью метасимволов — квадратных скобочек</span><span style=" font-family:'monospace'; font-size:10pt;"> [ ]</span><span style=" font-family:'Sans'; font-size:10pt;">. Любые два символа ASII могут быть указаны в качестве начала и конца диапазона. Для простой реализации, положим, мы хотим найти все пронумерованные файлы от 0 до 9 с расширением </span><span style=" font-family:'monospace'; font-size:10pt;">.jpg</span><span style=" font-family:'Sans'; font-size:10pt;">.<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">[0-9]\.jpg</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Текст: </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">1.jpg</span><span style=" font-family:'Sans'; font-size:10pt;">, </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">2.jpg</span><span style=" font-family:'Sans'; font-size:10pt;">, </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">3.jpg</span><span style=" font-family:'Sans'; font-size:10pt;">, photo.jpg, anime.jpg, </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">8.jpg</span><span style=" font-family:'Sans'; font-size:10pt;">, jkl.jpg <br /><br />Стоит отметить, что имя файлов из более 1 цифры наше регулярное выражение не охватит. Про множественный выбор будет чуть ниже, а пока представим, что нам вдруг понадобилось добиться обратного результата. Добавим метасимвол </span><span style=" font-family:'monospace'; font-size:10pt;">^</span><span style=" font-family:'Sans'; font-size:10pt;"> (у которого, самое противное, в регулярных выражениях есть аж две функции). Чтобы воспользоваться им как исключением, нужно добавить его именно внутрь нашего набора:<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">[^0-9]\.jpg</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Текст: 1.jpg, 2.jpg, 3.jpg, phot</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">o.jpg </span><span style=" font-family:'Sans'; font-size:10pt;">, anim</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">e.jpg </span><span style=" font-family:'Sans'; font-size:10pt;">, 8.jpg, jk</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">l.jpg</span><span style=" font-family:'Sans'; font-size:10pt;"> <br /><br />Но без множественного выбора это конечно неполноценные выражения.<br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Полезные таблицы </span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Приведем таблицу метасимволов: <br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\ </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">экранировать метасимвол как обычный символ</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">^</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">искать определенный символ именно в начале строки (но только если исключить его из набора [])</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">$ </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">конец строки</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">|</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">альтернатива </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">()</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">группировка </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\w </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">все буквенно и цифровые символы (многие руководства почему-то не договаривают про цифровые символы)</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\W </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">тоже самое, только наоборот</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\s </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">любой пробельный символ </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\S </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">любой НЕ пробельный символ</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Таблица пробельных метасимволов<br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[\b]</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">возврат на один символ </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\f </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">перевод страницы</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\n </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">перевод строки</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\r </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">возрат каретки</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\t </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">табуляция</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\v </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">вертикальная табуляция</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br /></span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Множественный выбор: делаем простую валидацию</span></h3>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Вооружившись полученными знаниями, попробуем сделать регулярное выражение, которое находит, например, слова короче 3 букв (стандартная задача для антиспама). Если мы попробуем использовать следующее регулярное выражение — </span><span style=" font-family:'monospace'; font-size:10pt;">\w{1,3}</span><span style=" font-family:'Sans'; font-size:10pt;"> (в котором метасимвол </span><span style=" font-family:'monospace'; font-size:10pt;">\w</span><span style=" font-family:'Sans'; font-size:10pt;"> указывает на любой символ, а фигурные скобки обозначают количество символов от сколько до скольки, то у нас выделятся все символы подряд — нужно как-то обозначить начало и конец слов в тексте. Для этого нам потребуется метасимвол </span><span style=" font-family:'monospace'; font-size:10pt;">\b</span><span style=" font-family:'Sans'; font-size:10pt;">.<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">\b\w{1,3}\b:</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Текст: good word<br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">not</span><span style=" font-family:'Sans'; font-size:10pt;"><br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">egg</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Неплохо! Теперь слова короче трех букв не смогут попадать в нашу базу данных. Посмотрим на валидацию почтового адреса:<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">\w+@\w+\.\w+</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Требования: в электронной почте в начале должен быть любой символ (цифры или буквы, ведь электронная почта, которая состоит только из цифр в начале, встречается довольно часто). Потом идет символ </span><span style=" font-family:'monospace'; font-size:10pt;">@</span><span style=" font-family:'Sans'; font-size:10pt;">, затем — сколько угодно символов, после чего экранированная точка (т.е. просто точка) и домен первого уровня.<br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Подробнее рассмотрим повторение символов</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Теперь давайте поподробнее разберем, как можно в регулярных выражениях задать повторение символов. К примеру вы хотите найти любые комбинации цифр от 2-6 в тексте:<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">[2-6]+</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Текст: Here are come’s 89 different </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">234 </span><span style=" font-family:'Sans'; font-size:10pt;">digits </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">24 </span><span style=" font-family:'Sans'; font-size:10pt;">.<br /><br />Давайте я приведу таблицу всех квантификаторов метасимволов:<br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">* </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">символы повторяются 0 и до бесконечности </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">+ </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">повторяются от 1 и до бесконечности</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">{n}</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">повторяются точно n раз </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">{n,} </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">от n и до бесконечности</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">{n1, n2} </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">от n1 и до n2 раз точно </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">? </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">0 или 1 символ, не больше</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />В применении квантификаторов нет ничего сложного. Кроме одного нюанса: жадные и ленивые квантификаторы. Приведем таблицу:<br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">*</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">*?</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">+</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">+?</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">{n,}</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">{n,}?</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Ленивые квантификаторы отличаются от жадных тем, что они выхватывают минимальное, а не максимальное количество символов. Представим, что есть у нас задача найти все теги заголовков h1-h6 и их контент, а весь остальной текст не должен быть затронут (я умышленно ввел несуществующий тэг h7, чтобы не мучаться с экранированием хабровских тэгов):<br /><br />Регулярное выражение: &lt;h[1-7]&gt;.*?&lt;\/h[1-7]&gt;<br /><br />Текст: </span><span style=" font-family:'monospace'; font-size:10pt; font-weight:600;">&lt;h7&gt;</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;"> hello </span><span style=" font-family:'monospace'; font-size:10pt; font-weight:600;">&lt;/h7&gt;</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;"> </span><span style=" font-family:'Sans'; font-size:10pt;">lorem ipsum avada kedavra </span><span style=" font-family:'monospace'; font-size:10pt; font-weight:600;">&lt;h7</span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">&gt; buy</span><span style=" font-family:'monospace'; font-size:10pt; font-weight:600;">&lt;/h7&gt;</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Все сработало успешно, однако только благодаря ленивому квантификатору. В случае применения жадного квантификатора у нас выделился бы весь текст между тегами (полагаю, в иллюстрации это не нуждается).<br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Границы символьных строк</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Границы символьных строк мы уже использовали выше. Приведем здесь более подробную таблицу:<br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\b </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">граница слова </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\B </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">не граница слова </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\A </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">начало строки </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\Z </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">конец строки </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">\G </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">конец действия </span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Работа с подвыражениями</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Подвыражения в регулярных выражениях делаются с помощью метасимвола группировки </span><span style=" font-family:'monospace'; font-size:10pt;">()</span><span style=" font-family:'Sans'; font-size:10pt;">.<br />Приведем пример регулярного выражения, которое универсально может находить различные вариации IP — адресов.<br /><br />Регулярное выражение: (((25[0-5])|(2[0-4]\d)|(1\d{2})|(\d{1,2}))\.){3}(((25[0-5]|(2[0-4]\d)|(1\d{2})|(\d{1,2}))))<br /><br />Текст: </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">255.255.255.255 </span><span style=" font-family:'Sans'; font-size:10pt;">просто адрес<br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">191.198.174.192 </span><span style=" font-family:'Sans'; font-size:10pt;">wikipedia<br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">87.240.190.67 </span><span style=" font-family:'Sans'; font-size:10pt;">vk<br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">31.13.72.36 </span><span style=" font-family:'Sans'; font-size:10pt;">facebook<br /><br />Здесь используется логический оператор </span><span style=" font-family:'monospace'; font-size:10pt;">|</span><span style=" font-family:'Sans'; font-size:10pt;"> (или), который позволяет нам составить регулярное выражение, которое соответствует правилу, по которому составляются IP- адреса. В IP адресе должно быть от 1 и до 3 цифр, в котором число из трех чисел может начинаться с 1, с 2 (или тогда вторая цифра должна быть в пределах от 0 и до 4), или начинаться с 25, и тогда 3 цифра оказывается в пределах от 0 и до 5. Также между каждой комбинацией цифр должна стоять точка. Используя приведенные выше таблицы, постарайтесь сами расшифровать регулярное выражение сверху. Регулярные выражения в начале пугают своей длинной, но длинные не значит сложные.<br /><br /></span></p>
<h5 style=" margin-top:12px; margin-bottom:4px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Просмотр вперед</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Для просмотра выражения на любую комбинацию определенных символов указывается шаблон по которому обнаруживается, но не возвращается, совпадение. По существу, просмотр вперед определяет подвыражение и поэтому он формируется соответствующим образом. Синтаксический шаблон для просмотра вперед состоит из подвыражения, перед которым стоит ?=, а после равно следует сопоставляемый текст.<br /><br />Приведем конкретную задачу: есть пароль, который должен состоят не менее чем из 7 символов и должен обязательно включать как минимум одну заглавную букву и цифру. Здесь все будет несколько сложнее, потому как пользователь должен иметь возможность поставить заглавную букву как в начале, так и в середине предложения (и тоже самое должно повторяться с буквой). <br /><br />Следовательно, нам потребуется просмотр выражения вперед. Кроме того, нам нужно разбить на группы знаки. И я хочу ограничить его размеры от 8 и до 22 знаков:<br /><br />Регулярное выражение: </span><span style=" font-family:'monospace'; font-size:10pt;">^(?=.*\d)(?=.*[A-Za-z])[0-9A-Za-z!@#$%]{8,22}$</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Текст: </span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Qwerty123</span><span style=" font-family:'Sans'; font-size:10pt;"><br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Im789098</span><span style=" font-family:'Sans'; font-size:10pt;"><br />weakpassword<br /><br /></span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">Особенности работы регулярных выражений именно в PHP </span></h3>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br />Для изучения работы регулярных выражений в PHP, изучите функции в официальной документации PCRE (Perl Compatible Regular Expressions) которая доступна на официальном сайте. Выражение должно быть заключено в разделители, например, в прямые слеши. <br /><br />Разделителем могут выступать произвольные символы, кроме буквенно-цифровых, обратного слеша '\' и нулевого байта. Если символ разделителя встречается в шаблоне, его необходимо экранировать \. В качестве разделителей доступны комбинации, пришедшие из Perl: (), {}, []. <br /><br />Какие функции используются в php? В пакете PCRE предоставляются следующие функции для поддержки регулярных выражений:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_grep() </span>— выполняет поиск и возвращает массив совпадений. </li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_match()</span> — выполняет поиск первого совпадения с помощью регулярных выражений</li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_match_all()</span> — выполняет глобальный поиск с помощью регулярных выражений </li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_quote()</span> — принимает шаблон и возвращает его экранированную версию </li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_replace() </span>— выполняет операцию поиска и замены</li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_replace_callback() </span>— тоже выполняет операцию поиска и замены, но используют callback – функцию для любой конкретной замены </li>
<li style=" font-family:'Sans'; font-size:10pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">preg_split() </span>— разбивает символьную строку на подстроки</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Для организации совпадения без учета регистра букв служить модификатор </span><span style=" font-family:'monospace'; font-size:10pt;">i</span><span style=" font-family:'Sans'; font-size:10pt;">.<br />С помощью модификатора </span><span style=" font-family:'monospace'; font-size:10pt;">m</span><span style=" font-family:'Sans'; font-size:10pt;"> можно активировать режим обработки многострочного текста.<br /><br />Замещающие строки допускается вычислять в виде кода PHP. Для активизации данного режима служит модификатор </span><span style=" font-family:'Sans'; font-size:10pt; font-style:italic;">e</span><span style=" font-family:'Sans'; font-size:10pt;">.<br /><br />Во всех функциях </span><span style=" font-family:'monospace'; font-size:10pt;">preg_replace()</span><span style=" font-family:'Sans'; font-size:10pt;">, </span><span style=" font-family:'monospace'; font-size:10pt;">preg_replace_callback()</span><span style=" font-family:'Sans'; font-size:10pt;"> и </span><span style=" font-family:'monospace'; font-size:10pt;">preg_split()</span><span style=" font-family:'Sans'; font-size:10pt;"> поддерживается дополнительный аргумент, который вводит ограничения на максимальное количество замен или разбиений. <br /><br />Обратные ссылки могут обозначаться с помощью знака $ (например $1), а в более ранних версиях вместо знака $ применяются знаки \\.<br />Метасимволы \E, \l, \L, \u и \U не используются (поэтому они и не были упомянуты в этой статье).<br /><br />Наша статья была бы неполной без классов символов POSIX, которые также работают в PHP (и в общем вполне могут повысить читабельность ваших регулярок, но не все их спешат учить, потому как часто ломают логику выражения).<br /><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans'; font-size:10pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:alnum:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая буква английского алфавита или цифра</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:alpha:]]</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая буква ([a-zA-Z]) </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:blank:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Пробельный символ или символ с кодом 0 и 255 </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:digit:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая цифра ([0-9]) </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:lower:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая строчная буква английского алфавита ([a-z]) </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:upper:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая заглавная буква английского алфавита ([A-Z]) </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:punct:]]</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любой знак пунктуации </span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:space:]] </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любой пробельный символ</span></p></td></tr>
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">[[:xdigit:]]</span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;">Любая шестнадцатеричная цифра ([0-9a-fA-F])</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Под конец приведу пример конкретной реализации регулярных выражений в PHP, используя упомянутые выше реализации. Также я добавил валидацию имени пользователя, чтобы он не смог вводить слишком короткие сочетания букв (ну, положим, это никнеймы, а не имена, имена бывают короче двух букв):<br /><br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">	$pattern_name = '/\w{3,}/';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">	$pattern_mail = '/\w+@\w+\.\w+/';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">	$pattern_password = '/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">	</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">	if (preg_match($pattern_name, $name) &amp;&amp;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">		preg_match($pattern_mail, $mail) &amp;&amp;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">		preg_match($pattern_password, $_POST['password'])) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;"> # тут происходит, к примеру, регистрация нового пользователя, отправка ему письма, и внесение в базу данных </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:10pt;">		}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans'; font-size:10pt;"><br /><br />Всем спасибо за внимание! Конечно, сегодня мы затронули только часть регулярных выражений и о них можно написать ещё несколько статей. К примеру, мы не поговорили о реализации поиска повторений одинаковых слов в тексте. Но я надеюсь, что полученных знаний хватит, чтобы осмысленно написать свою первую валидацию формы и уже потом перейти к более зубодробительным вещам. <br /><br /></span><span style=" font-family:'Sans'; font-size:10pt; font-weight:600;">По традиции, несколько полезных ссылок:</span><span style=" font-family:'Sans'; font-size:10pt;"><br /><br /></span><a href="http://web.mit.edu/hackl/www/lab/turkshop/slides/regex-cheatsheet.pdf"><span style=" font-family:'Sans'; font-size:10pt; text-decoration: underline; color:#0000ff;">Шпаргалка </span></a><span style=" font-family:'Sans'; font-size:10pt;">от MIT по регулярным выражениям<br />Официальная часть </span><a href="https://www.php.net/manual/ru/pcre.pattern.php"><span style=" font-family:'Sans'; font-size:10pt; text-decoration: underline; color:#0000ff;">документации </span></a><span style=" font-family:'Sans'; font-size:10pt;">php по регулярным выражениям. </span></p></body></html>