<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Приветствую! Подумал на днях, что для своего будущего 2х ядерного коптера (да и мало ли других проектов) неплохо бы потом сделать еще и черный ящик (</span><a href="http://habrahabr.ru/blogs/arduino/109354"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">GPS</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">), а для этого надо много памяти и EEPROM не поможет, а поэтому стоит купить или сделать SD шилд для Arduino. Купить — </span><a href="http://www.seeedstudio.com/depot/sd-card-shield-for-arduino-v21-p-492.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">дороговато для такой мелочи</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"> и долго ждать пока пришлют, поэтому гуглим и находим что народ то клепает свои шилды, для этого нам понадобится всего 6 резисторов, переходник/разъем для карты памяти и сама карточка (заработало с картами SD и SDHC, отформатированными в FAT16 и FAT32). </span><a name="habracut"></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">С</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">хемка довольно простая (</span><a href="http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1235125412/0"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">читаем подробнее тут</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">): </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image164059395187qnqng7hh.png" /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; background-color:#ffffff;"><br /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; background-color:#ffffff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">резисторы нужны для </span><a href="http://ru.wikipedia.org/wiki/%D0%94%D0%B5%D0%BB%D0%B8%D1%82%D0%B5%D0%BB%D1%8C_%D0%BD%D0%B0%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">понижения напряжения</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"> с 5 до </span><a href="http://circuitfun.wordpress.com/2009/02/24/53/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; text-decoration: underline; color:#548eaa; background-color:#ffffff;">примерно 3.4 вольт</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;"> спаял, получилось вот такая красота:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image164059395187qnqng7hh.png" /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1640593972ccin2g1tgx.png" /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">код взял из стандартых примеров Arduino, только немного подправил пины под вариант схемы (измененные места отмечены жирным, заодно перевел на русский местами): </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">/*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">SD card read/write</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">Этот пример показывает как читать и писать данные на и из файла на SD карточке</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">Схема подключения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">* SD карточка подсоеденина к SPI шине:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">** MOSI - pin 11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">** MISO - pin 12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">** CLK - pin 13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">** CS - pin 10</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">создано Ноябрь 2010</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">David A. Mellis</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">обновлено 2 Декабря 2010</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">Tom Igoe</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">и переведено в Марте 2011</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">Gleb Devyatkin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">Этот пример кода - народное достояние.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">*/</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">#</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#f5871f;">include</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d99bf;">&lt;SD.h&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d99bf; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">File myFile;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">setup</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  Serial.begin(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">9600</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  Serial.print(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;Initializing SD card...&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// On the Ethernet Shield, CS is pin 4. It's set as an output by default.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// Note that even if it's not used as the CS pin, the hardware SS pin </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// (10 on most Arduino boards, 53 on the Mega) must be left as an output </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// or the SD library functions will not work. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  pinMode(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">10</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, OUTPUT);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (!SD.begin(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">10</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;initialization failed!&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">return</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;initialization done.&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// открываем файл. заметте, что только один файл может быть открыт за раз,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// поэтому вы должны закрыть этот, чтобы открыть другой.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  myFile = SD.open(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;test.txt&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">, FILE_WRITE);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// если файл нормально открылся, запишем в него:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (myFile) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.print(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;Writing to test.txt...&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    myFile.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;testing 1, 2, 3.&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// закрываем файл:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    myFile.close();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;done.&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  } </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">else</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// а если он не открылся, то печатаем сообщение об ошибке:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;error opening test.txt&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// откроем файл снова, для чтения:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  myFile = SD.open(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;test.txt&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">if</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (myFile) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;test.txt:&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// читаем из файла, пока не достигнем конца файла:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">while</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> (myFile.available()) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">      Serial.write(myFile.read());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// закрываем файл:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    myFile.close();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  } </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">else</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// а если не открылся, то пишем об ошибке:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">    Serial.println(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#718c00;">&quot;error opening test.txt&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c; background-color:#fbfdff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#8959a8;">void</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-weight:696; color:#4271ae;">loop</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#f5871f;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">  </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#8e908c;">// больше делать нечего, но тут мог бы быть ваш код</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:160%; background-color:#fbfdff;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; color:#4d4d4c;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; color:#111111; background-color:#ffffff;">Поле отработки этого кода — на вашей карточке будет файлик TEST.TXT с содержимым «testing 1, 2, 3.» (или много раз эта строка, если код запускался не один раз, что немного странно, так как FILE_WRITE должен был перезаписать файл)</span></p></body></html>