<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:14pt; font-weight:600;">10.5 Управление systemd на удаленной машине</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В дополнение к управлению системой systemd и диспетчером служб локально, утилита systemctl также позволяет вам взаимодействовать с systemd, работающим на удаленной машине по протоколу SSH. При условии, что служба sshd на удаленном компьютере запущена, вы можете подключиться к этому компьютеру, запустив команду systemctl с опцией -host или -H: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">systemctl </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--host</span><span style=" font-family:'monospace'; font-size:12pt;"> user_name</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">host_name </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">command</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Замените user_name именем удаленного пользователя, host_name именем удаленного хоста (или ip) и введите любую из команд systemctl из описанных в предыдущих главах. Обратите внимание, что на удаленном компьютере должен быть сконфигурирован ssh, чтобы разрешить удаленный доступ выбранному пользователю. Для получения информации о том, как настроить SSH-сервер, см Главу 12, OpenSSH.</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Пример 10.16. Удаленное управление</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чтобы войти на удаленный компьютер server-01.example.com как пользователь root и определить текущий статус сервиса httpd.service, выполните следующую команду: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">~</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#7a0874;">]</span><span style=" font-family:'monospace'; font-size:12pt;">$ systemctl </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-H</span><span style=" font-family:'monospace'; font-size:12pt;"> root</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">server-01.example.com status httpd.service</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style=" font-family:'monospace'; font-size:12pt;"> systemd unit files </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--</span><span style=" font-family:'monospace'; font-size:12pt;"> update</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">root</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">@</span><span style=" font-family:'monospace'; font-size:12pt;">server-01.example.com</span><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">'s password:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">httpd.service - The Apache HTTP Server</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">   Active: active (running) since Fri 2013-11-01 13:58:56 CET; 2h 48min ago</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;"> Main PID: 649</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">   Status: &quot;Total requests: 0; Current requests/sec: 0; Current traffic:   0 B/sec&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#ff0000;">   CGroup: /system.slice/httpd.service</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p></body></html>