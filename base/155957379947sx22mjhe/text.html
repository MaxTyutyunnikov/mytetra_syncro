<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Небольшое вступление</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сайт <a href="https://www.thethingsnetwork.org"><span style=" text-decoration: underline; color:#0000ff;">thethingsnetwork.org</span></a>, через который работают платы, описанные в этой статье, иногда вносит изменения в свой API. Этот проект актуален на Январь 2015 года. Получить информацию о различных изменениях можно по следующим ссылкам:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.thethingsnetwork.org/forum/t/new-addresses-for-cloud-services-update-your-gateways/"><span style=" text-decoration: underline; color:#0000ff;">https://www.thethingsnetwork.org/forum/t/new-addre...</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.thethingsnetwork.org/wiki/Backend/Migrate-From-Croft"><span style=" text-decoration: underline; color:#0000ff;">https://www.thethingsnetwork.org/wiki/Backend/Migr...</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если у вас есть проблемы с этим проектом, вы можете сообщить о них по Email <a href="mailto:support@dragino.com"><span style=" text-decoration: underline; color:#0000ff;">support@dragino.com</span></a> или создать новую тему о проблеме на форуме <a href="https://www.thethingsnetwork.org/forum/"><span style=" text-decoration: underline; color:#0000ff;">TTN forum</span></a> (отдельное спасибо товарищу <a href="https://www.thethingsnetwork.org/forum/users/curlywurly/activity"><span style=" text-decoration: underline; color:#0000ff;">@CurlyWurly</span></a>).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В этой статье мы будем использовать платы Lora Shield, MEGA 2560 и Raspberry Pi для создания одноканального шлюза LoRaWAN.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573828qjzigi021i.png" width="512" height="288" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Технология LoRa - это технология беспроводной передачи данных на большие расстояния, с низкими энергетическими затратами, с низкой скоростью передачи данных. Передача данных возможна на расстояние до 15 км в сельской местности и до 2 км в плотной городской застройке. Использование технологии LoRa возможно в нескольких областях применения, таких как Интернет вещей, проведение измерений различными датчиками, безопасность, межмашинное взаимодействие (M2M).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Примечание</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Описываемый здесь одноканальный шлюз сети LoRaWAN - это проверенная на практике реализация, которую можно использовать для разработки и тестирования узлов сети стандарта LoRa. Это не замена настоящего многоканального (multi SF) шлюза. Представленный здесь шлюз поддерживает некоторые функции сети LoRaWAN, но из-за примитивной одноканальной реализации этот шлюз не может полностью подерживать всю спецификацию LoRaWAN (и никогда не сможет это сделать). Этот шлюз, для разработки и тестирования, по умолчанию, использует бекэнд сайта TTN (<a href="https://www.thethingsnetwork.org/forum/t/new-addresses-for-cloud-services-update-your-gateways/"><span style=" text-decoration: underline; color:#0000ff;">https://www.thethingsnetwork.org</span></a>).</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подробнее об использовании бэкэнда сайта TTN рассказано в другой статье: <a href="http://forum.thethingsnetwork.org/t/single-channel-gateway/798/48"><span style=" text-decoration: underline; color:#0000ff;">The summary of Thomas</span></a>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 1. Железо</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790ldqaqqmvjo.png" width="512" height="288" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В этом проекте используются устройства, перечисленные в следующем списке:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">Две платы Lora Shields v95-868</span></a></li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Плата Raspberry Pi (с установленной ОС Raspbian) </li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Плата MEGA 2560 (Arduino)</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">LED - монитор</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">USB - кабели</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Антанны на 868МГц</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Компьютер</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">USB - плата беспроводной связи (Wireless network card), подключаемая к RaspberryPi</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Клавиатура и мышь</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Многожильные соединительные шнуры</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Одна плата Lora Shield v95-868 подключается к Arduino Mega 2560, путем установки в стандартные разъемы, как &quot;пирожок&quot;. Вторая такая же плата подключается к Raspberry Pi по схеме, приведенной на шаге 6 данной инструкции.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 2: Краткое введение в работу с платой LoRa Shield компании Dragino и использование сайта TTN Network</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790n2khbpb1de.png" width="231" height="231" /> <img src="image1559573790lf908f2u4c.png" width="280" height="280" /> <img src="image1559573790vppmzfclaw.png" width="280" height="280" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Плата <a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">Dragino Lora Shield</span></a> - это трансивер дальнего радиуса действия, выполненный как плата расширения для платфоры Arduino. Эта плата использует библиотеки с открытым исходным кодом. Плата LoRa Shield позволяет пользователю отправлять данные на экстремально дальние расстояния с низкой скоростью передачи данных. Она поддерживает сверхширокополосную связь с расширенным спектром и высокую помехоустойчивость, одновременно сводя к минимуму потребление тока.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Плата <a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">Lora Shield</span></a> основана на модуле RFM95W/RFM98W, предназначенного для создания профессиональных сетей сбора и передачи данных через беспроводные сенсоры. Это могут быть системы орошения, системы интеллектуального учета, системы &quot;умного города&quot;, системы обнаружения мобильных телефонов, автоматизация зданий, и т.д. Больше информации можно узнать <a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">здесь</span></a>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сеть TTN network, представляемая сайтом <a href="http://thethingsnetwork.org/"><span style=" text-decoration: underline; color:#0000ff;">http://thethingsnetwork.org</span></a>, базируется на стандарте LoRaWAN. Это глобальная сеть передачи данных Интернета вещей, работающая на принципах краудсорсинга. Больше информации о ней можно получить на страницах вышеуказанного сайта.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 3. Структура сети</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790pee9bpy2qb.png" width="768" height="432" /><a href="https://cdn.instructables.com/FOG/O3CY/IMDZTY57/FOGO3CYIMDZTY57.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Конфигурация сети представлена на фото.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Узел сети LoRa:</span> плата Arduino Mega 2560, которая получает данные с датчиков, и, через плату расширения LoRa Shield, отправляет по воздуху данные на шлюз RaspberryPi через беспроводной протокол LoRa.</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Шлюз сети LoRa:</span> микрокомпьютер RaspberryPi с антенной, который получает данные с узлов сети и через интернет отправляет их на обработку на сервер сети TTN. Важно понимать, что RaspberryPi получает от антенны сырые данные, практически тупую оцифровку сигнала. Чтобы вычленить из оцифровки сигнала полезные данные, нужны большие вычислительные мощности, которых у самой RaspberryPi нет.</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">TTN Сервер:</span> TTN -сервер получает пакеты сырых данных с микрокомпьютера RaspberryPi (т. е. со шлюза сети LoRa) и сохраняет их внутри себя. После чего сервер вычленяет из этих данных полезные сигналы и сохраняет их. Эти подготовленные и обработанные данные пользователь может &quot;получить обратно&quot; через сеть Интренет.</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Компьютер:</span> мы используем компьютер PC для получения данных и для проверки статуса работы шлюза сети LoRa.</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 4: Создание аккаунта в сети TTN</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790gc6psfkapo.png" width="512" height="278" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перед тем, как начать связывать устройства в один проект, нужно зарегистрироваться на сайте TTN. Ссылка на страницу регистрации: <a href="http://thethingsnetwork.org/signup/"><span style=" text-decoration: underline; color:#0000ff;">http://thethingsnetwork.org/signup/</span></a><span style=" color:#000000;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Имеется два варианта создания зарегистрированных устройств в сети TTN. Во-первых, можно использовать GUI-интерфейс, расположенный по адресу: <a href="https://staging.thethingsnetwork.org"><span style=" text-decoration: underline; color:#0000ff;">https://staging.thethingsnetwork.org</span></a>. Регистрация устройства через GUI - это довольно простое действие.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Во-вторых, вы можете использовать утилиту командной строки, называемую ttnctl. Когда я начинал доментировать последовательность действий для регистрации устройства, была доступна только утилита ttnctl. В основном, чтобы понять, как зарегистрировать устройство, нужно следовать руководству, размещенному по адресу: <a href="https://www.thethingsnetwork.org/wiki/Backend/ttnctl/ttnctl"><span style=" text-decoration: underline; color:#0000ff;">https://www.thethingsnetwork.org/wiki/Backend/ttnctl/ttnctl</span></a>. Скачайте утилиту ttnctl, зарегистрируйтесь, создайте приложение. Можно использовать любой графический интерфейс (GUI). Потом, используя утилиту ttnctl, необходимо зарегистрировать конкретное (персональное) устройство. На этом же веб-сайте можно узнать, как производить различные специфические операции по изменению параметров устройств.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 5. Создание шлюза сети TTN Network</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запомните: создавать собственный шлюз LoRa не нужно, если неподалеку уже есть шлюз LoRa для сети TTN. В этом случае нет никакого смысла создавать свой собственный. В этой инструкции демонстрируется создание полной сетевой инфраструктуры, поэтому здесь будет показано, как создавать свой шлюз, невзирая на то, есть ли поблизости еще один LoRa шлюз или нет.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Войдите на сайт TTN под своим аккаунтом, и переключитесь на страницу управления шлюзами: <a href="https://console.thethingsnetwork.org/gateways"><span style=" text-decoration: underline; color:#0000ff;">https://console.thethingsnetwork.org/gateways</span></a>.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559583112vaxv09lz0t.png" width="784" height="311" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нажмите &quot;Add a gateway&quot; (или Register gateway?) и вы попадете на страницу, где можно задать свойства вашего шлюза.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559583175t6x2vysu1w.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На следующем шаге необходимо получить Gateway ID, который будет доступен после того, как будет произведена настройка форвадинга пакетов на RaspberryPi.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595843102l3omly5mf.png" width="822" height="238" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Затем надо прописать полученный Gateway ID в столбце Gateway EUI (в шестнадцатеричном формате, без двоеточий, заглавными буквами). Как мы можем видеть, в данном примере мы получили Gateway ID: b8:27:eb:ff:ff:29:4b:3b. Значит, нужно ввести значение B827EBFFFF294B3B в столбец Gateway EUI (видимо, все-таки, имется в виду поле ввода Gateway ID).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Кстати, необходимо также изменить и другие настройки. Например, необходимо установить нужный частотный план (Frequency plan). Нажав на адрес шлюза, можно изменить и другие параметры, путем нажания на кнопку &quot;Settings&quot;. После изменения настроек их нужно сохранить. На скриншоте ниже видно, что статус шлюза находится в состоянии &quot;Соединение установлено&quot; (connected). Это означает, что мы только что создали работающий шлюз для нашей учетной записи TTN.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595832875j9ees3bzv.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Дополнительно, мы можем проверить статус TTN-шлюза на странице <a href="https://staging.thethingsnetwork.org/gatewaystatus/"><span style=" text-decoration: underline; color:#0000ff;">https://staging.thethingsnetwork.org/gatewaystatus/</span></a>. Выглядеть эта страница будет примерно так:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559583332murqv0tgpo.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600;">Шаг 6. Создание приложения в сети TTN</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На этом шаге нам необходимо создать приложение в сети TTN.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. Откройте сладующую страницу <a href="https://staging.thethingsnetwork.org/applications"><span style=" text-decoration: underline; color:#0000ff;">https://staging.thethingsnetwork.org/applications</span></a>, и вы увидите форму ввода, такую, как на скриншоте ниже:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559586060re0mffktra.png" width="820" height="233" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Нажмите &quot;Create application&quot; для создания нового приложения, и задайте ему имя:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559586159ubuudp9xjg.png" width="698" height="326" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">3. Вы можете увидеть информацию о новом созданном приложении после нажатия синей кнопки &quot;Create application&quot;.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">4. Регистрация устройства. В данном проекте нам необходимо выбрать тип устройства APB, после чего нажать &quot;Register device&quot; (register device -&gt; ABP -&gt; Register). Для устройства формата ABP необходимо будет установить App Session Key и Network Session key. Оба должны быть сгенерированы случайным образом (рекомендуется).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559586677a4rhb8otj0.png" width="704" height="260" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595867165oew5playk.png" width="695" height="400" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">5. Мы можем просмотреть информацию об устройстве на последующей открываемой странице. Будут видны параметры Dev EUI,App EUI,Dev Address,NWKSKEY,APPSKEY, и т.д. Они будут использоваться на следующих шагах настройки приложения.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Back to the Application page,you will see all devices that are registered for this application are displayed on the &quot;Devices&quot; colunm.And the Messages that were sent to all devices that are part of this application</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">There,you can also use the v2 version to setting your Application and Gateway: <a href="https://console.thethingsnetwork.org/"><span style=" text-decoration: underline; color:#0000ff;">https://console.thethingsnetwork.org/</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Step 7: Build a Single Channel LoRaWAN Gateway</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595737907h5ybwbyuo.png" /><a href="https://cdn.instructables.com/F1W/8H35/IMDZTY2U/F1W8H35IMDZTY2U.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790u9d9w7g6xv.png" /><a href="https://cdn.instructables.com/FL6/B00A/IMDZTXW7/FL6B00AIMDZTXW7.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790298jvq8oop.png" /><a href="https://cdn.instructables.com/FXL/VVDR/IMDZTXTL/FXLVVDRIMDZTXTL.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In this step,we will use the RPi and the Lora Shield to build a single channel LoRaWAN Gateway.We should configure the RPi and connect it with the Lora Shield.Complete the operations as following description:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Configuration</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Connect the Raspberry Pi to the Internet; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Use 'raspi-config ' to ensure that SPI can be used on RPi ; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Use 'sudo apt-get install wiringpi' to install the GPIO access library written in C for the BCM2835 used in the Raspberry Pi; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Get the single channel Lora Gateway source code from <a href="https://github.com/tftelkamp/single_chan_pkt_fwd"><span style=" text-decoration: underline; color:#0000ff;">here</span></a>; </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Edit the 'main.cpp' to change configuration (look for: &quot;Configure these values!&quot;).</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Defaults: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">LoRa: SF7 at 868.1 Mhz </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.thethingsnetwork.org/wiki/Backend/Migrate-From-Croft"><span style=" text-decoration: underline; color:#0000ff;">The server_address depends on the region</span></a>:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">router.eu.thethings.network # EU 433 MHz and EU 863-870 MHz </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">router.us.thethings.network # US 902-928 MHz </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">router.cn.thethings.network # China 470-510 MHz and 779-787 MHz </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">router.au.thethings.network # Australia 915-928 MHz</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">See more info<a href="https://www.thethingsnetwork.org/forum/t/new-addresses-for-cloud-services-update-your-gateways/1813"><span style=" text-decoration: underline; color:#0000ff;"> here</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">So,we don't need too change the code here. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Connections: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The Dragino Lora Shield ------ Raspberry Pi</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">5V ------ 5V(pin#2)</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">GND ------ GND(pin#6) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MISO ------ MISO(pin#21) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MOSI ------ MOSI(pin#19) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">SCK ------ CLK(pin#23) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">(CS_A)NSS ------ GPIO6(pin#22) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">DIO0 ------ GPIO7(pin#7) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RST ------ GPIO0(pin#11) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Connect the Dragino Lora Shield and the RPi as above,run packet forwarder as root. Then we can get a Gateway ID and see the running result on the RPi as the 3rd picture at this step.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">We also can get the Gateway status from <a href="https://staging.thethingsnetwork.org/gatewaystatus/"><span style=" text-decoration: underline; color:#0000ff;">https://staging.thethingsnetwork.org/gatewaystatus...</span></a> . In this URL need to search your own Gateway ID and you will see the uplink&amp;downlink status of your gateway. If you can see the Gateway status is active, it shows the LoRaWAN Gateway is working!</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Note: If the packet forwarder shows the &quot;unrecognized transceiver&quot; message,this mean the RPi can't detect Lora Shield. in this case please further check your pin/wiring configuration.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Step 8: Connect the Lora Shield and MEGA 2560,upload the Sktech</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595737909v7u9i61w0.png" /><a href="https://cdn.instructables.com/F4B/K7UW/IMDZTXTQ/F4BK7UWIMDZTXTQ.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790p6qifm6w93.png" /><a href="https://cdn.instructables.com/FIU/H61H/IMDZTY31/FIUH61HIMDZTY31.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15595737907btvao1zsp.png" /><a href="https://cdn.instructables.com/FIM/EBRE/IMDZTY94/FIMEBREIMDZTY94.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">3 More Images</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Connect the Lora Shield and MEGA 2560,and put the 868MHZ antenna on it.Connect them to the computer via an USB cable.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Over here,we use the Arduino IDE1.68,we need to install this <a href="https://github.com/matthijskooijman/arduino-lmic"><span style=" text-decoration: underline; color:#0000ff;">Arduino-LMIC liabrary</span></a>.This repository contains the IBM LMIC (LoraMAC-in-C) library, slightly modified to run in the Arduino environment, allowing using the SX1272, SX1276 tranceivers and compatible modules. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Note:This library requires Arduino IDE version 1.6.6 or above, since it requires C99 mode to be enabled by default.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">After do that,we download the ttn sketch from <a href="https://github.com/dragino/Lora/tree/master/Lora%20Shield/Examples/lora_shield_ttn"><span style=" text-decoration: underline; color:#0000ff;">this link</span></a>. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Open and modify this sktech,change the 'DEVADDR' ,'NWKSKEY','APPSKEY' (You can find these device info at Step 6) on line 40th,choose the right port and right board to upload the sktech.We can see the running result on the Serial Monitor if everything is ok.(4th photo) </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">At the same time we can also see the corresponding results on RPi.By default,the node is sending at 10 frequencies, the gateway is receiving at only 1, hence the one packet per 10 minutes.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">On a &quot;real&quot; gateway I see all messages (each minute), only with this Single Channel Gateway was this phenomena.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">This is not a real gateway, it is for testing purposes. It is LoRaWAN compatible, but not compliant.<br /><br />Refer to<a href="http://forum.thethingsnetwork.org/t/single-channel-gateway/798/17"><span style=" text-decoration: underline; color:#0000ff;">http://forum.thethingsnetwork.org/t/single-channel-gateway/798/17</span></a> and <a href="http://forum.thethingsnetwork.org/t/single-channel-gateway/798/19"><span style=" text-decoration: underline; color:#0000ff;">http://forum.thethingsnetwork.org/t/single-channel-gateway/798/19</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">If you are using Lora Shield v1.1 version. please wired as below code(such as the last photo at this step):</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">// Pin mapping&lt;br&gt;const lmic_pinmap lmic_pins = {</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    .nss = 10,// Connected to pin D10</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    .rxtx = LMIC_UNUSED_PIN,// For placeholder only, Do not connected on RFM92/RFM95</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    .rst = 9,// Needed on RFM92/RFM95? (probably not)</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    .dio = {2, 6, 7},// Specify pin numbers for DIO0, 1, 2</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">// connected to D2, D6, D7 </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">};</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Step 9: Conclusion </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1559573790o20bwqajrm.png" /><a href="https://cdn.instructables.com/F33/4CGE/IT9PMK3A/F334CGEIT9PMK3A.LARGE.jpg"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Above all completed,open your Application page,you will see the result as above picture.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The Lora Shield for RPi will coming soon,For more info about Lora Shield, please refer:<a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">http://wiki.dragino.com/index.php?title=Lora_Shield</span></a> or contact us at <a href="https://www.instructables.com/id/Use-Lora-Shield-and-RPi-to-Build-a-LoRaWAN-Gateway/info@dragino.com"><span style=" text-decoration: underline; color:#0000ff;">info@dragino.com</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">By the way,we can get this Lora Shield from<a href="http://www.aliexpress.com/store/all-wholesale-products/1390863.html"><span style=" text-decoration: underline; color:#0000ff;">http://www.aliexpress.com/store/all-wholesale-products/1390863.html</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Step 10: Reference:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Lora Shield Product Page: <a href="http://wiki.dragino.com/index.php?title=Lora_Shield"><span style=" text-decoration: underline; color:#0000ff;">http://wiki.dragino.com/index.php?title=Lora_Shield</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Lora Shield Hardware source: <a href="https://github.com/dragino/Lora"><span style=" text-decoration: underline; color:#0000ff;">https://github.com/dragino/Lora </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">TTN Network Wiki: <a href="http://thethingsnetwork.org/wiki/Hardware/OverviewGateways#do-it-yourself"><span style=" text-decoration: underline; color:#0000ff;">http://thethingsnetwork.org/wiki/Hardware/OverviewGateways#do-it-yourself</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">TTN Network forum:<a href="http://forum.thethingsnetwork.org/"><span style=" text-decoration: underline; color:#0000ff;">http://forum.thethingsnetwork.org/ </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Single channel gateway packet forward source code:<a href="https://github.com/tftelkamp/single_chan_pkt_fwd"><span style=" text-decoration: underline; color:#0000ff;">https://github.com/tftelkamp/single_chan_pkt_fwd </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Arduino-LMIC library:<a href="https://github.com/matthijskooijman/arduino-lmic"><span style=" text-decoration: underline; color:#0000ff;">https://github.com/matthijskooijman/arduino-lmic </span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Sketch lora_shield_ttn:<a href="https://github.com/dragino/Lora/blob/master/Lora%20Shield/Examples/lora_shield_ttn/lora_shield_ttn.ino"><span style=" text-decoration: underline; color:#0000ff;">https://github.com/dragino/Lora/blob/master/Lora%20Shield/Examples/lora_shield_ttn/lora_shield_ttn.ino</span></a></p></body></html>