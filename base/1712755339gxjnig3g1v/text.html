<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">1. Зачем нужен локальный репозиторий?</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Затем на машине может быть не подключен интернет. И не предвидится. И во всей сети нет интернета. Поэтому</span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">2. Из чего делать репозиторий?</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Из установочного образа. Или выкачать репозиторий из интернета и притащить на компьютер без интернета на внешнем носителе (осторожно, где-то 25-30 Гб). Качаем: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#666666;">~$ </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">wget</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">-r</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; color:#660033;">--no-check-certificate</span><span style=" font-family:'monospace'; font-size:12pt;"> https:</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">//</span><span style=" font-family:'monospace'; font-size:12pt;">dl.astralinux.ru</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">astra</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">frozen</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">orel-</span><span style=" font-family:'monospace'; font-size:12pt; color:#000000;">2.12</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">2.12.14</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">repository</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Адрес для примера. </span><a href="https://wiki.astralinux.ru/pages/viewpage.action?pageId=3276859"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">Список актуальных репозиториев на официальной викистраничке Астры</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">3. Размещаем репозиторий.</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Создадим каталог /opt/repo. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#666666;">~$ </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">sudo</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">mkdir</span><span style=" font-family:'monospace'; font-size:12pt;"> </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">opt</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">repo</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">В этот каталог нужно поместить скачанные из репозитория каталоги conf, db, dists и pool.<br />Теперь надо отредактировать /etc/apt/sources.list. Если на машине нет интернета (а его нет), закомментируем первую строку, во вторую пишем следующее: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">deb file:</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">opt</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">repo</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;"> orel main contrib non-free</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Сохранить. Выполнить </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt; color:#666666;">~$ </span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#c20cb9;">sudo</span><span style=" font-family:'monospace'; font-size:12pt;"> apt update</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Если хочется сделать репозиторий доступным по локальной сети, устанавливаем http-сервер (apache), минимально настраиваем на чтение из каталога /opt/repo.<br />Запись в sources.list на машинах, которые мы подключаем к созданному таким образом http-репозиторию будет выглядеть примерно так: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:12pt;">deb http:</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">//</span><span style=" font-family:'monospace'; font-size:12pt;">ip-address_or_domain-name</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;">repo</span><span style=" font-family:'monospace'; font-size:12pt; font-weight:600; color:#000000;">/</span><span style=" font-family:'monospace'; font-size:12pt;"> orel main contrib non-free</span></p></td></tr></table></body></html>